(this.webpackJsonpygocarder=this.webpackJsonpygocarder||[]).push([[0],{350:function(e,t,n){},352:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){},355:function(e,t,n){},502:function(e,t,n){},503:function(e,t,n){},511:function(e,t,n){},594:function(e,t,n){},596:function(e,t,n){},597:function(e,t,n){},598:function(e,t,n){},600:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(53),o=n.n(i),l=(n(350),n(2)),s=n(219);n(351),n(352),n(353),n(354),n(355);const c=e=>[{value:"strict",label:null===e||void 0===e?void 0:e.strict},{value:"fit",label:null===e||void 0===e?void 0:e.fit},{value:"full",label:null===e||void 0===e?void 0:e.full},{value:"frame",label:null===e||void 0===e?void 0:e.frame}],d={width:813,height:1185,maximumScale:2,topToPendulumStructure:210,topToPendulumStructureFrame:185,topToArtFrame:213,pendulumStructureHeight:912,pendulumIconFrameWidth:813,pendulumIconFrameHeight:100,pendulumFrameWidth:753,pendulumFrameHeight:955,leftToPendulumStructure:56,cardBorder:28,topToEffectBox:885,leftToEffectBox:54,effectBoxWidth:705,effectBoxHeight:231,finishTypeCardWidth:702,finishTypeCardHeight:200,stickerSize:52,attributeSize:77,attributeY:55,attributeX:678,stickerX:739.1438,stickerY:1110.938,iconWidth:43,iconHeight:44},u="#404040",b=()=>({body:100,pendulum:100,text:100,name:100,baseFill:u,artBorder:!0,nameBorder:!0,effectBox:!0,frameBorder:!0,boundless:!1}),m={normal:{artFinishX:100,artFinishY:219,artWidth:614,artX:100,artY:219,ratio:1,backgroundRatio:1,artFrameWidth:614,artFrameHeight:614,artFrameY:219,artFrameX:100,artRatio:1,type:"normal"},pendulum:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:1.325,backgroundRatio:1.325,artFrameWidth:702,artFrameHeight:530,artFrameY:213,artFrameX:56,artRatio:1.325,type:"pendulum"},pendulumSmall:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:1.236,backgroundRatio:1.236,artFrameWidth:702,artFrameHeight:568,artFrameY:213,artFrameX:56,artRatio:1.236,type:"pendulumSmall"},extendedCard:{artFinishX:100,artFinishY:219,artWidth:702,artX:56,artY:213,ratio:.775,backgroundRatio:.775,artFrameWidth:614,artFrameHeight:614,artFrameY:219,artFrameX:100,artRatio:1,type:"extendedCard"},extendedPendulum:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:.775,backgroundRatio:.775,artFrameWidth:702,artFrameHeight:530,artFrameY:213,artFrameX:56,artRatio:1.325,type:"extendedPendulum"},extendedPendulumSmall:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:.775,backgroundRatio:.775,artFrameWidth:702,artFrameHeight:568,artFrameY:213,artFrameX:56,artRatio:1.236,type:"extendedPendulumSmall"},truePendulum:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:1.055,backgroundRatio:1.055,artFrameWidth:702,artFrameHeight:530,artFrameY:213,artFrameX:56,artRatio:1.325,type:"truePendulum"},truePendulumSmall:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:1.055,backgroundRatio:1.055,artFrameWidth:702,artFrameHeight:568,artFrameY:213,artFrameX:56,artRatio:1.236,type:"truePendulumSmall"},truePendulumLarge:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:1,backgroundRatio:1,artFrameWidth:702,artFrameHeight:530,artFrameY:213,artFrameX:56,artRatio:1.325,type:"truePendulumLarge"},fullCard:{artFinishX:100,artFinishY:219,artWidth:758,artX:28,artY:28,ratio:.67,backgroundRatio:.67,artFrameWidth:614,artFrameHeight:614,artFrameY:219,artFrameX:100,artRatio:1,type:"fullCard"},fullPendulum:{artFinishX:56,artFinishY:213,artWidth:758,artX:28,artY:28,ratio:.67,backgroundRatio:.67,artFrameWidth:702,artFrameHeight:568,artFrameY:213,artFrameX:56,artRatio:1.325,type:"fullPendulum"},fullPendulumSmall:{artFinishX:56,artFinishY:213,artWidth:758,artX:28,artY:28,ratio:.67,backgroundRatio:.67,artFrameWidth:702,artFrameHeight:568,artFrameY:213,artFrameX:56,artRatio:1.236,type:"fullPendulumSmall"},overframeCard:{artFinishX:100,artFinishY:219,artWidth:813,artX:0,artY:0,ratio:.686,backgroundRatio:.686,artFrameWidth:614,artFrameHeight:614,artFrameY:219,artFrameX:100,artRatio:1,type:"overframeCard"},overframePendulum:{artFinishX:56,artFinishY:213,artWidth:813,artX:0,artY:0,ratio:.686,backgroundRatio:.686,artFrameWidth:702,artFrameHeight:530,artFrameY:213,artFrameX:56,artRatio:1.325,type:"overframePendulum"},overframePendulumSmall:{artFinishX:56,artFinishY:213,artWidth:813,artX:0,artY:0,ratio:.686,backgroundRatio:.686,artFrameWidth:702,artFrameHeight:568,artFrameY:213,artFrameX:56,artRatio:1.325,type:"overframePendulumSmall"}},p=(e,t,n,a)=>{const r=Object(l.a)(Object(l.a)({},b()),t);"strict"===n&&(r.boundless=!1,r.text=100,r.pendulum=100);const{boundless:i,body:o,pendulum:s,text:c,frameBorder:d}=r,u="fit"!==n&&"strict"!==n&&i,p=!!u&&d;if("full"===n)return p?m.overframeCard:m.fullCard;let g="normal";u||o<100?g=e?p?"small"===a?"overframePendulumSmall":"overframePendulum":"small"===a?"fullPendulumSmall":"fullPendulum":p?"overframeCard":"fullCard":e?c<100?g="small"===a?"extendedPendulumSmall":"extendedPendulum":s<100?("large"===a&&(g="truePendulumLarge"),"small"===a&&(g="truePendulumSmall"),"medium"===a&&(g="truePendulum")):g="small"===a?"pendulumSmall":"pendulum":g=c<100?"extendedCard":"normal";const h=m[g];return Object(l.a)(Object(l.a)({},h),{},{backgroundRatio:"frame"===n?.686:h.backgroundRatio})},g=[{blendMode:"overlay",opacity:1}],h=[{blendMode:"overlay",opacity:.65},{blendMode:"multiply",opacity:.55}],f={type1:{value:"type1",label:"1",partInstructionMap:{},pendulumSubstituteMap:{}},type2:{value:"type2",label:"2",partInstructionMap:{},pendulumSubstituteMap:{}},type3:{value:"type3",label:"3",partInstructionMap:{"card-border":g,"art-overlay":g,"art-border":g,"art-border-pendulum":g,"border-pendulum":g,attribute:g,frame:g},pendulumSubstituteMap:{}},type4:{value:"type4",label:"4",partInstructionMap:{},pendulumSubstituteMap:{}},type5:{value:"type5",label:"5",partInstructionMap:{},pendulumSubstituteMap:{}},type6:{value:"type6",label:"6",partInstructionMap:{},pendulumSubstituteMap:{}},type7:{value:"type7",label:"7",partInstructionMap:{"total-overlay":[{blendMode:"screen",opacity:.175},{blendMode:"color-dodge",opacity:.125}]},pendulumSubstituteMap:{}},type8:{value:"type8",label:"8",partInstructionMap:{"card-border":h,"art-border":h,"art-border-pendulum":h,"border-pendulum":h,frame:h,"frame-background":h,name:h,star:h},pendulumSubstituteMap:{}},type9:{value:"type9",label:"9",partInstructionMap:{"total-overlay":[{blendMode:"screen",opacity:.45}]},pendulumSubstituteMap:{}},type10:{value:"type10",label:"10",partInstructionMap:{"total-overlay":[]},pendulumSubstituteMap:{}},type11:{value:"type11",label:"11",partInstructionMap:{"total-overlay":[]},pendulumSubstituteMap:{}},type12:{value:"type12",label:"12",partInstructionMap:{"total-overlay":[{blendMode:"source-over",opacity:.45}]},pendulumSubstituteMap:{}},type13:{value:"type13",label:"13",partInstructionMap:{"total-overlay":[]},pendulumSubstituteMap:{}}},v={type1:{value:"type1",label:"1",partInstructionMap:{art:[{}]},pendulumSubstituteMap:{small:"-pendulum-small",medium:"-pendulum-medium",large:"-pendulum-medium"}},type2:{value:"type2",label:"2",partInstructionMap:{art:[{opacity:.08,blendMode:"darken"},{opacity:.28,blendMode:"color-dodge"},{opacity:.48,blendMode:"multiply"}]},pendulumSubstituteMap:{small:"",medium:"-pendulum-medium",large:"-pendulum-medium"}},type3:{value:"type3",label:"3",partInstructionMap:{art:[{opacity:.66,blendMode:"color-dodge"},{opacity:.64,blendMode:"multiply"}]},pendulumSubstituteMap:{small:"",medium:"-pendulum-medium",large:"-pendulum-medium"}},type4:{value:"type4",label:"4",partInstructionMap:{art:[{opacity:.31,blendMode:"color-dodge"},{opacity:.6,blendMode:"multiply"}]},pendulumSubstituteMap:{small:"",medium:"-pendulum-medium",large:"-pendulum-medium"}},type5:{value:"type5",label:"5",partInstructionMap:{art:[{opacity:.19,blendMode:"color-dodge"},{opacity:.6,blendMode:"multiply"}]},pendulumSubstituteMap:{small:"",medium:"-pendulum-medium",large:"-pendulum-medium"}},type6:{value:"type6",label:"6",partInstructionMap:{art:[{opacity:.25,blendMode:"color-dodge"},{opacity:.6,blendMode:"multiply"}]},pendulumSubstituteMap:{small:"",medium:"-pendulum-medium",large:"-pendulum-medium"}},type7:{value:"type7",label:"7",partInstructionMap:{art:[{}]},pendulumSubstituteMap:{small:"-pendulum-small",medium:"-pendulum-medium",large:"-pendulum-medium"}},type8:{value:"type8",label:"8",partInstructionMap:{art:[{opacity:.66,blendMode:"color-dodge"},{opacity:.64,blendMode:"multiply"}]},pendulumSubstituteMap:{small:"",medium:"-pendulum-medium",large:"-pendulum-medium"}},type9:{value:"type9",label:"9",partInstructionMap:{art:[{blendMode:"darken",opacity:1},{blendMode:"multiply",opacity:1},{blendMode:"overlay",opacity:1}]},pendulumSubstituteMap:{small:"",medium:"-pendulum-medium",large:"-pendulum-medium"}}},y={art:{key:"art",labelKey:"input.art-finish.label"},background:{key:"background",labelKey:"input.background.label"},attribute:{key:"attribute",labelKey:"input.attribute.label"},icon:{key:"icon",labelKey:"input.icon-type.icon.label"},sticker:{key:"sticker",labelKey:"input.sticker.label"}},j={normal:{name:"normal",color:"#747b95",isOption:!1},gold:{name:"gold",color:"#cfa65f",isOption:!0},platinum:{name:"platinum",color:"#b1b1b1",isOption:!0}},x=e=>[Object(l.a)({label:null===e||void 0===e?void 0:e.normal},j.normal),Object(l.a)({label:null===e||void 0===e?void 0:e.gold},j.gold),Object(l.a)({label:null===e||void 0===e?void 0:e.platinum},j.platinum)],O={topLeftFrame:0,topRightFrame:1,bottomLeftFrame:2,bottomRightFrame:3,effectBackground:4,pendulumEffectBackground:5,foil:6};var w=n(635),k=n(636),S=n(1);const C="NONE",F=[{name:C,nameKey:"input.attribute.none",color:"#000000",isCreative:!1,isOption:!1},{name:"DARK",nameKey:"input.attribute.dark",label:"Dark",color:"#b41dda",isCreative:!1,isOption:!0},{name:"EARTH",nameKey:"input.attribute.earth",label:"Earth",color:"#8d8e8e",isCreative:!1,isOption:!0},{name:"FIRE",nameKey:"input.attribute.fire",label:"Fire",color:"#e51b23",isCreative:!1,isOption:!0},{name:"LIGHT",nameKey:"input.attribute.light",label:"Light",color:"#bfae32",isCreative:!1,isOption:!0},{name:"WATER",nameKey:"input.attribute.water",label:"Water",color:"#008ecd",isCreative:!1,isOption:!0},{name:"WIND",nameKey:"input.attribute.wind",label:"Wind",color:"#28ab35",isCreative:!1,isOption:!0},{name:"DIVINE",nameKey:"input.attribute.divine",label:"Divine",color:"#ef6300",isCreative:!1,isOption:!0},{name:"SPELL",nameKey:"input.attribute.spell",label:"Spell",color:"#1b8f83",isCreative:!1,isOption:!0},{name:"TRAP",nameKey:"input.attribute.trap",label:"Trap",color:"#c32a8c",isCreative:!1,isOption:!0}],L=[{name:"LAUGH",nameKey:"input.attribute.laugh",label:"Laugh",color:"#f78f27",isCreative:!0,isOption:!0},{name:"MAGIC",nameKey:"input.attribute.magic",label:"Laugh",color:"#1b8f83",isCreative:!0,isOption:!0},{name:"BOSS-1",nameKey:"input.attribute.boss-1",label:"Boss 1",color:"#9b325d",isCreative:!0,isOption:!0},{name:"BOSS-2",nameKey:"input.attribute.boss-2",label:"Boss 2",color:"#942a56",isCreative:!0,isOption:!0},{name:"BOSS-3",nameKey:"input.attribute.boss-3",label:"Boss 3",color:"#86214b",isCreative:!0,isOption:!0},{name:"BOSS-START",nameKey:"input.attribute.boss-start",label:"Boss Start",color:"#a13864",isCreative:!0,isOption:!0}],T=L.reduce((e,t)=>{const{name:n}=t;return e[n]=t,e},{}),N={pt:{TRAP:{offsetX:-11}},it:{TRAP:{offsetX:-4}}},R={jp:{key:"jp",category:"ocg",fileKey:"ocg"},en:{key:"en",category:"tcg",fileKey:"tcg"},ch:{key:"ch",category:"ocg",fileKey:"ch"},de:{key:"de",category:"tcg",fileKey:"de"},fr:{key:"fr",category:"tcg",fileKey:"fr"},it:{key:"it",category:"tcg",fileKey:"it"},pt:{key:"pt",category:"tcg",fileKey:"pt"},sp:{key:"sp",category:"tcg",fileKey:"sp"}},I={tcg:R.en.key,ocg:R.jp.key},E="NO ICON",z=[{label:Object(S.jsx)(w.a,{}),value:E,nameKey:"input.icon.none",isOption:!1},{label:"Field",value:"FIELD",nameKey:"input.icon.field",isOption:!0},{label:"Continuous",value:"CONTINUOUS",nameKey:"input.icon.continuous",isOption:!0},{label:"Quick-Play",value:"QUICK-PLAY",nameKey:"input.icon.quick-play",isOption:!0},{label:"Ritual",value:"RITUAL",nameKey:"input.icon.ritual",isOption:!0},{label:"Equip",value:"EQUIP",nameKey:"input.icon.equip",isOption:!0},{label:"Counter",value:"COUNTER",nameKey:"input.icon.counter",isOption:!0},{label:"Normal",value:"NORMAL",nameKey:"input.icon.normal",isOption:!0}],D="no-sticker",B=[{value:D,isOption:!1},{value:"gold",isOption:!0},{value:"silver",isOption:!0},{value:"beta",isOption:!0},{value:"holo5",isOption:!0},{value:"holo4",isOption:!0},{value:"holo3",isOption:!0},{value:"holo2",isOption:!0},{value:"holo1",isOption:!0},{value:"limited",isOption:!0},{value:"unlimited",isOption:!0}],P={auto:{value:"auto",labelKey:"input.icon-type.auto.label",fullLabelKey:"input.icon-type.auto.full.label",icon:null,isOption:!1,isMixable:!1,showIcon:!1,imagePresetPath:"icon-",imagePresetSource:""},custom:{value:"custom",labelKey:"input.icon-type.custom.label",fullLabelKey:"input.icon-type.custom.full.label",icon:Object(S.jsx)(k.a,{}),isOption:!1,isMixable:!1,showIcon:!1,imagePresetPath:"icon-",imagePresetSource:""},st:{value:"st",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.icon-type.icon.full.label",icon:Object(S.jsx)("img",{className:"icon-image",alt:"s/t-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-icon-list.png")}),isOption:!0,isMixable:!1,showIcon:!1,imagePresetPath:"icon-st",imagePresetSource:"subfamily/subfamily-icon-list.png"},level:{value:"level",labelKey:"input.icon-type.level.label",fullLabelKey:"input.icon-type.level.full.label",icon:Object(S.jsx)("img",{className:"icon-image",alt:"level-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-level.png")}),isOption:!0,isMixable:!0,showIcon:!1,imagePresetPath:"icon-level",imagePresetSource:"subfamily/subfamily-level.png"},"negative-level":{value:"negative-level",labelKey:"input.icon-type.negative-level.label",fullLabelKey:"input.icon-type.negative-level.full.label",icon:Object(S.jsx)("img",{className:"icon-image",alt:"negative-level-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-negative-level.png")}),isOption:!0,isMixable:!0,showIcon:!1,imagePresetPath:"icon-negative-level",imagePresetSource:"subfamily/subfamily-negative-level.png"},rank:{value:"rank",labelKey:"input.icon-type.rank.label",fullLabelKey:"input.icon-type.rank.full.label",icon:Object(S.jsx)("img",{className:"icon-image",alt:"rank-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-rank.png")}),isOption:!0,isMixable:!0,showIcon:!1,imagePresetPath:"icon-rank",imagePresetSource:"subfamily/subfamily-rank.png"},"level-rank":{value:"level-rank",labelKey:"input.icon-type.level-rank.label",fullLabelKey:"input.icon-type.level-rank.full.label",icon:Object(S.jsx)("img",{className:"icon-image",alt:"level-rank-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-level-rank.png")}),isOption:!0,isMixable:!0,showIcon:!1,imagePresetPath:"icon-level-rank",imagePresetSource:"subfamily/subfamily-level-rank.png"}},M=Object.values(P),H={dark:{value:"dark",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.attribute.dark",icon:Object(S.jsx)("img",{className:"icon-image",alt:"dark-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-dark.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-dark",imagePresetSource:"subfamily/subfamily-dark.png"},earth:{value:"earth",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.attribute.earth",icon:Object(S.jsx)("img",{className:"icon-image",alt:"earth-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-earth.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-earth",imagePresetSource:"subfamily/subfamily-earth.png"},fire:{value:"fire",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.attribute.fire",icon:Object(S.jsx)("img",{className:"icon-image",alt:"fire-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-fire.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-fire",imagePresetSource:"subfamily/subfamily-fire.png"},light:{value:"light",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.attribute.light",icon:Object(S.jsx)("img",{className:"icon-image",alt:"light-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-light.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-light",imagePresetSource:"subfamily/subfamily-light.png"},water:{value:"water",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.attribute.water",icon:Object(S.jsx)("img",{className:"icon-image",alt:"water-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-water.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-water",imagePresetSource:"subfamily/subfamily-water.png"},wind:{value:"wind",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.attribute.wind",icon:Object(S.jsx)("img",{className:"icon-image",alt:"wind-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-wind.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-wind",imagePresetSource:"subfamily/subfamily-wind.png"},divine:{value:"divine",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.attribute.divine",icon:Object(S.jsx)("img",{className:"icon-image",alt:"divine-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-divine.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-divine",imagePresetSource:"subfamily/subfamily-divine.png"},spell:{value:"spell",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.attribute.spell",icon:Object(S.jsx)("img",{className:"icon-image",alt:"spell-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-spell.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-spell",imagePresetSource:"subfamily/subfamily-spell.png"},trap:{value:"trap",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.attribute.trap",icon:Object(S.jsx)("img",{className:"icon-image",alt:"trap-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-trap.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-trap",imagePresetSource:"subfamily/subfamily-trap.png"}},A=Object.values(H),W={"continuous-l":{value:"continuous-l",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.icon.continuous",icon:Object(S.jsx)("img",{className:"icon-image",alt:"continuous-large-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-continuous-l.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-continuous",imagePresetSource:"subfamily/subfamily-continuous-l.png"},"counter-l":{value:"counter-l",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.icon.counter",icon:Object(S.jsx)("img",{className:"icon-image",alt:"counter-large-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-counter-l.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-counter",imagePresetSource:"subfamily/subfamily-counter-l.png"},"equip-l":{value:"equip-l",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.icon.equip",icon:Object(S.jsx)("img",{className:"icon-image",alt:"equip-large-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-equip-l.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-equip",imagePresetSource:"subfamily/subfamily-equip-l.png"},"field-l":{value:"field-l",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.icon.field",icon:Object(S.jsx)("img",{className:"icon-image",alt:"field-large-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-field-l.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-field",imagePresetSource:"subfamily/subfamily-field-l.png"},"quick-play-l":{value:"quick-play-l",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.icon.quick-play",icon:Object(S.jsx)("img",{className:"icon-image",alt:"quick-play-large-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-quick-play-l.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-quick-play",imagePresetSource:"subfamily/subfamily-quick-play-l.png"},"ritual-l":{value:"ritual-l",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.icon.ritual",icon:Object(S.jsx)("img",{className:"icon-image",alt:"ritual-large-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-ritual-l.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-ritual",imagePresetSource:"subfamily/subfamily-ritual-l.png"},"normal-l":{value:"normal-l",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.icon.normal",icon:Object(S.jsx)("img",{className:"icon-image",alt:"normal-large-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-normal-l.png")}),isOption:!0,isMixable:!0,showIcon:!0,imagePresetPath:"icon-normal",imagePresetSource:"subfamily/subfamily-normal-l.png"}},K=Object.values(W),Y=Object(l.a)(Object(l.a)(Object(l.a)({},P),H),W),U=13,G="Auto",X=()=>({font:G,fillStyle:"#000000",headTextFillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1,lineColor:"#000000",lineWidth:0,lineOffsetY:0,lineOffsetX:0,hasOutline:!1,gradientAngle:0,gradientColor:"0.000|#eef10b,0.5|#d78025,1.000|#7e20cf",hasGradient:!1,embossPitch:90,embossYaw:90,embossThickness:0,hasEmboss:!1,preset:"commonB",pattern:"none"}),V=e=>Object(l.a)({hasGradient:!1,hasOutline:!1,hasShadow:!1,hasEmboss:!1,pattern:"none",font:G},e),q={commonB:{key:"commonB",label:"Common (Black)",image:"asset/image/other/name-common-b.png",value:V({preset:"commonB",fillStyle:"#000000"})},commonW:{key:"commonW",label:"Common (White)",image:"asset/image/other/name-common-w.png",value:V({preset:"commonW",fillStyle:"#ffffff"})},skillDefault:{key:"skillDefault",label:"Skill (Default)",image:"asset/image/other/name-skill-default.png",value:V({preset:"skillDefault",fillStyle:"#ffffff",lineWidth:6,lineColor:"#000",hasOutline:!0})},skillArial:{key:"skillArial",label:"Skill (Arial)",image:"asset/image/other/name-skill-arial.png",value:V({preset:"skillArial",font:"Arial",fillStyle:"#ffffff",lineWidth:6,lineColor:"#000",lineOffsetX:1,hasOutline:!0})},rare:{key:"rare",label:"Rare",image:"asset/image/other/name-rare.png",value:V({preset:"rare",fillStyle:"#cfc6de"})},secretGradient:{key:"secretGradient",label:"Secret (Gradient)",image:"asset/image/other/name-secret-gradient.png",value:V({preset:"secretGradient",gradientAngle:180,gradientColor:"0.000|#7a71a6,1.000|#a8c1e5",hasGradient:!0})},secret:{key:"secret",label:"Secret",image:"asset/image/other/name-secret.png",value:V({preset:"secret",fillStyle:"#8a8381"})},platinum2:{key:"platinum2",label:"Platinum",image:"asset/image/other/name-platinum.png",value:V({preset:"platinum2",fillStyle:"#a49f9e"})},ultra:{key:"ultra",label:"Ultra",image:"asset/image/other/name-ultra.png",value:V({preset:"ultra",fillStyle:"#dbb473"})},ultra2:{key:"ultra2",label:"Ultra (Type 2)",image:"asset/image/other/name-ultra-2.png",value:V({preset:"ultra2",fillStyle:"#fee002"})},platinum:{key:"platinum",label:"Foil Platinum",image:"asset/image/other/name-foil-platinum.png",value:V({preset:"platinum",fillStyle:"#CCCCCC",shadowColor:"#FFFFFF",shadowOffsetY:1,shadowOffsetX:0,shadowBlur:1,hasShadow:!0})},gold:{key:"gold",label:"Foil Gold",image:"asset/image/other/name-foil-gold.png",value:V({preset:"gold",fillStyle:"#b88c43",shadowColor:"#FCC400",shadowOffsetY:1,shadowOffsetX:0,shadowBlur:1,hasShadow:!0})},animeRed:{key:"animeRed",label:"Anime (Type Red)",image:"asset/image/other/name-anime-red.png",value:V({preset:"animeRed",gradientAngle:180,gradientColor:"0.000|#d81961,0.220|#b81654,0.270|#9e1348,0.330|#95093e,0.380|#95093e,0.450|#ba3264,0.530|#ff5e99,0.620|#ffa0c3,0.690|#ffffff,0.770|#ff5e99,0.870|#d81961,1.000|#b81654",hasGradient:!0,hasOutline:!0,hasShadow:!0,lineColor:"#333333",lineOffsetX:1,lineOffsetY:0,lineWidth:3,shadowBlur:2,shadowColor:"#383838",shadowOffsetX:2,shadowOffsetY:3})},animeSilver:{key:"animeSilver",label:"Anime (Type Silver)",image:"asset/image/other/name-anime-silver.png",value:V({preset:"animeSilver",shadowColor:"#383838",shadowOffsetY:3,shadowOffsetX:2,shadowBlur:2,hasShadow:!0,lineColor:"#333333",lineWidth:3,lineOffsetX:1,lineOffsetY:0,hasOutline:!0,gradientAngle:180,gradientColor:"0.000|#cecbb8,0.220|#b0ad9b,0.270|#94917e,0.330|#797768,0.380|#797768,0.450|#d9d9d9,0.610|#ffffff,0.700|#ffffff,0.870|#d6d7c7,1.000|#c9cbb6",hasGradient:!0})},animeGold:{key:"animeGold",label:"Anime (Type Gold)",image:"asset/image/other/name-anime-gold.png",value:V({preset:"animeGold",shadowColor:"#383838",shadowOffsetY:3,shadowOffsetX:2,shadowBlur:2,hasShadow:!0,lineColor:"#333333",lineWidth:3,lineOffsetX:1,lineOffsetY:0,hasOutline:!0,gradientAngle:180,gradientColor:"0.000|#eee317,0.220|#dbbe15,0.270|#d0920c,0.330|#b57f0b,0.380|#d0920c,0.450|#ffff6b,0.610|#ffffff,0.700|#ffffff,0.870|#e5dd2d,1.000|#e3da23",hasGradient:!0})},promo:{key:"promo",label:"Promo",image:"asset/image/other/name-promo.png",value:V({preset:"promo",fillStyle:"#c7080b",shadowColor:"#333333",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:1,hasShadow:!0,lineColor:"#8a1801",lineWidth:3,lineOffsetX:0,hasOutline:!0,lineOffsetY:0})},embossGold:{key:"embossGold",label:"Embossed Gold",image:"asset/image/other/name-emboss-gold.png",value:V({preset:"embossGold",fillStyle:"#d09b0e",hasEmboss:!0,embossPitch:90,embossYaw:90,hasShadow:!0,shadowBlur:2,shadowColor:"#333333",shadowOffsetX:-1,shadowOffsetY:1})},embossPlatinum:{key:"embossPlatinum",label:"Embossed Platinum",image:"asset/image/other/name-emboss-platinum.png",value:V({preset:"embossPlatinum",fillStyle:"#c0c0c0",hasEmboss:!0,embossPitch:90,embossYaw:90,hasShadow:!0,shadowBlur:2,shadowColor:"#4d4d4d",shadowOffsetX:-1,shadowOffsetY:1})},rainbowSecretRare:{key:"rainbowSecretRare",label:"Rainbow Secret Rare",image:"asset/image/other/name-rainbow-secret-rare.png",value:V({hasOutline:!0,headTextFillStyle:"#000000",lineColor:"#333333",lineOffsetX:0,lineOffsetY:0,lineWidth:6,pattern:"type2",preset:"rainbowSecretRare"})}},_=Object.values(q),J={none:{key:"none",patternImage:"",blendMode:"source-atop",isOption:!1},type1:{key:"type1",patternImage:"finish-name-type1",blendMode:"source-atop",isOption:!0},type2:{key:"type2",patternImage:"finish-name-type2",blendMode:"source-atop",isOption:!0},type3:{key:"type3",patternImage:"finish-name-type3",blendMode:"source-atop",isOption:!0},type4:{key:"type4",patternImage:"finish-name-type4",blendMode:"source-atop",isOption:!0},type5:{key:"type5",patternImage:"finish-name-type5",blendMode:"multiply",overrideFill:!0,isOption:!0},type6:{key:"type6",patternImage:"finish-name-type6",blendMode:"source-atop",isOption:!0},type7:{key:"type7",patternImage:"finish-name-type7",blendMode:"lighter",overrideFill:!0,isOption:!0},type8:{key:"type8",patternImage:"finish-name-type8",blendMode:"source-atop",isOption:!0},type9:{key:"type9",patternImage:"finish-name-type9",blendMode:"source-atop",isOption:!0}},$=Object.values(J);var Q=n(626);const Z={small:{key:"small",frameType:"pendulum",labelKey:"input.pendulum-size.small.label",effectBoxOffsetY:0,pendulumBoxX:55,pendulumBoxY:738,pendulumBoxWidth:705,pendulumBoxHeight:95,pendulumBoxOffsetY:50,numberBlueX:84.4,numberRedX:728,numberY:816,artlessFrameY:594,fontSize:56.5},medium:{key:"medium",frameType:"pendulum",labelKey:"input.pendulum-size.medium.label",effectBoxOffsetY:0,pendulumBoxX:55,pendulumBoxY:738,pendulumBoxWidth:705,pendulumBoxHeight:147,pendulumBoxOffsetY:0,numberBlueX:84.4,numberRedX:728,numberY:792,artlessFrameY:553,fontSize:56.5},large:{key:"large",frameType:"text",labelKey:"input.pendulum-size.large.label",effectBoxOffsetY:27,pendulumBoxX:55,pendulumBoxY:738,pendulumBoxWidth:705,pendulumBoxHeight:180,pendulumBoxOffsetY:0,numberBlueX:84.4,numberRedX:728,numberY:808,artlessFrameY:553,fontSize:56.5}},ee=Object.values(Z),te={small:{"speed-skill":{exceptionPendulumBoxOffsetHeight:-13}},medium:{},large:{"speed-skill":{exceptionPendulumBoxOffsetHeight:15},zarc:{exceptionFrameType:"pendulum-large"}}},ne="medium",ae=[{index:0,labelKey:"input.flag.mix-def-link",type:"checkbox"},{index:1,labelKey:"input.flag.link-rating-behavior",type:"link-rating-behavior"}],re=0,ie=1,oe=ae.length,le={veryStrict:{1:600,2:620,3:640},strict:{1:645,2:665,3:685},loose:{1:700,2:710,3:720},veryLoose:{1:740,2:770,3:800},relaxed:{1:850,2:900,3:950}},se={tcg:[{trueWidth:684,trueBaseline:890.23,trueEdge:64.8,trueHeightCap:211}],"tcg-stat":[{trueWidth:684,trueBaseline:890.23,trueEdge:64.8,trueHeightCap:182}],"tcg-type-stat":[{trueWidth:684,trueBaseline:920.8,trueEdge:64.5,trueHeightCap:152}],"tcg-type":[{trueWidth:684,trueBaseline:921.8,trueEdge:64.5,trueHeightCap:182}],ocg:[{trueWidth:684,trueBaseline:895.23,trueEdge:64.8,trueHeightCap:211}],"ocg-stat":[{trueWidth:684,trueBaseline:891.23,trueEdge:64.8,trueHeightCap:182}],"ocg-type-stat":[{trueWidth:684,trueBaseline:918.5,trueEdge:64.5,trueHeightCap:152}],"ocg-type":[{trueWidth:684,trueBaseline:918.5,trueEdge:64.5,trueHeightCap:182}],"tcg-pendulumLarge":[{trueWidth:684,trueBaseline:920.73,trueEdge:64.8,trueHeightCap:173}],"tcg-pendulumLarge-stat":[{trueWidth:684,trueBaseline:920.73,trueEdge:64.8,trueHeightCap:144}],"tcg-pendulumLarge-type-stat":[{trueWidth:684,trueBaseline:953.5,trueEdge:64.5,trueHeightCap:118}],"tcg-pendulumLarge-type":[{trueWidth:684,trueBaseline:954.5,trueEdge:64.5,trueHeightCap:144}],"ocg-pendulumLarge":[{trueWidth:684,trueBaseline:923.23,trueEdge:64.8,trueHeightCap:173}],"ocg-pendulumLarge-stat":[{trueWidth:684,trueBaseline:921.23,trueEdge:64.8,trueHeightCap:144}],"ocg-pendulumLarge-type-stat":[{trueWidth:684,trueBaseline:951.5,trueEdge:64.5,trueHeightCap:118}],"ocg-pendulumLarge-type":[{trueWidth:684,trueBaseline:948.5,trueEdge:64.5,trueHeightCap:144}]},ce=64.44,de={normal:{small:[{trueWidth:555.47,trueBaseline:789.65,trueEdge:128.94,trueHeightCap:80}],medium:[{trueWidth:555.47,trueBaseline:746.29,trueEdge:128.94,trueHeightCap:122.6}],large:[{trueWidth:555.47,trueBaseline:746.29,trueEdge:128.94,trueHeightCap:155.8}]},scaleless:{small:[{trueWidth:684.35,trueBaseline:789.65,trueEdge:64.5,trueHeightCap:79.8}],medium:[{trueWidth:684.35,trueBaseline:746.29,trueEdge:64.5,trueHeightCap:126.1}],large:[{trueWidth:684.35,trueBaseline:746.29,trueEdge:64.5,trueHeightCap:155.5}]}},ue={tcg:{smaller:{trueBaseline:919,trueEdge:62.5,trueWidth:684.5},normal:{trueBaseline:920,trueEdge:62.5,trueWidth:684.5},large:{trueBaseline:187.5,trueEdge:732,edgeAlignment:"right",trueWidth:648.5},highPendulumNormal:{trueBaseline:950.5,trueEdge:62.5,trueWidth:684.5},highPendulumSmaller:{trueBaseline:949.5,trueEdge:62.5,trueWidth:684.5}},ocg:{smaller:{trueBaseline:917,trueEdge:63.7,trueWidth:684.5},normal:{trueBaseline:917,trueEdge:63.7,trueWidth:684.5},large:{trueBaseline:190.5,trueEdge:728,edgeAlignment:"right",trueWidth:642.5},highPendulumNormal:{trueBaseline:949,trueEdge:62.5,trueWidth:684.5},highPendulumSmaller:{trueBaseline:949,trueEdge:62.5,trueWidth:684.5}}},be={ocg:{trueBaseline:1146.5,trueEdge:736,trueWidth:435},tcg:{trueBaseline:1149.5,trueEdge:733,trueWidth:380}},me={ocg:{trueBaseline:1148.931,trueEdge:37.031,trueWidth:258},tcg:{trueBaseline:1149.431,trueEdge:37.031,trueWidth:311}},pe=[{shortForm:"\u7279\u6b8a\u53ec\u559a",rubyForm:"{\u7279|\u3068\u304f}{\u6b8a|\u3057\u3085}{\u53ec|\u3057\u3087\u3046}{\u559a|\u304b\u3093}"},{shortForm:"\u30ab\u30fc\u30c9",rubyForm:"{\u30ab\u30fc\u30c9}"},{shortForm:"\u30c7\u30e5\u30a8\u30eb",rubyForm:"{\u30c7\u30e5\u30a8\u30eb}"},{shortForm:"\u30de\u30c3\u30c1",rubyForm:"{\u30de\u30c3\u30c1}"},{shortForm:"\u30bf\u30fc\u30f3",rubyForm:"{\u30bf\u30fc\u30f3}"},{shortForm:"\u30d7\u30ec\u30a4\u30e4\u30fc",rubyForm:"{\u30d7\u30ec\u30a4\u30e4\u30fc}"},{shortForm:"\u81ea\u5206",rubyForm:"{\u81ea|\u3058}{\u5206|\u3076\u3093}"},{shortForm:"\u76f8\u624b",rubyForm:"{\u76f8|\u3042\u3044}{\u624b|\u3066}"},{shortForm:"LP",regexForm:"(?<![a-zA-Z_])LP(?![a-zA-Z_])",rubyForm:"{LP|\u30e9\u30a4\u30d5\u30dd\u30a4\u30f3\u30c8}"},{shortForm:"\u30c7\u30c3\u30ad",rubyForm:"{\u30c7\u30c3\u30ad}"},{shortForm:"\u30e1\u30a4\u30f3",rubyForm:"{\u30e1\u30a4\u30f3}"},{shortForm:"\u30b5\u30a4\u30c9",rubyForm:"{\u30b5\u30a4\u30c9}"},{shortForm:"EX",regexForm:"(?<!\\w)EX(?!\\w)",rubyForm:"{EX|\u30a8\u30af\u30b9\u30c8\u30e9}"},{shortForm:"\u30d5\u30a3\u30fc\u30eb\u30c9",rubyForm:"{\u30d5\u30a3\u30fc\u30eb\u30c9}"},{shortForm:"\u5893\u5730",rubyForm:"{\u5893|\u307c}{\u5730|\u3061}"},{shortForm:"\u624b\u672d",rubyForm:"{\u624b|\u3066}{\u672d|\u3075\u3060}"},{shortForm:"\u30be\u30fc\u30f3",rubyForm:"{\u30be\u30fc\u30f3}"},{shortForm:"\u30e2\u30f3\u30b9\u30bf\u30fc",rubyForm:"{\u30e2\u30f3\u30b9\u30bf\u30fc}"},{shortForm:"\u7e26\u5217",rubyForm:"{\u7e26|\u305f\u3066}{\u5217|\u308c\u3064}"},{shortForm:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc",rubyForm:"{\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc}"},{shortForm:"\u6301\u3061\u4e3b",rubyForm:"{\u6301|\u3082}\u3061{\u4e3b|\u306c\u3057}"},{shortForm:"\u30c0\u30e1\u30fc\u30b8",rubyForm:"{\u30c0\u30e1\u30fc\u30b8}"},{shortForm:"\u6226\u95d8",rubyForm:"{\u6226|\u305b\u3093}{\u95d8|\u3068\u3046}"},{shortForm:"\u30b9\u30da\u30eb",rubyForm:"{\u30b9\u30da\u30eb}"},{shortForm:"\u30b9\u30d4\u30fc\u30c9",rubyForm:"{\u30b9\u30d4\u30fc\u30c9}"},{shortForm:"\u30c1\u30a7\u30fc\u30f3",rubyForm:"{\u30c1\u30a7\u30fc\u30f3}"},{shortForm:"\u30d6\u30ed\u30c3\u30af",rubyForm:"{\u30d6\u30ed\u30c3\u30af}"},{shortForm:"\u76f4\u63a5",rubyForm:"{\u76f4|\u3061\u3087\u304f}{\u63a5|\u305b\u3064}"},{shortForm:"\u7d20\u6750",rubyForm:"{\u7d20|\u305d}{\u6750|\u3056\u3044}"},{shortForm:"\u540d",rubyForm:"{\u540d|\u3081\u3044}"},{shortForm:"\u6761\u4ef6",rubyForm:"{\u6761|\u3058\u3087\u3046}{\u4ef6|\u3051\u3093}"},{shortForm:"\u30b3\u30a4\u30f3",rubyForm:"{\u30b3\u30a4\u30f3}"},{shortForm:"\u30b5\u30a4\u30b3\u30ed",rubyForm:"{\u30b5\u30a4\u30b3\u30ed}"},{shortForm:"\u5143",rubyForm:"{\u5143|\u3082\u3068}"},{shortForm:"\u5148",rubyForm:"{\u5148|\u3055\u304d}"},{shortForm:"\u72b6\u614b",rubyForm:"{\u72b6|\u3058\u3087\u3046}{\u614b|\u305f\u3044}"},{shortForm:"\u76f8\u4e92",rubyForm:"{\u76f8|\u305d\u3046}{\u4e92|\u3054}"},{shortForm:"\u30a8\u30af\u30b9\u30c8\u30e9",rubyForm:"{\u30a8\u30af\u30b9\u30c8\u30e9}"},{shortForm:"\u30d5\u30a7\u30a4\u30ba",rubyForm:"{\u30d5\u30a7\u30a4\u30ba}"},{shortForm:"\u30c9\u30ed\u30fc",rubyForm:"{\u30c9\u30ed\u30fc}"},{shortForm:"\u30b9\u30bf\u30f3\u30d0\u30a4",rubyForm:"{\u30b9\u30bf\u30f3\u30d0\u30a4}"},{shortForm:"\u30d0\u30c8\u30eb",rubyForm:"{\u30d0\u30c8\u30eb}"},{shortForm:"\u30a8\u30f3\u30c9",rubyForm:"{\u30a8\u30f3\u30c9}"},{shortForm:"\u30b9\u30bf\u30fc\u30c8",rubyForm:"{\u30b9\u30bf\u30fc\u30c8}"},{shortForm:"\u30b9\u30c6\u30c3\u30d7",rubyForm:"{\u30b9\u30c6\u30c3\u30d7}"},{shortForm:"\u7a2e\u985e",rubyForm:"{\u7a2e|\u3057\u3085}{\u985e|\u308b\u3044}"},{shortForm:"\u5f62\u5f0f",rubyForm:"{\u5f62|\u3051\u3044}{\u5f0f|\u3057\u304d}"},{shortForm:"\u8868\u5074",rubyForm:"{\u8868|\u304a\u3082\u3066}{\u5074|\u304c\u308f}"},{shortForm:"\u88cf\u5074",rubyForm:"{\u88cf|\u3046\u3089}{\u5074|\u304c\u308f}"},{shortForm:"\u8868\u793a",rubyForm:"{\u8868|\u3072\u3087\u3046}{\u793a|\u3058}"},{shortForm:"\u88cf",rubyForm:"{\u88cf|\u3046\u3089}"},{shortForm:"\u7f60",rubyForm:"{\u7f60|\u30c8\u30e9\u30c3\u30d7}"},{shortForm:"\u30a2\u30af\u30b7\u30e7\u30f3",rubyForm:"\u30a2\u30af\u30b7\u30e7\u30f3"},{shortForm:"\u88c5\u5099",rubyForm:"{\u88c5|\u305d\u3046}{\u5099|\u3073}"},{shortForm:"\u901f\u653b",rubyForm:"{\u901f|\u305d\u3063}{\u653b|\u3053\u3046}"},{shortForm:"\u6c38\u7d9a",rubyForm:"{\u6c38|\u3048\u3044}{\u7d9a|\u305e\u304f}"},{shortForm:"\u30ab\u30a6\u30f3\u30bf\u30fc",rubyForm:"{\u30ab\u30a6\u30f3\u30bf\u30fc}"},{shortForm:"\u30ec\u30d9\u30eb",rubyForm:"{\u30ec\u30d9\u30eb}"},{shortForm:"\u30e9\u30f3\u30af",rubyForm:"{\u30e9\u30f3\u30af}"},{shortForm:"\u30b9\u30b1\u30fc\u30eb",rubyForm:"{\u30b9\u30b1\u30fc\u30eb}"},{shortForm:"\u653b\u6483\u529b",rubyForm:"{\u653b|\u3053\u3046}{\u6483|\u3052\u304d}{\u529b|\u308a\u3087\u304f}"},{shortForm:"\u5b88\u5099\u529b",rubyForm:"{\u5b88|\u3057\u3085}{\u5099|\u3073}{\u529b|\u308a\u3087\u304f}"},{shortForm:"\u6483\u529b",rubyForm:"{\u6483|\u3052\u304d}{\u529b|\u308a\u3087\u304f}"},{shortForm:"\u52dd\u5229",rubyForm:"{\u52dd|\u3057\u3087\u3046}{\u5229|\u308a}"},{shortForm:"\u5c5e\u6027",rubyForm:"{\u5c5e|\u305e\u304f}{\u6027|\u305b\u3044}"},{shortForm:"\u7a2e\u65cf",rubyForm:"{\u7a2e|\u3057\u3085}{\u65cf|\u305e\u304f}"},{shortForm:"\u52b9\u679c",rubyForm:"{\u52b9|\u3053\u3046}{\u679c|\u304b}"},{shortForm:"\u878d\u5408",rubyForm:"{\u878d|\u3086\u3046}{\u5408|\u3054\u3046}"},{shortForm:"\u5100\u5f0f",rubyForm:"{\u5100|\u304e}{\u5f0f|\u3057\u304d}"},{shortForm:"\u30de\u30ad\u30b7\u30de\u30e0",rubyForm:"{\u30de\u30ad\u30b7\u30de\u30e0}"},{shortForm:"\u30c8\u30fc\u30af\u30f3",rubyForm:"{\u30c8\u30fc\u30af\u30f3}"},{shortForm:"\u30c1\u30e5\u30fc\u30ca\u30fc",rubyForm:"{\u30c1\u30e5\u30fc\u30ca\u30fc}"},{shortForm:"\u30c7\u30e5\u30a2\u30eb",rubyForm:"{\u30c7\u30e5\u30a2\u30eb}"},{shortForm:"\u30ea\u30d0\u30fc\u30b9",rubyForm:"{\u30ea\u30d0\u30fc\u30b9}"},{shortForm:"\u30c8\u30a5\u30fc\u30f3",rubyForm:"{\u30c8\u30a5\u30fc\u30f3}"},{shortForm:"\u30b9\u30d4\u30ea\u30c3\u30c8",rubyForm:"{\u30b9\u30d4\u30ea\u30c3\u30c8}"},{shortForm:"\u30e6\u30cb\u30aa\u30f3",rubyForm:"{\u30e6\u30cb\u30aa\u30f3}"},{shortForm:"\u5149",rubyForm:"{\u5149|\u3072\u304b\u308a}"},{shortForm:"\u95c7",rubyForm:"{\u95c7|\u3084\u307f}"},{shortForm:"\u5730",rubyForm:"{\u5730|\u3061}"},{shortForm:"\u6c34",rubyForm:"{\u6c34|\u307f\u305a}"},{shortForm:"\u708e",rubyForm:"{\u708e|\u307b\u306e\u304a}"},{shortForm:"\u98a8",rubyForm:"{\u98a8|\u304b\u305c}"},{shortForm:"\u7363\u6226\u58eb",rubyForm:"{\u7363|\u3058\u3085\u3046}{\u6226|\u305b\u3093}{\u58eb|\u3057}"},{shortForm:"\u5275\u9020\u795e",rubyForm:"{\u5275|\u305d\u3046}{\u9020|\u305e\u3046}{\u795e|\u3057\u3093}"},{shortForm:"\u30b5\u30a4\u30d0\u30fc\u30b9",rubyForm:"{\u30b5\u30a4\u30d0\u30fc\u30b9}"},{shortForm:"\u6050\u7adc",rubyForm:"{\u6050|\u304d\u3087\u3046}{\u7adc|\u308a\u3085\u3046}"},{shortForm:"\u5e7b\u795e\u7363",rubyForm:"{\u5e7b|\u3052\u3093}{\u795e|\u3057\u3093}{\u7363|\u3058\u3085\u3046}"},{shortForm:"\u5929\u4f7f",rubyForm:"{\u5929|\u3066\u3093}{\u4f7f|\u3057}"},{shortForm:"\u60aa\u9b54",rubyForm:"{\u60aa|\u3042\u304f}{\u9b54|\u307e}"},{shortForm:"\u9b5a",rubyForm:"{\u9b5a|\u3055\u304b\u306a}"},{shortForm:"\u30ae\u30e3\u30e9\u30af\u30b7\u30fc",rubyForm:"{\u30ae\u30e3\u30e9\u30af\u30b7\u30fc}"},{shortForm:"\u5e7b\u60f3\u9b54",rubyForm:"{\u5e7b|\u3052\u3093}{\u60f3|\u305d\u3046}{\u9b54|\u307e}"},{shortForm:"\u6606\u866b",rubyForm:"{\u6606|\u3053\u3093}{\u866b|\u3061\u3085\u3046}"},{shortForm:"\u6a5f\u68b0",rubyForm:"{\u6a5f|\u304d}{\u68b0|\u304b\u3044}"},{shortForm:"\u690d\u7269",rubyForm:"{\u690d|\u3057\u3087\u304f}{\u7269|\u3076\u3064}"},{shortForm:"\u722c\u866b\u985e",rubyForm:"{\u722c|\u306f}{\u866b|\u3061\u3085\u3046}{\u985e|\u308b\u3044}"},{shortForm:"\u5ca9\u77f3",rubyForm:"{\u5ca9|\u304c\u3093}{\u77f3|\u305b\u304d}"},{shortForm:"\u6d77\u7adc",rubyForm:"{\u6d77|\u304b\u3044}{\u7adc|\u308a\u3085\u3046}"},{shortForm:"\u9b54\u6cd5\u4f7f\u3044",rubyForm:"{\u9b54|\u307e}{\u6cd5|\u307b\u3046}{\u4f7f|\u3064\u304b}\u3044"},{shortForm:"\u96f7",rubyForm:"{\u96f7|\u3044\u304b\u305a\u3061}"},{shortForm:"\u9ce5\u7363",rubyForm:"{\u9ce5|\u3061\u3087\u3046}{\u7363|\u3058\u3085\u3046}"},{shortForm:"\u5e7b\u7adc",rubyForm:"{\u5e7b|\u3052\u3093}{\u7adc|\u308a\u3085\u3046}"},{shortForm:"\u30a2\u30f3\u30c7\u30c3\u30c8",rubyForm:"{\u30a2\u30f3\u30c7\u30c3\u30c8}"},{shortForm:"\u30b5\u30a4\u30dc\u30fc\u30b0",rubyForm:"{\u30b5\u30a4\u30dc\u30fc\u30b0}"},{shortForm:"\u5929\u754c\u6226\u58eb",rubyForm:"{\u5929|\u3066\u3093}{\u754c|\u304b\u3044}{\u6226|\u305b\u3093}{\u58eb|\u3057}"},{shortForm:"\u30cf\u30a4\u30c9\u30e9\u30b4\u30f3",rubyForm:"{\u30cf\u30a4\u30c9\u30e9\u30b4\u30f3}"},{shortForm:"\u9b54\u5c0e\u9a0e\u58eb",rubyForm:"{\u9b54|\u307e}{\u5c0e|\u3069\u3046}{\u9a0e|\u304d}{\u58eb|\u3057}"},{shortForm:"\u7121\u52b9\u5316",rubyForm:"{\u7121|\u3080}{\u52b9|\u3053\u3046}{\u5316|\u304b}"},{shortForm:"\u30aa\u30e1\u30ac",rubyForm:"{\u30aa\u30e1\u30ac}"},{shortForm:"\u30b5\u30a4\u30ad\u30c3\u30af",rubyForm:"{\u30b5\u30a4\u30ad\u30c3\u30af}"},{shortForm:"\u6368\u3066\u308b",rubyForm:"{\u6368|\u3059}\u3066\u308b"},{shortForm:"\u52a0\u3048\u308b",rubyForm:"{\u52a0|\u304f\u308f}\u3048\u308b"},{shortForm:"\u304b\u3089\u96e2\u308c\u308b",rubyForm:"\u304b\u3089{\u96e2|\u306f\u306a}\u308c\u308b"},{shortForm:"\u4e0e\u3048\u308b",rubyForm:"{\u4e0e|\u3042\u305f}\u3048\u308b"},{shortForm:"\u91cd\u306d\u308b",rubyForm:"{\u91cd|\u304b\u3055}\u306d\u308b"},{shortForm:"\u53d6\u308a\u9664\u304f",rubyForm:"{\u53d6|\u3068}\u308a{\u9664|\u306e\u305e}\u304f"},{shortForm:"\u53d6\u308a\u9664\u3044",rubyForm:"{\u53d6|\u3068}\u308a{\u9664|\u306e\u305e}\u3044"},{shortForm:"\u53d6\u308a\u9664\u304d",rubyForm:"{\u53d6|\u3068}\u308a{\u9664|\u306e\u305e}\u304d"},{shortForm:"\u9664\u304f",rubyForm:"{\u9664|\u306e\u305e}\u304f"},{shortForm:"\u884c\u3046",rubyForm:"{\u884c|\u304a\u3053\u306a}\u3046"},{shortForm:"\u5bfe\u3059",rubyForm:"{\u5bfe|\u305f\u3044}\u3059"},{shortForm:"\u9001\u308b",rubyForm:"{\u9001|\u304a\u304f}\u308b"},{shortForm:"\u7f6e\u304f",rubyForm:"{\u7f6e|\u304a}\u304f"},{shortForm:"\u3081\u304f\u308b",rubyForm:"{\u3081\u304f\u308b}"},{shortForm:"\u30a2\u30c9\u30d0\u30f3\u30b9",rubyForm:"{\u30a2\u30c9\u30d0\u30f3\u30b9}"},{shortForm:"\u53cd\u8ee2",rubyForm:"{\u53cd|\u306f\u3093}{\u8ee2|\u3066\u3093}"},{shortForm:"\u7279\u6b8a",rubyForm:"{\u7279|\u3068\u304f}{\u6b8a|\u3057\u3085}"},{shortForm:"\u767a\u52d5",rubyForm:"{\u767a|\u306f\u3064}{\u52d5|\u3069\u3046}"},{shortForm:"\u7834\u58ca",rubyForm:"{\u7834|\u306f}{\u58ca|\u304b\u3044}"},{shortForm:"\u5bfe\u8c61",rubyForm:"{\u5bfe|\u305f\u3044}{\u8c61|\u3057\u3087\u3046}"},{shortForm:"\u7121\u52b9",rubyForm:"{\u7121|\u3080}{\u52b9|\u3053\u3046}"},{shortForm:"\u7121\u8996",rubyForm:"{\u7121|\u3080}{\u8996|\u3057}"},{shortForm:"\u78ba\u8a8d",rubyForm:"{\u78ba|\u304b\u304f}{\u8a8d|\u306b\u3093}"},{shortForm:"\u653b\u6483",rubyForm:"{\u653b|\u3053\u3046}{\u6483|\u3052\u304d}"},{shortForm:"\u51e6\u7406",rubyForm:"{\u51e6|\u3057\u3087}{\u7406|\u308a}"},{shortForm:"\u5ba3\u8a00",rubyForm:"{\u5ba3|\u305b\u3093}{\u8a00|\u3052\u3093}"},{shortForm:"\u9664\u5916",rubyForm:"{\u9664|\u3058\u3087}{\u5916|\u304c\u3044}"},{shortForm:"\u30ea\u30ea\u30fc\u30b9",rubyForm:"{\u30ea\u30ea\u30fc\u30b9}"},{shortForm:"\u30b9\u30ad\u30c3\u30d7",rubyForm:"{\u30b9\u30ad\u30c3\u30d7}"},{shortForm:"\u30b7\u30e3\u30c3\u30d5\u30eb",rubyForm:"{\u30b7\u30e3\u30c3\u30d5\u30eb}"},{shortForm:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb",rubyForm:"{\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb}"},{shortForm:"\u30bb\u30c3\u30c8",rubyForm:"{\u30bb\u30c3\u30c8}"},{shortForm:"RUM",regexForm:"(?<!\\w)RUM(?!\\w)",rubyForm:"{RUM|\u30e9\u30f3\u30af\u30a2\u30c3\u30d7\u30de\u30b8\u30c3\u30af}"},{shortForm:"S",regexForm:"(?<!\\w)S(?!\\w)",rubyForm:"{S|\u30b7\u30f3\u30af\u30ed}"},{shortForm:"X",regexForm:"(?<!\\w)X(?!\\w)",rubyForm:"{X|\u30a8\u30af\u30b7\u30fc\u30ba}"},{shortForm:"L",regexForm:"(?<!\\w)L(?!\\w)",rubyForm:"{L|\u30ea\u30f3\u30af}"},{shortForm:"P",regexForm:"(?<!\\w)P(?!\\w)",rubyForm:"{P|\u30da\u30f3\u30c7\u30e5\u30e9\u30e0}"},{shortForm:"\u30ea\u30f3\u30af",rubyForm:"{\u30ea\u30f3\u30af}"},{shortForm:"\u5b88\u5099",rubyForm:"{\u5b88|\u3057\u3085}{\u5099|\u3073}"},{shortForm:"\u901a\u5e38",rubyForm:"{\u901a|\u3064\u3046}{\u5e38|\u3058\u3087\u3046}"},{shortForm:"\u53ef\u80fd",rubyForm:"{\u53ef|\u304b}{\u80fd|\u306e\u3046}"},{shortForm:"\u795e",rubyForm:"{\u795e|\u304b\u307f}"},{shortForm:"\u7363",rubyForm:"{\u7363|\u3051\u3082\u306e}"},{shortForm:"\u30c9\u30e9\u30b4\u30f3",rubyForm:"{\u30c9\u30e9\u30b4\u30f3}"},{shortForm:"\u30b5\u30a4\u30ad\u30c3\u30af",rubyForm:"{\u30b5\u30a4\u30ad\u30c3\u30af}"},{shortForm:"\u91cd\u306d\u3066",rubyForm:"{\u91cd|\u304b\u3055}\u306d\u3066"},{shortForm:"\u9b54\u6cd5",rubyForm:"{\u9b54|\u307e}{\u6cd5|\u307b\u3046}"},{shortForm:"\u6226\u58eb",rubyForm:"{\u6226|\u305b\u3093}{\u58eb|\u3057}"},{shortForm:"\u53ec\u559a",rubyForm:"{\u53ec|\u3057\u3087\u3046}{\u559a|\u304b\u3093}"},{shortForm:"\u5408\u8a08",rubyForm:"{\u5408|\u3054\u3046}{\u8a08|\u3051\u3044}"},{shortForm:"\u4ee5\u4e0a",rubyForm:"{\u4ee5|\u3044}{\u4e0a|\u3058\u3087\u3046}"},{shortForm:"\u4e0a\u8a18",rubyForm:"{\u4e0a|\u3058\u3087\u3046}{\u8a18|\u304d}"},{shortForm:"\u5834\u5408",rubyForm:"{\u5834|\u3070}{\u5408|\u3042\u3044}"},{shortForm:"\u964d\u81e8",rubyForm:"{\u964d|\u3053\u3046}{\u81e8|\u308a\u3093}"},{shortForm:"\u4ee5\u5916",rubyForm:"{\u4ee5|\u3044}{\u5916|\u304c\u3044}"},{shortForm:"\u4f7f\u7528",rubyForm:"{\u4f7f|\u3057}{\u7528|\u3088\u3046}"},{shortForm:"\u5b58\u5728",rubyForm:"{\u5b58|\u305d\u3093}{\u5728|\u3056\u3044}"},{shortForm:"\u6700\u5927",rubyForm:"{\u6700|\u3055\u3044}{\u5927|\u3060\u3044}"},{shortForm:"\u6210\u529f",rubyForm:"{\u6210|\u305b\u3044}{\u529f|\u3053\u3046}"},{shortForm:"\u81ea\u8eab",rubyForm:"{\u81ea|\u3058}{\u8eab|\u3057\u3093}"},{shortForm:"\u4ee5\u4e0b",rubyForm:"{\u4ee5|\u3044}{\u4e0b|\u304b}"},{shortForm:"\u7d42\u4e86",rubyForm:"{\u7d42|\u3057\u3085\u3046}{\u4e86|\u308a\u3087\u3046}"},{shortForm:"\u5168\u3066",rubyForm:"{\u5168|\u3059\u3079}\u3066"},{shortForm:"\u6368\u3066",rubyForm:"{\u6368|\u3059}\u3066"},{shortForm:"\u884c\u304b\u305a",rubyForm:"{\u884c|\u3044}\u304b\u305a"},{shortForm:"CNo\uff0e",regexForm:"(?<![a-zA-Z])CNo\uff0e(?![a-zA-Z])",rubyForm:"{CNo\uff0e||\u30ab\u30aa\u30b9\u30ca\u30f3\u30d0\u30fc\u30ba}",rubyFormName:"{CNo||\u30ab\u30aa\u30b9\u30ca\u30f3\u30d0\u30fc\u30ba}\uff0e"},{shortForm:"No\uff0e",regexForm:"(?<![a-zA-Z])No\uff0e(?![a-zA-Z])",rubyForm:"{No\uff0e||\u30ca\u30f3\u30d0\u30fc\u30ba}",rubyFormName:"{No||\u30ca\u30f3\u30d0\u30fc\u30ba}\uff0e"},{shortForm:"CX",regexForm:"(?<![a-zA-Z])CX(?![a-zA-Z])",rubyForm:"{CX|\u30ab\u30aa\u30b9\u30a8\u30af\u30b7\u30fc\u30ba}"},{shortForm:"\u9069\u7528",rubyForm:"{\u9069|\u3066\u304d}{\u7528|\u3088\u3046}"},{shortForm:"\u6570\u5024",rubyForm:"{\u6570|\u3059\u3046}{\u5024|\u3061}"},{shortForm:"\u8a08\u7b97",rubyForm:"{\u8a08|\u3051\u3044}{\u7b97|\u3055\u3093}"},{shortForm:"\u5fc5\u8981",rubyForm:"{\u5fc5|\u3072\u3064}{\u8981|\u3088\u3046}"},{shortForm:"\u9078\u629e",rubyForm:"{\u9078|\u305b\u3093}{\u629e|\u305f\u304f}"},{shortForm:"\u534a\u5206",rubyForm:"{\u534a|\u306f\u3093}{\u5206|\u3076\u3093}"},{shortForm:"\u958b\u59cb",rubyForm:"{\u958b|\u304b\u3044}{\u59cb|\u3057}"},{shortForm:"\u88cf\u8868",rubyForm:"{\u88cf|\u3046\u3089}{\u8868|\u304a\u3082\u3066}"},{shortForm:"\u56de\u5fa9",rubyForm:"{\u56de|\u304b\u3044}{\u5fa9|\u3075\u304f}"},{shortForm:"\u6307\u5b9a",rubyForm:"{\u6307|\u3057}{\u5b9a|\u3066\u3044}"},{shortForm:"\u4f4d\u7f6e",rubyForm:"{\u4f4d|\u3044}{\u7f6e|\u3061}"},{shortForm:"\u79fb\u52d5",rubyForm:"{\u79fb|\u3044}{\u52d5|\u3069\u3046}"},{shortForm:"\u65b9\u6cd5",rubyForm:"{\u65b9|\u307b\u3046}{\u6cd5|\u307b\u3046}"},{shortForm:"\u5909\u66f4",rubyForm:"{\u5909|\u3078\u3093}{\u66f4|\u3053\u3046}"},{shortForm:"\u767a\u751f",rubyForm:"{\u767a|\u306f\u3063}{\u751f|\u305b\u3044}"},{shortForm:"\u516c\u958b",rubyForm:"{\u516c|\u3053\u3046}{\u958b|\u304b\u3044}"},{shortForm:"\u9806\u756a",rubyForm:"{\u9806|\u3058\u3085\u3093}{\u756a|\u3070\u3093}"},{shortForm:"\u9650\u308a",rubyForm:"{\u9650|\u304b\u304e}\u308a"},{shortForm:"\u9664\u5916",rubyForm:"{\u9664|\u3058\u3087}{\u5916|\u304c\u3044}"},{shortForm:"\u540c\u4e00",rubyForm:"{\u540c|\u3069\u3046}{\u4e00|\u3044\u3064}"},{shortForm:"\u9806",rubyForm:"{\u9806|\u3058\u3085\u3093}"},{shortForm:"\u4ee3",rubyForm:"{\u4ee3|\u304b}"},{shortForm:"\u8d85",rubyForm:"{\u8d85|\u3053}"},{shortForm:"\u6bce",rubyForm:"{\u6bce|\u3054\u3068}"},{shortForm:"\u524d",rubyForm:"{\u524d|\u307e\u3048}"},{shortForm:"\u9055",rubyForm:"{\u9055|\u3061\u304c}"},{shortForm:"\u7d9a",rubyForm:"{\u7d9a|\u3064\u3065}"},{shortForm:"\u6b8b",rubyForm:"{\u6b8b|\u306e\u3053}"},{shortForm:"\u4ed6",rubyForm:"{\u4ed6|\u307b\u304b}"},{shortForm:"\u5f53",rubyForm:"{\u5f53|\u3042}"},{shortForm:"\u5ea6",rubyForm:"{\u5ea6|\u3069}"},{shortForm:"\u6642",rubyForm:"{\u6642|\u3068\u304d}"},{shortForm:"\u65cf",rubyForm:"{\u65cf|\u305e\u304f}"},{shortForm:"\u6570",rubyForm:"{\u6570|\u304b\u305a}"},{shortForm:"\u4f53",rubyForm:"{\u4f53|\u305f\u3044}"},{shortForm:"\u9650",rubyForm:"{\u9650|\u30b2\u30f3}"},{shortForm:"\u7f6e",rubyForm:"{\u7f6e|\u30c1}"},{shortForm:"\u53d7",rubyForm:"{\u53d7|\u3046}"},{shortForm:"\u679a",rubyForm:"{\u679a|\u307e\u3044}"},{shortForm:"\u5f8c",rubyForm:"{\u5f8c|\u3054}"},{shortForm:"\u9001",rubyForm:"{\u9001|\u304a\u304f}"},{shortForm:"\u4e8b",rubyForm:"{\u4e8b|\u3053\u3068}"},{shortForm:"\u5185",rubyForm:"{\u5185|\u3046\u3061}"},{shortForm:"\u898b",rubyForm:"{\u898b|\u307f}"},{shortForm:"\u4e2d",rubyForm:"{\u4e2d|\u306a\u304b}"},{shortForm:"\u52a0",rubyForm:"{\u52a0|\u304f\u308f}"},{shortForm:"\u9078",rubyForm:"{\u9078|\u3048\u3089}"},{shortForm:"\u4e00",rubyForm:"{\u4e00|\u3044\u3061}"},{shortForm:"\u756a",rubyForm:"{\u756a|\u3070\u3093}"},{shortForm:"\u540c",rubyForm:"{\u540c|\u3069\u3046}"},{shortForm:"\u56de",rubyForm:"{\u56de|\u304b\u3044}"},{shortForm:"\u6271",rubyForm:"{\u6271|\u3042\u3064\u304b}"},{shortForm:"\u661f",rubyForm:"{\u661f|\u30ec\u30d9\u30eb}"},{shortForm:"\u653b",rubyForm:"{\u653b|\u3053\u3046}"},{shortForm:"\u5b88",rubyForm:"{\u5b88|\u3057\u3085}"},{shortForm:"\u623b",rubyForm:"{\u623b|\u3082\u3069}"},{shortForm:"\u4e0a",rubyForm:"{\u4e0a|\u3046\u3048}"},{shortForm:"\u6b21",rubyForm:"{\u6b21|\u3064\u304e}"},{shortForm:"\u5024",rubyForm:"{\u5024|\u3061}"},{shortForm:"\u542b",rubyForm:"{\u542b|\u3075\u304f}"},{shortForm:"\u4e0e",rubyForm:"{\u4e0e|\u3080\u305f}"},{shortForm:"\u5f97",rubyForm:"{\u5f97|\u3048}"},{shortForm:"\u53ca",rubyForm:"{\u53ca|\u304a\u3088}"},{shortForm:"\u7570",rubyForm:"{\u7570|\u3053\u3068}"},{shortForm:"\u8a18",rubyForm:"{\u8a18|\u3057\u308b}"},{shortForm:"\u7e70",rubyForm:"{\u7e70|\u304f}"},{shortForm:"\u8fd4",rubyForm:"{\u8fd4|\u304b\u3048}"},{shortForm:"\u6c7a",rubyForm:"{\u6c7a|\u304d}"},{shortForm:"\u4e92",rubyForm:"{\u4e92|\u305f\u304c}"},{shortForm:"\u6255",rubyForm:"{\u6255|\u306f\u3089}"},{shortForm:"\u591a",rubyForm:"{\u591a|\u304a\u304a}"},{shortForm:"\u6301",rubyForm:"{\u6301|\u304a\u304a}"},{shortForm:"\u6301",rubyForm:"{\u6301|\u3082}"},{shortForm:"\u9593",rubyForm:"{\u9593|\u3042\u3044\u3060}"},{shortForm:"\u6240",rubyForm:"{\u6240|\u3057\u3087}"},{shortForm:"\u9ad8",rubyForm:"{\u9ad8|\u305f\u304b}"},{shortForm:"\u500d",rubyForm:"{\u500d|\u3070\u3044}"},{shortForm:"\u4e0b",rubyForm:"{\u4e0b|\u3057\u305f}"},{shortForm:"\u969b",rubyForm:"{\u969b|\u3055\u3044}"},{shortForm:"\u597d",rubyForm:"{\u597d|\u3059}"},{shortForm:"\u8868",rubyForm:"{\u8868|\u304a\u3082\u3066}"}],ge=pe.reduce((e,t)=>(e[t.shortForm]=t,e),{}),he={allRightSymbolOffset:1,bulletWidth:23,fontSize:24.5,lineHeight:24.7,lineCount:6,bulletOffset:0,capitalLetterRatio:1,headTextFontRatio:.355,headTextSpacing:1.5,largeSymbolRatio:1.35,letterSpacing:0,offsetY:0,ordinalFontOffsetY:-2,ordinalFontRatio:1/1.1,squareBracketRatio:1},fe={headTextHeightRatio:.8,headTextOverflow:"normal",headTextBold:!0,headTextGapRatio:.03125},ve={alphabetFont:'"Yu-Gi-Oh! DF Leisho 3"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",headTextFontRatio:.7,headTextGapRatio:0,headTextHeightRatio:.815,ordinalFont:'"DFKakuTaiHiStd-W4"',symbolFont:"matrix",symbolFontRatio:1,vietnameseFont:"Times New Roman",vietnameseFontRatio:1.1,letterOffsetMap:{"\u2605":{ratio:.9,baseline:-.05,yRatio:1},"\u2606":{ratio:.9,baseline:-.05,yRatio:1},"\xa1":{ratio:1.2,baseline:-0,yRatio:1.05}}},ye=Object(l.a)(Object(l.a)({},ve),{},{font:"MatrixBook, Times New Roman",headTextHeightRatio:.75,fontStyle:"tcg",fontList:[],variant:"default-tcg"}),je=Object(l.a)(Object(l.a)({},ve),{},{font:'"StoneSerif-Italic", "SVN-Times New Roman Italic"',vietnameseFont:'"SVN-Times New Roman Italic"',headTextHeightRatio:.75,fontStyle:"tcg",vietnameseFontRatio:1.08,fontList:[],variant:"default-tcg-normal"}),xe=Object(l.a)(Object(l.a)({},ve),{},{font:'"Yu-Gi-Oh! DF Leisho 3"',fontStyle:"ocg",metricMethod:"compact",fontList:[],variant:"default-ocg"}),Oe={tcg:Object(l.a)(Object(l.a)({},je),{},{variant:"tcg",fontList:[{bulletWidth:38,fontSize:40.2,lineHeight:42.1,lineCount:5,bulletOffset:1},{bulletWidth:30,fontSize:33.2,lineHeight:35.1,lineCount:6},{bulletWidth:26,fontSize:28.2,lineHeight:30.3,lineCount:7},{bulletWidth:23,fontSize:24.38,lineHeight:24.7,lineCount:8},{bulletWidth:23,fontSize:19.94,lineHeight:21.15,lineCount:10,bulletOffset:1},{bulletWidth:21,fontSize:18.5,lineHeight:19.2,lineCount:11,bulletOffset:1},{bulletWidth:19,fontSize:17,lineHeight:17.6,lineCount:12,bulletOffset:1},{bulletWidth:17,fontSize:15.6,lineHeight:16.3,lineCount:13,bulletOffset:1}]}),"tcg-stat":Object(l.a)(Object(l.a)({},je),{},{variant:"tcg-stat",fontList:[{bulletWidth:40,fontSize:44.2,lineHeight:47.1,lineCount:4,bulletOffset:2},{bulletWidth:30,fontSize:34.2,lineHeight:36.5,lineCount:5},{bulletWidth:26,fontSize:28.2,lineHeight:30.5,lineCount:6},{bulletWidth:23,fontSize:24.5,lineHeight:24.7,lineCount:7},{bulletWidth:21,fontSize:19.01,lineHeight:20.15,lineCount:9,bulletOffset:1},{bulletWidth:20,fontSize:17.5,lineHeight:18.2,lineCount:10,bulletOffset:1},{bulletWidth:17,fontSize:15.7,lineHeight:16.5,lineCount:11,bulletOffset:1}]}),"tcg-type-stat":Object(l.a)(Object(l.a)({},je),{},{variant:"tcg-type-stat",fontList:[{bulletWidth:40,fontSize:44.2,lineHeight:47.1,lineCount:3,bulletOffset:1},{bulletWidth:30,fontSize:34.2,lineHeight:36.5,lineCount:4},{bulletWidth:26,fontSize:27.2,lineHeight:29.5,lineCount:5},{bulletWidth:23,fontSize:24.5,lineHeight:24.7,lineCount:6},{bulletWidth:23,fontSize:19.28,lineHeight:21.3,lineCount:7},{bulletWidth:23,fontSize:17.78,lineHeight:18.9,lineCount:8},{bulletWidth:19,fontSize:15.46,lineHeight:16.8,lineCount:9,bulletOffset:1},{bulletWidth:19,fontSize:12.99,lineHeight:15,lineCount:10,bulletOffset:2}]}),"tcg-type":Object(l.a)(Object(l.a)({},je),{},{variant:"tcg-type",fontList:[{bulletWidth:40,fontSize:41.2,lineHeight:44.1,lineCount:4,bulletOffset:2},{bulletWidth:32,fontSize:33.2,lineHeight:35.5,lineCount:5},{bulletWidth:26,fontSize:27.2,lineHeight:29.5,lineCount:6},{bulletWidth:23,fontSize:24.5,lineHeight:24.7,lineCount:7},{bulletWidth:23,fontSize:19.95,lineHeight:21.3,lineCount:8},{bulletWidth:23,fontSize:18.8,lineHeight:18.8,lineCount:9},{bulletWidth:20,fontSize:16.8,lineHeight:17.7,lineCount:10,bulletOffset:1},{bulletWidth:19,fontSize:15.1,lineHeight:16.1,lineCount:11,bulletOffset:1},{bulletWidth:17,fontSize:14.1,lineHeight:14.7,lineCount:12,bulletOffset:1}]}),"tcg-pendulumLarge":Object(l.a)(Object(l.a)({},je),{},{variant:"tcg-pendulumLarge",fontList:[{bulletWidth:38,fontSize:36.8,lineHeight:43.3,lineCount:4,bulletOffset:1},{bulletWidth:32,fontSize:31.5,lineHeight:35.6,lineCount:5,bulletOffset:1},{bulletWidth:26,fontSize:28.1,lineHeight:30.1,lineCount:6},{bulletWidth:23,fontSize:23.7,lineHeight:25.8,lineCount:7},{bulletWidth:22,fontSize:19.54,lineHeight:22.7,lineCount:8,bulletOffset:1},{bulletWidth:20,fontSize:17.14,lineHeight:18.55,lineCount:10,bulletOffset:1},{bulletWidth:18,fontSize:15.6,lineHeight:16.4,lineCount:11,bulletOffset:1},{bulletWidth:17,fontSize:14.4,lineHeight:15,lineCount:12,bulletOffset:1}]}),"tcg-pendulumLarge-stat":Object(l.a)(Object(l.a)({},je),{},{variant:"tcg-pendulumLarge-stat",fontList:[{bulletWidth:41,fontSize:39.5,lineHeight:47.9,lineCount:3,bulletOffset:2},{bulletWidth:34,fontSize:32.6,lineHeight:36,lineCount:4},{bulletWidth:26,fontSize:26.7,lineHeight:29.5,lineCount:5},{bulletWidth:23,fontSize:24.8,lineHeight:24.7,lineCount:6},{bulletWidth:20,fontSize:17,lineHeight:18.65,lineCount:8,bulletOffset:1},{bulletWidth:17,fontSize:15.3,lineHeight:16.7,lineCount:9,bulletOffset:1},{bulletWidth:16,fontSize:14.4,lineHeight:15,lineCount:10,bulletOffset:1}]}),"tcg-pendulumLarge-type-stat":Object(l.a)(Object(l.a)({},je),{},{variant:"tcg-pendulumLarge-type-stat",fontList:[{bulletWidth:40,fontSize:44.4,lineHeight:54.1,lineCount:2,bulletOffset:1},{bulletWidth:30,fontSize:33.5,lineHeight:37.5,lineCount:3},{bulletWidth:26,fontSize:26.6,lineHeight:28.5,lineCount:4},{bulletWidth:23,fontSize:24.7,lineHeight:23.3,lineCount:5},{bulletWidth:22,fontSize:19.4,lineHeight:19.5,lineCount:6,bulletOffset:1},{bulletWidth:20,fontSize:18.2,lineHeight:16.9,lineCount:7,bulletOffset:1},{bulletWidth:17,fontSize:15.9,lineHeight:14.8,lineCount:8,bulletOffset:1},{bulletWidth:16,fontSize:13.7,lineHeight:13.2,lineCount:9,bulletOffset:1}]}),"tcg-pendulumLarge-type":Object(l.a)(Object(l.a)({},je),{},{variant:"tcg-pendulumLarge-type",fontList:[{bulletWidth:40,fontSize:38.9,lineHeight:45.5,lineCount:3,bulletOffset:1},{bulletWidth:36,fontSize:32.4,lineHeight:36.9,lineCount:4,bulletOffset:1},{bulletWidth:28,fontSize:26.5,lineHeight:28.8,lineCount:5},{bulletWidth:25,fontSize:22.2,lineHeight:24.5,lineCount:6},{bulletWidth:22,fontSize:19.5,lineHeight:21.2,lineCount:7},{bulletWidth:20,fontSize:17.6,lineHeight:18.5,lineCount:8,bulletOffset:1},{bulletWidth:19,fontSize:15.7,lineHeight:16.6,lineCount:9},{bulletWidth:18,fontSize:14.1,lineHeight:15,lineCount:10,bulletOffset:1},{bulletWidth:16,fontSize:12.4,lineHeight:13.4,lineCount:11,bulletOffset:1}]})},we={tcg:Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg",fontList:[{bulletWidth:38,fontSize:40.2,lineHeight:42.1,lineCount:5,bulletOffset:1},{bulletWidth:30,fontSize:33.2,lineHeight:35.1,lineCount:6},{bulletWidth:26,fontSize:28.2,lineHeight:30.3,lineCount:7},{bulletWidth:23,fontSize:24.38,lineHeight:24.7,lineCount:8},{bulletWidth:23,fontSize:19.94,lineHeight:21.15,lineCount:10,bulletOffset:1},{bulletWidth:21,fontSize:18.5,lineHeight:19.2,lineCount:11,bulletOffset:1},{bulletWidth:19,fontSize:17,lineHeight:17.6,lineCount:12,bulletOffset:1},{bulletWidth:17,fontSize:15.6,lineHeight:16.3,lineCount:13,bulletOffset:1}]}),"tcg-stat":Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg-stat",fontList:[{bulletWidth:40,fontSize:42.2,lineHeight:43.9,lineCount:4,bulletOffset:2},{bulletWidth:32,fontSize:33.2,lineHeight:35.5,lineCount:5},{bulletWidth:26,fontSize:27.2,lineHeight:29.5,lineCount:6},{bulletWidth:23,fontSize:24.3,lineHeight:24.7,lineCount:7},{bulletWidth:21,fontSize:19.01,lineHeight:20.15,lineCount:9,bulletOffset:1},{bulletWidth:20,fontSize:17.5,lineHeight:18.2,lineCount:10,bulletOffset:1},{bulletWidth:17,fontSize:15.7,lineHeight:16.5,lineCount:11,bulletOffset:1}]}),"tcg-type-stat":Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg-type-stat",fontList:[{bulletWidth:40,fontSize:45.2,lineHeight:48.1,lineCount:3,bulletOffset:1},{bulletWidth:30,fontSize:34.2,lineHeight:36.5,lineCount:4},{bulletWidth:26,fontSize:27.2,lineHeight:29.5,lineCount:5},{bulletWidth:23,fontSize:24.3,lineHeight:24.7,lineCount:6},{bulletWidth:23,fontSize:19.95,lineHeight:21.3,lineCount:7,bulletOffset:1},{bulletWidth:23,fontSize:18.8,lineHeight:18.8,lineCount:8,bulletOffset:1},{bulletWidth:19,fontSize:16.7,lineHeight:16.7,lineCount:9,bulletOffset:1},{bulletWidth:19,fontSize:15,lineHeight:15,lineCount:10,bulletOffset:2}]}),"tcg-type":Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg-type",fontList:[{bulletWidth:40,fontSize:42.2,lineHeight:43.9,lineCount:4,bulletOffset:2},{bulletWidth:32,fontSize:33.2,lineHeight:35.5,lineCount:5},{bulletWidth:26,fontSize:27.2,lineHeight:29.5,lineCount:6},{bulletWidth:23,fontSize:24.3,lineHeight:24.7,lineCount:7},{bulletWidth:23,fontSize:19.95,lineHeight:21.3,lineCount:8},{bulletWidth:23,fontSize:18.8,lineHeight:18.8,lineCount:9},{bulletWidth:20,fontSize:16.8,lineHeight:17.7,lineCount:10,bulletOffset:1},{bulletWidth:19,fontSize:15.1,lineHeight:16.1,lineCount:11,bulletOffset:1},{bulletWidth:17,fontSize:14.1,lineHeight:14.7,lineCount:12,bulletOffset:1}]}),"tcg-pendulumLarge":Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg-pendulumLarge",fontList:[{bulletWidth:38,fontSize:37.6,lineHeight:43.3,lineCount:4,bulletOffset:1},{bulletWidth:32,fontSize:32.2,lineHeight:35.6,lineCount:5,bulletOffset:1},{bulletWidth:26,fontSize:28.7,lineHeight:30.1,lineCount:6},{bulletWidth:23,fontSize:24.2,lineHeight:25.8,lineCount:7},{bulletWidth:22,fontSize:19.94,lineHeight:22.7,lineCount:8,bulletOffset:1},{bulletWidth:20,fontSize:17.44,lineHeight:18.55,lineCount:10,bulletOffset:1},{bulletWidth:18,fontSize:15.8,lineHeight:16.4,lineCount:11,bulletOffset:1},{bulletWidth:17,fontSize:14.5,lineHeight:15,lineCount:12,bulletOffset:1}]}),"tcg-pendulumLarge-stat":Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg-pendulumLarge-stat",fontList:[{bulletWidth:41,fontSize:40.2,lineHeight:47.9,lineCount:3,bulletOffset:2},{bulletWidth:34,fontSize:33.2,lineHeight:36,lineCount:4},{bulletWidth:26,fontSize:27.2,lineHeight:29.5,lineCount:5},{bulletWidth:23,fontSize:24.3,lineHeight:24.7,lineCount:6},{bulletWidth:20,fontSize:17.31,lineHeight:18.65,lineCount:8,bulletOffset:1},{bulletWidth:17,fontSize:15.5,lineHeight:16.7,lineCount:9,bulletOffset:1},{bulletWidth:16,fontSize:14.5,lineHeight:15,lineCount:10,bulletOffset:1}]}),"tcg-pendulumLarge-type-stat":Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg-pendulumLarge-type-stat",fontList:[{bulletWidth:40,fontSize:45.2,lineHeight:54.1,lineCount:2,bulletOffset:1},{bulletWidth:30,fontSize:34.2,lineHeight:37.5,lineCount:3},{bulletWidth:26,fontSize:27.2,lineHeight:28.5,lineCount:4},{bulletWidth:23,fontSize:25.2,lineHeight:23.3,lineCount:5},{bulletWidth:22,fontSize:19.85,lineHeight:19.5,lineCount:6,bulletOffset:1},{bulletWidth:20,fontSize:18.5,lineHeight:16.9,lineCount:7,bulletOffset:1},{bulletWidth:17,fontSize:16.1,lineHeight:14.8,lineCount:8,bulletOffset:1},{bulletWidth:16,fontSize:13.8,lineHeight:13.2,lineCount:9,bulletOffset:1}]}),"tcg-pendulumLarge-type":Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg-pendulumLarge-type",fontList:[{bulletWidth:40,fontSize:39.8,lineHeight:45.5,lineCount:3,bulletOffset:1},{bulletWidth:36,fontSize:33.2,lineHeight:36.9,lineCount:4,bulletOffset:1},{bulletWidth:28,fontSize:27.2,lineHeight:28.8,lineCount:5},{bulletWidth:25,fontSize:22.8,lineHeight:24.5,lineCount:6},{bulletWidth:22,fontSize:19.95,lineHeight:21.2,lineCount:7},{bulletWidth:20,fontSize:17.95,lineHeight:18.5,lineCount:8,bulletOffset:1},{bulletWidth:19,fontSize:16,lineHeight:16.6,lineCount:9},{bulletWidth:18,fontSize:14.3,lineHeight:15,lineCount:10,bulletOffset:1},{bulletWidth:16,fontSize:12.5,lineHeight:13.4,lineCount:11,bulletOffset:1}]}),ocg:Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg",fontList:[{bulletWidth:38,fontSize:43.2,lineHeight:50.1,lineCount:4,bulletOffset:2,headTextFontRatio:.25},{bulletWidth:30,fontSize:34.7,lineHeight:40.1,lineCount:5,bulletOffset:1,headTextFontRatio:.3},{bulletWidth:26,fontSize:28.7,lineHeight:32.8,lineCount:6,bulletOffset:1,headTextFontRatio:.3},{bulletWidth:16,fontSize:22,lineHeight:26,lineCount:7},{bulletWidth:16,fontSize:22,lineHeight:26,lineCount:8}]}),"ocg-stat":Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg-stat",fontList:[{bulletWidth:34,fontSize:38.7,lineHeight:44.1,lineCount:4,bulletOffset:3,headTextFontRatio:.25},{bulletWidth:30,fontSize:32.7,lineHeight:36.1,lineCount:5,bulletOffset:2,headTextFontRatio:.25},{bulletWidth:26,fontSize:28.7,lineHeight:32.8,lineCount:6,bulletOffset:1,headTextFontRatio:.3},{bulletWidth:16,fontSize:22.05,lineHeight:25.8,lineCount:7}]}),"ocg-type-stat":Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg-type-stat",fontList:[{bulletWidth:41,fontSize:45.7,lineHeight:49.8,lineCount:3,bulletOffset:3,headTextFontRatio:.25},{bulletWidth:32,fontSize:34.7,lineHeight:38.1,lineCount:4,bulletOffset:3,headTextFontRatio:.25},{bulletWidth:24,fontSize:27.7,lineHeight:30.1,lineCount:5,bulletOffset:2,headTextFontRatio:.3},{bulletWidth:16,fontSize:22.05,lineHeight:25.8,lineCount:6}]}),"ocg-type":Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg-type",fontList:[{bulletWidth:34,fontSize:38.7,lineHeight:44.1,lineCount:4,bulletOffset:3,headTextFontRatio:.25},{bulletWidth:30,fontSize:32.7,lineHeight:36.1,lineCount:5,bulletOffset:2,headTextFontRatio:.25},{bulletWidth:26,fontSize:28.7,lineHeight:32.8,lineCount:6,bulletOffset:1,headTextFontRatio:.3},{bulletWidth:16,fontSize:22.05,lineHeight:25.8,lineCount:7}]}),"ocg-pendulumLarge":Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg-pendulumLarge",fontList:[{bulletWidth:39,fontSize:45.2,lineHeight:55.1,lineCount:3,bulletOffset:2,headTextFontRatio:.25},{bulletWidth:31,fontSize:35.7,lineHeight:44.1,lineCount:4,bulletOffset:1,headTextFontRatio:.3},{bulletWidth:27,fontSize:29.7,lineHeight:35.8,lineCount:5,bulletOffset:1,headTextFontRatio:.3},{bulletWidth:16,fontSize:22,lineHeight:26,lineCount:6},{bulletWidth:16,fontSize:22,lineHeight:26,lineCount:7}]}),"ocg-pendulumLarge-stat":Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg-pendulumLarge-stat",fontList:[{bulletWidth:37,fontSize:40.7,lineHeight:48.1,lineCount:3,bulletOffset:3,headTextFontRatio:.25},{bulletWidth:30,fontSize:32.7,lineHeight:37.1,lineCount:4,bulletOffset:2,headTextFontRatio:.25},{bulletWidth:23,fontSize:25.7,lineHeight:29.8,lineCount:5,bulletOffset:1,headTextFontRatio:.3},{bulletWidth:16,fontSize:21.05,lineHeight:24.9,lineCount:6}]}),"ocg-pendulumLarge-type-stat":Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg-pendulumLarge-type-stat",fontList:[{bulletWidth:41,fontSize:45.7,lineHeight:54.8,lineCount:2,bulletOffset:3,headTextFontRatio:.25},{bulletWidth:32,fontSize:35.7,lineHeight:40.1,lineCount:3,bulletOffset:3,headTextFontRatio:.25},{bulletWidth:23,fontSize:26.7,lineHeight:30.6,lineCount:4,bulletOffset:2,headTextFontRatio:.3},{bulletWidth:16,fontSize:21.05,lineHeight:24.8,lineCount:5}]}),"ocg-pendulumLarge-type":Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg-pendulumLarge-type",fontList:[{bulletWidth:38,fontSize:43.7,lineHeight:49.8,lineCount:3,bulletOffset:3,headTextFontRatio:.25},{bulletWidth:31,fontSize:34.7,lineHeight:38.1,lineCount:4,bulletOffset:3,headTextFontRatio:.25},{bulletWidth:23,fontSize:26.7,lineHeight:30.6,lineCount:5,bulletOffset:2,headTextFontRatio:.3},{bulletWidth:16,fontSize:21.05,lineHeight:25.8,lineCount:6}]})},ke={Default:{value:"Default",labelKey:"input.name-style.font-type.default",fontData:{alphabetFont:"MatrixRegularSmallCaps, Times New Roman",font:"MatrixRegularSmallCaps, Times New Roman",fontStyle:"tcg",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",headTextHeightRatio:.55,ordinalFont:'"DFKakuTaiHiStd-W4"',symbolFont:"matrix, Times New Roman",symbolFontRatio:.775,vietnameseFont:"MatrixRegularSmallCaps",vietnameseFontRatio:1,variant:"default-name",fontList:[{bulletWidth:64,fontSize:91.5,headTextFontRatio:.19,letterSpacing:.015,lineCount:1,lineHeight:91.5,offsetY:0}],letterOffsetMap:{"\u2605":{ratio:.55,baseline:-.05,yRatio:1},"\u2606":{ratio:.55,baseline:-.05,yRatio:1},"\xa1":{ratio:1,baseline:-.098,edge:.02,yRatio:.58}},letterDeviationMap:{1:{threshold:.94,letterMap:{I:{uniformBoxDescent:1},i:{uniformBoxDescent:1},"\xcc":{uniformBoxDescent:1},"\xcd":{uniformBoxDescent:1},"\xce":{uniformBoxDescent:1},"\xcf":{uniformBoxDescent:1},"\xec":{uniformBoxDescent:1},"\xed":{uniformBoxDescent:1},"\xee":{uniformBoxDescent:1},"\xef":{uniformBoxDescent:1},"\u0128":{uniformBoxDescent:1},"\u0129":{uniformBoxDescent:1},"\u012a":{uniformBoxDescent:1},"\u012b":{uniformBoxDescent:1},"\u1ec8":{uniformBoxDescent:1},"\u1ec9":{uniformBoxDescent:1},"\u1eca":{uniformBoxDescent:11},"\u1ecb":{uniformBoxDescent:11},E:{uniformBoxDescent:1},"\xc8":{uniformBoxDescent:1},"\xc9":{uniformBoxDescent:1},"\xca":{uniformBoxDescent:1},"\xca\u0304":{uniformBoxDescent:1},"\xca\u030c":{uniformBoxDescent:1},"\xcb":{uniformBoxDescent:1},"\xe8":{uniformBoxDescent:1},"\xe9":{uniformBoxDescent:1},"\xea":{uniformBoxDescent:1},"\xea\u0304":{uniformBoxDescent:1},"\xea\u030c":{uniformBoxDescent:1},"\xeb":{uniformBoxDescent:1},"\u0112":{uniformBoxDescent:1},"\u0113":{uniformBoxDescent:1},"\u1eba":{uniformBoxDescent:1},"\u1ebb":{uniformBoxDescent:1},"\u1ebc":{uniformBoxDescent:1},"\u1ebd":{uniformBoxDescent:1},"\u1ebe":{uniformBoxDescent:1},"\u1ebf":{uniformBoxDescent:1},"\u1ec0":{uniformBoxDescent:1},"\u1ec1":{uniformBoxDescent:1},"\u1ec2":{uniformBoxDescent:1},"\u1ec3":{uniformBoxDescent:1},"\u1ec4":{uniformBoxDescent:1},"\u1ec5":{uniformBoxDescent:1},"E\u0329":{uniformBoxDescent:11},"e\u0329":{uniformBoxDescent:11},"\xc8\u0329":{uniformBoxDescent:11},"\xc9\u0329":{uniformBoxDescent:11},"\xe8\u0329":{uniformBoxDescent:11},"\u1eb8":{uniformBoxDescent:11},"\u1eb9":{uniformBoxDescent:11},"\u1ec6":{uniformBoxDescent:11},"\u1ec7":{uniformBoxDescent:11}}},2:{threshold:0,letterMap:{I:{uniformBoxDescent:1},i:{uniformBoxDescent:1},"\xcc":{uniformBoxDescent:1},"\xcd":{uniformBoxDescent:1},"\xce":{uniformBoxDescent:1},"\xcf":{uniformBoxDescent:1},"\xec":{uniformBoxDescent:1},"\xed":{uniformBoxDescent:1},"\xee":{uniformBoxDescent:1},"\xef":{uniformBoxDescent:1},"\u0128":{uniformBoxDescent:1},"\u0129":{uniformBoxDescent:1},"\u012a":{uniformBoxDescent:1},"\u012b":{uniformBoxDescent:1},"\u1ec8":{uniformBoxDescent:1},"\u1ec9":{uniformBoxDescent:1},"\u1eca":{uniformBoxDescent:20},"\u1ecb":{uniformBoxDescent:20},E:{uniformBoxDescent:1},"\xc8":{uniformBoxDescent:1},"\xc9":{uniformBoxDescent:1},"\xca":{uniformBoxDescent:1},"\xca\u0304":{uniformBoxDescent:1},"\xca\u030c":{uniformBoxDescent:1},"\xcb":{uniformBoxDescent:1},"\xe8":{uniformBoxDescent:1},"\xe9":{uniformBoxDescent:1},"\xea":{uniformBoxDescent:1},"\xea\u0304":{uniformBoxDescent:1},"\xea\u030c":{uniformBoxDescent:1},"\xeb":{uniformBoxDescent:1},"\u0112":{uniformBoxDescent:1},"\u0113":{uniformBoxDescent:1},"\u1eba":{uniformBoxDescent:1},"\u1ebb":{uniformBoxDescent:1},"\u1ebc":{uniformBoxDescent:1},"\u1ebd":{uniformBoxDescent:1},"\u1ebe":{uniformBoxDescent:1},"\u1ebf":{uniformBoxDescent:1},"\u1ec0":{uniformBoxDescent:1},"\u1ec1":{uniformBoxDescent:1},"\u1ec2":{uniformBoxDescent:1},"\u1ec3":{uniformBoxDescent:1},"\u1ec4":{uniformBoxDescent:1},"\u1ec5":{uniformBoxDescent:1},"E\u0329":{uniformBoxDescent:20},"e\u0329":{uniformBoxDescent:20},"\xc8\u0329":{uniformBoxDescent:20},"\xc9\u0329":{uniformBoxDescent:20},"\xe8\u0329":{uniformBoxDescent:20},"\u1eb8":{uniformBoxDescent:20},"\u1eb9":{uniformBoxDescent:20},"\u1ec6":{uniformBoxDescent:20},"\u1ec7":{uniformBoxDescent:20}}}}}},Arial:{value:"Arial",labelKey:"input.name-style.font-type.arial",fontData:{alphabetFont:"Arial",font:"Arial",fontStyle:"tcg",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",headTextHeightRatio:.825,ordinalFont:'"DFKakuTaiHiStd-W4"',symbolFont:"matrix",symbolFontRatio:.775,vietnameseFont:"Arial",vietnameseFontRatio:1,weight:"bold",variant:"arial-name",fontList:[{bulletWidth:40.67,fontSize:61,headTextFontRatio:.19,letterSpacing:-.14,lineCount:1,lineHeight:61,offsetY:3}]}},OCG:{value:"OCG",labelKey:"input.name-style.font-type.ocg",fontData:{alphabetFont:'"Yu-Gi-Oh! DF Leisho 3"',font:'"Yu-Gi-Oh! DF Leisho 3"',fontStyle:"ocg",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",headTextBold:!0,headTextHeightRatio:.775,headTextOverflow:"condense",metricMethod:"name",numberFont:"DFKakuTaiHiStd-W4",numberFontRatio:1,ordinalFont:'"DFKakuTaiHiStd-W4"',symbolFont:"matrix",symbolFontRatio:.775,vietnameseFont:'"Yu-Gi-Oh! DF Leisho 3"',vietnameseFontRatio:1,variant:"ocg-name",fontList:[{bulletWidth:42.67,fontSize:64,headTextFontRatio:.175,headTextSpacing:3,letterSpacing:-.03,lineCount:1,lineHeight:64,offsetY:0}]}}},Se={tcg:{font:"stone-serif-regular",alphabetFont:"stone-serif-regular",symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:"stone-serif-regular",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"tcg",variant:"tcg-password",fontList:[{offsetY:-1,bulletWidth:20.05,fontSize:21.2,lineHeight:21.2,lineCount:1,letterSpacing:-.01,headTextFontRatio:.4,largeSymbolRatio:1.25},{bulletWidth:20.05,fontSize:20,lineHeight:20,lineCount:1,letterSpacing:-.01,headTextFontRatio:.4,largeSymbolRatio:1.25}]},ocg:{font:'"FOT-Rodin Pro M"',alphabetFont:'"FOT-Rodin Pro M"',symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:'"DFKakuTaiHiStd-W4"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",metricMethod:"creator",fontStyle:"ocg",variant:"ocg-creator",fontList:[{bulletWidth:18,fontSize:19,letterSpacing:.05,lineHeight:20.5,lineCount:1,headTextFontRatio:0,wordLetterSpacing:.11}]}},Ce={tcg:{font:"stone-serif-regular",alphabetFont:"stone-serif-regular",symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:"stone-serif-regular",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"tcg",variant:"tcg-password",fontList:[{bulletWidth:20.05,fontSize:22.219,lineHeight:22.219,lineCount:1,letterSpacing:.1,headTextFontRatio:.4,largeSymbolRatio:1.25},{bulletWidth:20.05,fontSize:22.219,lineHeight:22.219,lineCount:1,letterSpacing:0,headTextFontRatio:.4,largeSymbolRatio:1.25,offsetY:1}]},ocg:{font:'"FOT-Rodin Pro M"',alphabetFont:'"FOT-Rodin Pro M"',numberFont:"stone-serif-regular",symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:'"DFKakuTaiHiStd-W4"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"ocg",metricMethod:"furigana",variant:"ocg-password",fontList:[{bulletWidth:20.05,fontSize:22.219,lineHeight:22.219,lineCount:1,letterSpacing:.1,headTextFontRatio:.4,largeSymbolRatio:1.25},{bulletWidth:20.05,fontSize:19,headTextFontRatio:0,largeSymbolRatio:1.25,lineCount:1,lineHeight:20.5,ordinalFontOffsetY:1,ordinalFontRatio:1.25}]}},Fe={font:"YuGiOhITCStoneSerifBSc",alphabetFont:"YuGiOhITCStoneSerifBSc",symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:"YuGiOhITCStoneSerifBSc",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"tcg",variant:"tcg-type-ability",fontList:[{bulletWidth:20.05,fontSize:31.5,lineHeight:31.5,lineCount:1,iconSymbolWidth:26,capitalLetterRatio:.95,letterSpacing:.02,headTextFontRatio:.4},{bulletWidth:21.8,fontSize:32.75,lineHeight:32.75,lineCount:1,iconSymbolWidth:26,capitalLetterRatio:.95,letterSpacing:-.03,headTextFontRatio:.4},{bulletWidth:14.8,fontSize:44.5,lineHeight:44.5,lineCount:1,iconSymbolWidth:45,capitalLetterRatio:.90001,squareBracketRatio:.94001,letterSpacing:-.03,headTextFontRatio:.4}]},Le={font:'"Yu-Gi-Oh! DF Leisho 3"',alphabetFont:'"Yu-Gi-Oh! DF Leisho 3"',symbolFont:"matrix",symbolFontRatio:.8,headTextHeightRatio:.775,ordinalFont:'"DFKakuTaiHiStd-W4"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"ocg",variant:"ocg-type-ability",fontList:[{bulletWidth:20.05,fontSize:25.2,lineHeight:25.2,lineCount:1,iconSymbolWidth:26,headTextFontRatio:.3},{bulletWidth:21.8,fontSize:26.5,lineHeight:26.5,lineCount:1,iconSymbolWidth:26,headTextFontRatio:.3},{bulletWidth:36.8,fontSize:48,lineHeight:48,lineCount:1,iconSymbolWidth:45,headTextFontRatio:.25,headTextSpacing:3,letterSpacing:-.07,squareBracketRatio:1.02501}]},Te={"tcg-small":Object(l.a)(Object(l.a)({},je),{},{variant:"tcg-small",fontList:[{bulletWidth:36,fontSize:36.3,lineHeight:37.2,lineCount:2,bulletOffset:1},{bulletWidth:36,fontSize:36.3,lineHeight:37.2,lineCount:2,bulletOffset:1},{bulletWidth:36,fontSize:36.3,lineHeight:37.2,lineCount:2,bulletOffset:1},{bulletWidth:26,fontSize:24.3,lineHeight:25.65,lineCount:3,bulletOffset:1},{bulletWidth:19,fontSize:18.5,lineHeight:19.23,lineCount:4,bulletOffset:3},{bulletWidth:18,fontSize:14.8,lineHeight:15.78,lineCount:5,bulletOffset:3},{bulletWidth:16,fontSize:12.4,lineHeight:13.32,lineCount:6,bulletOffset:2}]}),"tcg-medium":Object(l.a)(Object(l.a)({},je),{},{variant:"tcg-medium",fontList:[{bulletWidth:41,fontSize:50.3,lineHeight:56.35,lineCount:2},{bulletWidth:34,fontSize:35.3,lineHeight:38.85,lineCount:3,bulletOffset:2},{bulletWidth:27,fontSize:26.3,lineHeight:29.35,lineCount:4,bulletOffset:3},{bulletWidth:23,fontSize:24.3,lineHeight:24.35,lineCount:5},{bulletWidth:19,fontSize:19.5,lineHeight:20.23,lineCount:6},{bulletWidth:18,fontSize:17,lineHeight:17.4,lineCount:7,bulletOffset:1},{bulletWidth:16,fontSize:14.7,lineHeight:15.32,lineCount:8}]}),"tcg-large":Object(l.a)(Object(l.a)({},je),{},{variant:"tcg-large",fontList:[{bulletWidth:36,fontSize:35.3,lineHeight:37.65,lineCount:4,bulletOffset:1},{bulletWidth:30,fontSize:28.3,lineHeight:30.35,lineCount:5,bulletOffset:2},{bulletWidth:26,fontSize:24.3,lineHeight:25.85,lineCount:6,bulletOffset:2},{bulletWidth:23,fontSize:20.7,lineHeight:22.05,lineCount:7,bulletOffset:2},{bulletWidth:19,fontSize:18.5,lineHeight:19.33,lineCount:8,bulletOffset:1},{bulletWidth:18,fontSize:16.8,lineHeight:17.3,lineCount:9,bulletOffset:1},{bulletWidth:16,fontSize:14.7,lineHeight:15.52,lineCount:10}]})},Ne={"tcg-small":Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg-small",fontList:[{bulletWidth:36,fontSize:36.3,lineHeight:37.2,lineCount:2,bulletOffset:1},{bulletWidth:36,fontSize:36.3,lineHeight:37.2,lineCount:2,bulletOffset:1},{bulletWidth:36,fontSize:36.3,lineHeight:37.2,lineCount:2,bulletOffset:1},{bulletWidth:26,fontSize:24.3,lineHeight:25.65,lineCount:3,bulletOffset:1},{bulletWidth:19,fontSize:18.5,lineHeight:19.23,lineCount:4,bulletOffset:3},{bulletWidth:18,fontSize:14.8,lineHeight:15.78,lineCount:5,bulletOffset:3},{bulletWidth:16,fontSize:12.4,lineHeight:13.32,lineCount:6,bulletOffset:2}]}),"tcg-medium":Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg-medium",fontList:[{bulletWidth:41,fontSize:50.3,lineHeight:56.35,lineCount:2},{bulletWidth:34,fontSize:35.3,lineHeight:38.85,lineCount:3,bulletOffset:2},{bulletWidth:27,fontSize:26.3,lineHeight:29.35,lineCount:4,bulletOffset:3},{bulletWidth:23,fontSize:24.3,lineHeight:24.35,lineCount:5},{bulletWidth:19,fontSize:19.5,lineHeight:20.23,lineCount:6},{bulletWidth:18,fontSize:17,lineHeight:17.4,lineCount:7,bulletOffset:1},{bulletWidth:16,fontSize:14.7,lineHeight:15.32,lineCount:8}]}),"tcg-large":Object(l.a)(Object(l.a)({},ye),{},{variant:"tcg-large",fontList:[{bulletWidth:41,fontSize:40.7,lineHeight:48.52,lineCount:3,bulletOffset:1},{bulletWidth:36,fontSize:35.3,lineHeight:37.65,lineCount:4,bulletOffset:1},{bulletWidth:30,fontSize:28.3,lineHeight:30.35,lineCount:5,bulletOffset:2},{bulletWidth:26,fontSize:24.3,lineHeight:25.85,lineCount:6,bulletOffset:2},{bulletWidth:23,fontSize:20.7,lineHeight:22.05,lineCount:7,bulletOffset:2},{bulletWidth:19,fontSize:18.5,lineHeight:19.33,lineCount:8,bulletOffset:1},{bulletWidth:18,fontSize:16.8,lineHeight:17.3,lineCount:9,bulletOffset:1}]}),"ocg-small":Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg-small",fontList:[{bulletWidth:35,fontSize:38.55,lineHeight:39.2,headTextFontRatio:.2,lineCount:2,bulletOffset:3},{bulletWidth:35,fontSize:38.55,lineHeight:39.2,headTextFontRatio:.2,lineCount:2,bulletOffset:3},{bulletWidth:35,fontSize:38.55,lineHeight:39.2,headTextFontRatio:.2,lineCount:2,bulletOffset:3},{bulletWidth:16,fontSize:22.05,lineHeight:26.6,headTextFontRatio:.3,lineCount:3}]}),"ocg-medium":Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg-medium",fontList:[{bulletWidth:41,bulletOffset:3,fontSize:45.55,lineHeight:57.6,headTextFontRatio:.2,lineCount:2},{bulletWidth:31,bulletOffset:2,fontSize:35.55,lineHeight:40.6,lineCount:3},{bulletWidth:23,bulletOffset:1,fontSize:25.05,lineHeight:30.6,lineCount:4},{bulletWidth:16,fontSize:22.05,lineHeight:25.2,lineCount:5}]}),"ocg-large":Object(l.a)(Object(l.a)({},xe),{},{variant:"ocg-large",fontList:[{bulletWidth:37,fontSize:43.55,lineHeight:49.6,headTextFontRatio:.25,lineCount:3,bulletOffset:3},{bulletWidth:29,fontSize:32.55,lineHeight:38.6,lineCount:4,bulletOffset:1},{bulletWidth:23,fontSize:25.05,lineHeight:30.6,lineCount:5,bulletOffset:1},{bulletWidth:16,fontSize:22.05,lineHeight:25.9,lineCount:6}]})},Re={"\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\uff41":"a","\uff42":"b","\uff43":"c","\uff44":"d","\uff45":"e","\uff46":"f","\uff47":"g","\uff48":"h","\uff49":"i","\uff4a":"j","\uff4b":"k","\uff4c":"l","\uff4d":"m","\uff4e":"n","\uff4f":"o","\uff50":"p","\uff51":"q","\uff52":"r","\uff53":"s","\uff54":"t","\uff55":"u","\uff56":"v","\uff57":"w","\uff58":"x","\uff59":"y","\uff5a":"z","\uff21":"A","\uff22":"B","\uff23":"C","\uff24":"D","\uff25":"E","\uff26":"F","\uff27":"G","\uff28":"H","\uff29":"I","\uff2a":"J","\uff2b":"K","\uff2c":"L","\uff2d":"M","\uff2e":"N","\uff2f":"O","\uff30":"P","\uff31":"Q","\uff32":"R","\uff33":"S","\uff34":"T","\uff35":"U","\uff36":"V","\uff37":"W","\uff38":"X","\uff39":"Y","\uff3a":"Z","\u300c":"\uff62","\u300d":"\uff63","\u3001":"\uff64",":":"\uff1a","\u2200":"\u2c6f","\ua4ef":"\u2c6f","\ua4db":"\u0186","\ua4f1":"\u018e","\ua4de":"\u2132","\ua4e8":"\u2141","\ua4d8":"\ua7b0","\ua4f6":"\ua780","\u2142":"\ua780","\ua4d2":"\u0500","\ua4d5":"\ua7b1","\u0548":"\ua4f5","\ua4e5":"\u0245","\uff1c":"<","\uff1e":">","\uff01":"!","\uff08":"(","\uff09":")","\uff06":"&","\uff07":"'","\uff20":"@","\xd8":"\u2205"},Ie={"\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\uff41":"a","\uff42":"b","\uff43":"c","\uff44":"d","\uff45":"e","\uff46":"f","\uff47":"g","\uff48":"h","\uff49":"i","\uff4a":"j","\uff4b":"k","\uff4c":"l","\uff4d":"m","\uff4e":"n","\uff4f":"o","\uff50":"p","\uff51":"q","\uff52":"r","\uff53":"s","\uff54":"t","\uff55":"u","\uff56":"v","\uff57":"w","\uff58":"x","\uff59":"y","\uff5a":"z","\uff21":"A","\uff22":"B","\uff23":"C","\uff24":"D","\uff25":"E","\uff26":"F","\uff27":"G","\uff28":"H","\uff29":"I","\uff2a":"J","\uff2b":"K","\uff2c":"L","\uff2d":"M","\uff2e":"N","\uff2f":"O","\uff30":"P","\uff31":"Q","\uff32":"R","\uff33":"S","\uff34":"T","\uff35":"U","\uff36":"V","\uff37":"W","\uff38":"X","\uff39":"Y","\uff3a":"Z","\uff62":"\u300c","\uff63":"\u300d","\uff64":"\u3001","\uff1a":":","\u2200":"\u2c6f","\ua4ef":"\u2c6f","\ua4db":"\u0186","\ua4f1":"\u018e","\ua4de":"\u2132","\ua4e8":"\u2141","\ua4d8":"\ua7b0","\ua4f6":"\ua780","\u2142":"\ua780","\ua4d2":"\u0500","\ua4d5":"\ua7b1","\u0548":"\ua4f5","\ua4e5":"\u0245","\uff1c":"<","\uff1e":">","\uff01":"!","\uff08":"(","\uff09":")","\uff06":"&","\uff07":"'","\uff20":"@","\u2205":"\xd8"},Ee={"(\uff11)":"\u2460","(\uff12)":"\u2461","(\uff13)":"\u2462","(\uff14)":"\u2463","(\uff15)":"\u2464","(\uff16)":"\u2465","(\uff17)":"\u2466","(\uff18)":"\u2467","(\uff19)":"\u2468","(\uff11\uff10)":"\u2469","(\uff11\uff11)":"\u246a","(\uff11\uff12)":"\u246b","(\uff11\uff13)":"\u246c","(\uff11\uff14)":"\u246d","(\uff11\uff15)":"\u246e","(\uff11\uff16)":"\u246f","(\uff11\uff17)":"\u2470","(\uff11\uff18)":"\u2471","(\uff11\uff19)":"\u2472","(\uff12\uff10)":"\u2473","(1)":"\u2460","(2)":"\u2461","(3)":"\u2462","(4)":"\u2463","(5)":"\u2464","(6)":"\u2465","(7)":"\u2466","(8)":"\u2467","(9)":"\u2468","(10)":"\u2469","(11)":"\u246a","(12)":"\u246b","(13)":"\u246c","(14)":"\u246d","(15)":"\u246e","(16)":"\u246f","(17)":"\u2470","(18)":"\u2471","(19)":"\u2472","(20)":"\u2473"},ze={ocg:["\xa9\u30b9\u30bf\u30b8\u30aa\u30fb\u30c0\u30a4\u30b9\uff0f\u96c6\u82f1\u793e\u30fb\u30c6\u30ec\u30d3\u6771\u4eac\u30fbKONAMI","\xa9\u9ad8\u6a4b\u548c\u5e0c \u30b9\u30bf\u30b8\u30aa\u30fb\u30c0\u30a4\u30b9\uff0f\u96c6\u82f1\u793e","\xa9\u9ad8\u6a4b\u548c\u5e0c\uff0f\u96c6\u82f1\u793e"],tcg:["\xa92020 Studio Dice/SHUEISHA, TV TOKYO, KONAMI","\xa91996 KAZUKI TAKAHASHI","\xa9KAZUKI TAKAHASHI / SHUEISHA"]},De=[{label:"1st Edition",value:"1<st> Edition"},{label:"1\xe8re \xc9dition",value:"1<\xe8re> \xc9dition"},{label:"1\u2006. Auflage",value:"1\u2006. Auflage"},{label:"1\xaa Edizione",value:"1\xaa Edizione"},{label:"1\xaa Edi\xe7\xe3o",value:"1\xaa Edi\xe7\xe3o"},{label:"1\xaa Edici\xf3n",value:"1\xaa Edici\xf3n"}],Be={ocg:"\u203b\u30c7\u30c3\u30ad\u69cb\u7bc9\u306b\u306f\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\u3002",tcg:"This card cannot be in a Deck."},Pe={"\u6c34\u65cf":"Aqua","\u7363\u65cf":"Beast","\u7363\u6226\u58eb\u65cf":"Beast-Warrior","\u5275\u9020\u795e\u65cf":"Creator God","\u30b5\u30a4\u30d0\u30fc\u30b9\u65cf":"Cyberse","\u6050\u7adc\u65cf":"Dinosaur","\u5e7b\u795e\u7363\u65cf":"Divine-Beast","\u30c9\u30e9\u30b4\u30f3\u65cf":"Dragon","\u5929\u4f7f\u65cf":"Fairy","\u60aa\u9b54\u65cf":"Fiend","\u9b5a\u65cf":"Fish","\u30ae\u30e3\u30e9\u30af\u30b7\u30fc\u65cf":"Galaxy","\u5e7b\u60f3\u9b54\u65cf":"Illusion","\u6606\u866b\u65cf":"Insect","\u6a5f\u68b0\u65cf":"Machine","\u690d\u7269\u65cf":"Plant","\u30b5\u30a4\u30ad\u30c3\u30af\u65cf":"Psychic","\u708e\u65cf":"Pyro","\u722c\u866b\u985e\u65cf":"Reptile","\u5ca9\u77f3\u65cf":"Rock","\u6d77\u7adc\u65cf":"Sea Serpent","\u9b54\u6cd5\u4f7f\u3044\u65cf":"Spellcaster","\u96f7\u65cf":"Thunder","\u6226\u58eb\u65cf":"Warrior","\u9ce5\u7363\u65cf":"Winged Beast","\u5e7b\u7adc\u65cf":"Wyrm","\u30a2\u30f3\u30c7\u30c3\u30c8\u65cf":"Zombie","\u30b5\u30a4\u30dc\u30fc\u30b0\u65cf":"Cyborg","\u5929\u754c\u6226\u58eb\u65cf":"Celestial Warrior","\u30cf\u30a4\u30c9\u30e9\u30b4\u30f3\u65cf":"High Dragon","\u9b54\u5c0e\u9a0e\u58eb\u65cf":"Magical Knight","\u30aa\u30e1\u30ac\u30b5\u30a4\u30ad\u30c3\u30af\u65cf":"Omega Psychic","\u30e2\u30f3\u30b9\u30bf\u30fc":"Monster","\u9b54\u6cd5\u30ab\u30fc\u30c9":"Spell Card","\u7f60\u30ab\u30fc\u30c9":"Trap Card","\u30a2\u30af\u30b7\u30e7\u30f3":"Action","\u901a\u5e38":"Normal","\u52b9\u679c":"Effect","\u5100\u5f0f":"Ritual","\u30d5\u30e5\u30fc\u30b8\u30e7\u30f3":"Fusion","\u878d\u5408":"Fusion","\u30b7\u30f3\u30af\u30ed":"Synchro","\u30a8\u30af\u30b7\u30fc\u30ba":"Xyz","\u30da\u30f3\u30c7\u30e5\u30e9\u30e0":"Pendulum","\u30ea\u30f3\u30af":"Link","\u30de\u30ad\u30b7\u30de\u30e0":"Maximum","\u30c8\u30fc\u30af\u30f3":"Token","\u7279\u6b8a\u53ec\u559a":"Special Summon","\u30c0\u30fc\u30af\u30b7\u30f3\u30af\u30ed\u30e2\u30f3\u30b9\u30bf\u30fc":"Dark Synchro","\u30c1\u30e5\u30fc\u30ca\u30fc":"Tuner","\u30c7\u30e5\u30a2\u30eb":"Gemini","\u30ea\u30d0\u30fc\u30b9":"Flip","\u30c8\u30a5\u30fc\u30f3":"Toon","\u30b9\u30d4\u30ea\u30c3\u30c8":"Spirit","\u30e6\u30cb\u30aa\u30f3":"Union",[ze.ocg[2]]:ze.tcg[2],[ze.ocg[1]]:ze.tcg[1],[ze.ocg[0]]:ze.tcg[0],"{\u7d14|\u30b8\u30e5\u30f3}{\u72d0|\u3053}":"Junko","\u81ea\u5206\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u52b9\u679c\u30e2\u30f3\u30b9\u30bf\u30fc\xd7\uff12\u4f53\u4ee5\u4e0a\n\u2460\uff1a\u3053\u306e\u30ab\u30fc\u30c9\u304c\u30e2\u30f3\u30b9\u30bf\u30fc\u30be\u30fc\u30f3\u306b\u5b58\u5728\u3059\u308b\u9650\u308a\u3001\u76f8\u624b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30e2\u30f3\u30b9\u30bf\u30fc\u304c\u52b9\u679c\u3092\u767a\u52d5\u3059\u308b\u5ea6\u306b\u3001\u305d\u306e\u76f8\u624b\u306e\u8868\u5074\u8868\u793a\u30e2\u30f3\u30b9\u30bf\u30fc\u306b\u30d4\u30e5\u30a2\u30ab\u30a6\u30f3\u30bf\u30fc\u3092\uff11\u3064\u7f6e\u304f(\u6700\u5927\uff11\u3064\u307e\u3067\uff09\u3002\u2461\uff1a\u3053\u306e\u30ab\u30fc\u30c9\u306f\u30d4\u30e5\u30a2\u30ab\u30a6\u30f3\u30bf\u30fc\u304c\u7f6e\u304b\u308c\u3066\u3044\u308b\u30e2\u30f3\u30b9\u30bf\u30fc\u304c\u767a\u52d5\u3057\u305f\u52b9\u679c\u3092\u53d7\u3051\u306a\u3044\u3002\u2462\uff1a\u3053\u306e\u30ab\u30fc\u30c9\u306f\u30d4\u30e5\u30a2\u30ab\u30a6\u30f3\u30bf\u30fc\u304c\u7f6e\u304b\u308c\u3066\u3044\u308b\u30e2\u30f3\u30b9\u30bf\u30fc\u3068\u306e\u6226\u95d8\u3067\u306f\u7834\u58ca\u3055\u308c\u306a\u3044\u3002":"[2+ Effect Monsters on your field]\nEach time an opponent's monster activates its effect, place 1 Pure Counter on that opponent's monster (max. 1) after that effect resolves. Unaffected by activated effects from monster with a Pure Counter. Cannot be destroyed by battle with monsters with a Pure Counter.","\u203b\u516c\u5f0f\u306e\u30c7\u30e5\u30a8\u30eb\u3067\u306f\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\u3002":"This card cannot be used in a Duel.","\u2460\uff1a\uff11\u30bf\u30fc\u30f3\u306b\uff11\u5ea6\u3001\uff18\uff10\uff10\uff2c\uff30\u3092\u6255\u3063\u3066\u767a\u52d5\u3067\u304d\u308b\u3002\u3053\u306e\u30ab\u30fc\u30c9\u306e\uff30\u30b9\u30b1\u30fc\u30eb\u30921\u3064\u4e0a\u3052\u308b\u3002":"Once per turn: You can pay 800 LP, increase this card's Pendulum Scale by 1.",[Be.ocg]:Be.tcg},Me=Object.entries(Pe).reduce((e,t)=>{const[n,a]=t;return e[a]=n,e},{"Once per turn: You can pay 800 LP, increase this card\u2019s Pendulum Scale by 1.":"\u2460\uff1a\uff11\u30bf\u30fc\u30f3\u306b\uff11\u5ea6\u3001\uff18\uff10\uff10\uff2c\uff30\u3092\u6255\u3063\u3066\u767a\u52d5\u3067\u304d\u308b\u3002\u3053\u306e\u30ab\u30fc\u30c9\u306e\uff30\u30b9\u30b1\u30fc\u30eb\u30921\u3064\u4e0a\u3052\u308b\u3002"}),He={normal:{name:"normal",nameKey:"input.frame.normal",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#c49c5e",sortWeight:100},effect:{name:"effect",nameKey:"input.frame.effect",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#b96c49",sortWeight:90},fusion:{name:"fusion",nameKey:"input.frame.fusion",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#8948a4",sortWeight:80},synchro:{name:"synchro",nameKey:"input.frame.synchro",labelColor:"#000",edition:"normal",labelBackgroundColor:"#efefef",sortWeight:70},xyz:{name:"xyz",nameKey:"input.frame.xyz",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#000000",sortWeight:60},link:{name:"link",nameKey:"input.frame.link",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#0c8ac6",sortWeight:50},ritual:{name:"ritual",nameKey:"input.frame.ritual",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#5e85c9",sortWeight:85},spell:{name:"spell",nameKey:"input.frame.spell",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#1b8f83",sortWeight:30},trap:{name:"trap",nameKey:"input.frame.trap",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#c32a8c",sortWeight:25},token:{name:"token",nameKey:"input.frame.token",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#6f6c6b",sortWeight:1},"dark-synchro":{name:"dark-synchro",nameKey:"input.frame.dark-synchro",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#4d4543",sortWeight:15},obelisk:{name:"obelisk",nameKey:"input.frame.obelisk",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#515eb0",sortWeight:10},osiris:{name:"osiris",nameKey:"input.frame.osiris",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#bd5044",sortWeight:9},ra:{name:"ra",nameKey:"input.frame.ra",labelColor:"#000",edition:"extendend",labelBackgroundColor:"#b9ad34",sortWeight:8},raviel:{name:"raviel",nameKey:"input.frame.raviel",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#313c5f",sortWeight:7},uria:{name:"uria",nameKey:"input.frame.uria",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#623320",sortWeight:6},hamon:{name:"hamon",nameKey:"input.frame.hamon",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#534a19",sortWeight:5},"lg-dragon":{name:"lg-dragon",nameKey:"input.frame.lg-dragon",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#4e84a4",sortWeight:3},"speed-skill":{name:"speed-skill",nameKey:"input.frame.speed-skill",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#199cd5",sortWeight:2},zarc:{name:"zarc",nameKey:"input.frame.zarc",labelColor:"#000",edition:"extendend",labelBackgroundColorList:["rgba(185,108,73,1)","rgba(137,72,164,1)","rgba(239,239,239,1)","rgba(0,0,0,1)"],labelBackgroundImage:"linear-gradient(90deg, ".concat(["rgba(185,108,73,1) 23%","rgba(137,72,164,1) 27%","rgba(137,72,164,1) 49%","rgba(239,239,239,1) 51%","rgba(239,239,239,1) 73%","rgba(0,0,0,1) 77%"].join(", "),")"),sortWeight:4}},Ae=Object.values(He),We=He.effect,Ke={bottomLeftFrame:{labelKey:"input.advanced-frame.name.bottom-left"},bottomRightFrame:{labelKey:"input.advanced-frame.name.bottom-right"},effectBackground:{labelKey:"input.advanced-frame.name.effect-background"},pendulumEffectBackground:{labelKey:"input.advanced-frame.name.pendulum-effect-background"},frame:{labelKey:"input.advanced-frame.name.primary"},topLeftFrame:{labelKey:"input.advanced-frame.name.top-left"},topRightFrame:{labelKey:"input.advanced-frame.name.top-right"},foil:{labelKey:"input.foil.label"}},Ye={normal:[{top:175,left:55,width:100,height:100},{top:165,left:323,width:170,height:80},{top:175,left:655,width:100,height:100},{top:442,left:45,width:70,height:170},{top:0,left:0,width:0,height:0},{top:442,left:700,width:70,height:170},{top:775,left:55,width:100,height:100},{top:810,left:323,width:170,height:80},{top:775,left:655,width:100,height:100}],pendulum:[{top:169,left:11,width:100,height:100},{top:159,left:323,width:170,height:80},{top:169,left:699,width:100,height:100},{top:572,left:1,width:70,height:170},{top:0,left:0,width:0,height:0},{top:572,left:744,width:70,height:170},{top:1054,left:11,width:100,height:100},{top:1093,left:323,width:170,height:80},{top:1054,left:699,width:100,height:100}]},Ue=[-45,0,45,-90,0,90,-135,180,135],Ge=[-38,-28,-38,-28,0,-28,-38,-28,-38],Xe=[-30,-23,-30,-28,0,-28,-30,-23,-30],Ve=[0,0,0,0,0,0,0,0,0],qe=[-5,0,5,0,0,0,5,0,-5],_e=Object.values(Object(l.a)(Object(l.a)(Object(l.a)({},P),H),W)).reduce((e,t)=>(e[t.imagePresetPath]=t.imagePresetSource,e),{}),Je=Object.values(R).map(e=>{const t=e.fileKey,n=["ocg","tcg"].includes(t);return[...[...F].filter(e=>{let{isOption:t}=e;return!0===t}).flatMap(e=>{let{name:n}=e;return{imagePresetPath:"icon-".concat(t,"-").concat(n.toLowerCase()),imagePresetSource:"attribute/attr-".concat(t,"-").concat(n.toLowerCase(),".png")}}),...[...n?L:[]].filter(e=>{let{isOption:t}=e;return!0===t}).flatMap(e=>{let{name:n}=e;return{imagePresetPath:"icon-".concat(t,"-").concat(n.toLowerCase()),imagePresetSource:"attribute/attr-".concat(t,"-").concat(n.toLowerCase(),".png")}})]}),$e=Je.flatMap(e=>e).reduce((e,t)=>(e[t.imagePresetPath]=t.imagePresetSource,e),{}),Qe=Object(l.a)(Object(l.a)({},$e),_e),Ze=new RegExp("[A-Z\uff21-\uff3a\xc0-\xd6]"),et=new RegExp("[\\[\\]\u3010\u3011]"),tt="<(\\/?(".concat(["i","b","pre"].join("|"),"))( [^<]*|)>"),nt=(new RegExp(tt),"img"),at="<(".concat([nt].join("|"),").*?\\/>"),rt=(new RegExp(at),"</i>"),it="</b>",ot="<pre>",lt="</pre>",st="\u29da",ct="\u29db",dt="\u27c5",ut="\u27c6",bt="\u169b",mt="\u169c",pt="\u27ec",gt="\u27ed",ht="\u2987",ft="\u2988",vt=new RegExp("[".concat([mt,bt,ut,dt,gt,pt,ct,st].join(""),"]|(\\|[^}]+})"),"g"),yt="".concat(ht,"[^").concat(ht).concat(ft,"]*").concat(ft,"$"),jt=new RegExp(yt),xt="[#@\u221ea-z\uff41-\uff5aA-Z\uff21-\uff3a0-9\uff10-\uff19\xc0-\xd6\xd9-\xf6\xf9-\xff\u0100-\u017e\u0180-\u024f\u1e00-\u1eff!\uff01+\xd7\uff03#@\u221e\u2018\u201c\u2019\u201d:;\\[\\]\\(\\)\u3010\u3011\\.,]+",Ot=new RegExp(xt),wt=new RegExp("[\u0102\u0110\u01a0\u0103\u0111\u01a1\u01af\u0102\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ec0\u1ec0\u1ec2\u01b0\u0103\u1ea1\u1ea3\u1ea5\u1ea7\u1ea9\u1eab\u1ead\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\u1eb9\u1ebb\u1ec1\u1ec1\u1ec3\u1ec4\u1ec6\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1ec5\u1ebf\u1ec7\u1ec9\u1ecb\u1ecd\u1ecf\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u1edb\u1edd\u1edf\u1ee1\u1ee3\u1ee5\u1ee7\u1ee9\u1eeb\u1eec\u1eee\u1ef0\u1ef2\u1ef4\xdd\u1ef6\u1ef8\u1eed\u1eef\u1ef1\u1ef3\u1ef5\u1ef7\u1ef9]"),kt=new RegExp("(\\{[^\\{\\}]+?\\}|".concat(xt,"|").concat(ht,"[^").concat(ht).concat(ft,"]*").concat(ft,"|.)"),"u"),St="\u2e26\u2e27",Ct="\u2e26\u2e26\u2e27\u2e27",Ft="(^|[-\\u2014/[(\\u2018".concat(st).concat(dt).concat(bt).concat(pt,'\\s])"'),Lt=new RegExp(Ft,"g"),Tt="".concat(st,"|").concat(ct),Nt=new RegExp(Tt),Rt="(\\n^[\\r\\t\\f\\v \\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]*\\n".concat(st,"?(\\(|\\*)[\\w\\W]+").concat(ct,"?)\\s*$"),It=new RegExp("[".concat("\uff0b\uff0d\xb1~\xa1\xd8#\u2605\u2606@\u221e\u0370-\u03ff\u1f00-\u1ffe","]")),Et=pe.map(e=>{var t;return null!==(t=e.regexForm)&&void 0!==t?t:e.shortForm}).join("|"),zt="(".concat(Et,")(?![^{]*})"),Dt="\u30fd\u30fe\u30fc\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u31f0\u31f1\u31f2\u31f3\u31f4\u31f5\u31f6\u31f7\u31f8\u31f9\u31fa\u31fb\u31fc\u31fd\u31fe\u31ff\u3005\u303b",Bt=new RegExp("[".concat(Dt,"]")),Pt=".[".concat(Dt,")\\]\uff5d\u3015\u3009\u300b\u300d\uff63\u300f\u3011\u3019\u3017\u301f'\"\u2019\u201d\uff60\xbb\u2010\u30a0\u2013\u301c\uff1f!\u203c\u2047\u2048\u2049\u30fb\u3001:;,\u3002.\uff61\uff64]+"),Mt=new RegExp("[\u2460-\u2473\u203b]"),Ht=new RegExp("[\uff21-\uff3a\uff41-\uff5a]"),At=new RegExp("[\uff10-\uff19]"),Wt=new RegExp("[0-9]"),Kt=/[\u3042\u3044\u3046\u3048\u304a\u304b\u304c\u304d\u304e\u304f\u3050\u3051\u3052\u3053\u3054\u3055\u3056\u3057\u3058\u3059\u305a\u305b\u305c\u305d\u305e\u305f\u3060\u3061\u3062\u3064\u3065\u3066\u3067\u3068\u3069\u306a\u306b\u306c\u306d\u306e\u306f\u3070\u3071\u3072\u3073\u3074\u3075\u3076\u3077\u3078\u3079\u307a\u307b\u307c\u307d\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093\u3094]/,Yt=/[\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ac\u30ad\u30ae\u30af\u30b0\u30b1\u30b2\u30b3\u30b4\u30b5\u30b6\u30b7\u30b8\u30b9\u30ba\u30bb\u30bc\u30bd\u30be\u30bf\u30c0\u30c1\u30c2\u30c4\u30c5\u30c6\u30c7\u30c8\u30c9\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d0\u30d1\u30d2\u30d3\u30d4\u30d5\u30d6\u30d7\u30d8\u30d9\u30da\u30db\u30dc\u30dd\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3\u30f4\u30f7\u30f8\u30f9\u30fa]/,Ut=new RegExp("[\u30fb]"),Gt=new RegExp("[\u30fc]"),Xt=new RegExp("[\u2015]"),Vt=new RegExp("[".concat("\uff1a","]")),qt=new RegExp("[".concat("\u3002\uff64","]")),_t=new RegExp("[".concat("\uff1a","]")),Jt={"\u3002":-.2,"\uff64":-.2,"\uff62":0,"\uff63":0,"\uff1a":0,">":.25,"<":-.25},$t={"\u3002":-.5,"\uff1a":-.25},Qt={">":.125,"<":.125},Zt={},en={},tn={},nn=e=>"tcg"===e?7:1,an=/{[^{}]+?}/,rn="\\s\\-/",on=-2.25,ln=()=>({version:2,format:"tcg",region:"en",frame:"fusion",leftFrame:"auto",rightFrame:"auto",pendulumRightFrame:"auto",foil:"normal",opacity:b(),finish:[],otherFinish:["normal","normal","normal","normal"],artFinish:"normal",name:"Junko",nameStyleType:"auto",nameStyle:X(),attribute:"LIGHT",attributeType:"auto",subFamily:E,cardIcon:"auto",star:6,starAlignment:"auto",starList:[],art:"https://i.imgur.com/h5kXZeC.png",artData:"",artFit:!1,artSource:"online",artCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},hasBackground:!1,background:"",backgroundData:"",backgroundFit:!1,backgroundSource:"online",backgroundType:"fit",backgroundCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},linkMap:["1","3","7","9"],linkRating:"",isLink:!1,isPendulum:!1,pendulumFrame:"auto",pendulumEffect:"Once per turn: You can pay 800 LP, increase this card's Pendulum Scale by 1.",pendulumScaleRed:"4",pendulumScaleBlue:"4",pendulumSize:ne,typeAbility:["Fairy","Fusion","Effect"],effectStyle:{condenseTolerant:"strict",fontStyle:"auto",upSize:0,background:"auto",minLine:0,justifyRatio:100},pendulumStyle:{fontStyle:"auto",upSize:0,background:"auto",minLine:0,justifyRatio:100},effect:"[2+ Effect Monsters on your field]\nEach time an opponent's monster activates its effect, place 1 Pure Counter on that opponent's monster (max. 1) after that effect resolves. Unaffected by activated effects from monster with a Pure Counter. Cannot be destroyed by battle with monsters with a Pure Counter.",setId:"YGOC-EN001",atk:"2000",def:"2000",password:"18199611",sticker:"holo5",firstEditionText:"1<st> Edition",isFirstEdition:!0,cornerText:"",hasCornerText:!1,isSpeedCard:!1,isLimitedEdition:!1,isDuelTerminalCard:!1,isLegacyCard:!1,creator:"\xa92020 Studio Dice/SHUEISHA, TV TOKYO, KONAMI",furiganaHelper:!0,statTextStyle:[!1,"#000000",!1,"#000000"],typeTextStyle:[!1,"#000000",!1,"#000000"],effectTextStyle:[!1,"#000000",!1,"#000000"],pendulumTextStyle:[!1,"#000000",!1,"#000000"],otherTextStyle:[!1,"#000000",!1,"#000000"],flag:[0,0],dyeList:["","","","","","",""],externalInfo:{}}),sn=()=>Object(l.a)({id:Object(Q.a)()},ln()),cn=()=>({version:3,format:"tcg",region:"en",frame:"effect",leftFrame:"auto",rightFrame:"auto",pendulumRightFrame:"auto",foil:"normal",opacity:b(),finish:[],artFinish:"normal",otherFinish:["normal","normal","normal","normal"],name:"",nameStyleType:"auto",nameStyle:X(),attribute:C,attributeType:"auto",subFamily:E,cardIcon:"auto",star:6,starList:[],starAlignment:"auto",art:"https://i.imgur.com/jjtCuG5.png",artData:"",artSource:"online",artFit:!1,artCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},hasBackground:!1,background:"",backgroundData:"",backgroundFit:!1,backgroundSource:"online",backgroundType:"fit",backgroundCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},linkMap:[],linkRating:"",isLink:null,isPendulum:!1,pendulumFrame:"auto",pendulumEffect:"",pendulumScaleRed:"4",pendulumScaleBlue:"4",pendulumSize:ne,typeAbility:[],effectStyle:{condenseTolerant:"strict",fontStyle:"auto",upSize:0,background:"auto",minLine:0,justifyRatio:100},pendulumStyle:{fontStyle:"auto",upSize:0,background:"auto",minLine:0,justifyRatio:100},effect:"",setId:"",atk:"0",def:"0",password:"",sticker:D,firstEditionText:"1<st> Edition",isFirstEdition:!1,cornerText:"",hasCornerText:!1,isSpeedCard:!1,isLimitedEdition:!1,isDuelTerminalCard:!1,isLegacyCard:!1,creator:"",furiganaHelper:!0,statTextStyle:[!1,"#000000",!1,"#000000"],typeTextStyle:[!1,"#000000",!1,"#000000"],effectTextStyle:[!1,"#000000",!1,"#000000"],pendulumTextStyle:[!1,"#000000",!1,"#000000"],otherTextStyle:[!1,"#000000",!1,"#000000"],dyeList:["","","","","","",""],flag:[0,0],externalInfo:{}}),dn=[{subType:"artBorder",labelKey:"input.opacity.art-border.label",tooltipKey:"input.opacity.art-border.tooltip"},{subType:"nameBorder",labelKey:"input.opacity.name-border.label",tooltipKey:"input.opacity.name-border.tooltip"},{subType:"effectBox",labelKey:"input.opacity.effect-box.label",tooltipKey:"input.opacity.effect-box.tooltip"}],un=[{type:"body",label:"Card",labelKey:"input.opacity.body.label"},{type:"name",label:"Name",labelKey:"input.opacity.name.label"},{type:"pendulum",label:"Pendulum",labelKey:"input.opacity.pendulum.label"},{type:"text",label:"Effect",labelKey:"input.opacity.effect.label"}],bn=["#4D4D4D","#999999","#FFFFFF","#FF7F7F","#FFD27F","#FFFF7F","#7FFF7F","#7FBF7F","#7FFFFF","#7F7FFF","#BF7FBF","#FF7FFF","#333333","#808080","#cccccc","#FF0000","#FFA500","#FFFF00","#00FF00","#008000","#00FFFF","#0000FF","#800080","#FF00FF","#000000","#666666","#B3B3B3","#7F0000","#7F5200","#7F7F00","#007F00","#004000","#007F7F","#00007F","#400040","#7F007F"],mn={"549x800":{label:"549 \xd7 800",width:549,height:800,scale:1,settingValue:[549,800]},"561x818":{label:"561 \xd7 818",width:561,height:818,scale:1,settingValue:[561,818]},"813x1185":{label:"813 \xd7 1185",width:813,height:1185,scale:1,settingValue:[813,1185]},"1122x1636":{label:Object(S.jsx)("div",{style:{color:"var(--main-warning)"},children:"1122 \xd7 1636"}),width:1122,height:1636,scale:2,settingValue:[1122,1636]},"1388x2026":{label:Object(S.jsx)("div",{style:{color:"var(--main-warning)"},children:"1388 \xd7 2026"}),width:1388,height:2026,scale:2,settingValue:[1388,2026]},"1626x2370":{label:Object(S.jsx)("div",{style:{color:"var(--main-warning)"},children:"1626 \xd7 2370"}),width:1626,height:2370,scale:2,settingValue:[1626,2370]}},pn=[mn["549x800"],mn["561x818"],mn["813x1185"],mn["1122x1636"],mn["1388x2026"],mn["1626x2370"]],gn=[{value:"csv",label:".csv"},{value:"xlsx",label:".xlsx"}],hn=e=>[{value:"auto",label:e["setting.option.sliding-type.auto.label"]},{value:"manual",label:e["setting.option.sliding-type.manual.label"]}],{width:fn,height:vn}=d,yn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn;const n=document.createElement("canvas");n.width=e,n.height=t;const a=n.getContext("2d");return{canvas:n,ctx:a}};var jn=n(163),xn=n.n(jn),On=n(245),wn=n.n(On),kn=n(112),Sn=n.n(kn),Cn=n(299),Fn=n.n(Cn),Ln=n(300),Tn=n.n(Ln),Nn=n(301),Rn=n.n(Nn),In=n(302),En=n.n(In);function zn(e,t){var n,a,r,i,o,l,s=e.shape.length,c=e.shape.slice(0),d=new Array(s),u=1,b=0,m=0;for(t=t||2,n=s-1;n>=0;--n)d[n]=u,u*=c[n],m+=c[n],b=Math.max(b,c[n]);var p=Sn.a.mallocDouble(u),g=xn()(p,c.slice(0),d.slice(0),0),h=Sn.a.mallocUint32(b),f=Sn.a.mallocUint32(b),v=Sn.a.mallocDouble(u),y=xn()(v,c.slice(0),d.slice(0),0);for(let j=0;j<e.shape[0];j++)for(let t=0;t<e.shape[1];t++)y.set(j,t,e.get(j,t)?0:m);for(function(e,t,n){var a,r,i,o=0,l=Math.min;for(a=0;a<t;++a){for(i=e[o++],r=1;r<n;++r)i=l(e[o],i+1),e[o++]=i;for(r=0;r<n;++r)i=l(e[--o],i+1),e[o]=i;o+=n}}(y.data,u/c[s-1]|0,0|c[s-1]),n=s-1;n>0;--n){for(i=g.stride,r=1,a=n-1;a<s;++a)i[a]=r,r*=c[a];for(a=n-2;a>=0;--a)i[a]=r,r*=c[a];if(wn.a.assign(g,y),l=c[n-1],isFinite(t))if(1===t)Fn()(g.data,u/l|0,0|l,h,f);else if(2===t)Tn()(g.data,u/l|0,0|l,h,f);else{if(t<1)throw new Error("Values of exponent < 1 are not supported");En()(g.data,u/l|0,0|l,h,f,t)}else Rn()(g.data,u/l|0,0|l,h,f);o=y,y=g,g=o}return wn.a.assign(e,y),Sn.a.freeDouble(v),Sn.a.freeDouble(p),Sn.a.freeUint32(h),Sn.a.freeUint32(f),e}const{width:Dn,height:Bn}=d,Pn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dn,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bn;if(!Ua.test(t))return{canvas:e,ctx:e.getContext("2d")};const{ctx:r,canvas:i}=yn(n,a);return r.filter="grayscale(1)",r.drawImage(e,0,0),r.filter="none",r.fillStyle=t,r.globalCompositeOperation="overlay",r.fillRect(0,0,Dn,Bn),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),r.globalCompositeOperation="source-over",{canvas:i,ctx:i.getContext("2d")}};var Mn=n(39),Hn=n(338),An=n(303),Wn=n(147);const Kn={uniforms:{tDiffuse:{type:"t",value:null},h:{type:"f",value:3/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","float lef4 = vUv.x - 4.0 * h;","float lef3 = vUv.x - 3.0 * h;","float lef2 = vUv.x - 2.0 * h;","float lef1 = vUv.x - 1.0 * h;","float rig1 = vUv.x + 1.0 * h;","float rig2 = vUv.x + 2.0 * h;","float rig3 = vUv.x + 3.0 * h;","float rig4 = vUv.x + 4.0 * h;","lef4 = lef4 >= 0.0 ? lef4 : (1.0 + lef4);","lef4 = lef4 < 1.0  ? lef4 : (lef4 - 1.0 );","lef3 = lef3 >= 0.0 ? lef3 : (1.0 + lef3);","lef3 = lef3 < 1.0  ? lef3 : (lef3 - 1.0 );","lef2 = lef2 >= 0.0 ? lef2 : (1.0 + lef2);","lef2 = lef2 < 1.0  ? lef2 : (lef2 - 1.0 );","lef1 = lef1 >= 0.0 ? lef1 : (1.0 + lef1);","lef1 = lef1 < 1.0  ? lef1 : (lef1 - 1.0 );","rig1 = rig1 >= 0.0 ? rig1 : (1.0 + rig1);","rig1 = rig1 < 1.0  ? rig1 : (rig1 - 1.0 );","rig2 = rig2 >= 0.0 ? rig2 : (1.0 + rig2);","rig2 = rig2 < 1.0  ? rig2 : (rig2 - 1.0 );","rig3 = rig3 >= 0.0 ? rig3 : (1.0 + rig3);","rig3 = rig3 < 1.0  ? rig3 : (rig3 - 1.0 );","rig4 = rig4 >= 0.0 ? rig4 : (1.0 + rig4);","rig4 = rig4 < 1.0  ? rig4 : (rig4 - 1.0 );","sum += texture2D( tDiffuse, vec2( lef4, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( lef3, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( lef2, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( lef1, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( rig1, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( rig2, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( rig3, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( rig4, vUv.y ) ) * 0.051;","if (h > 0.0){","\tvec4 srcValue = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );","\tsum = srcValue + srcValue - sum;","}","gl_FragColor = sum;","}"].join("\n")},Yn={uniforms:{tDiffuse:{type:"t",value:null},v:{type:"f",value:3/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","float top4 = vUv.y - 4.0 * v;","float top3 = vUv.y - 3.0 * v;","float top2 = vUv.y - 2.0 * v;","float top1 = vUv.y - 1.0 * v;","float bot1 = vUv.y + 1.0 * v;","float bot2 = vUv.y + 2.0 * v;","float bot3 = vUv.y + 3.0 * v;","float bot4 = vUv.y + 4.0 * v;","top4 = top4 >= 0.0 ? top4 : (1.0 + top4);","top4 = top4 < 1.0  ? top4 : (top4 - 1.0 );","top3 = top3 >= 0.0 ? top3 : (1.0 + top3);","top3 = top3 < 1.0  ? top3 : (top3 - 1.0 );","top2 = top2 >= 0.0 ? top2 : (1.0 + top2);","top2 = top2 < 1.0  ? top2 : (top2 - 1.0 );","top1 = top1 >= 0.0 ? top1 : (1.0 + top1);","top1 = top1 < 1.0  ? top1 : (top1 - 1.0 );","bot1 = bot1 >= 0.0 ? bot1 : (1.0 + bot1);","bot1 = bot1 < 1.0  ? bot1 : (bot1 - 1.0 );","bot2 = bot2 >= 0.0 ? bot2 : (1.0 + bot2);","bot2 = bot2 < 1.0  ? bot2 : (bot2 - 1.0 );","bot3 = bot3 >= 0.0 ? bot3 : (1.0 + bot3);","bot3 = bot3 < 1.0  ? bot3 : (bot3 - 1.0 );","bot4 = bot4 >= 0.0 ? bot4 : (1.0 + bot4);","bot4 = bot4 < 1.0  ? bot4 : (bot4 - 1.0 );","sum += texture2D( tDiffuse, vec2( vUv.x, top4 ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, top3 ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, top2 ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, top1 ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, bot1 ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, bot2 ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, bot3 ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, bot4 ) ) * 0.051;","if (v > 0.0){","\tvec4 srcValue = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );","\tsum = srcValue + srcValue - sum;","}","gl_FragColor = sum;","}"].join("\n")},Un={uniforms:{type:{type:"1i",value:0},invertR:{type:"1f",value:1},invertG:{type:"1f",value:1},invertH:{type:"1f",value:1},dz:{type:"1f",value:0},dimensions:{type:"fv",value:[0,0,0]},tHeightMap:{type:"t",value:null}},vertexShader:["precision mediump float;","varying vec2 vUv;","varying vec2 step;","uniform vec3 dimensions;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","step = vec2(-1.0 / dimensions.x, -1.0 / dimensions.y);","vUv = uv;","}"].join("\n"),fragmentShader:["precision mediump float;","uniform vec3 dimensions;","varying vec2 vUv;","varying vec2 step;","uniform float dz;","uniform float invertR;","uniform float invertG;","uniform float invertH;","uniform int type;","uniform sampler2D tHeightMap;","void main(void) {","\tvec2 tlv = vec2(vUv.x - step.x, vUv.y + step.y );","\tvec2 lv  = vec2(vUv.x - step.x, vUv.y \t\t   );","\tvec2 blv = vec2(vUv.x - step.x, vUv.y - step.y);","\tvec2 tv  = vec2(vUv.x \t\t  , vUv.y + step.y );","\tvec2 bv  = vec2(vUv.x \t\t  , vUv.y - step.y);","\tvec2 trv = vec2(vUv.x + step.x, vUv.y + step.y );","\tvec2 rv  = vec2(vUv.x + step.x, vUv.y \t\t   );","\tvec2 brv = vec2(vUv.x + step.x, vUv.y - step.y);","\ttlv = vec2(tlv.x >= 0.0 ? tlv.x : (1.0 + tlv.x), \ttlv.y >= 0.0\t? tlv.y : (1.0  + tlv.y));","\ttlv = vec2(tlv.x < 1.0  ? tlv.x : (tlv.x - 1.0 ), \ttlv.y < 1.0   \t? tlv.y : (tlv.y - 1.0 ));","\tlv  = vec2( lv.x >= 0.0 ?  lv.x : (1.0 + lv.x),  \tlv.y  >= 0.0 \t?  lv.y : (1.0  +  lv.y));","\tlv  = vec2( lv.x < 1.0  ?  lv.x : ( lv.x - 1.0 ),   lv.y  < 1.0  \t?  lv.y : ( lv.y - 1.0 ));","\tblv = vec2(blv.x >= 0.0 ? blv.x : (1.0 + blv.x), \tblv.y >= 0.0 \t? blv.y : (1.0  + blv.y));","\tblv = vec2(blv.x < 1.0  ? blv.x : (blv.x - 1.0 ), \tblv.y < 1.0 \t? blv.y : (blv.y - 1.0 ));","\ttv  = vec2( tv.x >= 0.0 ?  tv.x : (1.0 + tv.x),  \ttv.y  >= 0.0 \t?  tv.y : (1.0  +  tv.y));","\ttv  = vec2( tv.x < 1.0  ?  tv.x : ( tv.x - 1.0 ),   tv.y  < 1.0 \t?  tv.y : ( tv.y - 1.0 ));","\tbv  = vec2( bv.x >= 0.0 ?  bv.x : (1.0 + bv.x),  \tbv.y  >= 0.0 \t?  bv.y : (1.0  +  bv.y));","\tbv  = vec2( bv.x < 1.0  ?  bv.x : ( bv.x - 1.0 ),   bv.y  < 1.0 \t?  bv.y : ( bv.y - 1.0 ));","\ttrv = vec2(trv.x >= 0.0 ? trv.x : (1.0 + trv.x), \ttrv.y >= 0.0 \t? trv.y : (1.0  + trv.y));","\ttrv = vec2(trv.x < 1.0  ? trv.x : (trv.x - 1.0 ), \ttrv.y < 1.0   \t? trv.y : (trv.y - 1.0 ));","\trv  = vec2( rv.x >= 0.0 ?  rv.x : (1.0 + rv.x),  \trv.y  >= 0.0 \t?  rv.y : (1.0  +  rv.y));","\trv  = vec2( rv.x < 1.0  ?  rv.x : ( rv.x - 1.0 ),   rv.y  < 1.0   \t?  rv.y : ( rv.y - 1.0 ));","\tbrv = vec2(brv.x >= 0.0 ? brv.x : (1.0 + brv.x), \tbrv.y >= 0.0 \t? brv.y : (1.0  + brv.y));","\tbrv = vec2(brv.x < 1.0  ? brv.x : (brv.x - 1.0 ), \tbrv.y < 1.0   \t? brv.y : (brv.y - 1.0 ));","\tfloat tl = abs(texture2D(tHeightMap, tlv).r);","\tfloat l  = abs(texture2D(tHeightMap, lv ).r);","\tfloat bl = abs(texture2D(tHeightMap, blv).r);","\tfloat t  = abs(texture2D(tHeightMap, tv ).r);","\tfloat b  = abs(texture2D(tHeightMap, bv ).r);","\tfloat tr = abs(texture2D(tHeightMap, trv).r);","\tfloat r  = abs(texture2D(tHeightMap, rv ).r);","\tfloat br = abs(texture2D(tHeightMap, brv).r);","   float dx = 0.0, dy = 0.0;","   if(type == 0){","\t\tdx = tl + l*2.0 + bl - tr - r*2.0 - br;","\t\tdy = tl + t*2.0 + tr - bl - b*2.0 - br;","   }","   else{","\t\tdx = tl*3.0 + l*10.0 + bl*3.0 - tr*3.0 - r*10.0 - br*3.0;","\t\tdy = tl*3.0 + t*10.0 + tr*3.0 - bl*3.0 - b*10.0 - br*3.0;","   }","\tvec4 normal = vec4(normalize(vec3(dx * invertR * invertH * 255.0, dy * invertG * invertH * 255.0, dz)), texture2D(tHeightMap, vUv).a);","\tgl_FragColor = vec4(normal.xy * 0.5 + 0.5, normal.zw);","}"].join("\n")},Gn="sobel",Xn=()=>({invertedRed:!1,invertedGreen:!1,invertedSource:!1,blurSharp:0,strength:1,level:8.5,type:Gn});class Vn{constructor(e,t){this.renderer=void 0,this.effectComposer=void 0,this.normalMapUniform=void 0,this.material=void 0,this.option=void 0,this.canvas=void 0,this.gaussianShaderX=void 0,this.gaussianShaderY=void 0,this.canvas=t,this.option=Object(l.a)(Object(l.a)({},Xn()),e),this.init()}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:a}=e,r=this.getTexture(e);this.normalMapUniform.tHeightMap.value=r,this.normalMapUniform.dimensions.value=[n,a,0],this.renderer.setSize(n,a),this.effectComposer.setSize(n,a),this.effectComposer.reset(this.getRenderTarget(n,a));const{invertedRed:i,invertedGreen:o,invertedSource:s,blurSharp:c,strength:d,level:u,type:b}=Object(l.a)(Object(l.a)({},this.option),t);this.invertRed(i),this.invertGreen(o),this.invertSource(s),this.setBlurSharp(c,n,a),this.setStrengthAndLevel(d,u),this.setType(b),this.effectComposer.render(1/60)}init(){const e=new Mn.h(-.5,.5,.5,-.5,0,1),t=new Mn.k,n=new An.a(t,e);this.renderer=new Mn.q({alpha:!0,antialias:!0,canvas:this.canvas}),this.renderer.setClearColor(0,0),this.normalMapUniform=Mn.n.clone(Un.uniforms),this.material=new Mn.l({fragmentShader:Un.fragmentShader,vertexShader:Un.vertexShader,uniforms:this.normalMapUniform}),this.material.transparent=!0;const a=new Mn.i(1,1,1,1),r=new Mn.f(a,this.material);t.add(r),this.gaussianShaderY=new Wn.a(Yn),this.gaussianShaderX=new Wn.a(Kn),this.gaussianShaderX.renderToScreen=!0,this.effectComposer=new Hn.a(this.renderer,this.getRenderTarget()),this.effectComposer.addPass(n),this.effectComposer.addPass(this.gaussianShaderY),this.effectComposer.addPass(this.gaussianShaderX)}getRenderTarget(e,t){return new Mn.p(e,t,{minFilter:Mn.g,magFilter:Mn.g,format:Mn.j,stencilBuffer:!1})}getTexture(e){const t=new Mn.m(e);return t.wrapS=t.wrapT=Mn.b,t.minFilter=t.magFilter=Mn.g,t.anisotropy=2,t.needsUpdate=!0,t}invertRed(e){this.normalMapUniform.invertR.value=e?-1:1}invertGreen(e){this.normalMapUniform.invertG.value=e?-1:1}invertSource(e){this.normalMapUniform.invertH.value=e?-1:1}setBlurSharp(e,t,n){this.gaussianShaderY.uniforms.v.value=e/t/5,this.gaussianShaderX.uniforms.h.value=e/n/5}setStrengthAndLevel(e,t){this.normalMapUniform.dz.value=1/e*(1+Math.pow(2,t))}setType(e){this.normalMapUniform.type.value="sobel"===e?0:1}}const qn=(e,t)=>{const n=(e+90)*Math.PI/180,a=(t+90)*Math.PI/180,r=Math.cos(n)*Math.cos(a),i=Math.sin(n)*Math.cos(a),o=Math.sin(a);return[Math.round(100*r)/100,Math.round(100*i)/100,Math.round(100*o)/100]},_n=e=>{let{inputCanvas:t,affectedHeight:n,affectedWidth:a,maxHeight:r=8,lightColorVec:i=[255,255,255],lightAngleVec:o,lightPitch:l,lightYaw:s,minIntensity:c=-1,maxIntensity:d=1}=e;const u=t.getContext("2d");if(!u)return;const b=null!==n&&void 0!==n?n:t.height,m=null!==a&&void 0!==a?a:t.width,p=u.getImageData(0,0,m,b,{willReadFrequently:!0}).data,g=o||("number"===typeof l&&"number"===typeof s?qn(l,s):[1,0,0]),h=Math.sqrt(g[0]**2+g[1]**2+g[2]**2),f=[g[0]/h,g[1]/h,g[2]/h];if(p)try{const e=new Uint8ClampedArray(m*b);for(let r=0;r<p.length;r+=4)p[r]||p[r+1]||p[r+2]||p[r+3]?e[r/4]=0:e[r/4]=1;const t=zn(xn()(e,[b,m])),n=t.shape[0],a=t.shape[1],o=new Uint8ClampedArray(m*b*4),l=Math.floor(255/r);for(let r=0;r<n;r++)for(let e=0;e<a;e++){const n=4*(r*m+e),a=t.get(r,e);o[n]=a*l,o[n+1]=a*l,o[n+2]=a*l,o[n+3]=0===a?0:255}const s=document.createElement("canvas");s.width=m,s.height=b,s.getContext("2d").putImageData(new ImageData(o,m,b),0,0);const u=document.createElement("canvas");u.width=m,u.height=b;new Vn(Xn(),u).apply(s,{blurSharp:0,level:9,strength:2.5,invertedRed:!1,invertedGreen:!1,invertedSource:!0,type:Gn});const g=document.createElement("canvas");g.width=m,g.height=b;const h=g.getContext("2d");h.drawImage(u,0,0,m,b);const v=((e,t,n,a,r,i)=>{const o=new Uint8ClampedArray(t*n*4),l=Math.floor(a/2);function s(e,t,n,a){return Math.exp(-((e-n)**2+(t-a)**2)/(2*i**2))}function c(e,t){return Math.exp(-((e-t)**2)/(2*r**2))}for(let d=0;d<n;d++)for(let a=0;a<t;a++){let r=0,i=0,u=0,b=0;for(let o=-l;o<=l;o++)for(let m=-l;m<=l;m++){const l=a+m,p=d+o;if(l>=0&&p>=0&&l<t&&p<n){const n=4*(d*t+a),o=4*(p*t+l),m=e[n],g=e[n+1],h=e[n+2],f=e[o],v=e[o+1],y=e[o+2],j=s(l,p,a,d)*c(m,f)*c(g,v)*c(h,y);r+=f*j,i+=v*j,u+=y*j,b+=j}}const m=4*(d*t+a);o[m]=r/b,o[m+1]=i/b,o[m+2]=u/b,o[m+3]=e[m+3]}return o})(h.getImageData(0,0,m,b).data,m,b,9,70,20),y=new Uint8ClampedArray(m*b*4);for(let r=0;r<p.length;r+=4){let e=v[r]/127.5-1,t=v[r+1]/127.5-1,n=v[r+2]/127.5-1;const a=(e*f[0]+t*f[1]+n*f[2])/2*(Math.abs(c)+Math.abs(d)),o=Math.max(c,Math.min(a,d));y[r]=Math.round(p[r]+i[0]*o),y[r+1]=Math.round(p[r+1]+i[1]*o),y[r+2]=Math.round(p[r+2]+i[2]*o),y[r+3]=p[r+3]}return new ImageData(y,m,b)}catch(v){return console.error("Could not apply emboss effect",v),null}},Jn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise(a=>{setTimeout(()=>{if(e.current&&t)try{e.current.toBlob(e=>{if(e){const n=URL.createObjectURL(e);if(n){const e=new Image;e.src=n,e.onload=()=>{t.drawImage(e,0,0),URL.revokeObjectURL(n),a({status:"success"})},e.onerror=e=>{URL.revokeObjectURL(n),a({status:"error",data:e})}}else a({status:"error",data:new Error("Empty layer")})}else a({status:"error",data:new Error("No layer blob")})})}catch(n){t.drawImage(e.current,0,0),console.error("generateLayer",e.current.id,n),a({status:"error",data:n})}else a({status:"error",data:new Error("No export canvas")})},25*n)})},$n=e=>"speed-skill"===e.frame&&!Qn(e),Qn=e=>"spell"!==e.frame&&"trap"!==e.frame&&"speed-skill"!==e.frame,Zn=e=>"spell"===e||"trap"===e?"st":"xyz"===e?"rank":"dark-synchro"===e?"negative-level":"speed-skill"===e||"link"===e||"lg-dragon"===e?"none":"level",ea=e=>!Qn({frame:e})||na(e),ta=e=>["xyz","dark-synchro","speed-skill","hamon","uria","raviel"].includes(e),na=e=>["link"].includes(e)||ta(e),aa=(e,t)=>{let n=!1;switch(e){case 1:n=!0;break;case 2:n=!1;break;case 0:n=null!==t&&void 0!==t&&t}return n},ra=(e,t)=>{var n,a,r,i,o,l;const{frame:s,topLeftFrame:c,topRightFrame:d,bottomLeftFrame:u,bottomRightFrame:b,effectBackground:m,pendulumEffectBackground:p}=e,g=null!==s&&void 0!==s?s:"effect",h=null!==(n="auto"===c?g:c)&&void 0!==n?n:g,f=null!==(r="auto"===u?t?"spell":h:u)&&void 0!==r?r:g;return{topLeftFrame:h,topRightFrame:null!==(a="auto"===d?h:d)&&void 0!==a?a:g,bottomLeftFrame:f,bottomRightFrame:null!==(i="auto"===b?f:b)&&void 0!==i?i:g,effectBackground:null!==(o="auto"===m?f:m)&&void 0!==o?o:g,pendulumEffectBackground:null!==(l="auto"===p?f:p)&&void 0!==l?l:g}},ia=e=>{var t,n;let{format:a,frame:r,nameStyle:i,nameStyleType:o,foil:s}=e;const c=$n({frame:r});let d="auto"===o?G:i.font;if(d===G&&"ocg"===a&&(d="OCG"),d===G&&"tcg"===a&&(d="Default"),d===G&&c&&"tcg"===a&&(d="Arial"),"custom"===o)return Object(l.a)(Object(l.a)({},i),{},{font:d});const u=ea(r);let b={fillStyle:u?"#ffffff":"#000000",headTextFillStyle:u?"#ffffff":"#000000"};if("predefined"===o){var m;const e=Object(l.a)({},q[null!==(m=i.preset)&&void 0!==m?m:"commonB"].value);return Object(l.a)(Object(l.a)(Object(l.a)({},b),e),{},{font:e.font===G?d:e.font})}let p=c?{hasOutline:!0,lineWidth:6,strokeStyle:"#000"}:{};const g="normal"!==s&&null!==(t=null===(n=q[s])||void 0===n?void 0:n.value)&&void 0!==t?t:{},h="zarc"===r?q.animeGold.value:{};return Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({font:d},b),p),g),h)};var oa=n(14),la=n(634),sa=n(621);const ca=e=>{var t=(e=e.substring(0,e.length-1)).split("\x01");if(e=t[0],1<t.length){t=t[1];for(let n of t)e=(e=e.split(n)).join(e.pop())}return da(e,0)},da=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]],a=(e,t)=>e.replace(new RegExp("".concat((t[2]?t[2]:"")+t[0],"|").concat((t[3]?t[3]:"")+t[1]),"g"),e=>e===t[0]?t[1]:t[0]);if(t)for(t=0;t<n.length;++t)e=a(e,n[t]);else for(t=n.length;t--;)e=a(e,n[t]);return e},ua=["artCrop","backgroundCrop"],ba=["artCrop","backgroundCrop"],ma=Object(l.a)(Object(l.a)({},{version:"ve",format:"fm",region:"rg",frame:"fr",rightFrame:"rf",leftFrame:"lf",pendulumRightFrame:"rpf",foil:"fo",opacity:{_newKey:"op",body:"opbd",pendulum:"oppd",name:"opnm",text:"optx",boundless:"opbl",artBorder:"opab",effectBox:"opeb",frameBorder:"opfb",nameBorder:"opnb",baseFill:"opbf",artFrame:"opaf"},finish:"fn",otherFinish:"of",art:"ar",artData:"ad",artFit:"af",artSource:"as",artFinish:"afn",artCrop:{_newKey:"arc",x:"arx",y:"ary",width:"arw",height:"arh",unit:"aru",aspect:"ara"},hasBackground:"hbg",background:"bg",backgroundFit:"bf",backgroundData:"bgd",backgroundSource:"bgs",backgroundType:"bgt",backgroundCrop:{_newKey:"bgc",x:"bgx",y:"bgy",width:"bgw",height:"bgh",unit:"bgu",aspect:"bga"},name:"na",nameStyleType:"nst",effectStyle:{_newKey:"es",condenseTolerant:"cdtl",fontStyle:"efs",upSize:"eus",background:"ebg",minLine:"eml",justifyRatio:"ejr"},pendulumStyle:{_newKey:"ps",fontStyle:"pfs",upSize:"pus",background:"pbg",minLine:"pml",justifyRatio:"pjr"},nameStyle:{_newKey:"ns",embossPitch:"nsep",embossThickness:"nset",embossYaw:"nsey",fillStyle:"nsfs",font:"nsft",gradientAngle:"nsgd",gradientColor:"nscg",hasEmboss:"nshe",hasGradient:"nshg",hasOutline:"nshl",hasShadow:"nshs",headTextFillStyle:"nshfs",lineColor:"nslc",lineOffsetX:"nslox",lineOffsetY:"nsloy",lineWidth:"nslw",pattern:"nspt",preset:"nspr",shadowBlur:"nssb",shadowColor:"nssc",shadowOffsetX:"nssox",shadowOffsetY:"nssoy"},attribute:"at",attributeType:"att",subFamily:"sf",starList:"stl",star:"st",starAlignment:"sa",cardIcon:"it",linkMap:"lm",linkRating:"lr",isLink:"il",isPendulum:"ip",pendulumFrame:"pf",pendulumEffect:"pe",pendulumScaleRed:"rs",pendulumScaleBlue:"bs",pendulumSize:"psi",typeAbility:"ta",effect:"ef",setId:"si",atk:"atk",def:"def",password:"pw",sticker:"sti",firstEditionText:"fe",isFirstEdition:"ife",cornerText:"act",hasCornerText:"hct",isSpeedCard:"isp",isDuelTerminalCard:"idt",isLimitedEdition:"ile",isLegacyCard:"ilc",creator:"cr",furiganaHelper:"fh",effectTextStyle:"ets",pendulumTextStyle:"pts",statTextStyle:"sts",typeTextStyle:"tts",otherTextStyle:"ots",dyeList:"dl",flag:"fl",externalInfo:"ei"}),{passcode:"pc",picture:"pt",pictureCrop:{_newKey:"ptc",x:"ptx",y:"pty",width:"ptw",height:"pth",unit:"ptu",aspect:"pta"}}),pa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ma;const n={},a=Object(l.a)({},e);return Object.keys(a).forEach(e=>{const r=a[e];if("object"!==typeof r||null===r||Array.isArray(r)){const a=t[e];"string"===typeof a&&(n[a]=r)}else{var i;const a=null===(i=t[e])||void 0===i?void 0:i._newKey;a&&(n[a]=pa(r,t[e]))}}),n},ga=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ma;const n={};return Object.keys(t).forEach(a=>{const r=t[a];if("object"!==typeof r||null===r||Array.isArray(r))null!=e[r]&&(n[a]=e[r]);else{const i=null===r||void 0===r?void 0:r._newKey;i&&e[i]&&(n[a]=ga(e[i],t[a]))}}),n},ha=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ma;const n="string"===typeof e?JSON.parse(ca(decodeURIComponent(e))):e,a={};return Object.keys(t).forEach(e=>{const r=t[e];if("object"!==typeof r||null===r||Array.isArray(r))null!=n[r]&&(a[e]=n[r]);else{const i=null===r||void 0===r?void 0:r._newKey;i&&n[i]&&(a[e]=ha(n[i],t[e]))}}),a},fa=function(e){var t,n,a,r,i,o;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cn();delete s.version;const c=Object(l.a)(Object(l.a)({id:Object(Q.a)()},s),Object(la.a)(e));if(c.effectStyle=Object(l.a)(Object(l.a)({},cn().effectStyle),c.effectStyle),null==c.pendulumStyle?c.pendulumStyle=Object(l.a)({},cn().pendulumStyle):c.pendulumStyle=Object(l.a)(Object(l.a)({},cn().pendulumStyle),c.pendulumStyle),null==c.version&&(c.version=1),null==c.format&&(c.format="tcg"),null==e.region&&(c.region=R["tcg"===c.format?"en":"jp"].key),null==c.pendulumFrame&&(c.pendulumFrame="auto"),null==c.pendulumSize&&(c.pendulumSize="medium"),null==c.rightFrame&&(c.rightFrame="auto"),null==c.leftFrame&&(c.leftFrame="auto"),null==c.pendulumRightFrame&&(c.pendulumRightFrame="auto"),null==c.finish&&(c.finish=[]),Array.isArray(c.starList)||(c.starList=[]),null==c.artFinish&&(c.artFinish="normal"),c.finish){const e=c.finish;e.includes("art")&&(c.finish=e.filter(e=>"art"!==e),c.otherFinish=[c.artFinish,c.artFinish,c.artFinish,c.artFinish])}!Array.isArray(c.otherFinish)||3!==c.otherFinish.length&&null!=c.otherFinish[3]||(c.otherFinish[3]=cn().otherFinish[3]),c.picture&&!e.art&&(c.art=c.picture),delete c.picture,c.pictureCrop&&!e.artCrop&&(c.artCrop=c.pictureCrop),delete c.pictureCrop,""===(null!==(t=c.art)&&void 0!==t?t:"")&&(c.art=""),""===(null!==(n=c.artData)&&void 0!==n?n:"")&&(c.artData=""),""===(null!==(a=c.artSource)&&void 0!==a?a:"")&&(c.artSource="online"),null==c.artFit&&(c.artFit=!1),"boolean"===typeof c.opacity.artFrame&&null==c.opacity.boundless&&(c.opacity.boundless=!c.opacity.artFrame,delete c.opacity.artFrame),"boolean"!==typeof c.opacity.frameBorder&&(c.opacity.frameBorder=!1),c.opacity=Object(l.a)(Object(l.a)({},b()),c.opacity),delete c.opacity.artFrame,""===(null!==(r=c.background)&&void 0!==r?r:"")&&(c.background=""),""===(null!==(i=c.backgroundData)&&void 0!==i?i:"")&&(c.backgroundData=""),""===(null!==(o=c.backgroundSource)&&void 0!==o?o:"")&&(c.backgroundSource="online"),null==c.backgroundFit&&(c.backgroundFit=!1),null==c.hasBackground&&(c.background||c.backgroundData||c.opacity.baseFill)&&(c.hasBackground=!0),c.backgroundCrop=Object(l.a)(Object(l.a)({},{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1}),c.backgroundCrop),null==c.isLink&&"link"===c.frame&&(c.isLink=!0),null==c.linkRating&&(c.linkRating=""),c.kanjiHelper&&!e.furiganaHelper&&(c.furiganaHelper=c.kanjiHelper),delete c.kanjiHelper,void 0===c.furiganaHelper&&(c.furiganaHelper=!0),c.passcode&&!e.password&&(c.password=c.passcode),delete c.passcode,c.effectTextStyle||(c.effectTextStyle=[!1,"#000000",!1,"#000000"]),c.pendulumTextStyle||(c.pendulumTextStyle=[!1,"#000000",!1,"#000000"]),c.typeTextStyle||(c.typeTextStyle=[!1,"#000000",!1,"#000000"]),c.statTextStyle||(c.statTextStyle=[!1,"#000000",!1,"#000000"]),c.otherTextStyle||(c.otherTextStyle=[!1,"#000000",!1,"#000000"]),"undefined"===typeof c.isLimitedEdition&&(c.isLimitedEdition=!1),"undefined"===typeof c.isLegacyCard&&(c.isLegacyCard=!1),c.starAlignment||(c.starAlignment="auto"),null==c.attributeType&&(c.attributeType="custom");const d=[0,0];if(Array.isArray(c.flag)){if(c.flag.length<d.length){const e=[...c.flag];c.flag=d.map((t,n)=>"number"===typeof e[n]?e[n]:t)}}else c.flag=d;const u=["","","","","","",""];if(Array.isArray(c.dyeList)){if(c.dyeList.length<u.length){const e=[...c.dyeList];c.dyeList=u.map((t,n)=>"string"===typeof e[n]?e[n]:t)}}else c.dyeList=u;if(0===c.version||1===c.version){c.version=2;const{pendulumFrame:e,isPendulum:t,atk:n,def:a,isLink:r,linkMap:i,frame:o}=c,l=Qn({frame:o});("auto"!==e||t?!!(n||a||r&&i.length):l)||(c.atk="",c.def="")}if(2===c.version){c.version=3;const e=c.nameStyle.font;"Default"!==e&&"OCG"!==e||(c.nameStyle.font="Auto")}return c},va=e=>{try{return"isFirstEdition"in e&&"typeAbility"in e&&"setId"in e}catch(t){return console.error(t),!1}},ya=e=>{try{return"ife"in e&&"ta"in e&&"si"in e}catch(t){return console.error(t),!1}},ja=(e,t)=>{if("offline"===e.artSource||e.hasBackground&&"offline"===e.backgroundSource)return{isPartial:!0,result:pa(e)};const n=Object(l.a)(Object(l.a)({},e),{},{artData:"",backgroundData:""});return{isPartial:!1,result:pa(n)}},xa=(e,t)=>typeof e===typeof t&&("number"===typeof e&&"number"===typeof t?Math.abs(e-t)<=.1:e===t),Oa=(e,t)=>{const{aspect:n,height:a,width:r,x:i,y:o,unit:l}=null!==e&&void 0!==e?e:{},{aspect:s,height:c,width:d,x:u,y:b,unit:m}=null!==t&&void 0!==t?t:{};return xa(n,s)&&xa(a,c)&&xa(r,d)&&xa(i,u)&&xa(o,b)&&l===m},wa=e=>{try{return e.replaceAll(/\{([^{}|]*)\|+?[^{}|]*\}/g,"$1").replaceAll(/(^\[|\[\[|{|{{)([^{}[\]]*)[}\]]{1,2}/gm,"$2")}catch(t){return console.error(t),e}},ka=e=>{try{return e.replaceAll(/\{([^{}|]*)\|+?[^{}|]*\}/g,"$1").replaceAll(/(^\[|\[\[|{|{{)([^{}[\]]*)[}\]]{1,2}/gm,"$2")}catch(t){return console.error(t),e}},Sa=(e,t,n)=>{const a=document.createElement("a"),r=window.URL.createObjectURL(t);a.download=e,a.href=r,a.dataset.downloadurl=[n,a.download,a.href].join(":");const i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});a.dispatchEvent(i),a.remove(),window.URL.revokeObjectURL(r)};const Ca=["pendulum","rarity"],Fa={CONTINUOUS:"Continuous",COUNTER:"Counter",EQUIP:"Equip",FIELD:"Field","QUICK-PLAY":"Quick-play",RITUAL:"Ritual",[E]:"None"},La=Object.entries(Fa).reduce((e,t)=>{const[n,a]=t;return e[a]=n,e},{}),Ta={large:"Large",medium:"Normal",small:"Small"},Na=Object.entries(Ta).reduce((e,t)=>{const[n,a]=t;return e[a]=n,e},{}),Ra={EARTH:"Earth",LIGHT:"Light",DARK:"Dark",FIRE:"Fire",WIND:"Wind",WATER:"Water",SPELL:"Spell",TRAP:"Trap",DIVINE:"Divine"},Ia=Object.entries(Ra).reduce((e,t)=>{const[n,a]=t;return e[a]=n,e},{}),Ea={normal:"Normal",effect:"Effect",ritual:"Ritual",fusion:"Fusion",synchro:"Synchro",xyz:"Xyz",link:"Link",token:"Token",spell:"Spell",trap:"Trap","dark-synchro":"Dark Synchro",zarc:"Unity","speed-skill":"Skill"},za=Object.entries(Ea).reduce((e,t)=>{const[n,a]=t;return e[a]=n,e},{}),Da={common:{key:""},rare:{key:"rare--",text:"rare"},secret:{key:"secretGradient-type3-",text:"secretGradient",artFinish:"type3"},ultra:{key:"ultra-type3-",text:"ultra",artFinish:"type3"},rainbow:{key:"platinum-type1-type1",text:"platinum",artFinish:"type1",finish:["type1"]}},Ba=Object.entries(Da).reduce((e,t)=>{const[n,a]=t;return e[a.key]=n,e},{}),Pa=(e,t)=>{const{name:n,star:a,typeAbility:r,subFamily:i,effect:o,atk:s,def:c,art:d,artData:u,artSource:b,password:m,creator:p,attribute:g,attributeType:h,setId:f,pendulumEffect:v,pendulumScaleBlue:y,pendulumScaleRed:j,pendulumSize:x,isPendulum:O,linkMap:w,frame:k,externalInfo:S,nameStyle:C,nameStyleType:F,artFinish:L,finish:T}=e,N=wa(n),R=ka(o),I=ka(v),E=Fa[i],z="auto"===h?Ra[g]:Ra.LIGHT,D=Ea[k],B="predefined"===F?Ba[[C.preset,L,T.join("|")].join("-")]:"common",P=null!==S&&void 0!==S?S:{},{pendulum:M,rarity:H}=P,A=Object(oa.a)(P,Ca);return{isPartial:n!==N||o!==R||v!==I||void 0===E||void 0===z||void 0===D||void 0===B,result:Object(l.a)({version:"1.0.0",name:N,level:"".concat(a),type:r.join("/"),icon:null!==E&&void 0!==E?E:"",effect:R,atk:s,def:c,serial:m,copyright:p,attribute:null!==z&&void 0!==z?z:"None",id:f,pendulum:Object(l.a)({enabled:O,effect:I,blue:y,red:j,boxSize:Ta[x],boxSizeEnabled:!0},M),variant:"Normal",link:{topLeft:!!w.includes("1"),topCenter:!!w.includes("2"),topRight:!!w.includes("3"),middleLeft:!!w.includes("4"),middleRight:!!w.includes("6"),bottomLeft:!!w.includes("7"),bottomCenter:!!w.includes("8"),bottomRight:!!w.includes("9")},layout:null!==D&&void 0!==D?D:"Normal",boxSize:"large"===x?"Small":"Normal",rarity:null!==B&&void 0!==B?B:H,image:t?t.toDataURL("image/jpeg"):"offline"===b?u:d},A)}},Ma={CONTINUOUS:"Continuous",COUNTER:"Counter",EQUIP:"Equip",FIELD:"Field","QUICK-PLAY":"Quick-Play",RITUAL:"Ritual",[E]:"None"},Ha=Object.entries(Ma).reduce((e,t)=>{const[n,a]=t;return e[a]=n,e},{}),Aa=Object.entries({EARTH:"EARTH",LIGHT:"LIGHT",DARK:"DARK",FIRE:"FIRE",WIND:"WIND",WATER:"WATER",SPELL:"SPELL",TRAP:"TRAP",DIVINE:"DIVINE"}).reduce((e,t)=>{const[n,a]=t;return e[a]=n,e},{}),Wa=Object.entries({normal:"normal",effect:"effect",ritual:"ritual",fusion:"fusion",synchro:"synchro",xyz:"xyz",link:"link",token:"token",spell:"spell",trap:"trap","speed-skill":"skill",normal_pendulum:"normal_pendulum",effect_pendulum:"effect_pendulum",ritual_pendulum:"ritual_pendulum",fusion_pendulum:"fusion_pendulum",synchro_pendulum:"synchro_pendulum",xyz_pendulum:"xyz_pendulum"}).reduce((e,t)=>{const[n,a]=t;return e[a]=n,e},{}),Ka={"Top-Left":"1",Top:"2","Top-Right":"3",Left:"4",Right:"6","Bottom-Left":"7",Bottom:"8","Bottom-Right":"9"},Ya=e=>{var t,n,a;const{atk:r,attribute:i,card_images:o,card_sets:s,def:c,desc:d,frameType:u,id:b,level:m,monster_desc:p,name:g,pend_desc:h,race:f,scale:v,typeline:y,linkval:j,linkmarkers:x}=e,O=Ha[f],w=Aa[i],[k,S]=Wa[u].split("_"),F=null!==(t=p?p.replaceAll(/^''|''$/g,""):void 0)&&void 0!==t?t:d?d.replaceAll(/^''|''$/g,""):"",L=F.split("\n"),T=(e=>["fusion","synchro","xyz","link","dark-synchro","zarc"].includes(e.frame))({frame:null!==k&&void 0!==k?k:"normal"})&&L.length>1?["[".concat(L[0].replaceAll("\r",""),"]"),...L.slice(1)].join("\n"):F,N=h?h.replaceAll(/^''|''$/g,""):"",R=o[0].image_url_cropped,I=cn();return{isPartial:!1,result:Object(l.a)(Object(l.a)({},I),{},{name:g,atk:r<0||null==r?"?":"".concat(r),def:c?c<0||null==c?"?":"".concat(c):"0",attribute:null!==w&&void 0!==w?w:C,effect:T,subFamily:null!==O&&void 0!==O?O:E,setId:null!==(n=null===(a=s[s.length-1])||void 0===a?void 0:a.set_code)&&void 0!==n?n:"",frame:null!==k&&void 0!==k?k:"normal",star:"link"===u&&j?j:m,typeAbility:y||("spell"===u?["Spell Card"]:"trap"===u?["Trap Card"]:[]),art:R,artSource:"online",artCrop:Object(l.a)(Object(l.a)({},I.artCrop),{},{y:0}),isLink:"link"===k&&Array.isArray(x),linkMap:(null!==x&&void 0!==x?x:[]).map(e=>Ka[e]),isPendulum:"pendulum"===S,pendulumScaleBlue:null==v?"0":"".concat(v),pendulumScaleRed:null==v?"0":"".concat(v),pendulumEffect:N,password:"".concat(b).padStart(8,"0"),creator:ze.tcg[0]})}},Ua=/^#[a-fA-F0-9]{3}([a-fA-F0-9]{3})?$/,Ga=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{const i=e.replace("#","");let o=[0,0,0,1];var n,a,r;if(3===i.length||4===i.length)o=[parseInt("".concat(i[0]).concat(i[0]),16),parseInt("".concat(i[1]).concat(i[1]),16),parseInt("".concat(i[2]).concat(i[2]),16),parseInt("".concat(null!==(n=i[3])&&void 0!==n?n:"f").concat(null!==(a=i[3])&&void 0!==a?a:"f"),16)];if(6===i.length||8===i.length)o=[parseInt(i.slice(0,2),16),parseInt(i.slice(2,4),16),parseInt(i.slice(4,6),16),parseInt(null!==(r=i.slice(6,8))&&void 0!==r?r:"ff",16)];return o.map(e=>isNaN(e)?255:e).slice(0,t?4:3)}catch(i){return[0,0,0,1].slice(0,t?4:3)}};function Xa(e){if("number"!==typeof e)return"00";const t=Math.max(0,Math.min(e,255)).toString(16);return 1===t.length?"0"+t:t}const Va=e=>{var t,n,a;return(299*(null!==(t=e[0])&&void 0!==t?t:0)+587*(null!==(n=e[1])&&void 0!==n?n:0)+114*(null!==(a=e[2])&&void 0!==a?a:0))/1e3>=128?"#000000":"#FFFFFF"},qa=1e3,_a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=qa;const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qa,n=t,a=n,r=30,i=100;const o=()=>r=-1;return{reset:function(){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,t=o,n=o,r=30,i=100,a=o},searchDown:()=>(n-=i,r-=1,n),reverseSearch:()=>(1===i?o():(n+=i,i/=10,n-=i),Math.min(n,t)),finish:o,getMedian:()=>n,setMedian:e=>n=e,setLastEffective:function(){return a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n},getLastEffective:()=>a,applyLastEffective:()=>(n=a,r=-1,n),getIterateCount:()=>r}}();for(;a.getIterateCount()>=0;){if(a.getIterateCount()<=0){n=a.getMedian();break}if(!e(a.getMedian())&&a.getMedian()>0)a.searchDown();else{if(a.getMedian()===qa)break;n=a.reverseSearch()}}const r=Math.max(t,Math.min(n,qa));return r!==n&&e(r),r},Ja=e=>{const{defaultWeight:t="",defaultStyle:n="",defaultSize:a="10px",defaultFamily:r="Arial"}=null!==e&&void 0!==e?e:{};let i=t,o=n,l="number"===typeof a?"".concat(a,"px"):a,s="number"===typeof a?a:parseFloat(a.replaceAll("px","")),c=r;return{getFont:()=>"".concat([o,i,l,c].filter(e=>""!==e).join(" "),", Arial"),getFontInfo:()=>({style:o,size:l,family:c,sizeAsNumber:s,weight:i}),setWeight(e){return i=e,this},setStyle(e){return o=e,this},setSize(e){const t="function"===typeof e?e(s):e;return l="number"===typeof t?"".concat(t,"px"):t,s="number"===typeof t?t:parseFloat(t.replaceAll("px","")),this},setFamily(e){return c=e,this}}},$a=e=>{let{heightCap:t,lineCount:n}=e;return{bulletWidth:Math.round(t/n*.9),fontSize:t/n*.9,lineHeight:t/n,lineCount:n,bulletOffset:1}},Qa=(e,t)=>Object(l.a)(Object(l.a)({},e),{},{fontList:[...e.fontList,$a(t)]}),Za=(e,t)=>{const{fontData:n,fontLevel:a}=e,r=Ja(),i=Object(l.a)(Object(l.a)({},t),{},{fontList:[...n.fontList]});return r.setSize(i.fontList[a].fontSize).setFamily(i.font).getFont(),{fontData:i,fontLevel:a,currentFont:r}},er=()=>nr(X().gradientColor),tr=e=>(null!==e&&void 0!==e?e:[]).map(e=>{let{color:t,offset:n}=e;return"".concat(n,"|").concat(t)}).join(","),nr=e=>e?e.split(",").map((e,t)=>{const[n,a]=e.split("|");return{color:a,offset:n,id:t+1}}):nr(X().gradientColor),ar=()=>{const[e,t]=Object(a.useState)(0);return[Object(a.useCallback)(()=>{t(e=>e+1)},[]),e]},rr=e=>{let{debug:t,optionLength:n,stopPropagation:a=!1,setFocus:r,onTrigger:i,onCancel:o,onKeyPress:l}=e;return{tabIndex:0,onFocus:()=>{t&&console.info("Navigation Focus",t),r(0)},onBlur:()=>{t&&console.info("Navigation Blur",t),r(-1)},onKeyDown:e=>{a&&e.stopPropagation(),t&&console.info("Navigation Keydown",t,e.key),!1!==(null===l||void 0===l?void 0:l(e))&&("ArrowRight"===e.key||"ArrowDown"===e.key?(e.preventDefault(),r(e=>Math.max(0,n+e+1)%n)):"ArrowLeft"===e.key||"ArrowUp"===e.key?(e.preventDefault(),r(e=>Math.max(0,n+e-1)%n)):"Enter"===e.key||" "===e.key?i():"Escape"===e.key&&(null===o||void 0===o||o()))}}},ir=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="";const a=e.length;for(let r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*a));return n},or=(e,t)=>{const{trueBaseline:n,trueEdge:a,trueWidth:r,trueHeightCap:i}=e;return Object(l.a)(Object(l.a)({},e),{},{trueBaseline:n*t,trueEdge:a*t,trueWidth:r*t,trueHeightCap:"number"===typeof i?i*t:i})},lr=(e,t)=>e.map(e=>e*t),sr=(e,t)=>{const{allRightSymbolOffset:n,bulletOffset:a,bulletWidth:r,fontSize:i,headTextSpacing:o,iconSymbolWidth:s,lineHeight:c,offsetY:d,ordinalFontOffsetY:u,wordLetterSpacing:b}=e;return Object(l.a)(Object(l.a)({},e),{},{allRightSymbolOffset:"number"===typeof n?n*t:void 0,bulletOffset:"number"===typeof a?a*t:void 0,bulletWidth:r*t,fontSize:i*t,headTextSpacing:"number"===typeof o?o*t:void 0,iconSymbolWidth:"number"===typeof s?s*t:void 0,lineHeight:c*t,offsetY:"number"===typeof d?d*t:void 0,ordinalFontOffsetY:"number"===typeof u?u*t:void 0,wordLetterSpacing:"number"===typeof b?b*t:void 0})},cr=(e,t)=>Object(l.a)(Object(l.a)({},e),{},{fontList:e.fontList.map(e=>sr(e,t))}),dr=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".radio-train-input-group";null===(e=document.querySelector(t))||void 0===e||e.focus()};function ur(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var br,mr=n(4),pr=n(622),gr=n(340),hr=n(102),fr=n(5);const vr=fr.b.button(br||(br=Object(mr.a)(["\n    align-content: center;\n    font-size: var(--fs-lg);\n    border: var(--bw) solid var(--sub-tertiary);\n    border-radius: var(--br-lg);\n    background-color: var(--main-primary);\n    border: var(--bw) solid var(--main-primary);\n    cursor: pointer;\n    &:not(:disabled):hover {\n        background-color: var(--sub-primary);\n    }\n    &:disabled {\n        color: var(--color-dim);\n        cursor: not-allowed;\n        background-color: var(--color-contrast);\n        border: var(--bw) solid var(--color-contrast);\n        .anticon {\n            color: inherit;\n        }\n    }\n    input {\n        display: none;\n    }  \n"])));var yr=n(637),jr=n(638),xr=n(639);const Or=(e,t)=>{var n,a,r,i,o;const{creator:s,effect:c,format:d,region:u,isFirstEdition:b,name:m,password:p,pendulumEffect:g,setId:h,typeAbility:f}=e;if(d===t)return e;const v=R[u].category===t?u:R[I[t]].key,y="ocg"===t?Me:Pe,j="ocg"===t&&/-EN/.test(h)?h.replace("-EN","-JP"):"tcg"===t&&/-JP/.test(h)?h.replace("-JP","-EN"):h;return Object(l.a)(Object(l.a)({},e),{},{name:null!==(n=y[m])&&void 0!==n?n:m,format:t,region:v,effect:null!==(a=y[c])&&void 0!==a?a:c,pendulumEffect:null!==(r=y[g])&&void 0!==r?r:g,typeAbility:f.map(e=>{var t;return null!==(t=y[e])&&void 0!==t?t:e}),creator:null!==(i=y[s])&&void 0!==i?i:s,password:null!==(o=y[p])&&void 0!==o?o:p,setId:j,isFirstEdition:"ocg"!==t&&b})};var wr=n(71);const kr=Object(wr.create)((e,t)=>({batchName:"",batch:void 0,batchQueue:[],batchDataMap:{},isBatchDownloading:!1,isReady:!1,startBatchDownload:(t,n)=>{e({batchName:t,batchQueue:n,isBatchDownloading:!0})},stopBatchDownload:()=>{e({batchName:"",batchQueue:[],batchDataMap:{},isBatchDownloading:!1,isReady:!1})},clearQueue:()=>{e({batchQueue:[]})},addToBatch:(t,n,a)=>{e(e=>{let{batchQueue:r,batchDataMap:i}=e;const o=r.filter(e=>e!==t),s=Object(l.a)({},i);return s[t]={name:n,blob:a},{batchQueue:o,batchDataMap:s,isReady:0===o.length}})}}));var Sr=n(114),Cr=n.n(Sr),Fr=n(305),Lr=n.n(Fr);const Tr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object(l.a)(Object(l.a)({},t),e.rawDictionary),a=e=>{var t;return null!==(t=n[e])&&void 0!==t?t:""},i=(e,t)=>{const n=new RegExp("\\{(".concat(Object.keys(t).join("|"),")\\}")),a=e.split(n);return Object(S.jsx)(r.a.Fragment,{children:a.map((e,n)=>n%2===0?Object(S.jsx)(r.a.Fragment,{children:e},"".concat(e,"-").concat(n)):t[e])},e)},o={"error.load.font.tcg":e=>a("error.load.font.tcg").replaceAll("{familyName}",e),"error.load.font.ocg":e=>a("error.load.font.ocg").replaceAll("{familyName}",e),"error.max-size.description":e=>a("error.max-size.description").replaceAll("{fileSize}","".concat(e)),"contributor.disclaimer.line-1":e=>i(a("contributor.disclaimer.line-1"),{siteLink:e}),"contributor.disclaimer.line-5":(e,t)=>i(a("contributor.disclaimer.line-5"),{author1:e,author2:t}),"contributor.template-maker":(e,t,n,r)=>i(a("contributor.template-maker"),{artist1:e,artist2:t,artist3:n,artist4:r}),"converter.header.warning.label":e=>i(a("converter.header.warning.label"),{maxAmount:e}),"guide.format.introduction":e=>i(a("guide.format.introduction"),{settingIcon:e}),"guide.format.section-1.content":(e,t,n,r)=>i(a("guide.format.section-1.content"),{openTag:e,closeTag:t,hotkey:n,hotkeyAlternative:r}),"guide.format.section-2.content":(e,t,n,r)=>i(a("guide.format.section-2.content"),{openTag:e,closeTag:t,hotkey:n,hotkeyAlternative:r}),"guide.format.section-3.content":(e,t,n)=>i(a("guide.format.section-3.content"),{separator:e,hotkey:t,hotkeyAlternative:n}),"guide.format.section-4.content":(e,t,n)=>i(a("guide.format.section-4.content"),{separator:e,hotkey:t,hotkeyAlternative:n}),"guide.format.section-5.content":(e,t,n,r)=>i(a("guide.format.section-5.content"),{openTag:e,closeTag:t,hotkey:n,hotkeyAlternative:r}),"guide.format.section-6.content":(e,t,n,r)=>i(a("guide.format.section-6.content"),{openTag:e,closeTag:t,hotkey:n,hotkeyAlternative:r}),"guide.format.section-7.content":(e,t,n,r)=>i(a("guide.format.section-7.content"),{openTag:e,closeTag:t,hotkey:n,hotkeyAlternative:r}),"guide.format.section-8.content":(e,t,n,r)=>i(a("guide.format.section-8.content"),{openTag:e,closeTag:t,hotkey:n,hotkeyAlternative:r}),"guide.format.section-9.content":e=>i(a("guide.format.section-9.content"),{openTag:e}),"input.name-style.emboss.color.alert":e=>i(a("input.name-style.emboss.color.alert"),{colorTab:e}),"input.scale.label":e=>i(a("input.scale.label"),{scaleType:e})};return Object(l.a)(Object(l.a)({},e),{},{rawDictionary:n,dictionary:Object(l.a)(Object(l.a)({},n),o)})},Nr=Object(wr.create)((e,t)=>{const n=(()=>{const e=new URL(window.location.href),t=e.searchParams,n=t.get("language");if(t.delete("language"),window.history.replaceState(window.history.state,"",e.href),n)return n;try{const e=localStorage.getItem("language");return e||"eng"}catch(a){return console.error("useSetting: Error when getting cached language",a),"eng"}})(),a={},r=Tr(Object(l.a)(Object(l.a)({},{name:"Default",formalName:"Default",codeName:"def",initialMessage:"",order:1e3,active:!1}),{},{rawDictionary:{}})),i=async e=>{if(a[e])return null;try{var t;const n=await fetch("".concat("/ygocarder","/asset/i18n/").concat(e,".json"),{headers:{"Content-Type":"application/json",Accept:"application/json"}}),r=await n.json();if(!r.rawDictionary)throw new Error("No dictionary found");const i=Tr(r,null===(t=a.eng)||void 0===t?void 0:t.rawDictionary);return a[e]=i,i}catch(n){return console.error("loadLanguage: Could not load language, revert back to default",n),null}},o=async n=>{const o=t().languageMetadataMap[n];if(!o)return;const l=a[n]?a[n]:await i(n);l?(e({languageInfo:t().languageMetadataMap[n],language:l.dictionary}),localStorage.setItem("language",n),e({isLoading:!1,languageInfo:o})):e({isLoading:!1,languageInfo:t().languageMetadataMap.eng,language:r.dictionary})};return{languageMetadataMap:{},languageInfo:{name:"Default",formalName:"Default",codeName:"def",initialMessage:"",order:1e3,active:!1},language:r.dictionary,error:null,isInitiating:!0,isLoading:!0,isMetadataReady:!1,initiate:async()=>{(async()=>{try{const t=await fetch("".concat("/ygocarder","/asset/i18n/metadata.json"),{headers:{"Content-Type":"application/json",Accept:"application/json"}}),n=await t.json();if(!n)throw new Error("No metadata found");e({languageMetadataMap:n,isMetadataReady:!0})}catch(t){console.error("loadLanguageMetadata: Could not load language metadata, try to use English",t),e({languageMetadataMap:{eng:{name:"English",formalName:"English",codeName:"eng",initialMessage:"Loading fonts and scripts\u2026",order:1,active:!0}},isMetadataReady:!0})}})()},loadDefaultLanguage:async()=>{await i("eng"),await o(n),e({isInitiating:!1})},loadLanguage:i,changeLanguage:o}}),Rr=()=>Nr(e=>{let{language:t}=e;return t}),Ir=()=>Nr.getState().language;var Er=n(189);const zr=["Format","Frame","Name","Attribute","Star","Spell/Trap Icon","Art Link","Type Ability","Effect","Set Id","ATK","DEF","Password","Sticker","Copyright","Is Pendulum","Pendulum Effect","Pendulum Scale Red","Pendulum Scale Blue","Is Link","Link - Top Left Arrow","Link - Top Arrow","Link - Top Right Arrow","Link - Left Arrow","Link - Right Arrow","Link - Bottom Left Arrow","Link - Bottom Arrow","Link - Bottom Right Arrow","First Edition Text","Is First Edition","Is Speed Card","Is Limited Edition","Is Duel Terminal Card","Is Legacy Card","Foil","Art Finish","Card Finish","Art Crop - X (%)","Art Crop - Y (%)","Art Crop - Width (%)","Art Crop - Height (%)","Is Using Full Art","Region","Attribute Type","Star Type","Star Alignment","Card Icon Type","Link Rating","Corner Text","Has Corner Text","Opacity - Body","Opacity - Pendulum","Opacity - Text","Opacity - Name","Opacity - Base Fill","Opacity - Frame Border","Opacity - Art Border","Opacity - Name Border","Opacity - Effect Box","Opacity - Boundless","Has Background","Background Link","Is Using Full Background","Background Type","Background Crop - X (%)","Background Crop - Y (%)","Background Crop - Width (%)","Background Crop - Height (%)","Bottom Frame","Condense Rate","Use Furigana Helper","Name Style Type","Name Style - Font","Name Style - Fill Style","Name Style - Headtext Fill Style","Name Style - Shadow Color","Name Style - Shadow Offset Y","Name Style - Shadow Offset X","Name Style - Shadow Blur","Name Style - Has Shadow","Name Style - Line Color","Name Style - Line Width","Name Style - Line Offset Y","Name Style - Line Offset X","Name Style - Has Outline","Name Style - Gradient Angle","Name Style - Gradient Color","Name Style - Has Gradient","Name Style - Emboss Pitch","Name Style - Emboss Yaw","Name Style - Emboss Thickness","Name Style - Has Emboss","Name Style - Preset","Name Style - Pattern","Stat Style - Is Custom","Stat Style - Fill Color","Stat Style - Has Shadow","Stat Style - Shadow Color","Type Style - Is Custom","Type Style - Fill Color","Type Style - Has Shadow","Type Style - Shadow Color","Effect Style - Is Custom","Effect Style - Fill Color","Effect Style - Has Shadow","Effect Style - Shadow Color","Effect Style - Upsize","Effect Style - Font Style","Effect Style - Background","Effect Style - Min Line","Effect Style - Justify Ratio","Pendulum Size","Pendulum Effect Style - Is Custom","Pendulum Effect Style - Fill Color","Pendulum Effect Style - Has Shadow","Pendulum Effect Style - Shadow Color","Pendulum Effect Style - Upsize","Pendulum Effect Style - Font Style","Pendulum Effect Style - Background","Pendulum Effect Style - Min Line","Pendulum Effect Style - Justify Ratio","Other Style - Is Custom","Other Style - Fill Color","Other Style - Has Shadow","Other Style - Shadow Color","Other Finish - Attribute","Other Finish - Background","Other Finish - Icon","Other Finish - Sticker","Left Frame","Right Frame","Bottom Right Frame","Dye List","Star List","Flag","External Info (JSON)"],Dr=[...zr,"Level/Rank","Star_Type","spell_type/trap_type","Type_1","Type_2","Type_3","Type_4","Set_ID","Borderless","Edition","Rarity","Background_Type","Card_Background","Font_Style","Art_Finish","Image_Frame_Type"],Br=e=>(null!==e&&void 0!==e?e:"").toLowerCase().replaceAll(" ","").replaceAll("-",""),Pr=new Set(Dr.map(Br)),Mr=zr.reduce((e,t,n)=>{const a=Br(t);return Pr.has(a)&&(e[t]=n),e},{}),Hr=e=>null==e||""===e?"":'"'.concat(e.replace(/"/g,'""'),'"'),Ar=(e,t)=>{if("boolean"===typeof e)return e;if("string"===typeof e){const n=e.toLowerCase();return"true"===n||"false"!==n&&t}return t},Wr=(e,t)=>"number"===typeof e?isFinite(e)?e:t:"string"===typeof e&&isFinite(parseInt(e))?parseInt(e):t,Kr=(e,t)=>"number"===typeof e?isFinite(e)?e:t:"string"===typeof e&&isFinite(parseFloat(e))?parseFloat(e):t,Yr=(e,t)=>"string"===typeof e?e.startsWith("#")?e:"#".concat(e):t,Ur=e=>{try{const t=e[0].reduce((e,t,n)=>{const a=Br(t);return Pr.has(a)&&(e[t]=n),e},{});return e.map((e,n)=>{var a,r,i,o,s,c,d,u,m,g,h,f,v,y,x,O,w,k,S,F,L,T,N,R,I,E,z,D,B,P,M,H,A,W,K,Y,G,V,q,_,J,$,Z,ee,te,ne,ae,re,ie,le,se,ce,de,ue,be,me,pe,ge,he,fe,ve,ye;if(0===n)return null;if(""===e.join(""))return null;const je=cn(),xe=((e,t)=>n=>{var a,r;const i=null!==(a=t[n])&&void 0!==a?a:-1,o=(null!==(r=e[i])&&void 0!==r?r:"").trim();return""===o?void 0:o})(e,t),Oe=(null!==(a=null!==(r=xe("Frame"))&&void 0!==r?r:xe("Background_Type"))&&void 0!==a?a:je.frame).toLowerCase(),we=(null!==(i=xe("Right Frame"))&&void 0!==i?i:je.rightFrame).toLowerCase(),ke=(null!==(o=xe("Left Frame"))&&void 0!==o?o:je.leftFrame).toLowerCase(),Se=(null!==(s=xe("Bottom Right Frame"))&&void 0!==s?s:je.pendulumRightFrame).toLowerCase(),Ce=null!==(c=null!==(d=xe("Star"))&&void 0!==d?d:xe("Level/Rank"))&&void 0!==c?c:"",Fe="text"===xe("Star Type")?Ce:parseInt(Ce)<=13&&parseInt(Ce)>=0&&"2"!==xe("Star_Type")?parseInt(Ce):Ce,Le=(null!==(u=null!==(m=xe("Foil"))&&void 0!==m?m:xe("Rarity"))&&void 0!==u?u:"normal").toLowerCase(),Te=j[Le]?Le:"normal",Ne=null!==(g=null===(h=xe("Attribute Type"))||void 0===h?void 0:h.toLowerCase())&&void 0!==g?g:"auto",Re=null===(f=xe("Attribute"))||void 0===f?void 0:f.toUpperCase(),Ie=Re||"custom"===Ne?"NONE"===Re?C:null!==Re&&void 0!==Re?Re:C:"spell"===Oe?"SPELL":"trap"===Oe?"TRAP":je.attribute,Ee=null!==(v=xe("Art Finish"))&&void 0!==v?v:xe("Art_Finish")?"type".concat(xe("Art_Finish")):"",ze=null!==(y=xe("Other Finish - Attribute"))&&void 0!==y?y:"",De=null!==(x=xe("Other Finish - Sticker"))&&void 0!==x?x:"",Be=null!==(O=xe("Other Finish - Icon"))&&void 0!==O?O:"",Pe=null!==(w=xe("Other Finish - Background"))&&void 0!==w?w:"",Me=null!==(k=xe("ATK"))&&void 0!==k?k:"",He=null!==(S=xe("Card Icon Type"))&&void 0!==S?S:je.cardIcon,Ae=null!==(F=xe("Copyright"))&&void 0!==F?F:"",We=null!==(L=xe("DEF"))&&void 0!==L?L:"",Ke=null!==(T=xe("Effect"))&&void 0!==T?T:"",Ye=null!==(N=null===(R=xe("Card Finish"))||void 0===R?void 0:R.split(/,| /).filter(e=>""!==e))&&void 0!==N?N:[],Ue=(null!==(I=xe("Format"))&&void 0!==I?I:je.format).toLowerCase(),Ge=(null!==(E=xe("Region"))&&void 0!==E?E:je.region).toLowerCase(),Xe=Ar(xe("Use Furigana Helper"),je.furiganaHelper),Ve=null!==(z=xe("Name"))&&void 0!==z?z:"",qe=null!==(D=xe("Password"))&&void 0!==D?D:"",_e=null!==(B=null!==(P=xe("Set Id"))&&void 0!==P?P:xe("Set_ID"))&&void 0!==B?B:"",Je=(null!==(M=xe("Star Alignment"))&&void 0!==M?M:je.starAlignment).toLowerCase(),$e=(null!==(H=xe("Sticker"))&&void 0!==H?H:je.sticker).toLowerCase(),Qe=(null!==(A=null!==(W=xe("Spell/Trap Icon"))&&void 0!==W?W:xe("spell_type/trap_type"))&&void 0!==A?A:je.subFamily).toUpperCase(),Ze=null===(K=xe("Edition"))||void 0===K?void 0:K.toLowerCase(),et=null!==(Y=xe("First Edition Text"))&&void 0!==Y?Y:je.firstEditionText,tt=Ar(xe("Is First Edition"),Ze?"1st edition"===Ze:je.isFirstEdition),nt=null!==(G=xe("Corner Text"))&&void 0!==G?G:je.cornerText,at=Ar(xe("Has Corner Text"),Ze?"1st edition"===Ze:je.hasCornerText),rt=Ar(xe("Is Duel Terminal Card"),Ze?"duel terminal"===Ze:je.isDuelTerminalCard),it=Ar(xe("Is Limited Edition"),Ze?"limited edition"===Ze:je.isLimitedEdition),ot=Ar(xe("Is Speed Card"),Ze?"speed duel"===Ze:je.isSpeedCard),lt=Ar(xe("Is Legacy Card"),je.isLegacyCard),st=Ar(xe("Is Pendulum"),je.isPendulum),ct=(null!==(V=xe("Bottom Frame"))&&void 0!==V?V:je.pendulumFrame).toLowerCase(),dt=null!==(q=xe("Pendulum Effect"))&&void 0!==q?q:"",ut=null!==(_=xe("Pendulum Scale Red"))&&void 0!==_?_:"",bt=null!==(J=xe("Pendulum Scale Blue"))&&void 0!==J?J:"",mt=null!==($=xe("Pendulum Size"))&&void 0!==$?$:"medium",pt=xe("Type Ability"),gt=pt?pt.split("/"):[xe("Type_1"),xe("Type_2"),xe("Type_3"),xe("Type_4")].filter(e=>"string"===typeof e&&""!==e).map(e=>"string"===typeof e?e:""),ht=(null!==(Z=xe("Condense Rate"))&&void 0!==Z?Z:je.effectStyle.condenseTolerant).toLowerCase(),ft=Wr(xe("Effect Style - Upsize"),je.effectStyle.upSize),vt=Wr(xe("Pendulum Effect Style - Upsize"),je.pendulumStyle.upSize),yt=(null!==(ee=xe("Effect Style - Font Style"))&&void 0!==ee?ee:je.effectStyle.fontStyle).toLowerCase(),jt=(null!==(te=xe("Pendulum Effect Style - Font Style"))&&void 0!==te?te:je.pendulumStyle.fontStyle).toLowerCase(),xt=(null!==(ne=xe("Effect Style - Background"))&&void 0!==ne?ne:je.effectStyle.background).toLowerCase(),Ot=(null!==(ae=xe("Pendulum Effect Style - Background"))&&void 0!==ae?ae:je.pendulumStyle.background).toLowerCase(),wt=Wr(xe("Effect Style - Min Line"),je.effectStyle.minLine),kt=Wr(xe("Pendulum Effect Style - Min Line"),je.pendulumStyle.minLine),St=Wr(xe("Effect Style - Min Line"),je.effectStyle.justifyRatio),Ct=Wr(xe("Pendulum Effect Style - Min Line"),je.pendulumStyle.justifyRatio),Ft=b(),Lt={artBorder:Ar(xe("Opacity - Art Border"),Ft.artBorder),frameBorder:Ar(xe("Opacity - Frame Border"),Ft.frameBorder),baseFill:null!==(re=xe("Opacity - Base Fill"))&&void 0!==re?re:Ft.baseFill,body:Wr(xe("Opacity - Body"),Ft.body),boundless:Ar(xe("Opacity - Boundless"),Ft.boundless),effectBox:Ar(xe("Opacity - Effect Box"),Ft.effectBox),name:Wr(xe("Opacity - Name"),Ft.name),nameBorder:Ar(xe("Opacity - Name Border"),Ft.nameBorder),pendulum:Wr(xe("Opacity - Pendulum"),Ft.pendulum),text:Wr(xe("Opacity - Text"),Ft.text)},Tt={x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},Nt=null!==(ie=xe("Art Link"))&&void 0!==ie?ie:je.art,Rt=Ar(xe("Is Using Full Art"),je.artFit),It={aspect:p(st,Lt,void 0,mt).ratio,height:Kr(xe("Art Crop - Height (%)"),Tt.height),width:Kr(xe("Art Crop - Width (%)"),Tt.width),x:Kr(xe("Art Crop - X (%)"),Tt.x),y:Kr(xe("Art Crop - Y (%)"),Tt.y),unit:"%"},Et={x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},zt=Ar(xe("Has Background"),je.hasBackground),Dt=null!==(le=xe("Background Link"))&&void 0!==le?le:je.background,Bt=(null!==(se=xe("Background Type"))&&void 0!==se?se:je.backgroundType).toLowerCase(),Pt=Ar(xe("Is Using Full Background"),je.backgroundFit),Mt={aspect:p(st,Lt,Bt,mt).ratio,height:Kr(xe("Background Crop - Height (%)"),Et.height),width:Kr(xe("Background Crop - Width (%)"),Et.width),x:Kr(xe("Background Crop - X (%)"),Et.x),y:Kr(xe("Background Crop - Y (%)"),Et.y),unit:"%"},Ht=X(),At=(null!==(ce=xe("Name Style Type"))&&void 0!==ce?ce:je.nameStyleType).toLowerCase(),Wt={embossPitch:Wr(xe("Name Style - Emboss Pitch"),Ht.embossPitch),embossYaw:Wr(xe("Name Style - Emboss Yaw"),Ht.embossYaw),embossThickness:Wr(xe("Name Style - Emboss Thickness"),Ht.embossThickness),fillStyle:Yr(xe("Name Style - Fill Style"),Ht.fillStyle),font:null!==(de=xe("Name Style - Font"))&&void 0!==de?de:Ht.font,gradientAngle:Wr(xe("Name Style - Gradient Angle"),Ht.gradientAngle),gradientColor:null!==(ue=xe("Name Style - Gradient Color"))&&void 0!==ue?ue:Ht.gradientColor,hasEmboss:Ar(xe("Name Style - Has Emboss"),Ht.hasEmboss),hasGradient:Ar(xe("Name Style - Has Gradient"),Ht.hasGradient),hasOutline:Ar(xe("Name Style - Has Outline"),Ht.hasOutline),hasShadow:Ar(xe("Name Style - Has Shadow"),Ht.hasShadow),headTextFillStyle:Yr(xe("Name Style - Headtext Fill Style"),Ht.headTextFillStyle),lineColor:Yr(xe("Name Style - Line Color"),Ht.lineColor),lineOffsetX:Wr(xe("Name Style - Line Offset X"),Ht.lineOffsetX),lineOffsetY:Wr(xe("Name Style - Line Offset Y"),Ht.lineOffsetY),lineWidth:Wr(xe("Name Style - Line Width"),Ht.lineWidth),pattern:null!==(be=xe("Name Style - Pattern"))&&void 0!==be?be:Ht.pattern,preset:null!==(me=xe("Name Style - Preset"))&&void 0!==me?me:Ht.preset,shadowBlur:Wr(xe("Name Style - Shadow Blur"),Ht.shadowBlur),shadowColor:Yr(xe("Name Style - Shadow Color"),Ht.shadowColor),shadowOffsetX:Wr(xe("Name Style - Shadow Offset X"),Ht.shadowOffsetX),shadowOffsetY:Wr(xe("Name Style - Shadow Offset Y"),Ht.shadowOffsetY)},Kt=Ar(xe("Is Link"),null!==(pe=je.isLink)&&void 0!==pe?pe:"link"===Oe),Yt=null!==(ge=[Ar(xe("Link - Top Left Arrow"),!1)?"1":"",Ar(xe("Link - Top Arrow"),!1)?"2":"",Ar(xe("Link - Top Right Arrow"),!1)?"3":"",Ar(xe("Link - Left Arrow"),!1)?"4":"",Ar(xe("Link - Right Arrow"),!1)?"6":"",Ar(xe("Link - Bottom Left Arrow"),!1)?"7":"",Ar(xe("Link - Bottom Arrow"),!1)?"8":"",Ar(xe("Link - Bottom Right Arrow"),!1)?"9":""].filter(e=>""!==e))&&void 0!==ge?ge:[],Ut=null!==(he=xe("Link Rating"))&&void 0!==he?he:"",Gt=[!1,"#000000",!1,"#000000"],Xt=[Ar(xe("Stat Style - Is Custom"),Gt[0]),Yr(xe("Stat Style - Fill Color"),Gt[1]),Ar(xe("Stat Style - Has Shadow"),Gt[2]),Yr(xe("Stat Style - Shadow Color"),Gt[3])],Vt=[Ar(xe("Type Style - Is Custom"),Gt[0]),Yr(xe("Type Style - Fill Color"),Gt[1]),Ar(xe("Type Style - Has Shadow"),Gt[2]),Yr(xe("Type Style - Shadow Color"),Gt[3])],qt=[Ar(xe("Effect Style - Is Custom"),Gt[0]),Yr(xe("Effect Style - Fill Color"),Gt[1]),Ar(xe("Effect Style - Has Shadow"),Gt[2]),Yr(xe("Effect Style - Shadow Color"),Gt[3])],_t=[Ar(xe("Pendulum Effect Style - Is Custom"),Gt[0]),Yr(xe("Pendulum Effect Style - Fill Color"),Gt[1]),Ar(xe("Pendulum Effect Style - Has Shadow"),Gt[2]),Yr(xe("Pendulum Effect Style - Shadow Color"),Gt[3])],Jt=[Ar(xe("Other Style - Is Custom"),Gt[0]),Yr(xe("Other Style - Fill Color"),Gt[1]),Ar(xe("Other Style - Has Shadow"),Gt[2]),Yr(xe("Other Style - Shadow Color"),Gt[3])];let $t={};try{var Qt;$t=JSON.parse(null!==(Qt=xe("External Info (JSON)"))&&void 0!==Qt?Qt:"{}")}catch(rn){console.error("csvToCardList",rn)}const Zt=(null!==(fe=xe("Flag"))&&void 0!==fe?fe:"").split("|").map(Number).slice(0,oe),en=[0,0].map((e,t)=>"number"===typeof Zt[t]?Zt[t]:e),tn=(null!==(ve=xe("Dye List"))&&void 0!==ve?ve:"").split("|").map(String).slice(0,7),nn=["","","","","","",""].map((e,t)=>"string"===typeof tn[t]?tn[t]:e),an=(null!==(ye=xe("Star List"))&&void 0!==ye?ye:"").split("|").map(String).slice(0,U);return Object(l.a)(Object(l.a)({id:Object(Q.a)()},je),{},{art:Nt,artCrop:It,artFinish:Ee,artFit:Rt,artSource:"online",atk:Me,attribute:Ie,attributeType:Ne,background:Dt,backgroundCrop:Mt,backgroundFit:Pt,backgroundSource:"online",backgroundType:Bt,cardIcon:He,condenseTolerant:ht,cornerText:nt,creator:Ae,def:We,dyeList:nn,effect:Ke,effectStyle:{condenseTolerant:ht,upSize:ft,fontStyle:yt,background:xt,minLine:wt,justifyRatio:St},effectTextStyle:qt,externalInfo:$t,finish:Ye,firstEditionText:et,flag:en,foil:Te,format:Ue,frame:Oe,furiganaHelper:Xe,hasBackground:zt,hasCornerText:at,isDuelTerminalCard:rt,isFirstEdition:tt,isLegacyCard:lt,isLimitedEdition:it,isLink:Kt,isPendulum:st,isSpeedCard:ot,leftFrame:ke,linkMap:Yt,linkRating:Ut,name:Ve,nameStyle:Wt,nameStyleType:At,opacity:Lt,otherFinish:[ze,Be,De,Pe],otherTextStyle:Jt,password:qe,pendulumEffect:dt,pendulumFrame:ct,pendulumRightFrame:Se,pendulumScaleBlue:bt,pendulumScaleRed:ut,pendulumSize:mt,pendulumStyle:{upSize:vt,fontStyle:jt,background:Ot,minLine:kt,justifyRatio:Ct},pendulumTextStyle:_t,region:Ge,rightFrame:we,setId:_e,star:Fe,starList:an,starAlignment:Je,statTextStyle:Xt,sticker:$e,subFamily:Qe,typeAbility:gt,typeTextStyle:Vt})}).filter(e=>null!=e)}catch(t){return console.error("csvToCardList",t),[]}},Gr=(e,t)=>{const n="string"===typeof e?parseInt(e):e,a="string"===typeof t?parseInt(t):t,r=!!n&&isFinite(n),i=!!a&&isFinite(a);if(r&&!i)return-1;if(!r&&i)return 1;if(r&&i)return(null!==a&&void 0!==a?a:0)-(null!==n&&void 0!==n?n:0);const o="?"===e?1:""===e?-1:0,l="?"===t?1:""===t?-1:0;return l-o===0&&"string"===typeof e&&"string"===typeof t?(null!==e&&void 0!==e?e:"").localeCompare(t):l-o},Xr=(e,t)=>e.name.localeCompare(t.name),Vr=(e,t)=>e.setId.localeCompare(t.setId),qr=(e,t)=>Gr(e.atk,t.atk),_r=(e,t)=>Gr(e.def,t.def),Jr=(e,t)=>e.isLink&&t.isLink?t.linkMap.length-e.linkMap.length:Gr(e.star,t.star),$r=(e,t)=>{try{var n,a,r,i;const o=He[t.frame].sortWeight-He[e.frame].sortWeight;if(0!==o)return o;return(null!==(n=null===(a=He[t.pendulumFrame])||void 0===a?void 0:a.sortWeight)&&void 0!==n?n:1e3)-(null!==(r=null===(i=He[e.pendulumFrame])||void 0===i?void 0:i.sortWeight)&&void 0!==r?r:1e3)}catch(o){return 0}},Qr=e=>{const t=Object(l.a)({},e),{frame:n,isLink:a}=t;return("spell"===n||"trap"===n||$n(t))&&(t.atk="",t.def="",t.star=0),a&&(t.def="",t.star=0),t},Zr=(e,t,n)=>{for(let a=0;a<e.length;a++){const r=e[a](t,n);if(0!==r)return r}return 0},ei={name:{key:"name",sortFunction:e=>e.map(Qr).sort((e,t)=>Zr([Xr,Jr,$r,Vr,qr,_r],e,t))},atk:{key:"atk",sortFunction:e=>e.map(Qr).sort((e,t)=>Zr([qr,_r,Jr,$r,Xr,Vr],e,t))},def:{key:"def",sortFunction:e=>e.map(Qr).sort((e,t)=>Zr([_r,qr,Jr,$r,Xr,Vr],e,t))},set:{key:"set",sortFunction:e=>e.map(Qr).sort((e,t)=>Zr([Vr,$r,Jr,Xr,qr,_r],e,t))},level:{key:"level",sortFunction:e=>e.map(Qr).sort((e,t)=>Zr([$r,Jr,Xr,Vr,qr,_r],e,t))}},ti=(e,t)=>{const n=Object.values(t).filter(e=>null!=e);return 0===n.length?e:n.reduce((e,t)=>t(e),e)},ni=Object(wr.create)(Object(Er.subscribeWithSelector)(e=>({activeId:"",cardDisplayList:[],cardList:[],selectedMap:{},filterFunctionMap:{},filterResetSignal:0,isListDirty:!1,listName:"card-list",pendingActiveCard:void 0,visible:"true"===localStorage.getItem("manager-panel-visible"),setFilterFunction:t=>{let{type:n,value:a}=t;return e(e=>{let{cardList:t,filterFunctionMap:r}=e;const i=Object(l.a)({},r);if("text"===n){const e=a.toLowerCase();i[n]=t=>t.filter(t=>{let{name:n,effect:a,pendulumEffect:r,isPendulum:i}=t;return(wa(n).toLowerCase()+ka(a).toLowerCase()+(i?ka(r).toLowerCase():"")).includes(e)})}return{filterFunctionMap:i,cardDisplayList:ti(t,i)}})},resetFilter:()=>{e(e=>{let{filterResetSignal:t,cardList:n}=e;return{filterFunctionMap:{},filterResetSignal:t+1,cardDisplayList:[...n]}})},addCard:t=>e(e=>{let{cardList:n}=e;const a=Object(Q.a)(),r=Object(l.a)({id:a},t);return{activeId:r.id,cardList:[...n,r],cardDisplayList:[...n,r]}}),changeEditStatus:t=>{"load"===t&&e({isListDirty:!1}),"download"===t&&e({isListDirty:!1})},toggleVisible:t=>e(e=>{let{visible:n}=e;return{visible:null!==t&&void 0!==t?t:!n}}),setListName:t=>e({listName:t}),setPendingActiveCard:t=>e({pendingActiveCard:t}),changeActiveCard:function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(e=>{let{cardList:a,cardDisplayList:r,isListDirty:i}=e,o=i;if(!1===o&&n){const e=a.find(e=>e.id===t.id);o=!e||!((e,t)=>{const{artCrop:n,backgroundCrop:a}=e,r=Object(oa.a)(e,ua),{artCrop:i,backgroundCrop:o}=t,l=Object(oa.a)(t,ba);return Object(sa.a)(r,l)&&Oa(n,i)&&Oa(a,o)})(t,e)}return{isListDirty:o,cardList:a.map(e=>e.id===t.id?Object(l.a)({},t):e),cardDisplayList:r.map(e=>e.id===t.id?Object(l.a)({},t):e)}})},setActiveId:t=>e({activeId:t}),selectCard:(t,n)=>{e(e=>{let{selectedMap:a}=e;const r=Object(l.a)({},a);return"add"===n?r[t]=t:delete r[t],{selectedMap:r}})},setSelectMap:(t,n)=>e(e=>{let{selectedMap:a}=e;return{selectedMap:t.reduce((e,t)=>(e[t.id]=t.id,e),"replace"===n?{}:Object(l.a)({},a))}}),setCardList:(t,n)=>{var a;e({filterFunctionMap:{},isListDirty:!1,activeId:null!==n&&void 0!==n?n:null===(a=t[0])||void 0===a?void 0:a.id,cardList:t,cardDisplayList:[...t]})},deleteCard:t=>{e(e=>{var n,a,r,i;let{cardList:o,activeId:l,cardDisplayList:s}=e;const c=o.filter(e=>e.id!==t),d=s.filter(e=>e.id!==t),u=d.findIndex(e=>e.id===l);return{activeId:l===t?null!==(n=null!==(a=null===(r=d[u-1])||void 0===r?void 0:r.id)&&void 0!==a?a:null===(i=d[0])||void 0===i?void 0:i.id)&&void 0!==n?n:"":l,cardList:c,cardDisplayList:d}})},duplicateCard:t=>{e(e=>{let{cardList:n,filterFunctionMap:a}=e;const r=n.findIndex(e=>{let{name:n}=e;return n===t.name}),i=Object(Q.a)(),o=Object(l.a)(Object(l.a)({},Object(la.a)(t)),{},{name:"".concat(t.name," - Copy"),id:i}),s=r<0?[...n,o]:[...n.slice(0,r),n[r],o,...n.slice(r+1,n.length)];return{activeId:i,pendingActiveCard:o,cardList:s,cardDisplayList:ti(s,a)}})},sortList:t=>{e(e=>{let{cardDisplayList:n,cardList:a}=e;return{cardDisplayList:ei[t].sortFunction(n),cardList:ei[t].sortFunction(a)}})}}))),ai=(e,t)=>{const n=Object(Q.a)();let a=cn(),r=!1;if(!e)return{isPartial:r,card:Object(l.a)(Object(l.a)({},a),{},{id:n})};try{const n="string"===typeof e?JSON.parse(e):e;if(t){const e=ga(n);a=Object.keys(e).length>0?fa(e,t):fa(n,t)}else if(va(n))a=fa(n);else if(ya(n)){const e=ga(n);a=fa(e)}else if(Array.isArray(n.data)){const e=Array.isArray(n.data)?n.data[0]:n,{isPartial:t,result:i}=Ya(e);r=t,a=i}else if((e=>{try{return"id"in e&&"frameType"in e&&"card_sets"in e}catch(t){return console.error(t),!1}})(n)){const{isPartial:e,result:t}=Ya(n);r=e,a=t}else{const{isPartial:e,result:t}=(e=>{const{name:t,atk:n,def:a,attribute:r,effect:i,boxSize:o,copyright:s,icon:c,id:d,image:u,layout:b,level:m,link:p,pendulum:g,rarity:h,serial:f,type:v,variant:y,version:j}=e,{red:x,blue:O,boxSize:w,boxSizeEnabled:k,effect:S,enabled:F}=g,L=La[c],T=Ia[r],N=za[b],R="string"===typeof(I=u)&&I.startsWith("data:image/");var I;const z=parseInt(m),D=h?Da[h.toLowerCase()]:void 0;let B=void 0===L||void 0===T||void 0===N||void 0===D;const{finish:P,artFinish:M,text:H}=null!==D&&void 0!==D?D:{},A=H?q[H]:null,W=cn();return{isPartial:B,result:Object(l.a)(Object(l.a)({},W),{},{finish:null!==P&&void 0!==P?P:[],name:t,nameStyleType:H?"predefined":"auto",nameStyle:A?A.value:X(),atk:n,def:a,attribute:null!==T&&void 0!==T?T:C,effect:i,creator:s,subFamily:null!==L&&void 0!==L?L:E,setId:d,frame:null!==N&&void 0!==N?N:"normal",star:"".concat(z)===m&&z<=13?z:m,typeAbility:v.split("/").map(e=>e.trim()),art:R?"":u,artFit:!0,artData:R?u:"",artSource:R?"offline":"online",artFinish:null!==M&&void 0!==M?M:"normal",isLink:"link"===N&&null!=p,linkMap:[!0===(null===p||void 0===p?void 0:p.topLeft)?"1":null,!0===(null===p||void 0===p?void 0:p.topCenter)?"2":null,!0===(null===p||void 0===p?void 0:p.topRight)?"3":null,!0===(null===p||void 0===p?void 0:p.middleLeft)?"4":null,!0===(null===p||void 0===p?void 0:p.middleRight)?"6":null,!0===(null===p||void 0===p?void 0:p.bottomLeft)?"7":null,!0===(null===p||void 0===p?void 0:p.bottomCenter)?"8":null,!0===(null===p||void 0===p?void 0:p.bottomRight)?"9":null].filter(e=>"string"===typeof e),isPendulum:F,pendulumScaleBlue:O,pendulumScaleRed:x,pendulumEffect:S,pendulumSize:Na[w],password:f,externalInfo:{version:j,variant:y,boxSize:o,rarity:h,pendulum:{boxSize:w,boxSizeEnabled:k}}})}})(n);r=e,a=t}}catch(i){console.error("decodedCard",e,i);try{a=function(e){let t;return t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?ha(e):"string"===typeof e?JSON.parse(e):e,fa(t)}(e,!0),gr.a.info({message:Ir()["service.decode.outdated.message"],description:Ir()["service.decode.outdated.description"]})}catch(i){console.error("cardData",e,i),gr.a.error({message:Ir()["service.decode.error.message"],description:Ir()["service.decode.error.description"]})}}return{isPartial:r,card:Object(l.a)(Object(l.a)({},a),{},{id:n})}},ri={debounce:{type:"debounce",wait:400},throttle:{type:"throttle",wait:1e3}},ii=Object(wr.create)((e,t)=>({card:sn(),setCard:(t,n)=>{const a=ni.getState().changeActiveCard;if("function"===typeof t)e(e=>{const r=t(e.card);return a(r,null===n||void 0===n||n),{card:r}});else if("id"in(r=t)&&""!==r.id)a(t,n),e({card:t});else{const r=Object(l.a)({id:Object(Q.a)()},t);a(r,n),e({card:r})}var r},getUpdater:function(e){var n;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,r=arguments.length>2?arguments[2]:void 0;const{setCard:i}=t(),o=t=>{i(n=>{var r;return Object(l.a)(Object(l.a)({},n),{},{[e]:a("string"===typeof t||"number"===typeof t||Array.isArray(t)?t:null===t||void 0===t||null===(r=t.target)||void 0===r?void 0:r.value)})})};if(!r)return o;const s="string"===typeof r?null!==(n=ri[r])&&void 0!==n?n:void 0:r;if(!s)return o;const{wait:c,type:d}=s;return"debounce"===d?Cr()(o,c):"throttle"===d?Lr()(o,c):o}})),oi=Object(wr.create)(e=>{const{allowHotkey:t,exportFormat:n,exportScheme:a,globalScale:r,mirrorPendulumScale:i,reduceMotionColor:o,resolution:s,showCreativeOption:c,showExtraAttribute:u,showExtraDecorativeOption:b,slidingType:m}=(()=>{try{var e;const t=JSON.parse(null!==(e=localStorage.getItem("setting"))&&void 0!==e?e:"{}");return t&&"object"===typeof t&&!Array.isArray(t)?t:{}}catch(t){return console.error("useSetting: Error when getting cached setting",t),{}}})();return{setting:{exportScheme:"string"===typeof a?a:"with-name",globalScale:"number"===typeof r&&r<=d.maximumScale?r:1,exportFormat:"string"===typeof n?n:"csv",slidingType:"string"===typeof m?m:"auto",resolution:Array.isArray(s)&&"number"===typeof s[0]&&"number"===typeof s[1]?s:[d.width,d.height],allowHotkey:"boolean"!==typeof t||t,reduceMotionColor:"boolean"===typeof o&&o,showCreativeOption:"boolean"!==typeof c||c,showExtraAttribute:"boolean"!==typeof u||u,showExtraDecorativeOption:"boolean"!==typeof b||b,mirrorPendulumScale:"boolean"===typeof i&&i},updateSetting:t=>{e(e=>{const n="function"===typeof t?t(e.setting):Object(l.a)(Object(l.a)({},e.setting),t);return localStorage.setItem("setting",JSON.stringify(n)),{setting:n}})}}}),li=e=>{let{isTainted:t,isInitializing:n,exportCanvasRef:r,exportRef:i,onExport:o,onDownloadError:s,onDownloadComplete:c}=e;const d=Rr(),{card:u}=ii(),{addToBatch:b,batchDataMap:m,isBatchDownloading:p}=kr(),g=oi(e=>e.setting.resolution),h=oi(e=>e.setting.exportScheme),{opacity:f,name:v,isPendulum:y,pendulumSize:j}=u,x=wa(v),O=Object(a.useRef)(!1),w=Object(a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;const n=r.current,a=null===n||void 0===n?void 0:n.cloneNode(),i=null===n||void 0===n?void 0:n.getContext("2d"),o=null===a||void 0===a?void 0:a.getContext("2d");if(n&&i&&a&&o&&!t)return e&&(a.width=e[0],a.height=e[1]),o.drawImage(n,0,0,n.width,n.height,0,0,a.width,a.height),a.toDataURL("image/png")},[r,t,g]),k=Object(a.useCallback)(async function(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;try{const n=w(a);if("string"!==typeof n)throw new Error("Failed to add card to batch");const r=await fetch(n),i=await r.blob();p&&b(t,e,i)}catch(r){s()}null===(n=document.querySelector("#export-canvas-guard"))||void 0===n||n.classList.remove("guard-on"),c()},[b,w,p,c,s,g]),S=Object(a.useCallback)(function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;try{const e=wa(v),a=w(t);if("string"!==typeof a)throw new Error("Failed to trigger automatic download");var n=document.createElement("a");n.download=e?"".concat(e,".png"):"card.png",n.href=a,n.click()}catch(a){s()}null===(e=document.querySelector("#export-canvas-guard"))||void 0===e||e.classList.remove("guard-on"),c()},[g,c,v,w,s]);return Object(a.useEffect)(()=>{let e=!0;return setTimeout(()=>{e&&(document.title=x?"".concat(x," - Yu-Gi-Oh Carder"):"Yu-Gi-Oh Carder")},500),()=>{e=!1}},[x]),Object(a.useEffect)(()=>{let e=()=>{var e;localStorage.setItem("card-data",JSON.stringify(u)),localStorage.setItem("card-version",null!==(e="2.3.42")?e:"unknown")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),Object(a.useEffect)(()=>{let e=!0,t=e=>(e.preventDefault(),d["prompt.warning.on-leave.label"]);if(!1===n){try{var a;localStorage.setItem("card-data",JSON.stringify(u)),localStorage.setItem("card-version",null!==(a="2.3.42")?a:"unknown")}catch(s){const e="fail-to-set-storage-notification";gr.a.close(e),gr.a.error({key:e,message:d["error.card-max-size.message"],description:d["error.card-max-size.description"]})}(async()=>{var n,a,s,c;if(r.current&&(window.addEventListener("beforeunload",t),null===(n=document.getElementById("export-canvas"))||void 0===n||n.classList.remove("js-export-available"),null===(a=document.getElementById("preview-canvas"))||void 0===a||a.classList.remove("js-export-available"),null===(s=document.getElementById("export-canvas-guard"))||void 0===s||s.setAttribute("style",""),null===(c=document.getElementById("save-button-waiting"))||void 0===c||c.setAttribute("style","display: block"),i.current.pipelineRunning=!0,await i.current.currentPipeline,e&&(i.current.currentPipeline=o({isPendulum:y,opacity:f,pendulumSize:j,isRelevant:()=>e}),await i.current.currentPipeline,e))){var d,b,g,v;const e=Object(l.a)(Object(l.a)({},u),{},{artData:"",backgroundData:""}),n=JSON.stringify(pa(e));"string"===typeof n&&function(e,t){if(window.history.pushState){let n=new URLSearchParams(window.location.search);n.set(e,t);let a=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+n.toString();window.history.pushState({path:a},"",a)}}("data",n),null===(d=document.getElementById("export-canvas"))||void 0===d||d.classList.add("js-export-available"),null===(b=document.getElementById("preview-canvas"))||void 0===b||b.classList.add("js-export-available"),null===(g=document.getElementById("export-canvas-guard"))||void 0===g||g.setAttribute("style","display: none"),null===(v=document.getElementById("save-button-waiting"))||void 0===v||v.setAttribute("style","display: none"),window.removeEventListener("beforeunload",t),i.current.pipelineRunning=!1,O.current&&(O.current=!1,S()),p&&!m[e.id]&&setTimeout(()=>{k("with-name"===h?"".concat(x,".png"):"".concat(e.setId," - ").concat(x,".png"),e.id)},200)}})()}return()=>{window.removeEventListener("beforeunload",t),e=!1}}),{onSave:e=>{var t;null===(t=document.querySelector("#export-canvas-guard"))||void 0===t||t.classList.add("guard-on");const n=e?[...e]:void 0;setTimeout(()=>{!1===i.current.pipelineRunning?S(n):O.current=!0},200)},isPipelineRunning:()=>i.current.pipelineRunning}};var si=n(337);const ci=()=>{const[e,t]=Object(a.useState)(null),[n,r]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{(async()=>{const e=await async function(){try{return await Object(si.a)("YgoCarderDb",4,{upgrade(e,t,n){e.objectStoreNames.contains("messageStore")||e.createObjectStore("messageStore",{keyPath:"key"}),e.objectStoreNames.contains("presetLayoutStore")||e.createObjectStore("presetLayoutStore",{keyPath:"key"}),e.objectStoreNames.contains("presetNameStyleStore")||e.createObjectStore("presetNameStyleStore",{keyPath:"key"}),4===n&&(e.objectStoreNames.contains("presetImageStore")||e.createObjectStore("presetImageStore",{keyPath:"key"})),console.info("YgoCarderDb ready")}})}catch(e){return console.error("setupYgoCarderDb",e),null}}();t(e),r(!0)})(),setTimeout(()=>{r(!0)},5e3)},[]),{db:e,dbReady:n}},di=e=>{let{value:t="",onChange:n}=e;const[r,i]=Object(a.useState)(t),[o,l]=Object(a.useState)(()=>({hex:Ua.test(t)?t:"#000000",rgb:Ga(t,!1)}));return Object(a.useEffect)(()=>{const e=r.startsWith("#")?r:"#".concat(r);Ua.test(e)&&(i(e),l({hex:e,rgb:Ga(e,!1)}),null===n||void 0===n||n(e))},[r]),Object(a.useEffect)(()=>{i(t),l({hex:Ua.test(t)?t:"#000000",rgb:Ga(t,!1)})},[t]),{inputText:r,color:o,setColor:i}};var ui=n(21);const bi=Object(wr.create)(e=>({memory:{resetCanvasCounter:0,activeDropzone:0,layoutPresetList:[],nameStylePresetList:[],imagePresetList:[],imagePresetMap:{}},updateGlobalMemory:t=>{e(e=>{const n="function"===typeof t?t(e.memory):Object(l.a)(Object(l.a)({},e.memory),t);return e.memory.imagePresetList!==n.imagePresetList&&(n.imagePresetMap=n.imagePresetList.reduce((e,t)=>(e[t.content.name]=t.content,e),{})),{memory:n}})}})),mi=e=>{const{targetMemory:t,updateGlobalMemory:n}=bi(Object(ui.useShallow)(t=>{let{memory:n,updateGlobalMemory:a}=t;return{targetMemory:n[e],updateGlobalMemory:a}}));return[t,Object(a.useCallback)(t=>{n(n=>Object(l.a)(Object(l.a)({},n),{},{[e]:"function"===typeof t?t(n[e]):t}))},[e,n])]},{height:pi,width:gi,maximumScale:hi}=d,fi=()=>"#000000".replace(/0/g,()=>(~~(12*Math.random()+2)).toString(16)),vi=e=>{let{ctx:t,color:n=fi(),width:a,offset:r=4,edge:i,baseline:o,xRatio:l}=e;const s=t.fillStyle;t.fillStyle=n,t.beginPath(),t.rect(i/l,o+1+Math.random()*r,a/l,2),t.fillStyle=s},yi=(e,t,n,a,r,i)=>{if(!e||!t)return a;const{stroke:o=!1}=null!==i&&void 0!==i?i:{};e.textAlign="left";const l=Array.from(t);let s=a;return l.forEach(t=>{e.fillText(t,s,r),o&&e.strokeText(t,s,r),s+=e.measureText(t).width*(2+n)/2}),s},ji=(e,t,n,a,r,i)=>{if(!e||!t)return a;const{stroke:o=!1}=null!==i&&void 0!==i?i:{};e.textAlign="right";const l=Array.from(t);let s=a;return l.forEach((t,a)=>{const i=l[l.length-a-1];e.fillText(i,s,r),o&&e.strokeText(i,s,r),s-=e.measureText(i).width*(2+n)/2}),s},xi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gi*hi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pi*hi;return!!e&&(e.clearRect(0,0,t,n),!0)},Oi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return async(n,a,r,i)=>{if(!n||!Array.isArray(e)||e.length<=0)return Promise.resolve();for(const s of e){const e=t[s];if(r&&t[s]){var o,l;const{partInstructionMap:t,pendulumSubstituteMap:c}=e,d=a&&null!==(o=t[a])&&void 0!==o?o:[],u=i?null!==(l=c[i])&&void 0!==l?l:i:ne;if(d.length)for(const{blendMode:e="source-over",opacity:a=1}of d)n.globalCompositeOperation=e,n.globalAlpha=a,await r(s,u);else await r(s,u);n.globalAlpha=1,n.globalCompositeOperation="source-over"}}n.globalAlpha=1,n.globalCompositeOperation="source-over"}},wi="#000000",ki="#000000",Si="#000000",Ci=e=>{var t,n;let{ctx:a,x:r,y:i,blur:o,color:l,colorGradient:s,shadowColor:c,lineColor:d,lineColorGradient:u,lineWidth:b,globalScale:m=1,useDefault:p=!0}=e;return(p||"number"===typeof r)&&(a.shadowOffsetX=(null!==r&&void 0!==r?r:0)*m),(p||"number"===typeof i)&&(a.shadowOffsetY=(null!==i&&void 0!==i?i:0)*m),(p||"number"===typeof o)&&(a.shadowBlur=(null!==o&&void 0!==o?o:0)*m),(p||"string"===typeof c)&&(a.shadowColor=null!==c&&void 0!==c?c:ki),(p||"string"===typeof l)&&(a.fillStyle=null!==(t=null!==s&&void 0!==s?s:l)&&void 0!==t?t:Si),(p||"string"===typeof d)&&(a.strokeStyle=null!==(n=null!==u&&void 0!==u?u:d)&&void 0!==n?n:wi),(p||"number"===typeof b)&&(a.lineWidth=(null!==b&&void 0!==b?b:0)*m),()=>{(p||"number"===typeof r)&&(a.shadowOffsetX=0),(p||"number"===typeof i)&&(a.shadowOffsetY=0),(p||"number"===typeof o)&&(a.shadowBlur=0),(p||"string"===typeof c)&&(a.shadowColor=ki),(p||"string"===typeof l)&&(a.fillStyle=Si),(p||"string"===typeof d)&&(a.strokeStyle=wi),(p||"number"===typeof b)&&(a.lineWidth=0)}},Fi={},Li=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Promise(e&&""!==t?r=>{var i,o;if(!0===(null===(i=Fi[t])||void 0===i?void 0:i.ready)){const i=Fi[t].image,o="number"===typeof n?n:n(i),l="number"===typeof a?a:a(i);return e.drawImage(i,o,l),void setTimeout(()=>r(!0),0)}if(null!==(o=Fi[t])&&void 0!==o&&o.error)return void setTimeout(()=>r(!0),0);const l=Fi[t]&&(Fi[t].cache||Fi[t].ready),s=l?Fi[t].image:new Image;l||(s.src="/ygocarder"+t),s.addEventListener("load",()=>{const i="number"===typeof n?n:n(s),o="number"===typeof a?a:a(s);e.drawImage(s,i,o),Fi[t]&&(Fi[t].ready=!0,Fi[t].error=!1),r(!0)},{once:!0}),s.addEventListener("error",()=>{Fi[t]&&(Fi[t].error=!0),r(!1)},{once:!0}),l||(Fi[t]={image:s,ready:!1,error:!1,cache:!0})}:e=>e(!1))}(e,"/asset/image/"+t,n,a)},Ti=(e,t,n)=>{const{naturalWidth:a,naturalHeight:r}=e,i="number"===typeof t?t:null===t||void 0===t?void 0:t(e),o="number"===typeof n?n:null===n||void 0===n?void 0:n(e);let l=a,s=r;return"number"!==typeof o&&"number"===typeof i?(l=i,s=l*r/a):"number"===typeof o&&"number"!==typeof i?(s=o,l=s*a/r):"number"===typeof o&&"number"===typeof i&&(l=i,s=o),{actualDH:s,actualDW:l}},Ni=async(e,t,n,a,r,i,o,l,s,c,d)=>{const{cache:u=!0,internalImage:b=!0,overwrite:m=!1,crossorigin:p}=null!==d&&void 0!==d?d:{};return new Promise(e&&""!==t?d=>{var g,h;if(!0===(null===(g=Fi[t])||void 0===g?void 0:g.ready)){const u=Fi[t].image,b="number"===typeof n?n:n(u),m="number"===typeof a?a:a(u),p="number"===typeof o?o:null===o||void 0===o?void 0:o(u),g="number"===typeof l?l:null===l||void 0===l?void 0:l(u),h="number"===typeof s?s:null===s||void 0===s?void 0:s(u),f="number"===typeof c?c:null===c||void 0===c?void 0:c(u),{actualDH:v,actualDW:y}=Ti(u,r,i);return"number"===typeof p&&"number"===typeof g&&"number"===typeof h&&"number"===typeof f?e.drawImage(u,p,g,h,f,b,m,y,v):e.drawImage(u,b,m,y,v),void setTimeout(()=>d(!0),0)}if(null!==(h=Fi[t])&&void 0!==h&&h.error&&!1===m)return void setTimeout(()=>d(!0),0);const f=!m&&(Fi[t]&&(Fi[t].cache||Fi[t].ready)),v=f?Fi[t].image:new Image;p&&(v.crossOrigin=p),f||(v.src=b?"/ygocarder"+t:t),v.addEventListener("load",()=>{const u="number"===typeof n?n:n(v),b="number"===typeof a?a:a(v),m="number"===typeof o?o:null===o||void 0===o?void 0:o(v),p="number"===typeof l?l:null===l||void 0===l?void 0:l(v),g="number"===typeof s?s:null===s||void 0===s?void 0:s(v),h="number"===typeof c?c:null===c||void 0===c?void 0:c(v),{actualDH:f,actualDW:y}=Ti(v,r,i);"number"===typeof m&&"number"===typeof p&&"number"===typeof g&&"number"===typeof h?e.drawImage(v,m,p,g,h,u,b,y,f):e.drawImage(v,u,b,y,f),Fi[t]&&(Fi[t].ready=!0,Fi[t].error=!1),d(!0)},{once:!0}),v.addEventListener("error",()=>{Fi[t]&&(Fi[t].error=!0),d(!1)},{once:!0}),u&&!f&&(Fi[t]={image:v,ready:!1,error:!1,cache:!0})}:e=>e(!1))},Ri=async(e,t,n,a,r,i,o,l,s,c)=>await Ni(e,"/asset/image/"+t,n,a,r,i,o,l,s,c),Ii=async function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[a,r,i,o,s,c,d,u,b,m,p]=[...t],g=await Ni(a,r,i,o,s,c,d,u,b,m,p);if(!1===g&&"anonymous"===(null===p||void 0===p?void 0:p.crossorigin)){const e=Object(l.a)(Object(l.a)({},p),{},{overwrite:!0});return delete e.crossorigin,await Ni(a,r,i,o,s,c,d,u,b,m,e)}return g},Ei=async(e,t,n,a,r,i,o,s)=>{const c=e.getContext("2d"),d=document.createElement("canvas");d.width=r,d.height=i;const u=d.getContext("2d",{willReadFrequently:!0});if(!u||!c)return;await Ri(u,t,0,0,r,i),null!==s&&void 0!==s&&s.color&&(u.fillStyle=s.color,u.fillRect(0,0,r,i),u.globalCompositeOperation="destination-in"),await Ri(u,t,0,0,r,i),u.globalCompositeOperation="source-over";const b=Ci(Object(l.a)(Object(l.a)({ctx:c},s),{},{globalScale:o}));c.drawImage(d,n,a),b()},zi=e=>{var t,n;let{ctx:a,letter:r,isLastOfLine:i=!1,debug:o,fontStyle:l,xRatio:s,metricMethod:c="standard",globalScale:d}=e;if(Nt.test(r))return{width:0,boundWidth:0};const u="tcg"===l?tn:Qt,b="tcg"===l?Zt:Jt,m="tcg"===l?en:$t,p=a.measureText(r),{width:g,actualBoundingBoxLeft:h,actualBoundingBoxRight:f}=p,v=h+f;let y=1;"name"===c&&(y=1+8*(1-s));const j="name"===c||"compact"===c||"furigana"===c?.046875:0;let x=v,O=null!==(t=i?m[r]:b[r])&&void 0!==t?t:0;if("tcg"===l){var w;return{width:g,actualBoundWidth:v,boundWidth:g+2*((null!==(w=u[r])&&void 0!==w?w:0)*g),metric:p,offsetRatio:O}}let k=(null!==(n=u[r])&&void 0!==n?n:0)*g+("furigana"===c?0:Math.min(.075*g,Math.max(.45*d,g*j)*y)),S=1;Ut.test(r)?(x="furigana"===c?v:v*("creator"===c?1.75:2.5),S=.6):Gt.test(r)?(x="furigana"===c?v:Math.max(v,.75*g),k=2*d):Bt.test(r)?x="furigana"===c?v:Math.max(v,.7*g):At.test(r)?x=g:Vt.test(r)?x=2*v:qt.test(r)?x=1.25*v*(i?.5:1):Kt.test(r)?x="furigana"===c?v:Math.max(v,.75*g):Yt.test(r)?x=Math.max(v,.69*g)*("creator"===c?.975:1):Xt.test(r)?(x=g,k=0):x="furigana"===c?v:Math.max(v,.75*g),k="furigana"===c?0:k;const C=1*g*1;return o&&console.info("getLetterWidth ".concat(o),r,p,1,1,"|",C),{width:g,actualBoundWidth:v,boundWidth:"standard"===c?g*S:x+2*k,metric:p,offsetRatio:O}},Di=e=>{var t;let{ctx:n,baseline:a,edge:r,letter:i,xRatio:o,deviation:l,letterMetric:s,textDrawer:c}=e;const{boundWidth:d,metric:u=n.measureText(i),offsetRatio:b=0}=null!==s&&void 0!==s?s:{},{letterMap:m={},threshold:p=10}=null!==l&&void 0!==l?l:{},{uniformBoxDescent:g}=null!==(t=m[i])&&void 0!==t?t:{},h=u.width*o,f=d?d*o:h,v=null!==c&&void 0!==c?c:e=>{let{ctx:t,letter:n,scaledBaseline:a,scaledEdge:r}=e;t.fillText(n,r,a)},y=(h-f)/2,j=f*b;let x=1,O=0;if("number"===typeof g&&o>=p){const{actualBoundingBoxDescent:e,actualBoundingBoxAscent:t}=n.measureText(i);O=g-e;const a=t+e;x=(a+2*O)/a}n.scale(1,x),v({ctx:n,letter:i,scaledEdge:r/o-y-j,scaledBaseline:(a+O)/x}),n.scale(1,1/x)},Bi=function(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?new RegExp("([".concat(rn,"])|(").concat(st,"[\\w\\W]+?").concat(ct,")|(.+?)"),"u"):new RegExp("([".concat(rn,"])|").concat(st,"([\\w\\W]+?)").concat(ct,"|(.+?)"),"u");return e.split(t).filter(e=>null!=e&&""!==e)},Pi=(e,t,n,a,r)=>{const i=sr(he,r),{fontSize:o,ordinalFontRatio:l=i.ordinalFontRatio,headTextFontRatio:s=i.headTextFontRatio}=n,{font:c,ordinalFont:d,symbolFont:u,symbolFontRatio:b,numberFont:m=c,numberFontRatio:p=1,furiganaFont:g,vietnameseFont:h=c,vietnameseFontRatio:f=1}=t;let v=a.getFontInfo();let y=a.getFontInfo();let j=a.getFontInfo();let x=a.getFontInfo();let O=a.getFontInfo();let w=a.getFontInfo();return{applyFuriganaFont:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];O=a.getFontInfo(),e.font=a.setFamily(g).setWeight(t?"bold":"").setSize(o*s).getFont()},stopApplyFuriganaFont:()=>{e.font=a.setFamily(O.family).setWeight(O.weight).setSize(O.size).getFont()},applyLargerText:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;w=a.getFontInfo(),e.font=a.setSize(o*t).getFont()},stopApplyLargerText:()=>{e.font=a.setSize(w.size).getFont()},applyNumberFont:()=>{v=a.getFontInfo(),e.font=a.setFamily(m).setSize(o*p).getFont()},stopApplyNumberFont:()=>{e.font=a.setFamily(v.family).setSize(v.size).getFont()},applyOrdinalFont:()=>{x=a.getFontInfo(),e.font=a.setFamily(d).setSize(o*l).getFont()},stopApplyOrdinalFont:()=>{e.font=a.setFamily(x.family).setSize(x.size).getFont()},applySymbolFont:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;j=a.getFontInfo();const n=o*t;return e.font=a.setFamily(u).setSize(n).getFont(),{fontSize:n}},stopApplySymbolFont:()=>{e.font=a.setFamily(j.family).setSize(j.size).getFont()},applyVietnameseFont:()=>{y=a.getFontInfo(),e.font=a.setFamily(h).setSize(o*f).getFont()},stopApplyVietnameseFont:()=>{e.font=a.setFamily(y.family).setSize(y.size).getFont()},applyAsymmetricScale:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.scale(t,n)},applyScale:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.scale(t,n)},resetScale:()=>{e.setTransform(1,0,0,1,0,0)},reverseScale:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e.scale(1/t,1/t)}}},Mi=(e,t,n,a,r)=>{const i=(a-r)/2;e.beginPath(),e.arc(t+i,n-i,i,0,2*Math.PI,!1),e.fill(),e.lineWidth=1,e.strokeStyle="#003300",e.stroke()},Hi=e=>{let{footText:t,footTextWidth:n,headText:a,headTextLetterWidth:r,headTextGap:i,headTextSpacing:o,gapPadding:l,debug:s,fitFootText:c,sentenceXRatio:d,xRatio:u}=e;const b=0===a.length,m=r/n*d;let p=o,g=0;m<=.95?p=1*o:m<=1.175?p=o>=0?0:3*o:m<=1.56?p=o>=0?-1*o/4:3*o:(g=.66,p=o>=0?-1*o/4:2*o),(c||u>0&&u<1)&&(p=o);const h=r*(u&&!c?u:!g||c?1:g)+p*(a.length-1),f=b?0:(n-r)/a.length,v=n,y=1===t.length||2*l+h>n?"center":"space-around",j="center"===y?p:f,x="center"===y?2*l+h:v,O=c?Math.min(x,n):x,w="center"===y?(h-n)/2:0,k=Math.max(i,c?Math.min(w,0):w);return s&&console.info("analyzeHeadText ".concat(s),y,j,"|",a,O,x,t,n,k),{gapPadding:l,letterSpacing:j,trueHeadTextWidth:x,headTextWidth:O,alignment:y,halfGap:k,headTextXRatio:"center"===y?g:0}},Ai=(e,t)=>e>=0?t>=0?0:-1*Math.max(-1*e,t):t>=0?-1*Math.max(e,-1*t):0,Wi=e=>{const[t,n]=e.replace(ht,"").replace(ft,"").split(";"),a=parseFloat(n);return{content:t,width:isNaN(a)?0:a}},Ki=e=>{var t;let{ctx:n,token:a,nextToken:r,xRatio:i,previousTokenGap:o=0,letterSpacing:l,lineHeight:s=0,format:c,globalScale:d,textData:u,memory:b}=e;if(!n||!a)return{totalWidth:0,leftMostLetter:"",spaceCount:0,spaceAtEnd:!1,rightGap:0,leftGap:0};const m=null!==(t=null===b||void 0===b?void 0:b.image)&&void 0!==t?t:{},p=bi.getState().memory.imagePresetMap,g=sr(he,d),h=null!==l&&void 0!==l?l:g.letterSpacing,{currentFont:f,fontData:v,fontLevel:y}=u,{metricMethod:j,headTextGapRatio:x=fe.headTextGapRatio,headTextOverflow:O=fe.headTextOverflow,fontStyle:w,letterOffsetMap:k={}}=v,S=v.fontList[y],{bulletWidth:C,capitalLetterRatio:F,fontSize:L,iconSymbolWidth:T=C,largeSymbolRatio:N=g.largeSymbolRatio,headTextSpacing:R=g.headTextSpacing,squareBracketRatio:I,wordLetterSpacing:E}=S,z=-.5*L,{applyScale:D,reverseScale:B,applyLargerText:P,stopApplyLargerText:M,applyFuriganaFont:H,stopApplyFuriganaFont:A,applyOrdinalFont:W,stopApplyOrdinalFont:K,applySymbolFont:Y,stopApplySymbolFont:U,applyNumberFont:G,stopApplyNumberFont:X,applyVietnameseFont:V,stopApplyVietnameseFont:q}=Pi(n,v,S,f,d);let _=a.replaceAll(new RegExp(Tt,"g"),""),J=_;const $=1+h/2;let Q="",Z=0,ee=0,te=!1;const ne=void 0===r;let ae=null!==o&&void 0!==o?o:0,re=!1,ie=0;const oe=new RegExp(at,"g");let le;for(;null!=(le=oe.exec(_));){const e=/(?<=<.+?)(?<!>) ([\w-]+)(?:=["|'|\u201d|\u201c](.+?)["|'|\u201d|\u201c]|\b)(?!<)(?=.*?>)/gm;if(le[1]===nt){var se;let t,n,a,r,o;ae=0;let l,c="";for(;null!==(t=e.exec(le[0]));){t.index===e.lastIndex&&e.lastIndex++;const i=t[1],s=t[2];switch(i){case"src":c=s;break;case"width":n=parseInt(s);break;case"height":a=parseInt(s);break;case"offsetX":r=parseInt(s);break;case"offsetY":o=parseInt(s);break;case"name":l=s}}if(l){const e=m[l];e?(c=e.src,n="number"===typeof n?n:e.width,a="number"===typeof a?a:e.height,r="number"===typeof r?r:e.offsetX,o="number"===typeof o?o:e.offsetY):m[l]={src:c,width:n,height:a,offsetX:r,offsetY:o}}const d=c?p[c]:void 0,u=l?m[l]:void 0;Z+=(null!==(se="number"===typeof n?n:d?d.width:null!==u&&void 0!==u&&u.width?null===u||void 0===u?void 0:u.width:void 0)&&void 0!==se?se:.9*s)/i,J=J.replace(le[0],"".concat(ht,"img").concat(";","0").concat(ft))}}const ce=J.replaceAll(new RegExp(tt,"g"),"").split(kt).filter(e=>null!=e&&""!==e);for(let be=0;be<ce.length;be++){const e=0===be,t=ce[be];if("\u29be"===t){ae=0;Z+=T/i*$,e&&(ie=0,Q=t[0])}else if("\u25cf"===t){ae=0;Z+=C/i*$,e&&(ie=0,Q=t[0])}else if(/[\xa9]/.test(t)){ae=0,P(N);const a=n.measureText(t).width/i;M(),Z+=a*$,e&&(ie=0,Q=t[0])}else if(Mt.test(t)){ae=0,W();const a=n.measureText(t).width/i;K(),Z+=a*$,ee+=1,e&&(ie=0,Q=t[0])}else if(jt.test(t)){ae=0;const{width:n,content:a}=Wi(t);Z+="img"===a?n/i:n,e&&(ie=0,Q=t[0])}else if(an.test(t)){const[a,o,l=""]=t.replaceAll(/{|}/g,"").split(/(\|+)/),s="||"===o,{totalWidth:b}=Ki({ctx:n,token:a,nextToken:r,xRatio:i,letterSpacing:h,previousTokenGap:0,format:c,textData:u,globalScale:d});H();const m=l.split("").map(e=>zi({ctx:n,letter:e,fontStyle:w,metricMethod:"furigana",xRatio:1,globalScale:d}).boundWidth).reduce((e,t)=>e+t,0);A();const{halfGap:p,headTextWidth:g}=Hi({headText:l,headTextLetterWidth:m/i,footText:a,footTextWidth:b,headTextGap:z/i,headTextSpacing:R,gapPadding:x*L/i,fitFootText:s,sentenceXRatio:i,xRatio:"condense"===O&&a.length>1?Math.min(1,i+.1):0}),f=0===l.length?Math.max(z,b/on):p,v=f,y=f,j=Math.max(g,b),k=Ai(ae,v);ae=y,Z+=j-k,ee+=1,e&&(re=!0,ie=v,Q=a[0])}else if(Ot.test(t)){const a=E?1+E/2:$;n.letterSpacing="".concat((a-1)*f.getFontInfo().sizeAsNumber,"px");let r=t,i=0;for(;""!==r;){let e=r[0],t=r.slice(1),a=n.measureText(r).width-n.measureText(t).width;if(et.test(e))D(I),a=n.measureText(r).width-n.measureText(t).width,B(I);else if(Ze.test(e))D(F),a=n.measureText(r).width-n.measureText(t).width,B(F);else if(wt.test(e)&&"tcg"===w)V(),a=n.measureText(r).width-n.measureText(t).width,q();else if(Wt.test(e))G(),a=n.measureText(r).width-n.measureText(t).width,X();else if(It.test(e)&&"tcg"===w){var de;Y(null===(de=k[e])||void 0===de?void 0:de.ratio),a=n.measureText(r).width-n.measureText(t).width,U()}else a=n.measureText(r).width-n.measureText(t).width;i+=a,r=t}const o=Math.max(z,i/on),l=o;Z+=i-Ai(ae,o),ae=l,e&&(ie=o,Q=t[0]),n.letterSpacing="0px"}else if(It.test(t)&&"tcg"===w){var ue;Y(null===(ue=k[t])||void 0===ue?void 0:ue.ratio);const a=n.measureText(t).width*$;U();const r=Math.max(z,a/on),i=r;Z+=a-Ai(ae,r),ae=i,e&&(ie=r,Q=t[0])}else{const{boundWidth:a}=zi({ctx:n,letter:t,isLastOfLine:ne,fontStyle:w,metricMethod:j,xRatio:i,globalScale:d}),r=a*$,o=Math.max(z,r/on),l=o;Z+=r-Ai(ae,o),ae=l,("ocg"===c||"tcg"===c&&/\s+/.test(t))&&!1===Xt.test(t)&&(ee+=1,be===ce.length-1&&(te=!0)),e&&(ie=o,Q=t[0]),_t.test(t)&&(ie=0,ae=0)}}return{totalWidth:Z,spaceCount:ee,spaceAtEnd:te,leftMostLetter:Q,rightGap:ae,leftGap:ie,offsetable:re}},Yi=e=>{let{ctx:t,line:n,width:a,lineHeight:r,xRatio:i,format:o,isLast:l,textData:s,globalScale:c,justifyRatio:d,memory:u}=e;const b=Bi(n);let m=0,p=0,g=0,h=s,f=!1;for(let x=0,O=i;x<b.length;x++){const e=b[x],n=b[x+1];if(e===pt){O=1;continue}if(e===gt){O=i;continue}if("<i>"===e){var v,y;const e=!!Oe[null!==(v=null===(y=s.fontData)||void 0===y?void 0:y.variant)&&void 0!==v?v:""]?Oe[s.fontData.variant]:s.fontData;h=Za(s,e),t.font=h.currentFont.setStyle("italic").getFont();continue}if(e===rt){h=s,t.font=h.currentFont.setStyle("").getFont();continue}if("<b>"===e){t.font=h.currentFont.setWeight("bold").getFont();continue}if(e===it){t.font=h.currentFont.setWeight("").getFont();continue}if(e===ot){f=!0;continue}if(e===lt){f=!1;continue}const{spaceCount:a,totalWidth:l,spaceAtEnd:d,leftGap:j,rightGap:w,leftMostLetter:k}=Ki({ctx:t,token:e,nextToken:n,xRatio:O,previousTokenGap:g/O,textData:h,format:o,globalScale:c,lineHeight:r,memory:u});g=w*O,m+=l*O+((0===x&&j>0?-1*Math.min(20*c,j*O):0)+(0===x&&Ht.test(k)?4*c*O:0)),p+=(f?0:a)-(d&&void 0===n?1:0)}const j=p>0?(a-m)/p:0;return{tokenList:b,spaceWidth:l?"tcg"===o?j>1.5*c*(d/100)?0:j:j>3.65*c*(d/100)?0:j:j}},Ui=e=>{let{ctx:t,median:n,paragraphList:a,additionalLineCount:r=0,width:i,lineHeight:o,format:l,textData:s,globalScale:c,memory:d}=e;const{fontData:u,fontLevel:b}=s,{letterSpacing:m}=u.fontList[b],p=[],g=a.reduce((e,a)=>{const r=(n<=100?100:n)/1e3,u=i/r,b=Bi(a,!0);let g=1,h=[],f=0,v=0,y=0;for(let i=0,x=r;i<b.length;i++){const e=b[i],a=b[i+1];e===pt?(y+=1,x=1):e===gt&&(y-=1,x=r);let{leftMostLetter:j,totalWidth:O,rightGap:w,leftGap:k}=Ki({ctx:t,token:e,nextToken:a,xRatio:x,previousTokenGap:v,format:l,letterSpacing:m,textData:s,globalScale:c,lineHeight:o,memory:d});let S=O/(y>0?r:1)+(0===i?(k>0?-1*Math.min(20*c/x,k):0)+(Ht.test(j)?4*c:0):0);if(f+S>u){let r=h.join("").trim();y>0&&(r+=gt),y<0&&(r=pt+r),y=0,p.push({line:r,effectiveMedian:n,isLast:!1,actualLineWidth:f});let{totalWidth:i,rightGap:u,leftGap:b}=Ki({ctx:t,token:e,nextToken:a,xRatio:x,previousTokenGap:0,format:l,textData:s,globalScale:c,lineHeight:o,memory:d});f=i+((b>0?-1*Math.min(20*c/x,b):0)+(Ht.test(j)?4*c:0)),v=u,h=[e],g+=1}else f+=S,v=w,h.push(e)}let j=h.join("").trim();return y>0&&(j+=gt),y<0&&(j=pt+j),y=0,p.push({line:j,effectiveMedian:n,isLast:!0,actualLineWidth:f}),e+g},0)+(null!==r&&void 0!==r?r:0);return{currentLineList:p,currentLineCount:g}},Gi=e=>{let{ctx:t,fontSize:n,edge:a,baseline:r,headText:i,headTextLetterWidth:o,footText:l,footTextWidth:s,headTextGap:c,headTextSpacing:d,headTextHeightRatio:u,headTextBold:b,headTextGapRatio:m,globalScale:p,xRatio:g,fontStyle:h,textWorker:f,fitFootText:v,headTextOverflow:y}=e;const{applyFuriganaFont:j,stopApplyFuriganaFont:x,resetScale:O,applyScale:w}=f,k="condense"===y&&l.length>1?Math.min(1,g+.1):0,{gapPadding:S,letterSpacing:C,trueHeadTextWidth:F,halfGap:L,alignment:T,headTextXRatio:N}=Hi({headText:i,headTextLetterWidth:o,footText:l,footTextWidth:s*g,headTextGap:c,headTextSpacing:d*g,gapPadding:n*m,fitFootText:v,sentenceXRatio:g,xRatio:k}),R=F>s*g;if(0===i.length)return{trueHeadTextWidth:F,halfGap:L};const I=v?Math.min(1,s*g/F):1,E=v?I:k&&"center"===T?k:N;let z=a;O(),(v||E)&&(w(E,1),z=a/E),"center"===T?(z+=S,R?E>I&&(z+=(s*g/E-F)/2/E):z+=(s*g-F)/2):z+=C/2;for(const D of i){j();const{width:e,boundWidth:a}=zi({ctx:t,letter:D,fontStyle:h,metricMethod:"furigana",xRatio:1,globalScale:p}),i=(e-a)/2;x(),j(b),t.fillText(D,z-i,r-n*u),x(),z+=a+C}return(v||E)&&O(),w(g,1),{trueHeadTextWidth:F,halfGap:L}},Xi=(e,t,n)=>{const{multiline:a=!0,furiganaHelper:r=!0,dictionaryType:i="rubyForm"}=null!==n&&void 0!==n?n:{},o=null!==e&&void 0!==e?e:"";let l="";const s="ocg"===t?Re:Ie;for(const g of o){var c;l+=null!==(c=s[g])&&void 0!==c?c:g}const d=l,u=(a?d.replace(/^\[\[([\w\W]*?)\]\](?=(\n|$))/gm,"".concat(bt,"$1").concat(mt)).replace(/^\[([\w\W]*?)\](?=(\n|$))/gm,"".concat(dt,"$1").concat(ut)):d).replace(/(^|[-\u2014\s(["])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(Lt,"$1\u201c").replace(/"/g,"\u201d").replace(/--/g,"\u2014").replace(/\u25cf /g,"\u25cf").replace(/(\([\uff10-\uff190-9]{1,2}\))/g,e=>{const t=Ee[e];return null!==t&&void 0!==t?t:e}).replaceAll(new RegExp("{{([^{}]+?)}}","g"),e=>e.replaceAll("{{",pt).replaceAll("}}",gt)).replaceAll(new RegExp("{[^{}]+?}","g"),e=>"".concat(st).concat(e).concat(ct)),b=("tcg"===t||!1===r?u:u.replaceAll(new RegExp(zt,"g"),e=>{var t;const n=null!==(t=ge[e][i])&&void 0!==t?t:ge[e].rubyForm;return"".concat(st).concat(n).concat(ct)})).replaceAll(new RegExp(at,"g"),e=>{let t="";for(const a of e){var n;t+=null!==(n=Ie[a])&&void 0!==n?n:a}return"".concat(st).concat(t).concat(ct)}).replaceAll(new RegExp(tt,"g"),e=>{let t="";for(const a of e){var n;t+=null!==(n=Ie[a])&&void 0!==n?n:a}return"".concat(st).concat(t).concat(ct)}).replaceAll(new RegExp(xt,"g"),e=>"".concat(st).concat(e).concat(ct)).replaceAll(new RegExp("[(\\[\uff5b\u3014\u3008\u300a\u300c\uff62\u300e\u3010\u3018\u3016\u301d'\"\u2018\u201c\uff5f\xab\u25cf]+.","g"),e=>"".concat(st).concat(e).concat(ct)).replaceAll(new RegExp(Pt,"g"),e=>"".concat(st).concat(e).concat(ct)).replaceAll(new RegExp(".[\u2014...\u2025\u3033\u3034\u3035)]+[^\\s]","g"),e=>"".concat(st).concat(e).concat(ct)).replaceAll(new RegExp("[\u2460-\u2473]\uff1a.","g"),e=>"".concat(st).concat(e).concat(ct));let m=[],p=0;for(const g of b)g===st?(0===p&&m.push(g),p+=1):g===ct?(p-=1,0===p&&m.push(g)):m.push(g);return m.join("").replaceAll("".concat(mt).concat(ct),"".concat(ct).concat(mt)).replaceAll("".concat(ut).concat(ct),"".concat(ct).concat(ut)).replaceAll("".concat(st).concat(bt),"".concat(bt).concat(st)).replaceAll("".concat(st).concat(dt),"".concat(dt).concat(st)).replaceAll("".concat(pt).concat(ct),"".concat(ct).concat(pt)).replaceAll("".concat(st).concat(gt),"".concat(gt).concat(st)).replaceAll("".concat(dt).concat(ut),"").replaceAll("".concat(bt).concat(mt),"").replaceAll("".concat(st).concat(ct),"")},Vi=async e=>{var t;let{ctx:n,tokenList:a,trueEdge:r,trueBaseline:i,spaceWidth:o=0,lineHeight:s=0,xRatio:c,yRatio:d=1,textData:u,format:b,drawImage:m=!0,textDrawer:p,debug:g=!1,option:h,globalScale:f,memory:v}=e;const y=null!==v&&void 0!==v?v:{image:{}},j=null!==(t=null===y||void 0===y?void 0:y.image)&&void 0!==t?t:{},x=bi.getState().memory.imagePresetMap,{drawHeadText:O=!0}=null!==h&&void 0!==h?h:{},{fontLevel:w}=u,k=u.fontData,S=sr(he,f);let C=u,F=C.currentFont,L=C.fontData,T=L.fontList[w],N=Pi(n,L,T,F,f),R=0,I=[],E=0,z=r,D=!1;for(let U=0,G=c;U<a.length;U++){const{bulletOffset:e=S.bulletOffset,bulletWidth:t,capitalLetterRatio:r=S.capitalLetterRatio,fontSize:h,headTextSpacing:v=S.headTextSpacing,iconSymbolWidth:X=t,largeSymbolRatio:V=S.largeSymbolRatio,letterSpacing:q=S.letterSpacing,ordinalFontOffsetY:_=S.ordinalFontOffsetY,squareBracketRatio:J=S.squareBracketRatio,wordLetterSpacing:$,allRightSymbolOffset:Q=S.allRightSymbolOffset}=T,Z=1+q/2,ee=i/d,{headTextFillStyle:te,headTextBold:ne=fe.headTextBold,headTextHeightRatio:ae=fe.headTextHeightRatio,headTextOverflow:re=fe.headTextOverflow,headTextGapRatio:ie=fe.headTextGapRatio,metricMethod:oe,fontStyle:le,letterDeviationMap:se={},letterOffsetMap:ce={}}=L,{stopApplyFuriganaFont:de,applyFuriganaFont:ue,stopApplyLargerText:be,applyLargerText:me,stopApplyNumberFont:pe,applyNumberFont:ge,stopApplyOrdinalFont:he,applyOrdinalFont:ve,applyScale:ye,reverseScale:je,applySymbolFont:xe,stopApplySymbolFont:we,applyVietnameseFont:ke,stopApplyVietnameseFont:Se,applyAsymmetricScale:Ce,resetScale:Fe}=N,Le=a[U];if(Le===pt){G=1,n.setTransform(1,0,0,1,0,0);continue}if(Le===gt){G=c,n.scale(G,1);continue}if("<i>"===Le){var B;const e=!!Oe[null!==(B=null===k||void 0===k?void 0:k.variant)&&void 0!==B?B:""]?Oe[k.variant]:k;C=Za(u,e),F=C.currentFont,L=C.fontData,T=L.fontList[w],N=Pi(n,L,T,F,f),n.font=F.setStyle("italic").getFont();continue}if(Le===rt){C=u,F=C.currentFont,L=C.fontData,T=L.fontList[w],N=Pi(n,L,T,F,f),n.font=F.setStyle("").getFont();continue}if("<b>"===Le){n.font=C.currentFont.setWeight("bold").getFont();continue}if(Le===it){n.font=C.currentFont.setWeight("").getFont();continue}if(Le===ot){D=!0;continue}if(Le===lt){D=!1;continue}const Te=-.5*G,Ne=h*Te,Re=a[U+1],Ie=a[U+2],Ee={ctx:n,xRatio:G,letterSpacing:q,format:b,textData:u,globalScale:f,lineHeight:s},ze={ctx:n,baseline:ee,xRatio:G,textDrawer:p};let De=Le;const Be=[],Pe=new RegExp(at,"g");let Me,He=0;for(;null!=(Me=Pe.exec(Le));){const e=/(?<=<.+?)(?<!>) ([\w-]+)(?:=["|'|\u201d|\u201c](.+?)["|'|\u201d|\u201c]|\b)(?!<)(?=.*?>)/gm;let t=0;if(Me[1]===nt){let n;E=0;let a,r,i,o,l,c="";for(;null!==(n=e.exec(Me[0]));){n.index===e.lastIndex&&e.lastIndex++;const t=n[1],s=n[2];switch(t){case"src":c=s;break;case"width":a=parseInt(s);break;case"height":r=parseInt(s);break;case"offsetX":i=parseInt(s);break;case"offsetY":o=parseInt(s);break;case"name":l=s}}if(l){const e=j[l];e?(c=e.src,a="number"===typeof a?a:e.width,r="number"===typeof r?r:e.height,i="number"===typeof i?i:e.offsetX,o="number"===typeof o?o:e.offsetY):j[l]={src:c,width:a,height:r,offsetX:i,offsetY:o}}if(c&&m){let e="number"===typeof a?a:"number"===typeof r?void 0:.9*s,n=c,l=!1;const d=c?x[c]:void 0;if(d){const{height:e,width:t,offsetX:l,offsetY:s,src:c}=d;n=c,a="number"===typeof a?a:t,r="number"===typeof r?r:e,o="number"===typeof o?o:s,i="number"===typeof i?i:l}else if(!c.startsWith("https")){var P;l=!0,n="/asset/image/"+(null!==(P=Qe[c])&&void 0!==P?P:"".concat(c,".png"))}t=(null!==e&&void 0!==e?e:0)/G,Be[He]={type:"img",isInternalSource:l,src:n,offsetX:i,offsetY:o,width:e,height:r}}}De=De.replace(Me[0],"".concat(ht).concat(He).concat(";").concat(t).concat(ft)),He+=1}const Ae=Le.split(kt).filter(e=>null!=e&&""!==e),We=De.split(kt).filter(e=>null!=e&&""!==e),{leftMostLetter:Ke,leftGap:Ye,rightGap:Ue,totalWidth:Ge,spaceCount:Xe}=Ki(Object(l.a)({token:De,nextToken:Re,previousTokenGap:R/G,memory:y},Ee)),Ve=0===U?(Ye>0?-1*Math.min(20*f,Ye*G):0)+(Ht.test(Ke)?4*f:0):0;let qe=z+Ve,_e=R;for(let a=0;a<We.length;a++){var M,H;const c=We[a],m=null!==(M=We[a+1])&&void 0!==M?M:Re,g=null!==(H=We[U+2])&&void 0!==H?H:Ie;if(De===pt||De===gt);else if("\u29be"===c)I.push({edge:qe,size:X,baseline:ee}),qe+=X*Z,_e=0,E=0;else if("\u25cf"===c)Fe(),Mi(n,qe,i+e-1*f,t,nn(b)*f),qe+=t*Z,Ce(G,d),_e=0,E=0;else if(/[\xa9]/.test(c))Fe(),me(V),Di(Object(l.a)(Object(l.a)({},ze),{},{letter:c,edge:qe*G,baseline:i+("tcg"===b?Q:2*Q)})),qe+=n.measureText(c).width*Z,be(),Ce(G,d),_e=0,E=0;else if(Mt.test(c))Fe(),ve(),Di(Object(l.a)(Object(l.a)({},ze),{},{letter:c,edge:qe*G,baseline:i+_})),qe+=n.measureText(c).width*Z,he(),Ce(G,d),qe+=o,_e=0,E=0;else if(jt.test(c)){const{content:e}=Wi(c),t=parseInt(e);if(!isNaN(t)&&Be[t]){const{type:e,src:a,offsetX:r,offsetY:o,width:l,height:c,isInternalSource:u}=Be[t],b=.75;Fe(),await Ii(n,a,qe+(null!==r&&void 0!==r?r:0),i+(null!==o&&void 0!==o?o:0)-s*b,l,c,void 0,void 0,void 0,void 0,{cache:u,internalImage:u,crossorigin:"anonymous"}),qe+="img"===e&&l?l:0,Ce(G,d),_e=0,E=0}}else if(an.test(c)){const[e,t,r=""]=Ae[a].replaceAll(/{|}/g,"").split(/(\|+)/),i="||"===t,{totalWidth:c}=Ki(Object(l.a)({token:e,nextToken:m,previousTokenGap:0,memory:y},Ee));ue();const j=r.split("").map(e=>zi({ctx:n,letter:e,fontStyle:le,metricMethod:"furigana",xRatio:1,globalScale:f}).boundWidth).reduce((e,t)=>e+t,0);de();const{headTextWidth:x,halfGap:w}=Hi({headText:r,headTextLetterWidth:j,footText:e,footTextWidth:c*G,headTextGap:Ne,headTextSpacing:v*G,gapPadding:h*ie,fitFootText:i,sentenceXRatio:G,xRatio:"condense"===re&&e.length>1?Math.min(1,G+.1):0}),k=0===r.length?Math.max(Ne,c*Te):w,S=k,C=k,F=Ai(_e,C),L=C>0?C-F:0,{offsetable:T,leftGap:R}=Ki(Object(l.a)({token:m,nextToken:g,previousTokenGap:S/G,memory:y},Ee)),I=R*G,z=Ai(S,I),D=L+(S>0?S-z:0);let B=0,P=0;D>0&&I>=-2*f&&T?(B=(D+2*Math.max(I,0))/3,P=Math.max(I,0)-B):B=L;const M=qe+(k<0?-F:Ve?-Ve:B)+E;E=P;const H=e.includes("<")?Bi(Xi(e,b,{multiline:!1,furiganaHelper:!1})):Bi(e);await Vi({ctx:n,format:b,textData:u,tokenList:H,trueBaseline:ee,lineHeight:s,trueEdge:M,xRatio:G,yRatio:d,spaceWidth:0,textDrawer:p,globalScale:f,debug:!1,memory:y});const A=n.fillStyle,W=n.strokeStyle,K=n.shadowColor,Y=n.shadowOffsetX,U=n.shadowOffsetY,X=n.shadowBlur;te&&(n.fillStyle=te,n.strokeStyle="",n.shadowColor="",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0);O&&Gi({ctx:n,fontSize:h,edge:qe-F,baseline:ee,headText:r,headTextLetterWidth:j,footText:e,footTextWidth:c,headTextGap:Ne,headTextSpacing:v,headTextHeightRatio:ae,headTextBold:ne,headTextGapRatio:ie,xRatio:G,fontStyle:le,textWorker:N,fitFootText:i,headTextOverflow:re,globalScale:f}),n.fillStyle=A,n.strokeStyle=W,n.shadowColor=K,n.shadowOffsetX=Y,n.shadowOffsetY=U,n.shadowBlur=X,qe+=Math.max(c*G,x)-F+o,_e=S}else if(Ot.test(c)){const e=$?1+$/2:Z;n.letterSpacing="".concat((e-1)*F.getFontInfo().sizeAsNumber,"px");const t=n.measureText(c).width*G,a=Math.max(Ne,t*Te),i=a;qe-=Ai(_e,a);let o=c,s=qe;for(;""!==o;){let e=o[0],t=o.slice(1),a=0;const i=Object(l.a)(Object(l.a)({},ze),{},{deviation:se["".concat(f)],letter:e,edge:s});if(et.test(e))ye(J),a=n.measureText(o).width-n.measureText(t).width,Di(Object(l.a)(Object(l.a)({},i),{},{edge:s/J,baseline:ee/J})),je(J);else if(Ze.test(e)){ye(r),a=n.measureText(o).width-n.measureText(t).width;const c=a>n.measureText(e).width*r?Math.round(a*(1-r))/2:0;Di(Object(l.a)(Object(l.a)({},i),{},{edge:s/r+c,baseline:ee/r})),je(r)}else if(wt.test(e)&&"tcg"===le)ke(),a=n.measureText(o).width-n.measureText(t).width,Di(i),Se();else if(Wt.test(e))ge(),a=n.measureText(o).width-n.measureText(t).width,Di(i),pe();else if(It.test(e)&&"tcg"===le){var A,W,K;const{fontSize:r}=xe(null===(A=ce[e])||void 0===A?void 0:A.ratio);a=n.measureText(o).width-n.measureText(t).width,Di(Object(l.a)(Object(l.a)({},i),{},{baseline:i.baseline+r*(null!==(W=null===(K=ce[c])||void 0===K?void 0:K.baseline)&&void 0!==W?W:0)})),we()}else a=n.measureText(o).width-n.measureText(t).width,Di(i);s+=a*G,o=t}qe=s,_e=i,E=0,n.letterSpacing="0px"}else if(It.test(c)&&"tcg"===le){var Y;const{yRatio:e=1,ratio:t,baseline:a=0,edge:r=0}=null!==(Y=ce[c])&&void 0!==Y?Y:{},i=c,{fontSize:o}=xe(t);n.scale(1,e);const s=n.measureText(i).width*Z*G,d=Math.max(Ne,s*Te),u=d;qe-=Ai(_e,d),Di(Object(l.a)(Object(l.a)({},ze),{},{baseline:(ze.baseline+o*a)/e,letter:i,edge:qe+o*r})),qe+=s,n.scale(1,1/e),we(),_e=u,E=0}else{const e=c,t=zi({ctx:n,letter:e,fontStyle:le,metricMethod:oe,isLastOfLine:void 0===m,xRatio:G,globalScale:f}),a=t.boundWidth*Z*G,r=Math.max(Ne,a*Te),i=r;qe-=Ai(_e,r),Di(Object(l.a)(Object(l.a)({},ze),{},{letter:e,edge:qe,deviation:null===se||void 0===se?void 0:se["".concat(f)],letterMetric:t})),qe+=a,("ocg"===b||"tcg"===b&&/\s+/.test(e))&&!0!==Xt.test(e)&&(qe+=o),_t.test(e)||(_e=i),E=0}}R=Ue*G,g&&vi({ctx:n,baseline:ee,edge:z,width:Ge*G,xRatio:G});z+=Ge*G+(D?0:Xe)*o+Ve}return{tokenEdge:z,iconPositionList:I}},qi=async e=>{let{ctx:t,content:n,isNormal:a=!1,fontDataKey:r="tcg",fontData:i=we[r],textStyle:o,sizeList:s=se["tcg-type"],condenseTolerant:c="strict",format:d,furiganaHelper:u,option:b}=e;const{defaultSizeLevel:m,forceRelaxCondenseLimit:p,globalScale:g=1,minLine:h,justifyRatio:f}=null!==b&&void 0!==b?b:{},v="number"===typeof h?h:0,y="number"===typeof f?f:1;let j=null!==m&&void 0!==m?m:0;if(!t||!n)return j;const x=Xi(n.trim(),d,{furiganaHelper:u}),{lineList:O,fullLineListOption:w,effectFlavorCondition:k}=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a="^(".concat(dt,"([^").concat(ut,"]*)").concat(ut,"\\s*)"),r="^(".concat(bt,"([^").concat(mt,"]*)").concat(mt,"\\s*)"),i=[],o=[],l=new RegExp([a,r].join("|"));let s=e,c="";const d=null===(t=new RegExp(Rt,"m").exec(e))||void 0===t?void 0:t[1];d&&n?(c=d.trim(),s=s.replace(d,"")):c="";let u=0;for(;s.length>0&&u<=100;){const e=l.exec(s),t=null===e||void 0===e?void 0:e[1],n=null===e||void 0===e?void 0:e[2],a=null===e||void 0===e?void 0:e[3],r=null===e||void 0===e?void 0:e[4];if(n&&t)s=s.replace(t,""),i.push({line:n,alignment:"left"}),o.push(St);else if(r&&a)s=s.replace(a,""),i.push({line:r,alignment:"justify"}),o.push(St);else{const e=/(.*)(\n|$)/.exec(s),t=null===e||void 0===e?void 0:e[0],n=null===e||void 0===e?void 0:e[1];"string"===typeof t&&"string"===typeof n&&(o.push(...n.replaceAll(dt,"[").replaceAll(ut,"]").replaceAll(bt,"[[").replaceAll(mt,"]]").split("\n")),s=s.replace(t,""))}u++}return c&&o.push(Ct),{lineList:o,fullLineListOption:[...i],effectFlavorCondition:c}}(x,a);let S=0;const C=cr(i,g),{fontList:F}=C,L=F[F.length-1].lineCount;for(;j<=F.length&&j>=0;){var T,N,R;const e=j===F.length||O.length>L,n=Math.min(F.length-1,j),i=e?{1:600,2:600,3:600}:"tcg"===d?p&&n<p?le.relaxed:null!==(T=le[c])&&void 0!==T?T:le.strict:{1:800,2:800,3:800},{trueEdge:u,trueWidth:b,trueBaseline:m,trueHeightCap:h}=or(null!==(N=s[n])&&void 0!==N?N:s[s.length-1],g),f=a&&"tcg"===d?b-2*g:b,x=e&&"number"===typeof h,I=x?Qa(C,{heightCap:h,lineCount:S}):C,E=x?j:n,{font:z,fontList:D}=I,B=x?D[E]:F[n],{fontSize:P,lineHeight:M,lineCount:H}=B,A={image:{}},W=Ja();t.font=W.setWeight("").setSize(P).setFamily(z).getFont(),t.textAlign="left";const K={fontData:I,fontLevel:E,currentFont:W};let Y=[];const U=O.length>H&&"number"===typeof h?1:_a(e=>{const{currentLineList:n,currentLineCount:a}=Ui({ctx:t,median:e,paragraphList:O,additionalLineCount:0,format:d,textData:K,width:f,lineHeight:M,globalScale:g,memory:A});return Y=n,!(a>H)},200);S=Math.max(O.length,Math.max(v,Y.length));const G=Ci(Object(l.a)(Object(l.a)({ctx:t},o),{},{globalScale:g})),X=null!==(R=i["".concat(O.length)])&&void 0!==R?R:i[3];if(U<X&&j<F.length||v>H)j+=1;else{if(!(x&&U<X)){xi(t);let e=m+M;const a=Y.map(e=>{let{line:a,effectiveMedian:i,isLast:o}=e,l=1,s=[],c=0,u=K;if(a===St){var b;const{line:e="",alignment:n}=null!==(b=w.shift())&&void 0!==b?b:{},a="justify"!==n;l=.001*_a(n=>{const{currentLineCount:a}=Ui({ctx:t,median:n,paragraphList:[e],format:d,textData:K,width:f,lineHeight:M,globalScale:g,memory:A});return!(a>1)});const{tokenList:r,spaceWidth:i}=Yi({ctx:t,line:e,xRatio:l,format:d,isLast:a,textData:K,width:f,globalScale:g,justifyRatio:100,lineHeight:M,memory:A});s=r,c=i}else if(a===Ct){const e=cr(we[r],g),a=x?Qa(e,{heightCap:h,lineCount:Math.max(v,Y.length)}):e,{fontSize:i}=x?a.fontList[E]:e.fontList[n],o=Ja();t.font=o.setSize(i).setFamily(e.font).getFont();const b={fontData:a,fontLevel:E,currentFont:o};l=.001*_a(e=>{const{currentLineCount:n}=Ui({ctx:t,median:e,paragraphList:[k],format:d,textData:b,width:f,lineHeight:M,globalScale:g,memory:A});return!(n>1)});s=Bi(k),c=0,u=b}else{l=i/1e3;const e=a,{tokenList:n,spaceWidth:r}=Yi({ctx:t,line:e,xRatio:l,format:d,isLast:o,textData:K,width:f,globalScale:g,justifyRatio:y,lineHeight:M,memory:A});s=n,c=r}return t.setTransform(1,0,0,1,0,0),{xRatio:l,line:a,tokenList:s,spaceWidth:c,textData:u}});for(let n of a){const{xRatio:a,tokenList:r,line:i,spaceWidth:o,textData:l}=n;let s;if(i===St)t.scale(a,1),s=Vi({ctx:t,tokenList:r,xRatio:a,yRatio:1,trueEdge:u,trueBaseline:e,spaceWidth:o,lineHeight:M,textData:l,format:d,globalScale:g,memory:A});else if(i===Ct){t.scale(a,1);const{currentFont:n,fontData:i}=l;t.font=n.setSize(P).setFamily(i.font).getFont(),s=Vi({ctx:t,tokenList:r,xRatio:a,yRatio:1,trueEdge:u,trueBaseline:e,lineHeight:M,textData:l,format:d,globalScale:g,memory:A})}else t.scale(a,1),s=Vi({ctx:t,tokenList:r,xRatio:a,yRatio:1,trueEdge:u,trueBaseline:e,spaceWidth:o,lineHeight:M,textData:l,format:d,globalScale:g,memory:A});await s,t.setTransform(1,0,0,1,0,0),e+=M}break}S+=1}G()}return j},{width:_i,finishTypeCardWidth:Ji,stickerSize:$i}=d,{width:Qi,height:Zi,topToPendulumStructure:eo}=d,to={topRight:(async()=>{const e=document.createElement("canvas");e.width=Qi,e.height=Zi;const t=e.getContext("2d");return t?(await Li(t,"mask/mask-top-right.png"),t.getImageData(0,0,Qi,Zi).data):null})(),bottomRight:(async()=>{const e=document.createElement("canvas");e.width=Qi,e.height=Zi;const t=e.getContext("2d");return t?(await Li(t,"mask/mask-bottom-right.png"),t.getImageData(0,0,Qi,Zi).data):null})(),right:(async()=>{const e=document.createElement("canvas");e.width=Qi,e.height=Zi;const t=e.getContext("2d");return t?(await Li(t,"mask/mask-right.png"),t.getImageData(0,0,Qi,Zi).data):null})(),name:(async()=>{const e=document.createElement("canvas");e.width=Qi,e.height=eo;const t=e.getContext("2d");return t?(await Li(t,"mask/mask-name.png"),t.getImageData(0,0,Qi,eo).data):null})()},no=async(e,t,n,a)=>{const{ctx:r,canvas:i}=yn(n,a);if(!r)return i;if("string"===typeof e?await Li(r,e,0,0):r.drawImage(e,0,0,n,a),!t)return i;const o=r.getImageData(0,0,n,a).data;for(let l=0;l<o.length;l+=4)o[l+3]=t[l+3];return r.putImageData(new ImageData(o,n,a),0,0),i},{width:ao,height:ro,topToPendulumStructure:io,topToPendulumStructureFrame:oo,pendulumIconFrameHeight:lo,pendulumIconFrameWidth:so,pendulumFrameHeight:co,pendulumFrameWidth:uo,attributeSize:bo,attributeX:mo,attributeY:po,finishTypeCardWidth:go,stickerSize:ho,pendulumStructureHeight:fo}=d,vo=e=>{let{canvas:t,artworkCanvas:n,backgroundCanvas:a,globalScale:r,region:i,hasBackground:o,frame:s,leftFrame:c,pendulumFrame:d,rightFrame:u,pendulumRightFrame:b,dyeList:m,effectBackground:g,pendulumEffectBackground:h,backgroundType:f,cardIcon:y,attribute:j,attributeType:x,star:O,starList:w,foil:k,pendulumSize:S,opacity:F,isLink:L,isSpeedSkill:I,isXyz:E,isPendulum:z,pendulumFrameTypeMap:D,otherFinish:B,loopFinish:P,loopArtFinish:M}=e;const H=t.getContext("2d"),{artBorder:A,nameBorder:W,body:K,name:Y,pendulum:U,text:G,boundless:X}=F,{artX:V,artY:q,artFrameX:_,artFrameY:J,artFrameWidth:$,artFinishX:Q,artFinishY:ee,artWidth:ne,artRatio:ae}=p(z,F,void 0,S),{frameType:re,effectBoxOffsetY:ie,pendulumBoxX:oe,pendulumBoxY:le,pendulumBoxWidth:se,pendulumBoxHeight:ce,pendulumBoxOffsetY:de,artlessFrameY:ue}=Z[S],be=K>0||A,me=860,pe="normal"!==k,ge=E||I?s:"normal",he="synchro"===s?["normal","xyz","xyz","xyz","xyz"]:[ge],fe=!X&&be,ve=ra({frame:s,topLeftFrame:c,topRightFrame:u,bottomLeftFrame:d,bottomRightFrame:b,effectBackground:g,pendulumEffectBackground:h},z),{topLeftFrame:ye,topRightFrame:je,bottomLeftFrame:xe,bottomRightFrame:Oe,effectBackground:we,pendulumEffectBackground:ke}=ve,Se={drawFrame:async()=>{if(!H)return;const e=o&&a&&"frame"===f,{ctx:t,canvas:n}=yn();await Li(t,"frame/frame-".concat(ye,".png"),0,0);const{canvas:i,ctx:l}=Pn(n,m[0]);if(!e&&(ye!==je||""!==m[0]||""!==m[1])&&l){const e=await no("frame/frame-".concat(je,".png"),await to.topRight,ao,ro),{canvas:t}=Pn(e,m[1]);l.drawImage(t,0,0)}const{ctx:s,canvas:c}=yn();await Li(s,"frame-pendulum/frame-pendulum-".concat(xe,".png"),0,0);const{canvas:d,ctx:u}=Pn(c,m[2]);if(!e&&(xe!==Oe||""!==m[2]||""!==m[3])&&u){u.clearRect(714,0,99,ro);const e=await no("frame/frame-".concat(Oe,".png"),await to.bottomRight,ao,ro),{canvas:t}=Pn(e,m[3]);u.drawImage(t,0,0)}if(H.globalAlpha=K/100,H.scale(r,r),z&&(null===l||void 0===l||l.clearRect(_,J,$,fo),null===u||void 0===u||u.clearRect(_,J,$,fo)),e&&l&&u){const{width:e,height:t}=a;l.globalCompositeOperation="source-atop",l.drawImage(a,0,0,e,t,0,0,ao,ro),u.globalCompositeOperation="source-atop",u.drawImage(a,0,0,e,t,0,0,ao,ro)}H.drawImage(i,0,0),H.drawImage(d,0,0),H.resetTransform(),H.globalAlpha=1},drawCardArt:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;if(!n||!e)return;const{width:t,height:a}=n;a<=0||e.drawImage(n,0,0,t,a,r*V,r*q,r*ne,r*ne/(t/a))},drawBackground:async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!a||!t||!o)return;const{width:i,height:l}=a;if(l<=0)return;const{artX:s,artY:c,artWidth:d,artFrameWidth:u,artFrameX:b,artFrameY:m,ratio:g,artRatio:h}=p(z,F,f,S);"frame"!==f?t.drawImage(a,0,0,i,l,r*s,r*c,r*d,r*d/g):t.drawImage(a,0,0,i,l,0,0,r*ao,r*ro);const y=null!==(e=B[3])&&void 0!==e?e:"normal";if("normal"!==y&&n){const e=Oi([y],v);await e(t,"art",async e=>Ri(t,"finish/art-finish-".concat(e,".png"),r*b,r*m,r*u,r*u/h))}},drawAttribute:async()=>{var e;if(!H)return;H.scale(r,r);const{canvas:t,ctx:n}=yn(ao*r,(po+bo)*r);if("custom"===x)await Ii(n,j,e=>{const{naturalWidth:t,naturalHeight:n}=e;return mo-(bo/n*t-bo)/2},po,void 0,bo,void 0,void 0,void 0,void 0,{internalImage:!1,crossorigin:"anonymous"});else{var a,o,l;const e=null!==(a=null===(o=N[i])||void 0===o||null===(l=o[j])||void 0===l?void 0:l.offsetX)&&void 0!==a?a:0,t=T[j]?"tcg":R[i].fileKey;await Li(n,"attribute/attr-".concat(t,"-").concat(j.toLowerCase(),".png"),mo+e,po)}const s=null!==(e=B[0])&&void 0!==e?e:"normal";if("normal"!==s){const e=Oi([s],v),{canvas:a,ctx:r}=yn(ao,po+bo);null===r||void 0===r||r.drawImage(t,0,0),await e(r,"art",async e=>await Li(r,"finish/finish-typeart-".concat(e,".png"),(ao-go)/2,ho)),n&&(n.globalCompositeOperation="source-in",n.drawImage(a,0,0)),H.drawImage(t,0,0)}else H.drawImage(t,0,0);H.resetTransform()},drawStar:async e=>{var t;let{style:n,starAlignment:a}=e;const i="auto"===y?Zn(s):y;if(!H)return;H.scale(r,r);const o=null!==(t=B[1])&&void 0!==t?t:"normal",c="normal"!==o?Oi([o],v):void 0;await(async e=>{let{ctx:t,globalScale:n,cardIcon:a,text:r,star:i,starList:o,starAlignment:s="auto",style:c,onStarDraw:d,loopStarFinish:u}=e;const b=Array.isArray(o)?o:[],m=50;let p="custom"===a?b.length:"string"===typeof i?""===i?0:1:"number"===typeof i?i:0,g=m*p+4*(p-1);const h=145;let f="right";["rank","negative-level"].includes(a)&&(f="left"),f="auto"===s?f:s,p>12&&(f="center"),r&&"center"===f&&(p=0,g=0);const v="center"===f?(_i+g)/2:"left"===f?85.9125+g:728.775;let y=-54;if(t&&r&&"st"!==a){const e=50,a=Ci(Object(l.a)(Object(l.a)({ctx:t},c),{},{globalScale:n}));t.textAlign="left"===f||"right"===f?f:"left",t.font="bold ".concat(e,"px RoGSanSrfStd-Bd");const i="center"===f?t.measureText(r).width/-2:"left"===f?4:-58;t.fillText(r,v+i,h+.9*e),t.textAlign="left",a()}const{canvas:j,ctx:x}=yn(_i*n,195*n);if(await Promise.all([...Array(p)].map(async(e,t)=>{y+=54;const n="custom"===a?b[p-1-t]:a;let r=[v-(m+y),h];return await Li(x,"subfamily/subfamily-".concat(n,".png"),...r),await d(r)})),t)if(u){const{canvas:e,ctx:n}=yn(_i,195);null===n||void 0===n||n.drawImage(j,0,0),await u(n,"art",async e=>await Li(n,"finish/finish-typeart-".concat(e,".png"),(_i-Ji)/2,$i)),x&&(x.globalCompositeOperation="source-in",x.drawImage(e,0,0)),t.drawImage(j,0,0)}else t.drawImage(j,0,0)})({ctx:H,cardIcon:i,text:"string"===typeof O?O:null,star:O,starList:w,starAlignment:a,style:n,globalScale:r,onStarDraw:async e=>"st"===i?Promise.resolve():await P(H,"star",async t=>Li(H,"finish/finish-".concat(t,"-star.png"),...e)),loopStarFinish:c}),H.resetTransform()},drawPendulumScaleIcon:async()=>{const{canvas:e,ctx:t}=yn(so,lo);H&&t&&(await Li(t,"frame-pendulum/pendulum-scale-".concat(S,".png"),0,0),"scaleless"===D.blue&&t.clearRect(0,0,so/2,lo),"scaleless"===D.red&&t.clearRect(so/2,0,so/2,lo),H.scale(r,r),H.drawImage(e,0,750),H.resetTransform())},drawStatBorder:async e=>{H&&(H.scale(r,r),await Ei(t,"frame/frame-stat-border.png",0,1070,813,20,r,e),H.resetTransform())},drawNameBackground:async()=>{if(!H)return;H.scale(r,r);const{ctx:e,canvas:t}=yn(ao,io);await Li(e,"background/background-name-".concat(ye,".png"),0,0);const{canvas:n,ctx:a}=Pn(t,m[0]);if(ye!==je||""!==m[0]||""!==m[1]){const e=await no("background/background-name-".concat(je,".png"),await to.name,ao,io),t=Pn(e,m[1]).canvas;null===a||void 0===a||a.drawImage(t,0,0)}H.globalAlpha=Y/100,H.drawImage(n,0,0),H.globalAlpha=1,H.resetTransform()},drawEffectBackground:async e=>{let{withPendulum:t=!1,blendWithBackground:n=!0,externalCtx:a=H}=e;if(!a)return;a.scale(r,r);const{ctx:i,canvas:o}=yn();t?await Ri(i,"background/background-text-".concat(we,".png"),54,885+ie,705,231,0,0+ie,705,231):await Li(i,"background/background-text-".concat(we,".png"),54,885);const l=Pn(o,m[4]).canvas;if(a.globalAlpha=(n?G:100)/100,a.drawImage(l,0,0),t){var s;const{ctx:e,canvas:t}=yn(),{exceptionFrameType:r=re,exceptionPendulumBoxOffsetHeight:i=0}=null!==(s=te[S][ke])&&void 0!==s?s:{};await Ri(e,"background/background-".concat(r,"-").concat(ke,".png"),oe,le+de,se,ce,0,de+i,se,ce+i);const o=Pn(t,m[5]).canvas;a.globalAlpha=(n?U:100)/100,a.drawImage(o,0,0)}a.globalAlpha=1,a.resetTransform()},drawFrameBorder:async()=>{H&&(H.scale(r,r),await Li(H,"frame/frame-border-".concat(ge,".png"),0,0),H.resetTransform())},drawNameBorder:async()=>{if(W&&H){H.scale(r,r);for(let e=0;e<he.length;e++)await Li(H,"frame/name-border-".concat(he[e],".png"),0,0);H.resetTransform()}else Promise.resolve()},drawArtBorder:async()=>{if(be&&H){let e="";e=E||I?"frame/art-border-".concat(s,".png"):L||["zarc","hamon","uria","raviel"].includes(s)?"frame/art-border-special.png":"frame/art-border.png",H.scale(r,r),await Li(H,e,60,170),H.resetTransform()}},drawPendulumBorder:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!H)return;const a=Ua.test(m[6]),i=a&&n&&"normal"===t?"platinum":t,{canvas:o,ctx:l}=yn();if(await Ri(l,"frame-pendulum/border-pendulum-".concat(S)+"-".concat(i)+"-artless"+("scaleless"===D.blue?"-scaleless":"")+".png",30,oo,uo/2,co,0,0,uo/2,co),await Ri(l,"frame-pendulum/border-pendulum-".concat(S)+"-".concat(i)+"-artless"+("scaleless"===D.red?"-scaleless":"")+".png",30+uo/2,oo,uo/2,co,uo/2,0,uo/2,co),n&&a){const{canvas:e}=Pn(o,m[6]);null===l||void 0===l||l.drawImage(e,0,0)}if(e)if(null===l||void 0===l||l.clearRect(0,0,ao,ue+oo),a){const e="normal"===t?"platinum":t,{ctx:n,canvas:a}=yn();await Li(n,"frame-pendulum/border-pendulum-".concat(S)+"-".concat(e)+".png",30,oo);const{canvas:r}=Pn(a,m[6]);null===l||void 0===l||l.drawImage(r,0,0)}else await Li(l,"frame-pendulum/border-pendulum-".concat(S)+"-".concat(t)+".png",30,oo);H.scale(r,r),H.drawImage(o,0,0),H.resetTransform()},drawEffectBorder:async()=>{H&&(H.scale(r,r),pe||"speed-skill"!==xe?await Li(H,"frame/effect-border.png",35,me):await Li(H,"frame/effect-border-speed-skill.png",35,me),H.resetTransform())},drawCardBorder:async()=>{if(H){if(H.scale(r,r),Ua.test(m[6])){const e="normal"===k?"platinum":k,{ctx:t,canvas:n}=yn();await Li(t,"frame/card-border-".concat(e,".png"),0,0);const{canvas:a}=Pn(n,m[6]);H.drawImage(a,0,0)}else await Li(H,"frame/card-border".concat(pe?"-".concat(k):"",".png"),0,0);H.resetTransform()}},drawArtBorderFoil:async()=>{if(H){if(H.scale(r,r),be)if(Ua.test(m[6])){const e="normal"===k?"platinum":k,{ctx:t,canvas:n}=yn();await Li(t,"frame/art-border-".concat(e,".png"),60,170);const{canvas:a}=Pn(n,m[6]);H.drawImage(a,0,0)}else await Li(H,"frame/art-border-".concat(k,".png"),60,170);H.resetTransform()}},drawEffectBorderFoil:async()=>{if(H){if(H.scale(r,r),Ua.test(m[6])){const e="normal"===k?"platinum":k,{ctx:t,canvas:n}=yn();await Li(t,"frame/effect-border-".concat(e,".png"),35,me);const{canvas:a}=Pn(n,m[6]);H.drawImage(a,0,0)}else await Li(H,"frame/effect-border-".concat(k,".png"),35,me);H.resetTransform()}},drawNameFinish:async()=>{(be||W)&&H&&(H.scale(r,r),await P(H,"name",async e=>Li(H,"finish/finish-".concat(e,"-name.png"),0,0)),H.resetTransform())},drawAttributeFinish:async()=>{j!==C&&H&&(H.scale(r,r),await P(H,"attribute",async e=>Li(H,"finish/finish-".concat(e,"-attribute.png"),678,55)),H.resetTransform())},drawArtFinish:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;fe&&e&&(e.scale(r,r),await M(e,"art",async(t,n)=>await Ri(e,"finish/art-finish-".concat(t).concat(z?n:"",".png"),Q,ee,$,$/ae),S),e.resetTransform())},drawArtOverlayFinish:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;e&&(e.scale(r,r),await P(e,"art-overlay",async t=>Li(e,"finish/finish"+"-".concat(t)+"-".concat(fe?"art":"unart")+"-overlay"+(z?"-pendulum-".concat(S):"")+".png",Q,ee)),e.resetTransform())},drawArtBorderFinish:async()=>{be&&H&&(H.scale(r,r),await P(H,"art-border",async e=>Li(H,"finish/finish-".concat(e,"-art-border.png"),0,0)),H.resetTransform())},drawPendulumArtBorderFinish:async()=>{H&&(H.scale(r,r),be&&await P(H,"art-border-pendulum",e=>Li(H,"finish/finish-".concat(e,"-art-border-pendulum-").concat(S,".png"),0,0)),H.resetTransform())},drawBorderPendulumFinish:async()=>{H&&(H.scale(r,r),await P(H,"border-pendulum",async e=>{const t="finish/finish-".concat(e,"-border-pendulum-").concat(S);await Ri(H,"".concat(t).concat("scaleless"===D.blue?"-scaleless":"",".png"),0,0,ao/2,ro,0,0,ao/2,ro),await Ri(H,"".concat(t).concat("scaleless"===D.red?"-scaleless":"",".png"),0+ao/2,0,ao/2,ro,ao/2,0,ao/2,ro)}),H.resetTransform())},drawFrameFinish:async()=>{H&&(H.scale(r,r),await P(H,"frame",async e=>Li(H,"finish/finish-".concat(e,"-frame").concat(z?"-pendulum-".concat(S):"",".png"),0,0)),H.resetTransform())},drawFrameBackgroundFinish:async()=>{H&&(H.scale(r,r),await P(H,"frame-background",async e=>Li(H,"finish/finish-".concat(e,"-frame-background").concat(z?"-pendulum":"",".png"),0,0)),H.resetTransform())},drawOverlayFinish:async()=>{H&&(H.scale(r,r),await P(H,"overlay",async e=>Li(H,"finish/finish-".concat(e,"-overlay.png"),0,0)),H.resetTransform())},drawCardBorderFinish:async()=>{H&&(H.scale(r,r),await P(H,"card-border",async e=>Li(H,"finish/finish-".concat(e,"-card-border.png"),0,0)),H.resetTransform())}};return Se},yo=async(e,t,n,a,r,i,o,s)=>{var c,d,u;const{isSpeedSkill:b,format:m,frame:p,furiganaHelper:g,globalScale:h}=s,f=a*h,v=r*h,y=i*h;if(!t||!n)return;const{embossPitch:j,embossYaw:x,embossThickness:O,fillStyle:w,font:k,gradientAngle:S,gradientColor:C,hasEmboss:F,hasGradient:L,hasOutline:T,hasShadow:N,headTextFillStyle:R,lineColor:I,lineOffsetX:E,lineOffsetY:z,lineWidth:D,shadowBlur:B,shadowColor:P,shadowOffsetX:M,shadowOffsetY:H,pattern:A}=Object(l.a)(Object(l.a)({},X()),o),{patternImage:W,blendMode:K}=null!==(c=J[null!==A&&void 0!==A?A:""])&&void 0!==c?c:{};t.textAlign="left";const Y=cr(Object(l.a)(Object(l.a)({},(null!==(d=ke[k])&&void 0!==d?d:ke.Default).fontData),{},{headTextFillStyle:R}),h),U=Ja({defaultFamily:Y.font,defaultSize:Y.fontList[0].fontSize,defaultWeight:Y.weight}),G={fontLevel:0,fontData:Y,currentFont:U},V=Xi(n,m,{multiline:!1,furiganaHelper:g,dictionaryType:"rubyFormName"}),q="ocg"===m?[V]:V.split(new RegExp("([^".concat("&A-Za-z0-9\\-/\\s\\(\\)!,.\u2018\u201c\u2019\u201d:;<>\\[\\]\\\\","])"),"g")),_=Ja({defaultFamily:Y.font,defaultSize:Y.fontList[0].fontSize,defaultWeight:Y.weight}),$=_.getFont(),Q=_.setSize(e=>e*Y.symbolFontRatio).setStyle("small-caps").setFamily(Y.symbolFont).getFont();let Z=0,ee=0;q.forEach((e,n)=>{t.font=n%2===0?$:Q;const a=t.measureText(e.replaceAll(vt,""));Z=Math.max(Z,a.actualBoundingBoxAscent),ee=Math.max(ee,a.actualBoundingBoxDescent)},0),t.font=$;let te=0;const ne=G.fontData.fontList[G.fontLevel].lineHeight,ae=_a(e=>{const{currentLineCount:n,currentLineList:a}=Ui({ctx:t,median:e,paragraphList:[V],format:m,textData:G,width:y,lineHeight:ne,globalScale:h});return!(n>1)&&(te=a[0].actualLineWidth,!0)})/1e3;t.scale(ae,1);const re=sr(he,h),ie=null!==(u=Y.fontList[0].offsetY)&&void 0!==u?u:re.offsetY,oe=Bi(V),le=te>0&&L?((e,t,n,a,r,i,o,l)=>{const s=t%360,c="".concat(Math.floor(s/90)),d=s%90,u=o+l,b=a+r/2,m=i+(l-o)/2;let p=r,g=u;"1"!==c&&"3"!==c||(p=u,g=r);const h=Math.sqrt(p**2/4+g**2/4);if(h>0){const t=90-(180*Math.asin(p/2/h)/Math.PI-d),a=Math.sin(t/180*Math.PI)*h,r=Math.sin(d/180*Math.PI)*a,i=Math.cos(d/180*Math.PI)*a;let o=r,l=i;"1"===c&&(o=i,l=-r),"2"===c&&(o=-r,l=-i),"3"===c&&(o=-i,l=r);const s=b+o,u=m-l,g=b-o,f=m+l,v=e.createLinearGradient(s,u,g,f);return n.forEach(e=>{let{color:t,offset:n}=e;return v.addColorStop(parseFloat(n),t)}),v}})(t,S,nr(C),f,te,v,Z,ee):void 0;let se=F&&"number"===typeof O&&O>0,ce=()=>{};se&&(ce=Ci({ctx:t,lineWidth:O,lineColor:w,lineColorGradient:le,globalScale:h,useDefault:!1})),t.fillStyle=null!==le&&void 0!==le?le:w;const{tokenEdge:de}=await Vi({ctx:t,tokenList:oe,xRatio:ae,yRatio:1,trueEdge:f,trueBaseline:v,textData:G,lineHeight:ne,format:m,globalScale:h,option:{drawHeadText:!1},textDrawer:e=>{let{ctx:t,letter:n,scaledEdge:a,scaledBaseline:r}=e;t.fillText(n,a,r-(b?ie:0)),se&&t.strokeText(n,a,r-(b?ie:0))}});if(ce(),W){const n=e.cloneNode(),a=n.getContext("2d");a&&(t.setTransform(1,0,0,1,0,0),a.scale(h,h),await Li(a,"frame/frame-".concat(p,".png"),0,0),await Li(a,"background/background-name-".concat(p,".png"),0,0),a.globalCompositeOperation=K,a.resetTransform(),await Ri(a,"finish-name/".concat(W,".png"),f,v-Z,y,Z+ee),t.globalCompositeOperation="source-in",t.drawImage(n,0,0),t.globalCompositeOperation="source-over",t.scale(ae,1))}if(F){const n=10,a=_n({inputCanvas:e,lightPitch:j,lightYaw:x,minIntensity:-.9,maxIntensity:.9,affectedWidth:Math.ceil(de+n)});a&&t.putImageData(a,0,0)}if(T){const e=Ci({ctx:t,lineWidth:D+(F?O:0),lineColor:I,globalScale:h,useDefault:!1});t.globalCompositeOperation="destination-over",await Vi({ctx:t,tokenList:oe,xRatio:ae,yRatio:1,trueEdge:f,trueBaseline:v,textData:G,lineHeight:ne,format:m,globalScale:h,option:{drawHeadText:!1},drawImage:!1,textDrawer:e=>{let{ctx:t,letter:n,scaledEdge:a,scaledBaseline:r}=e;t.lineJoin="round",t.strokeText(n,a+E,r+z-(b?ie:0))}}),t.lineJoin="miter",t.globalCompositeOperation="source-over",e()}if(N){const n=e.cloneNode(),a=n.getContext("2d");if(a){const r=Ci({ctx:a,x:M,y:H,shadowColor:P,blur:B,globalScale:h,useDefault:!1});t.scale(1/ae,1),a.drawImage(e,0,0),t.globalCompositeOperation="destination-over",t.drawImage(n,0,0),t.globalCompositeOperation="source-over",r()}}await Vi({ctx:t,tokenList:oe,xRatio:ae,yRatio:1,trueEdge:f,trueBaseline:v,textData:G,lineHeight:ne,format:m,globalScale:h,drawImage:!1,textDrawer:()=>{}});const ue=X();t.setTransform(1,0,0,1,0,0),t.fillStyle=ue.fillStyle,t.lineJoin="miter",t.globalCompositeOperation="source-over"},jo={smaller:0,normal:1,large:2,highPendulumNormal:1,highPendulumSmaller:0},xo=async e=>{var t,n;let{ctx:a,value:r,format:i,metricMethod:o,size:s,furiganaHelper:c,globalScale:d}=e;const{edgeAlignment:u="left",trueEdge:b,trueBaseline:m,trueWidth:p}=or(null!==(t=null===(n=ue[i])||void 0===n?void 0:n[s])&&void 0!==t?t:ue.tcg.medium,d),g=cr({tcg:Fe,ocg:Le}[i],d),h=Object(l.a)(Object(l.a)({},g),{},{metricMethod:null!==o&&void 0!==o?o:g.metricMethod}),{font:f}=h,v=jo[s],y=h.fontList[v],j=Ja({defaultFamily:f,defaultSize:"".concat(y.fontSize,"px")}),x={fontLevel:v,fontData:h,currentFont:j};let O=0;const w=x.fontData.fontList[x.fontLevel].lineHeight;a.font=j.getFont(),a.textAlign="left";const k=Xi(r,i,{multiline:!1,furiganaHelper:c}),S=_a(e=>{const{currentLineCount:t,currentLineList:n}=Ui({ctx:a,median:e,paragraphList:[k],format:i,textData:x,width:p,lineHeight:w,globalScale:d});return!(t>1)&&(O=n[0].actualLineWidth,!0)})/1e3;a.scale(S,1);const C=await Vi({ctx:a,tokenList:Bi(k),xRatio:S,yRatio:1,trueEdge:"left"===u?b:b-O*S,trueBaseline:m,lineHeight:w,textData:x,format:i,globalScale:d,textDrawer:e=>{let{ctx:t,letter:n,scaledEdge:a,scaledBaseline:r}=e;t.fillText(n,a,r)}});return a.setTransform(1,0,0,1,0,0),Object(l.a)(Object(l.a)({},C),{},{xRatio:S})},{finishTypeCardWidth:Oo,width:wo,iconHeight:ko,iconWidth:So}=d,Co=(e,t,n,a,r,i)=>{const o=n*i,l=a*i;if(e&&t){const n=r*i;e.font="".concat(n,"px MatrixBoldSmallCaps, Times New Roman"),e.textAlign="left";const a=Array.from("".concat(t));if(1===a.length){const t=a[0],r=o-e.measureText(t).width/2;e.fillText(t,"1"===t?r+2*i:r,l+n)}else if(2===a.length){const t=a[0],r=a[1],i=.825*e.measureText(t).width,s=e.measureText(r).width,c=o-i-("1"===t?0:.1*i);e.fillText(t,c,l+n),e.fillText(r,c+i-("1"===t?"1"===r?.1*e.measureText("1").width:.1*s:-.1*s),l+n)}else{let t=0;a.forEach(n=>{t+=e.measureText(n).width*("1"===n?.7:1)});let r=o-t/2;a.forEach(t=>{e.fillText(t,r,l+n),r+=e.measureText(t).width*("1"===t?.7:1)})}}},Fo=e=>{let{ctx:t,txt:n="1<st> Edition",edge:a=99,baseline:r=1150.93,baselineOffset:i=0,width:o=185,option:s={globalScale:1,stroke:!1}}=e;if(!t)return;const{stroke:c=!1,textStyle:d,globalScale:u}=null!==s&&void 0!==s?s:{},b=n.replaceAll("\\<",st).replaceAll("\\>",ct).split(/(<|>|\d|\xaa|\xba)/g),m=a*u,p=r*u,g=i*u,h=Ci(Object(l.a)(Object(l.a)({ctx:t,globalScale:u},d),null!==d&&void 0!==d&&d.shadowColor?{x:0,y:0,blur:3}:{})),f=7.4*u,v=-2*u,y=o*u;let j=m,x=!1,O=0;for(let l=0;l<b.length;l++){const e=b[l];if(""===e)continue;if("<"===e){x=!0;continue}if(">"===e){x=!1;continue}const n=e.replaceAll(st,"<").replaceAll(ct,">");x?(t.font="".concat(17.78*u,"px palatino-linotype-bold"),O+=t.measureText(n).width):isNaN(parseInt(n))?"\xaa"===n||"\xba"===n?(t.font="".concat(20.22*u,"px Georgia"),O+=t.measureText(n).width):(t.font="".concat(22.22*u,"px palatino-linotype-bold"),O+=t.measureText(n).width):(t.font="".concat(23.7*u,"px palatino-linotype-bold"),O+=t.measureText(n).width-2*u)}const w=Math.min(y/O,1);t.scale(w,1),j=m/w,x=!1;for(let l=0;l<b.length;l++){const e=b[l];if(""===e)continue;if("<"===e){x=!0;continue}if(">"===e){x=!1;continue}const n=e.replaceAll(st,"<").replaceAll(ct,">");x?(t.font="".concat(17.78*u,"px palatino-linotype-bold"),t.fillText(n,j,p-f+g),c&&t.strokeText(n,j,p-f),j+=t.measureText(n).width):isNaN(parseInt(n))?"\xaa"===n||"\xba"===n?(t.font="".concat(20.22*u,"px Georgia"),t.fillText(n,j,p-v+g),c&&t.strokeText(n,j,p-v),j+=t.measureText(n).width):(t.font="".concat(22.22*u,"px palatino-linotype-bold"),t.fillText(n,j,p+g),c&&t.strokeText(n,j,p),j+=t.measureText(n).width):(t.font="".concat(23.7*u,"px palatino-linotype-bold"),t.fillText(n,j,p+g),c&&t.strokeText(n,j,p),j+=t.measureText(n).width-2*u)}t.resetTransform(),h()},Lo=(e,t,n,a,r)=>{if(!e)return;const i=n*r,o=a*r;e.scale(1,.98),e.font="bold ".concat(35.73*r,"px Matrix-Bold");const l=yi(e,t,.075,i,o/.98);e.setTransform(1,0,0,1,0,0),e.scale(1,1.01),e.font="bold ".concat(34.74*r,"px Matrix-Bold"),yi(e,"/",.15,l+5*r,o/1.01),e.setTransform(1,0,0,1,0,0)},To=(e,t,n,a,r)=>{if(!e||null==t)return;const i=n*r,o=a*r,l=73.97*r;if("\u221e"===t)e.textAlign="right",e.font="bold ".concat(36.18*r,"px matrix"),e.fillText(t,i+l,o);else if("?"===t)e.textAlign="right",e.scale(1,1.29),e.font=" ".concat(34*r,"px MatrixBoldSmallCaps"),e.fillText(t,i+l,o/1.29-1),e.setTransform(1,0,0,1,0,0);else{e.textAlign="left";const n="".concat(t).split("?");let a=n.reduce((t,a,i)=>{e.font="".concat(36.18*r,"px MatrixBoldSmallCaps");let o=t+e.measureText(a).width;return i<n.length-1&&(e.font="".concat(36.18*r,"px matrix"),o+=e.measureText("?").width),o},0);if(a>0){const t=Math.min(l/a,1);e.scale(t,1),n.reduce((a,i,l,s)=>{const c=s[s.length-1-l];let d=a;return e.font="".concat(36.18*r,"px MatrixBoldSmallCaps"),d-=e.measureText(c).width*t,e.fillText(c,d/t,-1+o),l<n.length-1&&(e.font="".concat(34*r,"px MatrixBoldSmallCaps"),d-=e.measureText("?").width*t,e.scale(1,1.29),e.fillText("?",d/t,o/1.29-1),e.setTransform(1,0,0,1,0,0)),d},i+l),e.scale(1/t,1)}}},No=["trueEdge","trueWidth"],{height:Ro,width:Io,finishTypeCardWidth:Eo,finishTypeCardHeight:zo,stickerX:Do,stickerY:Bo,stickerSize:Po}=d,Mo=(e,t,n)=>{const{card:r}=ii(),{exportCanvasRef:i,artworkCanvasRef:o,backgroundCanvasRef:s,frameCanvasRef:c,creatorCanvasRef:d,effectCanvasRef:m,nameCanvasRef:g,passwordCanvasRef:h,pendulumEffectCanvasRef:y,pendulumScaleCanvasRef:j,setIdCanvasRef:x,statCanvasRef:O,stickerCanvasRef:w,cardIconCanvasRef:k,typeCanvasRef:S,finishCanvasRef:F,lightboxRef:L,previewCanvasRef:T}=t,{format:N,region:R,hasBackground:I,backgroundType:z,frame:B,foil:P,finish:M,artFinish:H,otherFinish:A,opacity:W,name:K,nameStyle:Y,nameStyleType:U,effectTextStyle:G,pendulumTextStyle:X,typeTextStyle:V,statTextStyle:q,otherTextStyle:_,effect:J,effectStyle:$,typeAbility:Q,isPendulum:ee,pendulumFrame:te,pendulumRightFrame:ne,pendulumEffect:ae,pendulumScaleBlue:re,pendulumScaleRed:ie,pendulumStyle:oe,pendulumSize:le,leftFrame:ue,rightFrame:pe,dyeList:ge,atk:fe,def:ve,linkMap:ye,linkRating:je,attribute:xe,attributeType:ke,cardIcon:Fe,subFamily:Le,star:Re,starAlignment:Ie,starList:Ee,setId:ze,password:De,creator:Be,sticker:Pe,isLegacyCard:Me,isFirstEdition:He,isDuelTerminalCard:Ae,isSpeedCard:We,isLimitedEdition:Ke,cornerText:Ue,hasCornerText:Ge,firstEditionText:Xe,furiganaHelper:Ve,flag:qe}=r,_e=Object(a.useRef)({frame:{name:"frame",order:1,rerun:0,instructor:()=>Promise.resolve()},attribute:{name:"attribute",order:2,rerun:0,instructor:()=>Promise.resolve()},sticker:{name:"sticker",order:3,rerun:0,instructor:()=>Promise.resolve()},creator:{name:"creator",order:4,rerun:0,instructor:()=>Promise.resolve()},name:{name:"name",order:5,rerun:0,instructor:()=>Promise.resolve()},effect:{name:"effect",order:6,rerun:0,instructor:()=>Promise.resolve()},pendulumEffect:{name:"pendulumEffect",order:7,rerun:0,instructor:()=>Promise.resolve()},otherText:{name:"otherText",order:7,rerun:0,instructor:()=>Promise.resolve()},overlay:{name:"overlay",order:9,rerun:0,instructor:()=>Promise.resolve()}}),Je=$.background,$e=oe.background,Qe=$.minLine,Ze=oe.minLine,et=$.justifyRatio,tt=oe.justifyRatio,nt="auto"===te?ee?"spell":B:te,at=null===$||void 0===$?void 0:$.condenseTolerant,rt=(e=>"normal"===e.frame&&Qn(e))(r),it=(e=>"xyz"===e.frame)(r),ot=(e=>!0===e.isLink)(r),lt=Qn(r),st=$n(r),{body:ct=100,boundless:dt,effectBox:ut}=W,bt=!!(ct<50||dt),mt=ta(nt),{bottomRightFrame:pt}=ra({frame:B,topLeftFrame:ue,topRightFrame:pe,bottomLeftFrame:te,bottomRightFrame:ne,effectBackground:Je,pendulumEffectBackground:$e},ee),gt=ta(pt),ht=ea(B),{levelStyle:ft,resolvedEffectTextStyle:vt,resolvedPendulumEffectTextStyle:yt,resolvedStatTextStyle:jt,resolvedTypeTextStyle:xt,resolvedOtherEffectTextStyle:Ot}=Object(a.useMemo)(()=>(e=>{let{lightHeader:t,requireShadow:n,effectTextStyle:a,pendulumTextStyle:r,otherTextStyle:i,statTextStyle:o,typeTextStyle:s}=e;const c={color:t?"#ffffff":"#000000"},d=n?Object(l.a)({blur:2,y:1,shadowColor:t?"#000000":"#ffffff"},c):c,[u,b,m,p]=a,g=u?Object(l.a)(Object(l.a)({},m?{y:0,blur:4,shadowColor:p}:{}),{},{color:b}):{},[h,f,v,y]=r,j=h?Object(l.a)(Object(l.a)({},v?{y:0,blur:4,shadowColor:y}:{}),{},{color:f}):{},[x,O,w,k]=s,S=x?Object(l.a)(Object(l.a)({},w?{y:1,blur:1,shadowColor:k}:{}),{},{color:O}):{},[C,F,L,T]=o,N=C?Object(l.a)(Object(l.a)({},L?{y:1,blur:1,shadowColor:T}:{}),{},{color:F}):{},[R,I,E,z]=i;return{levelStyle:d,resolvedEffectTextStyle:g,resolvedOtherEffectTextStyle:R?Object(l.a)(Object(l.a)({},E?{y:0,blur:0,shadowColor:z}:{}),{},{color:I}):{},resolvedPendulumEffectTextStyle:j,resolvedStatTextStyle:N,resolvedTypeTextStyle:S}})({lightFooter:mt,lightHeader:ht,requireShadow:bt,effectTextStyle:G,pendulumTextStyle:X,otherTextStyle:_,statTextStyle:q,typeTextStyle:V}),[mt,ht,bt,G,X,_,q,V]),wt=ge[6],kt=Le.toUpperCase(),St=Q.map(e=>e.trim()).join("ocg"===N?"\uff0f":"\u200a/\u200a"),[Ct,Ft]=qe,Lt=!ee&&!lt&&ot&&!(fe||ve),Tt=aa(Ft,ot)&&!Lt,Nt=Tt&&Ct,Rt=!(!fe&&!ve)||Tt||!(!ee||!ze),It=St.length>0&&("auto"===Fe?lt||st:"st"!==Fe),Et=!(""===(null!==re&&void 0!==re?re:"")),zt=!(""===(null!==ie&&void 0!==ie?ie:"")),{isInitializing:Dt,imageChangeCount:Bt,language:Pt,globalScale:Mt}=n,Ht=e&&!1===Dt,At=Object(a.useMemo)(()=>Oi(M,f),[M]),Wt=Object(a.useMemo)(()=>Oi([H],v),[H]),[,Kt,Yt]=A;Object(a.useEffect)(()=>{Ht&&(_e.current.frame.rerun+=1,_e.current.frame.instructor=async()=>{var e;const t=null===(e=c.current)||void 0===e?void 0:e.getContext("2d"),n=o.current,a=s.current;if(!xi(t)||!c.current)return;const r=Object(l.a)(Object(l.a)({},b()),W),{effectBox:i,artBorder:d,body:m,text:g,boundless:h,baseFill:f,frameBorder:v}=r,y=(e,t,n,a,r,i)=>new Promise(o=>{setTimeout(()=>{e.fillStyle=I?null!==i&&void 0!==i?i:f:u,e.fillRect(t,n,a,r),o(!0)},0)}),j=m>0||d,{drawAttribute:x,drawBackground:O,drawCardArt:w,drawFrame:k,drawPendulumScaleIcon:S,drawStar:C,drawNameBackground:F,drawEffectBackground:L,drawFrameBorder:T,drawNameBorder:N,drawArtBorder:E,drawPendulumBorder:D,drawBorderPendulumFinish:M,drawEffectBorder:H,drawCardBorder:K,drawStatBorder:Y,drawAttributeFinish:U,drawArtBorderFoil:G,drawEffectBorderFoil:X,drawNameFinish:V,drawArtFinish:q,drawArtOverlayFinish:_,drawArtBorderFinish:J,drawPendulumArtBorderFinish:$,drawFrameFinish:Q,drawFrameBackgroundFinish:Z,drawOverlayFinish:ae,drawCardBorderFinish:re}=vo({canvas:c.current,artworkCanvas:n,backgroundCanvas:a,globalScale:Mt,region:R,frame:B,leftFrame:ue,pendulumFrame:te,rightFrame:pe,pendulumRightFrame:ne,dyeList:ge,effectBackground:Je,pendulumEffectBackground:$e,hasBackground:I,backgroundType:z,attribute:xe,attributeType:ke,cardIcon:Fe,star:Re,starList:Ee,foil:P,pendulumSize:le,opacity:r,isLink:ot,isSpeedSkill:st,isXyz:it,isPendulum:ee,pendulumFrameTypeMap:{red:zt?"normal":"scaleless",blue:Et?"normal":"scaleless"},otherFinish:A,loopFinish:At,loopArtFinish:Wt});await y(t,0,0,Mt*Io,Mt*Ro);const{canvas:ie,ctx:oe}=yn(Io*Mt,Ro*Mt);n&&oe&&w(oe),await q(oe),await _(oe);const{canvas:se,ctx:ce}=yn(Io*Mt,Ro*Mt);if(ce&&await y(ce,0,0,Mt*Io,Mt*Ro),a&&ce&&await O(ce,j),"strict"===z&&g<100&&ce&&await L({externalCtx:ce,blendWithBackground:!1,withPendulum:ee}),!h&&ce&&ce.drawImage(ie,0,0),t.drawImage(se,0,0),await k(),await K(),await re(),ee||(h||await F(),h||!i&&I||(await L({}),await H(),await X()),await E(),await G(),await J()),ee&&!h){const{artX:e,artY:n,artWidth:a,ratio:r}=p(ee,W,void 0,le);t.drawImage(se,Mt*e,Mt*n,Mt*a,Mt*a/r,Mt*e,Mt*n,Mt*a,Mt*a/r),await F(),await L({withPendulum:!0}),await S(),await D(j,"normal"),await D(j,P,!0),await $(),j&&await M()}if(h||(await Q(),await V()),j&&await Z(),h){await F(),await V(),await N(),ot&&!ee?await J():ee&&(j&&(await D(j,"normal"),await D(j,P,!0)),await $());const{artX:e,artY:n,artWidth:a,ratio:r}=p(ee,W,"full",le);v&&await T(),t.drawImage(ie,Mt*e,Mt*n,Mt*a,Mt*a/r,Mt*e,Mt*n,Mt*a,Mt*a/r),v||await T(),ee?(await L({withPendulum:!0}),await S(),await D(!1,"normal"),await D(!1,P,!0),await M()):i&&(await L({}),await H(),await X()),await Q()}Rt&&await Y(Object(l.a)({color:"#000000"},jt));try{await x()}catch(de){console.error("drawAttribute error",de)}if(await U(),await C({style:ft,starAlignment:Ie}),h||(await N(),await T()),Tt&&Rt){const e=Ci(Object(l.a)(Object(l.a)({ctx:t},jt),{},{globalScale:Mt})),n="string"===typeof je&&je.length>0?je:"".concat(Array.isArray(ye)?ye.length:0);i&&await(async(e,t,n,a)=>{const r=e.getContext("2d");if(!r||"string"!==typeof t)return;await Ei(e,"link/link-text.png",...lr([600,1080,120,30],a),a,n);const i=isNaN(Number(t))?1106:1105,o=Ci(Object(l.a)(Object(l.a)({ctx:r},n),{},{globalScale:a}));r.textAlign="right",r.scale(1.2,1),r.font="bold ".concat(24*a,"px RoGSanSrfStd-Bd"),r.fillText("".concat(t),622.75*a,i*a),r.setTransform(1,0,0,1,0,0),r.textAlign="left",o()})(c.current,n,jt,Mt),e()}await(async e=>{let{canvas:t,globalScale:n,type:a,isPendulum:r,isLink:i,isDuelTerminalCard:o,isSpeedCard:s,bordered:c,textStyle:d}=e;if(null===t||void 0===t?void 0:t.getContext("2d")){if(o){const e=r?[255,1072,175,35]:i?[151,848,216,24]:[80,843,270,30];await Ei(t,"text/text-duel-terminal-".concat(a).concat(c?"-bordered":"",".png"),...lr(e,n),n,null!==d&&void 0!==d&&d.shadowColor?Object(l.a)(Object(l.a)({},d),{},{blur:3,x:0,y:0}):d)}if(s){const e=r?[255,1084,176.4,25]:i?[151,854,215.6,22]:[80,850,245,25];await Ei(t,"text/text-speed-duel-".concat(a).concat(c?"-bordered":"",".png"),...lr(e,n),n,null!==d&&void 0!==d&&d.shadowColor?Object(l.a)(Object(l.a)({},d),{},{blur:3,x:0,y:0}):d)}}})({canvas:c.current,globalScale:Mt,type:mt&&!ee?"white":"black",bordered:(m<50||h)&&!ee,isDuelTerminalCard:Ae,isSpeedCard:We,isLink:ot,isPendulum:ee,textStyle:Ot}),await ae()})},[Ht,Mt,o,xe,ke,s,z,Fe,ge,Je,M,P,N,R,B,c,I,Ae,ot,ee,We,st,it,ue,ft,mt,ye,je,Wt,At,W,A,$e,te,ne,le,Ot,jt,pe,Tt,Re,Ee,Ie,Rt,Et,zt,Bt]),Object(a.useEffect)(()=>{var e;if(!Ht)return;const t=null===(e=j.current)||void 0===e?void 0:e.getContext("2d");if(xi(t)&&ee){const{numberBlueX:e,numberRedX:n,numberY:a,fontSize:r}=Z[le];""!==(null!==re&&void 0!==re?re:"")&&Co(t,re,e,a,r,Mt),""!==(null!==ie&&void 0!==ie?ie:"")&&Co(t,ie,n,a,r,Mt)}},[Ht,Mt,ee,le,re,ie,j]),Object(a.useEffect)(()=>{Ht&&(_e.current.name.rerun+=1,_e.current.name.instructor=async()=>{var e;const t=null===(e=g.current)||void 0===e?void 0:e.getContext("2d");xi(t)&&g.current&&await yo(g.current,t,K,"tcg"===N?60:68,116,xe===C?"tcg"===N?688:674:"tcg"===N?608:598,ia({format:N,frame:B,nameStyle:Y,nameStyleType:U,foil:P}),{isSpeedSkill:st,format:N,frame:B,furiganaHelper:Ve,globalScale:Mt})})},[Ht,Mt,xe,P,N,B,Ve,st,K,g,Y,U]),Object(a.useEffect)(()=>{var e;if(!Ht)return;const t=null===(e=O.current)||void 0===e?void 0:e.getContext("2d");if(!xi(t)||!Rt)return;const n=Ci(Object(l.a)(Object(l.a)({ctx:t},jt),{},{globalScale:Mt})),a=Tt;if(fe){const e=((Tt?!!ve&&Nt:!!ve)?168.75:0)+(a?168.75:0);ut&&Lo(t,"ATK",600.85-e,1106,Mt),To(t,fe.trim(),677.574-e,1106.5,Mt)}if(ve&&(!Tt||Nt)){const e=a?168.75:0;ut&&Lo(t,"DEF",600.85-e,1106,Mt),To(t,ve.trim(),673.865-e,1106.5,Mt)}n()},[Ht,Mt,ut,fe,ve,Tt,lt,Nt,jt,O,Rt]),Object(a.useEffect)(()=>{var e;if(!Ht)return;const t=null===(e=x.current)||void 0===e?void 0:e.getContext("2d");xi(t)&&((e,t,n)=>{if(!e)return;const{globalScale:a,isPendulum:r,isLink:i,withShadow:o,format:s,lightFooter:c,textStyle:d}=n;let u=.125,b=0,m=0;e.font="".concat(o?"bold":""," ").concat(22*a,"px stone-serif-regular, Times New Roman"),"ocg"===s&&(u=.145,b=-1,m=-3);const p=Ci(Object(l.a)(Object(l.a)({ctx:e,color:c&&!r?"#ffffff":"#000000",shadowColor:o?c?"#000000":"#ffffff":"#000000",y:0,x:0,blur:o&&!r?3:0,globalScale:a},d),null!==d&&void 0!==d&&d.shadowColor?{x:0,y:0,blur:3}:{}));r?yi(e,t,u,(66.65+m)*a,(1105.01+b)*a):i?ji(e,t,u,(666.56+m)*a,(872.94+b)*a):ji(e,t,u,(728.78+m)*a,(871.5+b)*a),p()})(t,ze,{globalScale:Mt,isLink:ot,isPendulum:ee,withShadow:bt&&!ee,format:N,lightFooter:gt,textStyle:Ot})},[Ht,Mt,N,ot,ee,gt,x,ze,st,nt,bt,Ot]),Object(a.useEffect)(()=>{var e;if(!Ht)return;const t=null===(e=h.current)||void 0===e?void 0:e.getContext("2d");_e.current.otherText.rerun+=1,_e.current.otherText.instructor=async()=>{if(!xi(t))return;const e=/^[0-9]*$/.test(De),n=e&&ee&&ot,{rightEdge:a}=await(async e=>{var t,n;let{ctx:a,globalScale:r,value:i,format:o,alignment:s,baselineOffset:c=0,edgeOffset:d=0,lightFooter:u,hasShadow:b,textStyle:m,fontLevel:p}=e;if(!xi(a))return{rightEdge:0};const g=Ci(Object(l.a)(Object(l.a)({ctx:a,color:u?"#ffffff":"#000000",shadowColor:b?u?"#000000":"#ffffff":"#000000",x:0,y:0,blur:b?3:0,globalScale:r},m),null!==m&&void 0!==m&&m.shadowColor?{x:0,y:0,blur:3}:{})),{trueEdge:h,trueBaseline:f,trueWidth:v}=or(null!==(t=me[o])&&void 0!==t?t:me.tcg,r),y=cr(Ce[o],r),{font:j}=y,x=Xi(i,o,{multiline:!1,furiganaHelper:!1});let O={fontLevel:p,fontData:y,currentFont:Ja()},w=0;const k=O.fontData.fontList[O.fontLevel].lineHeight;let S=1e3,C=y.fontList[0];for(let l=0;l<y.fontList.length;l++){C=y.fontList[l];const e=Ja({defaultFamily:j,defaultSize:"".concat(C.fontSize,"px"),defaultWeight:b?"bold":""});let t={fontLevel:l,fontData:y,currentFont:e},n=0;if(a.font=e.getFont(),a.textAlign="left",S=_a(e=>{const{currentLineCount:i,currentLineList:l}=Ui({ctx:a,median:e,paragraphList:[x],format:o,textData:t,width:v,lineHeight:k,globalScale:r});return!(i>1)&&(n=l[0].actualLineWidth,!0)}),w=n,O=t,S>=1e3)break}const F=S/1e3;a.scale(F,1);const L=sr(he,r),T=await Vi({ctx:a,tokenList:Bi(x),xRatio:F,yRatio:1,trueEdge:"left"===s?h+d:h-d-w*F,trueBaseline:f+(null!==(n=C.offsetY)&&void 0!==n?n:L.offsetY)+c,lineHeight:k,textData:O,format:o,globalScale:r,textDrawer:e=>{let{ctx:t,letter:n,scaledEdge:a,scaledBaseline:r}=e;t.fillText(n,a,r)}});return a.setTransform(1,0,0,1,0,0),g(),{rightEdge:T.tokenEdge}})({ctx:t,globalScale:Mt,value:De,lightFooter:mt,alignment:"left",edgeOffset:(n?80:0)*Mt,format:N,hasShadow:"zarc"===nt||bt,textStyle:Ot,fontLevel:e?0:1}),r=(Me||!e)&&!ee;if(He){const n=!ee||!!e,i=r?ot?151:89:Math.max(a/Mt+14.813,162.2)-("ocg"===N?7:0),o=r?871:1150.93,s=r?0:st?-2:-1,c=r?ee?683:475:0===Be.trim().length?615:185;n&&Fo({ctx:t,txt:Xe,edge:i,baseline:o,baselineOffset:s,width:c,option:{stroke:!1,globalScale:Mt,textStyle:Object(l.a)({color:mt?"#ffffff":"#000000"},Ot)}})}if(Ge){const e=r?Math.max(a/Mt+14.813,162.2)-("ocg"===N?7:0):ee?65:ot?151:89,n=r?1150.93:871,i=r?st?-2:-1:ee?"small"===le?-100:-140:0,o=r?0===Be.trim().length?615:185:ee?683:475;Fo({ctx:t,txt:Ue,edge:e,baseline:n,baselineOffset:i,width:o,option:{stroke:!1,globalScale:Mt,textStyle:Object(l.a)({color:mt?"#ffffff":"#000000"},Ot)}})}}},[Ht,Mt,Be,nt,Ue,Xe,N,Ge,He,Me,ot,ee,st,mt,De,h,le,bt,Ot]),Object(a.useEffect)(()=>{var e;if(!Ht)return;const t=null===(e=d.current)||void 0===e?void 0:e.getContext("2d");_e.current.creator.rerun+=1,_e.current.creator.instructor=async()=>{var e;if(!xi(t))return;const n=Object(l.a)(Object(l.a)({},b()),W),{body:a,boundless:r}=n,i=await(async e=>{var t,n;let{ctx:a,value:r,format:i,alignment:o,baselineOffset:s=0,lightFooter:c,hasShadow:d,textStyle:u,globalScale:b}=e;if(!xi(a))return;const m=Ci(Object(l.a)(Object(l.a)({ctx:a,color:c?"#ffffff":"#000000",shadowColor:d?c?"#000000":"#ffffff":"#000000",y:0,x:0,blur:d?3:0,globalScale:b},u),null!==u&&void 0!==u&&u.shadowColor?{x:0,y:0,blur:3}:{})),{trueEdge:p,trueBaseline:g,trueWidth:h}=or(null!==(t=be[i])&&void 0!==t?t:be.tcg,b),f=cr(Se[i],b),{font:v}=f,y=Xi(r,i,{multiline:!1,furiganaHelper:!1});let j={fontLevel:0,fontData:f,currentFont:Ja()},x=0,O=1e3,w=f.fontList[0];for(let l=0;l<f.fontList.length;l++){w=f.fontList[l];const e=Ja({defaultFamily:v,defaultSize:"".concat(w.fontSize,"px"),defaultWeight:d?"bold":""});let t={fontLevel:l,fontData:f,currentFont:e},n=0;const r=j.fontData.fontList[j.fontLevel].lineHeight;if(a.font=e.getFont(),a.textAlign="left",O=_a(e=>{const{currentLineCount:o,currentLineList:l}=Ui({ctx:a,median:e,paragraphList:[y],format:i,textData:t,globalScale:b,width:h,lineHeight:r});return!(o>1)&&(n=l[0].actualLineWidth,!0)}),x=n,j=t,O>=1e3)break}const k=O/1e3;a.scale(k,1);const S=sr(he,b),C=await Vi({ctx:a,tokenList:Bi(y),xRatio:k,yRatio:1,trueEdge:"left"===o?p:p-x*k,trueBaseline:g+(null!==(n=w.offsetY)&&void 0!==n?n:S.offsetY)+s*b,lineHeight:j.fontData.fontList[j.fontLevel].lineHeight,textData:j,format:i,globalScale:b,textDrawer:e=>{let{ctx:t,letter:n,scaledEdge:a,scaledBaseline:r}=e;t.fillText(n,a,r)}});return a.setTransform(1,0,0,1,0,0),m(),Object(l.a)({leftEdge:"left"===o?p:p-x*k},C)})({ctx:null===(e=d.current)||void 0===e?void 0:e.getContext("2d"),format:N,value:Be,alignment:"right",baselineOffset:st?-2:0,hasShadow:bt,lightFooter:gt,textStyle:Ot,globalScale:Mt}),o=("tcg"===N?390:350)*Mt,s=("tcg"===N?30:40)*Mt;var c;Ke&&d.current&&await(async e=>{let{canvas:t,type:n,globalScale:a,isPendulum:r,isLink:i,isLegacyCard:o,widthOffset:s,bordered:c,textStyle:d}=e;const u=!o||r?[145,1123,240-s/a,37]:i?[151,846,216,36]:[80,843,240,40];await Ei(t,"text/text-limited-edition-".concat(n).concat(c?"-bordered":"",".png"),...lr(u,a),a,null!==d&&void 0!==d&&d.shadowColor?Object(l.a)(Object(l.a)({},d),{},{blur:3,x:0,y:0}):d)})({canvas:d.current,ctx:t,globalScale:Mt,type:mt&&!ee?"white":"black",bordered:(a<50||r)&&!ee,isLink:ot,isPendulum:ee,widthOffset:(null!==(c=null===i||void 0===i?void 0:i.leftEdge)&&void 0!==c?c:o)<o?s:0,isLegacyCard:Me,textStyle:Ot})}},[Ht,Mt,Be,d,m,N,Me,Ke,ot,ee,st,mt,gt,W,bt,Ot]),Object(a.useEffect)(()=>{Ht&&(_e.current.sticker.rerun+=1,_e.current.sticker.instructor=async()=>{var e;const t=null===(e=w.current)||void 0===e?void 0:e.getContext("2d");if(!xi(t))return;const{canvas:n,ctx:a}=yn(Io*Mt,Ro*Mt);await(async e=>{let{ctx:t,sticker:n,globalScale:a,x:r,y:i}=e;if(xi(t)){if(n===D)return Promise.resolve();t.scale(a,a),await Li(t,"sticker/sticker-".concat(n.toLowerCase(),".png"),r,i),t.resetTransform()}})({ctx:a,sticker:Pe,globalScale:Mt,x:Do,y:Bo});const r=null!==Yt&&void 0!==Yt?Yt:"normal";if("normal"!==r){const e=Oi([r],v),{canvas:i,ctx:o}=yn(Io*Mt,Ro*Mt);o&&a&&(o.drawImage(n,0,0),o.scale(Mt,Mt),await e(o,"art",async e=>await Li(o,"finish/finish-typeart-".concat(e,".png"),Do-Eo+Po,Bo-zo+Po)),a.globalCompositeOperation="source-in",a.drawImage(i,0,0),t.drawImage(n,0,0))}else t.drawImage(n,0,0)})},[Ht,Mt,Pe,Yt,w,Wt]),Object(a.useEffect)(()=>{var e,t;if(!Ht)return;const n=null===(e=m.current)||void 0===e?void 0:e.getContext("2d"),a=null===(t=S.current)||void 0===t?void 0:t.getContext("2d");_e.current.effect.rerun+=1,_e.current.effect.instructor=async()=>{if(!xi(n)||!xi(a))return;const{condenseTolerant:e,upSize:t,fontStyle:r}=null!==$&&void 0!==$?$:{},i=G[0],o=i?t:0,s=i?rt&&"auto"===r||"tcg"===N&&"italic"===r:rt,c=await qi(Object(l.a)(Object(l.a)({ctx:n,content:J,isNormal:rt,useItalic:s,condenseTolerant:e,format:N,furiganaHelper:Ve},(e=>{let{format:t,useItalic:n,statInEffect:a,typeInEffect:r,frameType:i}=e;const o=[t,..."pendulumLarge"===i?["pendulumLarge"]:[],r?"type":"",a?"stat":""].filter(e=>""!==e).join("-"),l=[t,..."pendulumLarge"===i?["pendulumLarge"]:[],r?"type":"",a?"stat":""].filter(e=>""!==e).join("-");let s=we[l];return n&&"tcg"===t&&Oe[l]&&(s=Oe[l]),{fontDataKey:l,fontData:s,sizeList:se[o]}})({format:N,statInEffect:Rt,typeInEffect:It,useItalic:s,frameType:ee&&"large"===le?"pendulumLarge":"normal"})),{},{textStyle:vt,option:{forceRelaxCondenseLimit:3,defaultSizeLevel:3-o,globalScale:Mt,minLine:Qe,justifyRatio:et}})),d=null!==Kt&&void 0!==Kt?Kt:"normal",u="normal"!==d?Oi([d],v):void 0;await(async e=>{let{ctx:t,globalScale:n,typeAbility:a,subFamily:r,format:i,frame:o,size:s,isMonster:c,textStyle:d,furiganaHelper:u,loopIconFinish:b}=e;if(!xi(t))return;const m=a.length>0,p=r!==E&&"large"===s,g=a+(p?"\u29be":""),h=m?"tcg"===i?"large"===s?"[\u200a\u200a".concat(g,"\u200a\u200a]"):"[".concat(g,"]"):"\u3010".concat(g,"\u3011"):"";if(!m)return;const f=na(o)&&!$n({frame:o})&&"large"===s?"#ffffff":"#000000",v=Object(l.a)({color:f},d),y=Ci(Object(l.a)(Object(l.a)({ctx:t},v),{},{globalScale:n})),{iconPositionList:j,xRatio:x}=await xo({ctx:t,format:i,size:s,value:h,metricMethod:c?void 0:"compact",furiganaHelper:u,globalScale:n});y();let O="ocg"===i?-5:-1,w="ocg"===i?-3:0;if(p){const{edge:e,baseline:a}=j[0],{canvas:i,ctx:o}=yn(wo*n,(a+So)*n);if(await Ri(o,"subfamily/subfamily-".concat(r.toLowerCase(),".png"),()=>e+(.175*So*x+w)*n,()=>a-.8*So*n+O*n,()=>So*n,()=>ko*n),b){const{canvas:e,ctx:r}=yn(wo*n,(a+So)*n);r&&o&&(r.drawImage(i,0,0),await b(r,"art",async e=>await Li(r,"finish/finish-typeart-".concat(e,".png"),(wo-Oo)/2,ko)),o.globalCompositeOperation="source-in",o.drawImage(e,0,0),t.drawImage(i,0,0))}else t.drawImage(i,0,0)}})({ctx:a,globalScale:Mt,format:N,frame:B,furiganaHelper:Ve,isMonster:lt,textStyle:xt,size:It?ee&&"large"===le?c<=3?"highPendulumNormal":"highPendulumSmaller":c<=3?"normal":"smaller":"large",subFamily:kt,typeAbility:St,loopIconFinish:u})}},[Ht,Mt,It,Rt,$,J,G,m,Qe,et,N,B,ee,le,Ve,Kt,lt,rt,xt,vt,kt,St,S]),Object(a.useEffect)(()=>{var e;if(!Ht)return;const t=null===(e=y.current)||void 0===e?void 0:e.getContext("2d");_e.current.pendulumEffect.rerun+=1,_e.current.pendulumEffect.instructor=async()=>{if(xi(t)&&ee){const{upSize:e,fontStyle:n}=null!==oe&&void 0!==oe?oe:{},a=X[0],r=a?e:0,i=!!a&&("tcg"===N&&"italic"===n),o="".concat(N,"-").concat(le),s=de[Et&&zt?"normal":"scaleless"][le],c=Et&&zt?s:s.map(e=>{let{trueEdge:t,trueWidth:n}=e,a=Object(oa.a)(e,No);return Object(l.a)(Object(l.a)({},a),{},{trueEdge:t+(Et?ce:0),trueWidth:n-(Et?ce:0)-(zt?ce:0)})});await qi({ctx:t,content:ae,isNormal:!1,useItalic:i,fontData:(i?Te:Ne)[o],fontDataKey:o,textStyle:yt,sizeList:c,condenseTolerant:at,format:N,furiganaHelper:Ve,option:{forceRelaxCondenseLimit:3,defaultSizeLevel:3-r,globalScale:Mt,minLine:Ze,justifyRatio:tt}})}}},[Ht,Mt,at,N,ee,zt,Et,le,y,ae,oe,X,Ze,tt,Ve,yt]),Object(a.useEffect)(()=>{var e;if(!Ht)return;const t=null===(e=F.current)||void 0===e?void 0:e.getContext("2d");_e.current.overlay.rerun+=1,_e.current.overlay.instructor=async()=>{if(xi(t)){if(ot){const e=Object(l.a)(Object(l.a)({},b()),W),{artBorder:n,body:a,boundless:r}=e,i=a>0||n;await(async(e,t,n,a,r)=>{e&&(e.scale(t,t),await Promise.all([1,2,3,4,6,7,8,9].map(async t=>{const{left:i,top:o,height:l,width:s}=Ye[a][t-1],c=n.includes("".concat(t)),d="link/link-inactive-".concat(t),u="link/link-active-".concat(t),b=[i,o,s,l];return await Ri(e,"".concat(d,"-base").concat(r?"-full":"",".png"),...b),await Ri(e,"".concat(d,"-core.png"),...b),c?(await Ri(e,"".concat(u,"-base.png"),...b),Ri(e,"".concat(u,"-core.png"),...b)):void 0})),e.resetTransform())})(t,Mt,ye,ee?"pendulum":"normal",r||!i),await(async(e,t,n,a,r,i)=>{if(!e)return;const o=Ua.test(i);if("normal"===n&&!o)return;const l=o?"platinum":n,s=async e=>{a?await Li(e,"link/link-overlay-arrow-".concat(l,".png"),0,175):await Promise.all([1,2,3,4,6,7,8,9].map(async t=>{const{left:n,top:a,height:i,width:o}=Ye[r][t-1],s=[n,a,o,i];await Ri(e,"link/link-overlay-".concat(t,"-").concat(l,".png"),...s)}))};if(e.scale(t,t),o){const{ctx:t,canvas:n}=yn();t&&await s(t);const{canvas:a}=Pn(n,i);e.drawImage(a,0,0)}else await s(e);e.resetTransform()})(t,Mt,P,!1,ee?"pendulum":"normal",wt)}t.scale(Mt,Mt),await At(t,"total-overlay",e=>Li(t,"finish/finish-".concat(e,"-total-overlay.png"),0,0)),t.resetTransform()}}},[Ht,Mt,F,At,wt,K,ot,ee,ye,W,dt,P,jt,Rt,c]);const Ut=Object(a.useRef)({}),Gt=Object(a.useCallback)(async e=>{const{onError:t,onSuccess:n}=e,a=i.current,r=null===a||void 0===a?void 0:a.getContext("2d");if(a&&r){var o,l,s;xi(r),await Promise.all(Object.values(_e.current).sort((e,t)=>e.order-t.order).map(e=>{let{instructor:t,rerun:n,name:a}=e;return 0!==n&&Ut.current[a]!==n||!Ut.current[a]?(Ut.current[a]=n,t()):Promise.resolve()})).catch(e=>{console.error(e);const t="fail-to-draw-notification";gr.a.close(t),gr.a.error({key:t,message:Pt["error.draw.error.message"],description:Pt["error.draw.error.description"]})});const e=[c,g,k,j,y,S,m,O,x,h,d,w,F];let i={count:-1,error:null};for(let t=0;t<e.length;t++){const n=await Jn(e[t],r,0);"error"===n.status&&(i={count:t,error:n.data})}i.error&&t(i.error),null===(o=L.current)||void 0===o||o.draw(a),null===(l=T.current)||void 0===l||null===(s=l.getContext("2d"))||void 0===s||s.drawImage(a,0,0,a.width,a.height,0,0,Io,Ro),i.error||n()}},[Pt,k,d,i,m,F,L,g,h,y,j,x,c,O,w,S,T]);return{drawingPipeline:_e,onExport:Gt}},Ho="ygocarder-notification",Ao=Object(wr.create)(e=>{const{condenseReminder:t,versionReminder:n,faqReminder:a,feedbackReminder:r}=(()=>{try{var e;const t=JSON.parse(null!==(e=localStorage.getItem(Ho))&&void 0!==e?e:"{}");return t&&"object"===typeof t&&!Array.isArray(t)?t:{}}catch(t){return console.error("useNotificationMemory: Error when getting cached notification",t),{}}})();return{memory:{feedbackReminder:"boolean"===typeof r&&r,faqReminder:"string"!==typeof a?"":a,condenseReminder:"boolean"===typeof t&&t,versionReminder:"string"===typeof n?n:"1.99.99"},updateNotification:(t,n)=>{e(e=>{const a=Object(l.a)(Object(l.a)({},e.memory),{},{[t]:n});return localStorage.setItem(Ho,JSON.stringify(a)),{memory:a}})},updateNotificationMemory:t=>{e(e=>{const n="function"===typeof t?t(e.memory):Object(l.a)(Object(l.a)({},e.memory),t);return localStorage.setItem(Ho,JSON.stringify(n)),{memory:n}})}}}),Wo=e=>{const{targetMemory:t,updateNotification:n}=Ao(Object(ui.useShallow)(t=>{let{memory:n,updateNotification:a}=t;return{targetMemory:n[e],updateNotification:a}}));return[t,Object(a.useCallback)(t=>n(e,t),[e,n])]};var Ko=n(198),Yo=n.n(Ko);const Uo=Object(wr.create)(Object(Er.subscribeWithSelector)(e=>({visible:!1,setVisible:t=>{e(e=>{let{visible:n}=e;return{visible:null==t?!n:t}})}})));var Go,Xo=n(199),Vo=n.n(Xo);const qo=Object(fr.b)(pr.a)(Go||(Go=Object(mr.a)(["\n    .controller {\n        display: flex;\n        gap: var(--spacing);\n        align-items: center;\n        label {\n            background: var(--main-level-4);\n            border: var(--bw) solid var(--sub-level-4);\n            padding: 0 var(--spacing-xs);\n            border-radius: var(--br);\n        }\n        .toggle-button {\n            padding: 0;\n            /** Alignemnt */\n            width: 26px;\n            height: 26px;\n            background-color: var(--main-primary);\n            border: var(--bw) solid var(--sub-primary);\n            border-radius: var(--br);\n            box-shadow: var(--bs-block);\n            cursor: pointer;\n            transform: rotate(0deg);\n            transition: transform 0.33s ease-in-out;\n            &.reverse{\n                transform: rotate(-180deg);\n                transition: transform 0.33s ease-in-out;\n            }\n            &:hover {\n                background-color: var(--sub-primary);\n            }\n        }\n    }\n    .announce {\n        text-align: center;\n        .warning {\n            color: var(--main-danger);\n        }\n        .in-progress {\n            color: var(--main-info);\n        }\n    }\n    .file-panel {\n        margin-top: var(--spacing);\n        input {\n            width: 100%;\n            background: var(--main-level-4);\n            padding: var(--spacing-xs);\n            border-radius: var(--br);\n            cursor: pointer;\n            margin-bottom: var(--spacing-sm);\n        }\n        .file-list {\n            margin-top: var(--spacing-sm);\n            &:empty {\n                margin-top: 0;\n            }\n        }\n        .file-entry {\n            display: grid;\n            grid-template-columns: 1fr max-content;\n            gap: var(--spacing-xs);\n            background-color: var(--main-level-1);\n            border: 1px solid var(--sub-level-3);\n            padding: 0 var(--spacing-xs);\n            border-radius: var(--br-lg);\n            + .file-entry {\n                margin-top: var(--spacing-xxs);\n            }\n            .file-action {\n                .anticon:hover {\n                    color: var(--sub-danger);\n                }\n            }\n        }\n    }\n"]))),_o=e=>{let{language:t}=e;const[n,r]=Object(a.useState)(!1),[i,o]=Object(a.useState)(!1),[l,s]=Object(a.useState)(!1),[c,d]=Object(a.useState)([]),u=c.length>50;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(qo,{visible:n,title:t["converter.header.label"],okButtonProps:{disabled:u||i},okText:t["converter.ok.label"],cancelText:t["converter.cancel.label"],onCancel:()=>r(!1),onOk:async()=>{try{o(!0);const e=await Promise.all(c.map(e=>{let{file:t,name:n}=e;return new Promise((e,a)=>{const r=new FileReader;r.onload=t=>{let{target:r}=t;if(!r)return void a("Not a valid target");const{result:i}=r;if("string"!==typeof i)return void a("Not a valid result");let o=JSON.parse(i);va(o)&&(o=pa(o));const s=ya(o);let c=null;if(c=l?s?Pa(ai(o).card).result:o:s?o:pa(ai(o).card),!c)return void a("Not a valid converted result");const d=new Blob(["".concat(JSON.stringify(c))],{type:"application/json"});e({blob:d,name:n})},r.readAsText(t)})})),t=new Vo.a;e.forEach(e=>{let{blob:n,name:a}=e;t.file(a,n)});const n=await t.generateAsync({type:"blob"});Sa("convert-result.zip",n,"application/zip"),o(!1),r(!1)}catch(e){console.error(e),gr.a.error({message:t["error.convert.message"],description:t["error.convert.description"]}),o(!1)}},children:[Object(S.jsxs)("div",{className:"controller",children:[Object(S.jsx)("label",{children:"YGOPro / DuelingNexus / NeoCardMaker"}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{className:ur("toggle-button",l?"reverse":""),onClick:()=>s(e=>!e),children:Object(S.jsx)(yr.a,{})})}),Object(S.jsx)("label",{children:"Yugioh Carder"})]}),Object(S.jsxs)("div",{className:"file-panel",children:[Object(S.jsx)("input",{type:"file",accept:"application/json",multiple:!0,onChange:e=>{const t=e.target.files;if(t){const e=[];for(let n=0;n<=t.length;n++){const a=t.item(n);a&&e.push({file:a,name:a.name})}d(e)}}}),Object(S.jsxs)("div",{className:"announce",children:[t["converter.header.information.label"],i&&Object(S.jsx)("div",{className:"in-progress",children:t["converter.header.in-progress.label"]}),u&&Object(S.jsx)("div",{className:"warning",children:t["converter.header.warning.label"](50)})]}),Object(S.jsx)("div",{className:"file-list",children:c.map(e=>{let{name:t}=e;return Object(S.jsxs)("div",{className:"file-entry",children:[Object(S.jsx)("div",{children:t}),Object(S.jsx)("div",{className:"file-action",children:Object(S.jsx)(jr.a,{disabled:i,onClick:()=>d(e=>e.filter(e=>e.name!==t))})})]},t)})})]})]}),Object(S.jsx)(hr.a,{overlay:t["converter.header.label"],children:Object(S.jsx)(vr,{className:"batch-converter",onClick:()=>r(!0),children:Object(S.jsx)(xr.a,{})})})]})};var Jo=n(79),$o=n(632),Qo=n(656),Zo=n(620),el=n(246);class tl extends r.a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return console.error("Boundary",e),{hasError:!0}}componentDidCatch(e,t){el.c(e,{data:t.componentStack})}render(){return this.state.hasError?this.props.fallback:this.props.children}}var nl=n(204);const al=["children"];var rl;const il="controls-wrapper",ol=fr.b.div(rl||(rl=Object(mr.a)(["\n    .ap {\n        background-color: var(--color-heavy);\n        .apc {\n            width: 8px;\n        }\n        .aph {\n            width: 8px;\n            height: 8px;\n        }\n    }\n    .ai {\n        margin: 0;\n        margin-top: var(--spacing-sm);\n        background: var(--main-slider);\n        justify-content: space-between;\n        line-height: 1.4;\n        span {\n            background: var(--main-secondary);\n            padding-left: var(--spacing);\n            padding-right: var(--spacing);\n            &:hover {\n                background: var(--sub-secondary);\n            }\n        }\n        span,\n        input {\n            color: var(--color-heavy);\n        }\n    }\n"]))),ll=e=>{let{children:t}=e,n=Object(oa.a)(e,al);return Object(S.jsxs)(ol,{className:"angle-picker-container",children:[t,Object(S.jsx)(nl.AnglePicker,Object(l.a)({},n))]})};var sl=n(645),cl=n(646),dl=n(647),ul=n(648),bl=n(604),ml=n(640);const pl=["overlayClassName","iconProps"],gl=["className"];var hl;const fl=Object(fr.b)(ml.a)(hl||(hl=Object(mr.a)(["\n    font-size: var(--fs);\n    color: var(--color-heavy);\n    cursor: pointer;\n    display: inline-block;\n"]))),vl=e=>{let{overlayClassName:t,iconProps:n}=e,a=Object(oa.a)(e,pl);const r=null!==n&&void 0!==n?n:{},{className:i}=r,o=Object(oa.a)(r,gl);return Object(S.jsx)(bl.a,Object(l.a)(Object(l.a)({overlayClassName:["explanation-overlay",null!==t&&void 0!==t?t:""].join(" ")},a),{},{children:Object(S.jsx)(fl,Object(l.a)({className:["explanation-icon",null!==i&&void 0!==i?i:""].join(" ")},o))}))};var yl=n(642),jl=n(630);const xl=["className","onClick","onKeyDown"];var Ol,wl;const kl=fr.b.span(Ol||(Ol=Object(mr.a)(["\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: var(--spacing-xs);\n    ",";\n    ","\n    ","\n    border: var(--bw) solid var(--sub-level-1);\n    border-radius: var(--br-lg);\n    box-shadow: var(--bs-button);\n\tcursor: pointer;\n"])),e=>{let{$freeSize:t,$size:n}=e;return t?"padding: 0 var(--spacing-xxs);":"sm"===n?"width: 18px;":"width: 24px;"},e=>{let{$size:t}=e;return"sm"===t?"\n            height: 18px;\n            font-size: var(--fs-sm);\n        ":"\n            height: 24px;\n            font-size: var(--fs);\n        "},e=>{let{$active:t}=e;return t?"\n            background-color: var(--main-active);\n            &:hover {\n                background-color: var(--sub-active);\n            }\n        ":"\n            background-color: var(--main-level-4);\n            &:hover {\n                background-color: var(--sub-level-4);\n            }\n        "}),Sl=e=>{let{size:t="md",active:n=!1,Icon:a,children:r,onClick:i,iconProps:o,tooltipProps:s,containerProps:c}=e;const d=null!==c&&void 0!==c?c:{},{className:u,onClick:b,onKeyDown:m}=d,p=Object(oa.a)(d,xl);return Object(S.jsx)(hr.a,Object(l.a)(Object(l.a)({title:null},s),{},{children:Object(S.jsx)(kl,Object(l.a)(Object(l.a)({$size:t,$active:n,tabIndex:0},p),{},{onClick:e=>{null===i||void 0===i||i(),null===b||void 0===b||b(e)},onKeyDown:e=>{null===m||void 0===m||m(e),"Enter"===e.key&&(null===i||void 0===i||i())},className:["icon-button",null!==u&&void 0!==u?u:""].join(" "),$freeSize:!a,children:Object(S.jsxs)(S.Fragment,{children:[a&&Object(S.jsx)(a,Object(l.a)({},o)),r]})}))}))},Cl=fr.b.div(wl||(wl=Object(mr.a)(["\n    cursor: pointer;\n    .button-label {\n        display: grid;\n        label {\n            cursor: pointer;\n            line-height: 1;\n            font-size: var(--fs-xs);\n            margin-top: var(--spacing-xs);\n        }\n    }\n    .anticon {\n        font-size: var(--fs-xl);\n        justify-self: center;\n    }\n    &:hover {\n        color: var(--main-active);\n        .anticon {\n            color: var(--sub-active);\n        }\n    }\n"])));var Fl;const Ll=Object(fr.a)(Fl||(Fl=Object(mr.a)(["\n    display: flex;\n    align-items: center;\n    .checkbox-train-input-group,\n    .radio-train-input-group {\n        display: flex;\n        flex: 1 1 auto;\n\t\t&:focus-visible {\n\t\t\t.radio-train-focused,\n\t\t\t.checkbox-train-focused {\n\t\t\t\tbackground-color: var(--main-level-3);\n\t\t\t}\n\t\t}\n    }\n    .ant-radio-button-wrapper {\n        user-select: none;\n    }\n    .ant-radio-button-wrapper:first-child,\n    .ant-radio-button-wrapper:last-child {\n        border-radius: 0;\n    }\n    .ant-radio-button-wrapper:not(.ant-radio-button-wrapper-checked):first-child {\n        border-left-color: var(--sub-level-1);\n    }\n"])));var Tl;const Nl=fr.b.div(Tl||(Tl=Object(mr.a)(["\n    ","\n"])),Ll),Rl=(e,t)=>{let{onChange:n,value:r,optionList:i,children:o,suffix:s,className:c,strict:d=!1}=e;const[u,b]=Object(a.useState)(-1),m=Object(a.useRef)(null),p=i.length;return Object(a.useImperativeHandle)(t,()=>({focus:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.focus()}})),Object(S.jsxs)(Nl,{className:["ant-radio-group ant-radio-group-outline radio-train",c].join(" "),children:[o&&Object(S.jsx)("label",{className:"standalone-addon ant-input-group-addon",children:o}),Object(S.jsx)("div",Object(l.a)(Object(l.a)({ref:m,className:"radio-train-input-group"},rr({setFocus:b,optionLength:p,onTrigger:()=>{const e=i[u];e&&n(e.value)}})),{},{children:i.map((e,t)=>{let{value:a,props:i,label:o,tooltipProps:s}=e;const{className:c}=null!==i&&void 0!==i?i:{},b=d?a===r:"".concat(a)==="".concat(r);return Object(S.jsx)(hr.a,Object(l.a)(Object(l.a)({overlay:null},s),{},{children:Object(S.jsxs)("label",Object(l.a)(Object(l.a)({},i),{},{className:["ant-radio-button-wrapper",b?"ant-radio-button-wrapper-checked":"",null!==c&&void 0!==c?c:"",u===t?"radio-train-focused":""].join(" "),onClick:()=>n(a),children:[Object(S.jsx)("span",{className:"ant-radio-button ".concat(b?"ant-radio-button-checked":""),children:Object(S.jsx)("span",{className:"ant-radio-button-inner"})}),Object(S.jsx)("span",{className:"label",children:o})]}))}),a)})})),s]})},Il=Object(a.forwardRef)(Rl);var El,zl=n(627);const Dl=fr.b.div(El||(El=Object(mr.a)(["\n    height: 17px;\n    width: 17px;\n    cursor: pointer;\n    position: relative;\n    outline: none;\n    box-shadow: 0 0 1px 1px var(--main-level-3);\n    border-radius: var(--br);\n    ","\n    ","\n    .active-dot {\n        position: absolute;\n        inset: var(--spacing-xs);\n        background: rgb(0, 0, 0);\n        border-radius: 50%;\n        opacity: 1;\n    }\n"])),e=>{let{$static:t}=e;return t?"\n            cursor: default;\n            height: 9px;\n            width: 9px;\n            margin: 4px 0;\n            border: none;\n        ":""},e=>{let{$empty:t}=e;return t?"\n            background-color: var(--sub-level-4);\n            background-image: var(--gradient-diagonal-stripe);\n        ":""});var Bl,Pl,Ml,Hl=n(205),Al=n.n(Hl),Wl=n(641);const Kl=fr.b.span(Bl||(Bl=Object(mr.a)(["\n    background: var(--main-level-1);\n    padding: var(--spacing-px) var(--spacing-xxs);\n    border: var(--bw) solid #4e84a4;\n    border-radius: var(--br);\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n"]))),Yl=Object(fr.a)(Pl||(Pl=Object(mr.a)(["\n    position: relative;\n    .copiable-overlay {\n        align-items: center;\n        background-color: var(--color-contrast);\n        font-size: var(--fs);\n        font-weight: bold;\n        border-radius: var(--br);\n        color: var(--color);\n        display: flex;\n        height: 100%;\n        justify-content: center;\n        left: 0;\n        position: absolute;\n        top: 0;\n        width: 100%;\n        z-index: 999;\n    }\n"]))),Ul=Object(fr.b)(Kl)(Ml||(Ml=Object(mr.a)(["\n    display: inline-block;\n    font-size: var(--fs-sm);\n    border-color: var(--sub-level-1);\n    line-height: 1;\n    cursor: pointer;\n    ","\n"])),Yl),Gl=e=>{let{data:t,children:n,disabled:r,overlay:i=Object(S.jsx)(Wl.a,{}),container:o}=e;const[l,s]=Object(a.useState)(!1);return Object(S.jsxs)(o,{disabled:r,onClick:e=>{var n;e.stopPropagation(),n=t,Al()("number"===typeof n?"".concat(n):n),s(!0),setTimeout(()=>{s(!1)},1e3)},children:[l?Object(S.jsx)("div",{className:"copiable-overlay",children:i}):null,n]})},Xl=e=>{let{data:t,children:n}=e;return Object(S.jsx)(Gl,{data:t,container:Ul,children:n})},Vl=["content","children"];var ql,_l,Jl,$l,Ql,Zl,es,ts,ns,as,rs,is;const os=fr.b.div(ql||(ql=Object(mr.a)(["\n    padding: var(--spacing-xs);\n    background-color: var(--main-level-3);\n    font-size: var(--fs);\n    color: var(--color-heavy);\n    text-shadow: var(--ts);\n    p {\n        white-space: pre-line;\n    }\n    ul {\n        padding-inline-start: var(--spacing-2xl);\n        margin-block-end: 0;\n        li {\n            line-height: 1.5;\n        }\n    }\n    :last-child {\n        margin-bottom: 0;\n    }\n"]))),ls=Object(fr.b)(os)(_l||(_l=Object(mr.a)(["\n    max-width: 550px;\n    border-radius: var(--br-lg);\n    border: var(--bw) solid var(--sub-level-1);\n"]))),ss=e=>{let{content:t,children:n}=e,a=Object(oa.a)(e,Vl);return t?Object(S.jsx)(bl.a,Object(l.a)(Object(l.a)({content:t},a),{},{children:n})):Object(S.jsx)(S.Fragment,{children:n})},cs=fr.b.button(Jl||(Jl=Object(mr.a)(["\n    --overlay-size: 36px;\n    background: var(--main-primary);\n    border-width: 0;\n    border-style: solid;\n    border-color: var(--main-active);\n    color: var(--color-heavy);\n    padding: var(--spacing-sm);\n    line-height: 1;\n    font-size: var(--fs-xl);\n    text-align: center;\n    width: var(--overlay-size);\n    height: var(--overlay-size);\n    border-radius: var(--br-lg);\n    box-shadow: var(--bs-1);\n    /* display: none; */\n    &:not(:disabled) {\n        cursor: pointer;\n        &:hover {\n            background: var(--sub-primary);\n        }\n    }\n    &:disabled {\n        cursor: not-allowed;\n        filter: opacity(0.5);\n    }\n"]))),ds=fr.b.div($l||($l=Object(mr.a)(["\n    display: inline-flex;\n    column-gap: var(--spacing-xs);\n    border: var(--bw) solid var(--sub-level-1);\n    background-color: var(--main-level-4);\n    padding: var(--spacing-xxs) var(--spacing-xs);\n    border-radius: var(--br);\n    box-shadow: var(--bs-input);\n"]))),us=fr.b.div(Ql||(Ql=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: max-content 57px 36px 6px;\n    &.inactive {\n        .slider-label,\n        .ant-slider,\n        .slider-padding {\n            background-color: var(--main-level-3);\n        }\n    }\n    .slider-label,\n    .ant-slider,\n    .slider-padding {\n        border: var(--bw) solid var(--sub-level-1);\n        background-color: var(--main-level-4);\n    }\n    .slider-label {\n        border-right: none;\n        border-radius: var(--br) 0 0 var(--br);\n    }\n    .ant-slider {\n        margin: 0;\n        border-left: none;\n        border-right: none;\n        height: 28px; // Alignment\n        padding-top: 11px; // Alignment\n    }\n    .slider-padding {\n        border-left: none;\n        border-radius: 0 var(--br) var(--br) 0;\n    }\n    .ant-slider-rail,\n    .ant-slider-track {\n        border-radius: 0 var(--br) var(--br) 0;\n    }\n    .ant-input-number.ant-input-number-sm {\n        height: 28px; // Alignment\n        width: unset;\n        border-radius: 0;\n        box-shadow: var(--bs-input);\n        .ant-input-number-input {\n            height: 26px; // Alignment\n        }\n    }\n"]))),bs=fr.b.div(Zl||(Zl=Object(mr.a)(["\n    display: inline-block;\n    background-color: var(--main-level-4);\n    ","\n    padding: var(--spacing-xxs) var(--spacing-xs);\n    margin: calc(-1 * var(--spacing-xxs)) 0;\n    border-radius: var(--br-lg);\n    box-shadow: var(--bs-button);\n    color: var(--color-heavy);\n    cursor: pointer;\n    ","\n    &:hover {\n        background-color: var(--sub-level-4);\n    }\n"])),e=>{let{$active:t}=e;return t?"border: var(--bw) solid var(--main-active);":"border: var(--bw) solid var(--sub-level-1);"},e=>{let{$softMode:t,$active:n}=e;return t?"\n                border: var(--bw) solid var(--main-level-4);\n                ".concat(n?"outline: var(--bw) solid var(--main-active);":"","\n            "):""}),ms=fr.b.div(es||(es=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: 3em max-content 3em;\n    gap: var(--spacing-xs);\n    .left-part {\n        text-align: right;\n    }\n    .right-part {\n        text-align: left;\n    }\n    ","\n"])),e=>{let{$warning:t}=e;return t?"\n            color: var(--main-warning);\n        ":""}),ps=e=>{let{width:t,height:n,warning:a=!1}=e;return Object(S.jsxs)(ms,{$warning:a,children:[Object(S.jsx)("span",{className:"left-part",children:t}),Object(S.jsx)("span",{children:"\xd7"}),Object(S.jsx)("span",{className:"right-part",children:n})]})},gs=Object(fr.c)(ts||(ts=Object(mr.a)(["\n\t0% {\n\t\tbackground-position: 0% 50%;\n\t}\n\t50% {\n\t\tbackground-position: 100% 50%;\n\t}\n\t100% {\n\t\tbackground-position: 0% 50%;\n\t}\n"]))),hs=fr.b.div(ns||(ns=Object(mr.a)(["\n\tdisplay: ",";\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: #8888cc44;\n\tz-index: 1;\n\tfont-size: var(--fs-3xl);\n\talign-items: center;\n    justify-content: center;\n\ttext-shadow: 0 0 3px #222;\n    border: 5px dashed #cccccc;\n    background: linear-gradient(-45deg, #ee7752aa, #e73c7e88, #23a6d588, #23d5ab88);\n\tbackground-size: 400% 400%;\n    padding: 5px;\n    label {\n        color: var(--color-heavy);\n        line-height: 1.25;\n    }\n    ","\n"])),e=>{let{$visible:t}=e;return t?"flex":"none"},Object(fr.a)(as||(as=Object(mr.a)(["animation: "," 6s linear infinite;"])),gs)),fs=Object(fr.b)(zl.a)(rs||(rs=Object(mr.a)(["\n    .ant-drawer-header {\n        padding: var(--spacing);\n    }\n    .ant-drawer-content {\n        box-shadow: 0 0 3px 2px #202020;\n    }\n    .ant-drawer-body {\n        padding: 0;\n        height: 100%;\n    }\n    .ant-drawer-close {\n        display: none;\n    }\n    .ant-drawer-content {\n        background-color: #484848;\n    }\n"]))),vs=fr.b.div(is||(is=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: max-content 1fr;\n    gap: var(--spacing-sm);\n    align-items: center;\n    color: var(--color);\n    text-shadow: var(--ts);\n    font-weight: 500;\n    .ant-input-number {\n        width: 55px;\n    }\n    .ant-slider {\n        margin: var(--spacing-xxs);\n    }\n"])));var ys,js,xs,Os;const ws=Object(fr.c)(ys||(ys=Object(mr.a)(["\n    to {\n        transform: rotate(360deg);\n    }\n"]))),ks=fr.b.div(js||(js=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: 1fr;\n    gap: var(--spacing-sm);\n    background-color: var(--main-level-3);\n    padding: var(--spacing-sm);\n    border: var(--bw) solid var(--sub-level-1);\n    border-radius: var(--br-lg);\n    color: var(--color);\n    min-width: 15rem;\n    .list-option {\n        margin-bottom: var(--spacing-xs);\n    }\n    .resolution-list {\n        &.radio-train {\n            .ant-radio-button-wrapper:first-child {\n                border-radius: var(--br) var(--br) 0 0;\n            }\n            .ant-radio-button-wrapper:last-child {\n                border-radius: 0 0 var(--br) var(--br);\n            }\n        }\n        .radio-train-input-group {\n            display: inline-grid;\n            flex: 0 1 auto;\n            .ant-radio-button-wrapper {\n                border-left-width: 1.02px;\n                &:before {\n                    content: none;\n                }\n            }\n        }\n    }\n"]))),Ss=Object(fr.b)(Cl)(xs||(xs=Object(mr.a)(["\n    .anticon-setting {\n        > svg {\n            ","\n        }\n    }\n"])),e=>{let{$softMode:t}=e;return t?"":Object(fr.a)(Os||(Os=Object(mr.a)(["animation: "," 12s linear infinite;"])),ws)}),Cs=()=>{const e=Rr(),{setting:t,updateSetting:n}=oi(e=>{let{setting:t,updateSetting:n}=e;return{setting:t,updateSetting:n}}),{allowHotkey:a,exportFormat:r,reduceMotionColor:i,resolution:o,showCreativeOption:l,showExtraDecorativeOption:s,slidingType:c}=t;return Object(S.jsx)(Ss,{className:"setting-button",$softMode:i,children:Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"setting-button-overlay",content:Object(S.jsxs)(ks,{children:[Object(S.jsx)("div",{children:Object(S.jsx)(jl.a,{checked:i,onChange:e=>n({reduceMotionColor:e.target.checked}),children:e["setting.option.soft-mode.label"]})}),Object(S.jsx)("div",{children:Object(S.jsx)(jl.a,{checked:s,onChange:e=>n({showExtraDecorativeOption:e.target.checked}),children:e["setting.option.extra-decorative.label"]})}),Object(S.jsx)("div",{children:Object(S.jsx)(jl.a,{checked:l,onChange:e=>n({showCreativeOption:e.target.checked}),children:e["setting.option.creative.label"]})}),Object(S.jsx)("div",{children:Object(S.jsx)(hr.a,{title:e["setting.option.hotkey.tooltip"],placement:"left",children:Object(S.jsx)(jl.a,{checked:a,onChange:e=>n({allowHotkey:e.target.checked}),children:e["setting.option.hotkey.label"]})})}),Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"list-option",children:e["setting.option.resolution.label"]}),Object(S.jsx)(Il,{className:"resolution-list",value:"".concat(o[0],"x").concat(o[1]),optionList:pn.map(t=>{let{height:n,width:a,label:r,scale:i}=t;return{value:"".concat(a,"x").concat(n),label:i>1?Object(S.jsx)(bl.a,{overlayClassName:"explanation-overlay",placement:"left",content:Object(S.jsx)(ls,{children:e["setting.option.resolution.warning"]}),children:Object(S.jsx)(ps,{width:a,height:n,warning:!0})}):Object(S.jsx)(ps,{width:a,height:n})}}),onChange:e=>{const t=mn[e];t&&n({resolution:t.settingValue,globalScale:t.scale})}})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"list-option",children:e["setting.option.export-format.label"]}),Object(S.jsx)(Il,{value:r,optionList:gn,onChange:e=>{n({exportFormat:e})}})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"list-option",children:e["setting.option.sliding-type.label"]}),Object(S.jsx)(Il,{value:c,optionList:hn(e),onChange:e=>{n({slidingType:e})}})]}),Object(S.jsx)("div",{children:Object(S.jsx)("small",{children:e["setting.alert"]})})]}),children:Object(S.jsxs)("div",{className:"button-label",children:[Object(S.jsx)(yl.a,{}),Object(S.jsx)("label",{children:e["setting.button.label"]})]})})})};var Fs,Ls,Ts,Ns,Rs,Is=n(628);const Es=Object(fr.c)(Fs||(Fs=Object(mr.a)(["\n    0% { transform: rotate(0deg); }\n    3% { transform: rotate(5deg); }\n    6% { transform: rotate(0eg); }\n    9% { transform: rotate(-5deg); }\n    12% { transform: rotate(0deg); }\n    100% { transform: rotate(0deg); }\n"]))),zs=fr.b.div(Ls||(Ls=Object(mr.a)(["\n    text-align: center;\n    border: var(--bw) solid var(--main-level-3);\n    background-color: var(--main-level-1);\n    border-radius: var(--br-lg);\n    padding: 0 var(--spacing-xs);\n    cursor: pointer;\n    box-shadow: 0 0 2px 1px #2a2a2a inset;\n    transition: background-color 250ms linear;\n    ","\n    ","\n    &:hover {\n        background-color: var(--main-level-3);\n    }\n"])),e=>{let{$animating:t}=e;return t?Object(fr.a)(Ts||(Ts=Object(mr.a)(["animation: 2s linear 350ms 4 ",";"])),Es):""},e=>{let{$animating:t}=e;return t?"\n            border: var(--bw) solid var(--sub-level-1);\n            background: var(--main-warning);\n            color: var(--color-contrast);\n            text-shadow: none;\n            box-shadow: 0 0 2px 0 #333333;\n        ":""}),Ds=Object(fr.b)(zs)(Ns||(Ns=Object(mr.a)(["\n    box-shadow: none;\n    border: var(--bw) solid var(--sub-level-1);\n    background-color: var(--main-level-4);\n    border-radius: var(--br-lg);\n    padding: 0 var(--spacing-xs);\n    &.js-highlight {\n        background: var(--main-info);\n        text-shadow: none;\n        box-shadow: 0 0 2px 0 #333333;\n    }\n    ","\n    &:hover {\n        background: var(--sub-info);\n    }\n"])),e=>{let{$animating:t}=e;return t?"\n            background: var(--main-info);\n            text-shadow: none;\n            box-shadow: 0 0 2px 0 #333333;\n        ":""}),Bs=fr.b.div(Rs||(Rs=Object(mr.a)(['\n    white-space: pre-line;\n    label {\n        font-weight: bold;\n        font-style: italic;\n        &:after {\n            content: ":";\n        }\n    }\n    .question {\n        margin-left: var(--spacing);\n    }\n    .answer {\n        margin: var(--spacing) 0;\n        margin-bottom: var(--spacing-lg);\n    }\n    .image {\n        max-width: 100%;\n        padding: 0 var(--spacing) var(--spacing-lg) var(--spacing);\n    }\n    &:last-child {\n        .answer {\n            margin-bottom: 0;\n        }\n    }\n'])));var Ps,Ms;const Hs=fr.b.li(Ps||(Ps=Object(mr.a)(["\n    text-align: center;\n    .content {\n        text-align: left;\n    }\n    a {\n        display: inline-block;\n    }\n    img {\n        display: block;\n        max-width: 400px;\n        max-height: 300px;\n        margin: auto;\n        box-shadow: var(--bs-1);\n        margin-top: var(--spacing-xs);\n    }\n"]))),As=(()=>{let e=!1,t=[];return{getLog:async()=>{if(e)return t;const n=await fetch("".concat("/ygocarder","/log/version.json"),{headers:{"Content-Type":"application/json",Accept:"application/json"}});try{const a=await n.json();return t=a,e=!0,t}catch(a){console.error(a)}return[]}}})(),Ws=()=>{const[e,t]=Object(a.useState)([]),[n,r]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{(async()=>{r(!0);const e=await As.getLog();r(!1),t(e)})()},[]),0!==e.length||n?n?Object(S.jsx)("div",{children:"Loading changelog..."}):Object(S.jsx)("div",{children:e.map((e,t)=>{let{logList:n,version:a}=e;return Object(S.jsxs)("div",{className:"log-section",children:[Object(S.jsx)("b",{children:a}),Object(S.jsx)("br",{}),Object(S.jsx)("ul",{children:n.map((e,t)=>{let{content:n,image:r}=e;return Object(S.jsxs)(Hs,{children:[Object(S.jsx)("div",{className:"content",children:n}),r&&Object(S.jsx)("a",{target:"_blank",rel:"noreferrer",href:r,title:"Click to open in new tab",children:Object(S.jsx)("img",{src:r,alt:"version-".concat(a,"-illust")})})]},t)})})]},"".concat(a,"-").concat(t))})}):Object(S.jsx)("div",{children:"No changelogs"})},Ks=Object(fr.b)(ls)(Ms||(Ms=Object(mr.a)(["\n    overflow: auto;\n    width: 550px;\n    max-height: 300px;\n    width: 550px;\n    .log-section + .log-section {\n        margin-top: var(--spacing);\n    }\n"]))),Ys=Object(a.memo)(()=>{var e;const[t,n]=Object(a.useState)(!1),[r,i]=Wo("versionReminder");return Object(a.useEffect)(()=>{if(r){var e;const t=null!==(e="2.3.42")?e:"0.0.0",a=r;i("2.3.42"),((e,t)=>{const[n,a,r]=String(e).split(".").map(Number),[i,o,l]=String(t).split(".").map(Number);return n!==i?n>i:a!==o?a>o:r>l})(t,a)&&(n(!0),setTimeout(()=>{n(!1)},8e3))}},[i,r]),Object(S.jsx)(bl.a,{placement:"bottom",content:Object(S.jsx)(Ks,{children:Object(S.jsx)(Ws,{})}),children:Object(S.jsxs)(zs,{$animating:t,className:"app-log",onMouseOver:()=>n(!1),children:["v",null!==(e="2.3.42")?e:"unknown"]})})});var Us,Gs=n(618);const Xs="faq-button",Vs=Object(fr.b)(Bs)(Us||(Us=Object(mr.a)(["\n    text-align: center;\n    blockquote,\n    .answer {\n        text-align: left;\n    }\n    img {\n        max-height: 400px;\n    }\n"]))),qs=e=>{let{image:t,author:n,question:a,children:r}=e;return Object(S.jsxs)(Vs,{children:[Object(S.jsxs)("blockquote",{children:[n&&Object(S.jsx)("label",{children:n}),Object(S.jsx)("div",{className:"question",children:a})]}),Object(S.jsx)("div",{className:"answer",children:r}),t&&Object(S.jsx)("img",{className:"image",src:t,alt:"answer preview"})]})},_s=()=>{const[e,t]=Object(a.useState)(!1),[n,r]=Object(a.useState)(!1),[i,o]=Wo("faqReminder"),[l,s]=Wo("feedbackReminder");Object(a.useEffect)(()=>{const e="27/12/2025";i!==e&&(o(e),r(!0),setTimeout(()=>{r(!1)},8e3))},[o,i]),Object(a.useEffect)(()=>{!0!==l&&(s(!0),r(!0),gr.a.info({message:"Feedback Reminder",description:"If you have any feedback or suggestion, please check the FAQ button first to see if your feedback has been addressed.",duration:10,onClose:()=>{r(!1)}}))},[l,s]);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Ds,{id:Xs,$animating:n,onClick:()=>t(e=>!e),children:"FAQ"}),Object(S.jsx)(pr.a,{visible:e,onCancel:()=>t(!1),footer:null,children:Object(S.jsxs)(Gs.a,{children:[Object(S.jsxs)(Gs.a.TabPane,{tab:"Feedbacks",children:[Object(S.jsx)("div",{children:Object(S.jsx)("i",{children:"Solved or stale (4 weeks of inactive) feedbacks are removed."})}),Object(S.jsx)("br",{}),[{author:"TheTonyB at Dec 30, 2025",question:"Hey, Lauqerm! Thanks for adding the Portuguese atributes and custom edition text! (Korean coming soon? :))\n\nAnyway, I have another suggestion:\nSince there's already a legacy placement option in adition to regular placement of the edition text, what if we could have two different edition texts simultaneously, one in each position?\n\nI imagine this may be more complicated to implement, but it would open up more customization potential. I don't mind if this feature isn't added though. I can just edit the card in photoshop if I want both texts, this is more of a suggestion than a feature request.\n\nAs always, keep up the good work. Your card maker is absolutely GOATED.",answer:"I have received an asset donation for PT attributes; hopefully, there will be another one for KR soon.\nI have also added an option for text below the image's left corner. Choosing legacy display will simply switch the positions between it and the edition text."},{author:"Anonymous at Dec 30, 2025",question:"I\u2019d like to use the original attributes in Spanish, where the word extends beyond the limits of the sphere, but when I upload my custom attribute the icon gets compressed and flattened. I designed the attributes from the original Spanish cards in case you\u2019d like to replace them. I\u2019ve also noticed that the Effect Monster card color is a slightly darker shade than the original ones. Here is the link with the attribute icons and the different card frame types, in case you\u2019d like to review it. Thank you, and congratulations\u2014this is the best Card Maker I\u2019ve tried: \nhttps://we.tl/t-niKReItUvF\n\n*If you would like me to modify the attributes to a specific resolution or dimensions, or help you with others languages you can write to me at giohesse7@gmail.com",answer:"Custom attribute will now respect the image's ratio when resizing so it no longer get stretched, I also tried some heuristic approach to ensure that it will be at correct position to avoid more complicated manual placement.\nFor the effect monster background though currently I must leave it as is, but thanks for your report."},{author:"Anonymous at Dec 26, 2025",question:"There is an error with the vowel accent marks in Spanish (e.g., \xe1, \xe9, \xed, \xf3, \xfa). It appears that the font does not support the Spanish language, as the accented characters look completely different from the original font. Could you please fix the font for this language?",answer:"I have tweaked the font a bit, hopefully it looks better now."},{author:"Ebrahim at Dec 24, 2025",question:'An option to maybe reduce the size of the "Edition" section similarly the LIMITED EDITION tag.',answer:"It is a bit cumbersome so for now I will just limit the section's maximum width, the text should auto compress if it is too long."},{author:"Blake at Dec 23, 2025",question:"Did you use boundless cause I\u2019m trying to make the object the image go over the card.",answer:"Yeah boundless layout is the main option to use. But the hard thing here is that you need a transparent artwork to combine with it to make a proper overframe card, which the app cannot help.\nIn any case I plan to readjust the option a bit for more clarity, and also add sample cards for easy demonstration."},{author:"Ebrahim at Dec 23, 2025",question:"when I click on the xyz background template the 1st Edition text is in black not white and it's hard to see please fix immediately.",answer:"It's done, the text should display properly now."},{author:"A-Rex at Dec 22, 2025",question:"Me gustar\xeda poder colocar 1a edici\xf3n\nPero en su lugar aparece 1st Edition\nQuisiera poder poner manualmente eso."},{author:"Ralph at Dec 22, 2025",question:"quisiera poner la marca 1a edici\xf3n\npero en su lugar pone 1st edition\nme gustar\xeda poder al menos colocarla manualmente.",answer:"I have implemented a customizable edition text with predefined options, you may try it now."},{author:"Blake at Dec 21, 2025",question:"When are you going to be adding the overframe rare?",answer:"With Layout options the app is already able to create cards with extended art (see attached image), but I will need to tweak some behaviors so it looks more correct.\nGrandmaster Rare however is a different story, as it use an entirely different set of layers and I can only wait for talented artists to extract them.",image:"https://i.imgur.com/a6ZlmEg.png"},{author:"Blake at Dec 18, 2025",question:"I can\u2019t download the card with a new attribute."},{author:"Blake at Dec 18, 2025",question:"It won\u2019t let me upload the card with a custom attribute.",answer:"Hi there, the app will now correctly show what is happening. In short, this is a security feature of your browser (not the app) that protect you from potential dangers of the image link, so you must manually download the image."},{author:"TOVYA at Dec 13, 2025",question:"Ch\xe0o b\u1ea1n, b\u1ea1n c\xf3 th\u1ec3 th\xeam v\xe0o h\u01b0\u1edbng d\u1eabn c\xe1ch ch\u1ea1y project n\xe0y c\u1ee7a b\u1ea1n b\u1eb1ng Docker trong README.md kh\xf4ng \xe1?",answer:"Done nha."},{author:"Anonymous User at Dec 13, 2025",question:"would it be possible to add the ability to upload custom attribute icons?",answer:"Right now I can only support using external link for attribute, so you can upload your custom attribute icon to an image hosting service (e.g., imgur) and use the link in the attribute input box.",image:"https://i.postimg.cc/cJMFW3M1/image.png"},{author:"TheTonyB at Dec 12, 2025",question:'I noticed Korean and Portuguese are missing from Attributes languages. Can you add those? Specially portuguese which is my main language.\nCould you also add other language options to the "1st Edition"/"Limited Edition" text or allow for a custom text?\nThanks and keep up the great work!',answer:"Hi there, unfortunately I have no access to those language sprites, so I cannot add them at the moment (somehow Yugipedia does not have attributes in Portugese and Korean even though they have the rest of official supported languages)."},{author:"Anonymous User at Dec 04, 2025",question:"Hello! I've noticed there's a problem with these 3 new cards :\nMagnet Warrior \u03a3\uff0d\nMagnet Warrior \u03a3\uff0b\nMagnet Warrior \u03a9+\n\nI've noticed that Konami is using new characters, and unfortunately, they're not displaying correctly for creating cards. Could you please fix this?\nThanks in advance.\nLigerrFanArt",answer:"Because those cards do not have an offical TCG version yet, so I will just import OCG font for this case."},{author:"Anonymous User at Oct 26, 2025",question:"Square brackets are not displayed properly in the card name.",answer:"I have updated the letters."},{author:"I have assets to donate! at Oct 23, 2025",question:"Konami's new Genesys card searcher initially had high-resolution renders of all cards. I snagged a few before they \"fixed\" it (now their images are low-res again...) and used them to correct all the card frames, bevels, level stars, text boxes, fonts, and even text colors. I'm talking major corrections that took me hours since I'm not very efficient in Photoshop.\nAt the very least, your current Spell and Synchro frames need updating. Not only are the colors off, but there's actually an artifactual defect running across the entire right edge that you inherited from 9558able's frames (it's actually on all of them, but most visible on the Spell frame).\nAs far as I can tell, my updated assets now produce the most accurate proxies anywhere. I would like to donate them! I don't see a way to email you, but please email me at *******88@gmail.com if you're interested.\nI can reply with specifics and send you some comparisons.",answer:"Hi there, thanks for your generosity. I have already emailed you at Oct 24, hopefully I can make some good use out of it."},{author:"Problem at Oct 22, 2025",question:'Hi, just to let you know that there are new characters on the Magnet cards that I haven\'t inserted here. I think you should be aware of this. This character "\xb1" is not displayed on the cards for example. \n\nKind regards\nLigerrFanArt',answer:'Hi there, thanks for the head-up, I have updated the letter "\xb1" specifically, but will wait a bit before adding new one because the TCG might not use those characters at all.'},{author:"New Character Title at Oct 11, 2025",question:'Elvennotes ~Homecoming Paralleism~\nElvennotes ~Reunion Tercet~\nElvennotes ~Maddening Rhapsodia~\nElvennotes ~Oracle Alicetea~\n\nHello,\nI noticed that these cards that will be released soon do not display the character "~" correctly. I hope you can do something about it. \n\nThanks \nLiger',answer:"I have updated the font, hopefully it looks better now."},{author:"Anonymous User at Oct 08, 2025",question:"Missed you so much bro its been a month",answer:"Me too, me too."},{author:"Anonymous User at Sep 28, 2025",question:"For some reason, the border changes depending on the card type even though it's set to Default",answer:"It seems like the card border is not loaded yet, so it exposes the underlying frame. I have replicate your card but does not see the same issue, does the problem still persist?"},{author:"mguesiten at Sep 28, 2025",question:'for the accented letter for example "\xe9" or "\xe0"',answer:"This is a known issue, unfortunately I haven't found any better font with correct accents display, sorry for the inconvenience."},{author:"Anonymous User at Sep 26, 2025",question:"hi m8. luv your work. i was thinking about two things. maybe 1 option for anime cards like in Vrains. another option to adjust the colour and saturation of the card frame. thks again for your work",answer:"Hi there, currently I do not have time needed for new templates, but for the color option, have you checking out the Advanced Layout option? If will allow you to change current frame's color at will, which seem suitable for your use-case."},{author:"OCG Proxy Secret Rare at Sep 18, 2025",question:"Is there a way to implement a Predefined or a pattern similar to the OCG Rainbow Secret Rare proxy text, please?",answer:"Hi there, I have added a new predefined preset for this case, you may try it now."},{author:"Elttaest the Master of Duels at Sep 18, 2025",question:"Hi. Love your work, just wondering - with Elttaes, the Master of Duels and Dragon of Illumination, Sanctuary's Shield, shouldn't we have enough data to make Rush Duel cards in English as well? The font seems the same in both English and Japanese. And the card name seems the same used in TCG, although I can't really make out what the Japanese font is. Sorry again for this. Just curious. Thanks for your time",answer:"Hi there, you are right that both cards can be used as a template for Rush Duel cards, but the main problem before the template itself is that currently I don't have enough resources for such project right now, so I can't promise anything at this moment. I will keep this in mind and see if I can do it in the future."},{author:"Outline at Sep 17, 2025",question:"When placing an outline a location 0/0, the line is not aligned equally throughout the letter",answer:"Hi there, this is a known issue for Chrome on Windows, which currently I'm unable to fix. You can see the same card display perfectly fine on Chrome on MacOS.",image:"https://i.postimg.cc/MZsjtS2k/Screenshot-2025-09-17-at-08-09-48.png"},{author:"Image disappeards at Sep 15, 2025",question:"Adding the width function removes the image, regardless of the width chosen (it works without it)",answer:'Hi there, your syntax is incorrect, you must put the width attribute between double quotes ("), like this: <img src="https://ms.yugipedia.com//5/59/Type-Cyberse-MADU.png" width="40" />.'},{author:"Anonymous User at Sep 10, 2025",question:"Ko hi\u1ec7n c\xe1c d\xf2ng ch\u1eef hi\u1ec7u \u1ee9ng c\u1ee7a l\xe1 b\xe0i",answer:"\u0110\xe3 fix nha b\u1ea1n."},{author:"Armando Giordano at Sep 06, 2025",question:'Thank you for your quick response and for your astonishing work with the Carder. Yes, I am using an iPad and a phone, and, with both devices, when I click on the Download button, it just shows "Saving..." for a second, then no Download starts. I am now on a computer and it works great with left click and "Save as", though it would be nice to be able to use it on mobile.'},{author:"Armando Giordano at Sep 06, 2025",question:"Sorry for second report in a row! I noticed you asked me specific questions. 1 The App does NOT freeze when trying to download on iPad and Android phone. Just no download starts. 2 The problem was immediately experienced because I discovered the Carder just yesterday.",answer:"Now it's a bit strange; usually, if the export process encounters an error, an explicit message will be displayed. In this case, if the download process is already running but no files are downloaded, it could be that your mobile browser is blocking the automatic download due to some advance security settings. All mobile devices I have tested so far do not exhibit the same issue. I will try to investigate this further, but chances are I won't be able to resolve it if I cannot reproduce the issue. Sorry for the inconvenience."},{author:"Armando Giordano at Sep 06, 2025",question:"Hello! I am loving your work. I hope my issue is not because of ignorance, but it seems like it's not possible to download cards as images.",answer:"Hi there, based on the report it seems that you are using an iPad. I don't have an iPad to test right now, but could you please provide me some more information?\n1. When you click the Download button, does anything happen? Does the app freeze or it just not doing anything?\n2. Is the problem just appear recently, or it never worked in the first place?",image:"https://i.postimg.cc/Y2fjyvV2/image.png"},{author:"Anonymous User at Aug 16, 2025",question:"Art Filter #9 seems not to be working with Pendulum frames",answer:"Hi there, I have checked this case and do not see any significant error (see image below), do you have any image to demonstrate the error?",image:"https://images2.imgbox.com/5b/1f/vp8d5wIa_o.png"},{author:"& symbol at Aug 14, 2025",question:"This symbole & isnt correct on display.\nSee photo Magie & Pi\xe8ge",answer:"Hi there, I have checked the letter on a real card and do not see any significant error, do you have any image for how the letter should be displayed?",image:"https://i.imgur.com/xZ9Pp9X.png"},{author:"Die Frauen at Aug 9, 2025",question:"As for a suggestion related to the pevious query, this may be a bit too crazy, but since it's lodged together with the advanced/custom layout feature, do you think perhaps the foil could be split into 5 pieces the same as it? (all 4 corners and the text frame). If it may take too much effort or is not feasible I'll understand that.",answer:"I don't think this would be possible, as card foils are divided into multiple pieces for different places, so I couldn't split them the same way as card frames at all."},{author:"Anonymous User at Aug 8, 2025",question:"There should be an effect text formatting option to justify text while making it respect the rest of the text's compression ratio, like actual cards do.",answer:"I cannot support a new syntax right now, but if your use-case is just wanting the last line of effect / pendulum effect to be justfiy-aligned, you can use the newly implemented Justify Ratio in Paragraph Style button."},{author:"the \xa1 symbol is to long (for spanish card names) at Aug 5, 2025",question:"hi, i was trying to create a card using the \xa1 symbol in the name, but its too long, not like the ! in the screenshot. for exaple: if u try to write the name 'Caza del Cielo Movilizar - \xa1Atacar!' you can see the symbol \xa1 is too long compared to the pics of the same card in spanish. i hope you can fix that and ty for the web:3",answer:"I have updated the ratio, hopefully it looks better now."},{author:"Rush Duel at Jun 22, 2025",question:"This card maker is amazing! Have you ever consider doing a rush duel section as well?",answer:"I do want to create a similar editor for Rush Duel cards, but it will require a significant amount of effort that I currently lack. Additionally, since there is no official adaptation of Rush cards for TCG, doing this now risks a considerable incompatibility issue in the future."},{author:"Maya at May 23, 2025",question:"I'd like to make a request, is it possible to put a SPEED DUEL watermark in EVERY card types in the description area like the Speed Skill type when it is set to speed duel? thank you so much. Appreciate your lovely cardmaker",answer:"I will try, but this is pretty hard to do to be honest, don't keep your hope up."}].map((e,t)=>{let{author:n,question:a,answer:r,image:i}=e;return Object(S.jsx)(qs,{author:n,question:a,image:i,children:r},t)})]},"feedback"),Object(S.jsx)(Gs.a.TabPane,{tab:"Frequently Asked Questions",children:[{question:"Can you make the pendulum effect box semi-transparent? Just like real pendulum cards.",answer:'Yes, both pendulum and default card effect box can be made semi-transparent. In "Layout" row you can find "Pendulum" and "Effect" slider, each control how transparent the effect box is (0 is fully see-through and 100 is fully solid).'},{question:"Will you make another version for Rush Duel cards?",answer:"I do want to create a similar editor for Rush Duel cards, but it will require a significant amount of effort that I currently lack. Additionally, since there is no official adaptation of Rush cards for TCG, doing this now risks a considerable incompatibility issue in the future."}].map((e,t)=>{let{question:n,answer:a}=e;return Object(S.jsx)(qs,{question:n,children:a},t)})},"faq")]})})]})};var Js,$s=n(605),Qs=n(643);const Zs=fr.b.div(Js||(Js=Object(mr.a)(["\n    --max-image-height: ","px;\n    display: grid;\n    grid-template-rows: ","px 22px 1fr;\n    text-align: center;\n    .image-preview {\n        align-content: space-around;\n        height: var(--max-image-height);\n        img {\n            max-width: ","px;\n            max-height: var(--max-image-height);\n        }\n    }\n    .image-info {\n        display: flex;\n        gap: var(--spacing-xxs);\n        align-items: center;\n        .image-name {\n            flex: 1 1 auto;\n        }\n        .anticon {\n            cursor: pointer;\n            &.anticon-close:hover {\n                color: var(--sub-danger);\n            }\n            &.anticon-edit:hover {\n                color: var(--sub-info);\n            }\n        }\n    }\n"])),60,60,140),ec=e=>{let{language:t,imagePreset:n,onDelete:a,onEdit:r}=e;const{src:i,name:o,width:l,height:s,offsetX:c,offsetY:d}=n,u="number"===typeof c?c>0?"+".concat(c):c:"0",b="number"===typeof d?d>0?"+".concat(d):d:"0";return Object(S.jsxs)(Zs,{children:[Object(S.jsx)("div",{className:"image-preview",children:Object(S.jsx)("img",{src:i,alt:o})}),Object(S.jsxs)("div",{children:[null!==l&&void 0!==l?l:"auto"," \xd7 ",null!==s&&void 0!==s?s:"auto","number"===typeof c||"number"===typeof d?" (".concat(u,", ").concat(b,")"):null]}),Object(S.jsxs)("div",{className:"image-info",children:[Object(S.jsx)("div",{className:"image-name",children:Object(S.jsx)(Gl,{data:o,container:Ul,children:o})}),a&&Object(S.jsx)($s.a,{title:t["generic.delete.label"],okText:t["generic.yes.label"],cancelText:t["generic.no.label"],onConfirm:()=>a(),children:Object(S.jsx)(jr.a,{})}),r&&Object(S.jsx)(Qs.a,{onClick:()=>r()})]})]})};var tc,nc,ac=n(644);const rc=fr.b.div(tc||(tc=Object(mr.a)(["\n    line-height: 0;\n    align-self: center;\n    text-align: center;\n    &:not(.menu-off) {\n        cursor: pointer;\n        min-height: 23.2px;\n        &.menu-active {\n            outline: var(--bw-lg) solid var(--main-active);\n            &:hover {\n                outline: var(--bw-lg) solid var(--sub-active);\n            }\n        }\n        :hover {\n            outline: var(--bw-lg) solid var(--sub-active);\n        }\n    }\n    &.menu-off {\n        &:hover {\n            color: var(--main-link);\n            .anticon {\n                color: var(--main-link);\n            }\n        }\n    }\n    img {\n        max-width: 100%;\n        border: var(--bw) solid var(--sub-level-1);\n    }\n"]))),ic=140,oc=fr.b.div(nc||(nc=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: max-content max-content;\n    gap: var(--spacing-xs);\n    align-items: center;\n    .canvas-container {\n        width: ","px;\n        height: ","px;\n        box-shadow: var(--bs-1);\n    }\n    .preset-option-action {\n        display: grid;\n        grid-template-columns: 1fr;\n        gap: var(--spacing-xxs);\n        .anticon {\n            cursor: pointer;\n            &.anticon-close:hover {\n                color: var(--sub-danger);\n            }\n            &.anticon-save:hover {\n                color: var(--sub-info);\n            }\n        }\n    }\n"])),ic,30),lc=e=>{let{frameInfo:t,presetContent:n,active:r=!1,language:i,onOverwrite:o,onActive:l,onDelete:s}=e;const{format:c,foil:d}=ii(Object(ui.useShallow)(e=>{let{card:{format:t,foil:n}}=e;return{format:t,foil:n}})),u=Object(a.useRef)(null),{name:b,labelBackgroundColor:m,labelBackgroundImage:p}=null!==t&&void 0!==t?t:{},g=null!==b&&void 0!==b?b:"effect";return Object(a.useEffect)(()=>{const e=u.current,t=null===e||void 0===e?void 0:e.getContext("2d");if(e&&t){t.clearRect(0,0,ic,30);const{font:a}=n;yo(e,t,"OCG"===a?"{\u30ab\u30fc\u30c9\u540d|\u304b\u30fc\u3069\u3081\u3044}":"Card Name","OCG"===a?65:12,"OCG"===a?65:60,350,ia({foil:d,format:c,frame:g,nameStyle:n,nameStyleType:"custom"}),{frame:g,format:c,furiganaHelper:!1,globalScale:.4,isSpeedSkill:!0})}},[d,c,g,n]),Object(S.jsxs)(oc,{className:ur("preset-option",r?"menu-active":""),children:[Object(S.jsx)(rc,{className:ur("canvas-container",l?"":"menu-off"),onClick:l,style:{background:m,backgroundImage:p},children:Object(S.jsx)("canvas",{ref:u,width:ic,height:30})}),Object(S.jsxs)("div",{className:"preset-option-action",children:[s&&Object(S.jsx)($s.a,{title:i["generic.delete.label"],okText:i["generic.yes.label"],cancelText:i["generic.no.label"],onConfirm:()=>s(),children:Object(S.jsx)(jr.a,{})}),o&&Object(S.jsx)($s.a,{title:i["generic.overwrite.label"],okText:i["generic.yes.label"],cancelText:i["generic.no.label"],onConfirm:()=>o(),children:Object(S.jsx)(ac.a,{})})]})]})},sc=["onActive","onDelete","onOverwrite","language"];var cc,dc;const uc=fr.b.div(cc||(cc=Object(mr.a)(["\n    /** Ensure even width */\n    --layout-width: ","px;\n    --layout-height: ","px;\n    display: inline-block;\n    width: var(--layout-width);\n    height: var(--layout-height);\n    box-shadow: 0 0 2px 0 #202020;\n    position: relative;\n    background: var(--main-level-2);\n    ","\n    &.is-vertical {\n        margin-bottom: var(--spacing-3xl);\n        .float-layout.foil {\n            width: 100%;\n            left: 0;\n            bottom: -22.5%;\n            font-size: var(--fs-sm);\n            background-color: var(--main-level-1);\n        }\n    }\n    &.is-horizontal {\n        margin-right: var(--spacing-lg);\n        .float-layout.foil {\n            width: 50%;\n            height: 80%;\n            top: 10%;\n            right: -60%;\n            font-size: 0;\n            background-color: var(--main-level-1);\n        }\n    }\n    button {\n        border: none;\n    }\n    .overlay-patch {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n    }\n    .dye-patch {\n        position: absolute;\n        z-index: 1;\n        top: 10%;\n        left: 50%;\n        min-width: 6px;\n        min-height: 6px;\n        width: ","px;\n        height: ","px;\n        border-radius: var(--br-lg);\n        transform: translateX(-50%);\n    }\n    .card-layout {\n        position: absolute;\n        ","\n        padding: 0;\n        &.unmodified .overlay-patch {\n            background: var(--gradient-diagonal-stripe);\n        }\n    }\n    .partial-layout {\n        background-clip: padding-box;\n        ","\n    }\n    .float-layout {\n        ","\n    }\n    /** For Zarc's gradient */\n    .partial-layout {\n        background-size: 200%;\n    }\n    .top-left {\n        width: 50%; height: 50%;\n        top: 0; left: 0;\n    }\n    .top-right {\n        width: 50%; height: 50%;\n        top: 0; left: 50%;\n        background-position-x: 100%;\n    }\n    .bottom-left {\n        width: 50%; height: 50%;\n        top: 50%; left: 0;\n    }\n    .bottom-right {\n        width: 50%; height: 50%;\n        top: 50%; left: 50%;\n        background-position-x: 100%;\n    }\n    /** Background width is slightly reduced to help active bottom frames easier */\n    .effect-background {\n        width: 80%;\n        height: 20%;\n        bottom: 5%;\n        left: 10%;\n        background-size: 125%;\n        background-position-x: 50%;\n    }\n    .pendulum-effect-background {\n        width: 80%;\n        height: 13%;\n        bottom: 28%;\n        left: 10%;\n        background-size: 125%;\n        background-position-x: 50%;\n    }\n"])),e=>2*Math.round(e.$width/2),e=>e.$height,e=>e.$hoverable?"cursor: pointer;":"",e=>e.$width/6,e=>e.$width/6,e=>e.$layoutHoverable?"cursor: pointer;":"",e=>e.$layoutHoverable?"\n                border: var(--bw) solid var(--main-level-1);\n                &.active {\n                    border: var(--bw) dashed var(--main-level-1);\n                }\n                &:hover {\n                    border: var(--bw) dashed var(--main-level-2);\n                }\n            ":"",e=>e.$layoutHoverable?"\n                border: var(--bw) solid var(--main-level-1);\n                &.active {\n                    border: var(--bw) dashed var(--main-level-2);\n                    box-shadow: 0 0 1px 0 var(--main-level-1);\n                }\n                &:hover {\n                    border: var(--bw) solid var(--main-level-2);\n                    box-shadow: 0 0 1px 0 var(--main-level-1);\n                }\n            ":""),bc=e=>{let{tabIndex:t=0,width:n,height:a,baseLayoutState:r,resolvedLayoutState:i,isPendulum:o,activeLayout:s,dyeList:c,foil:d,onClick:u,onLayoutSelect:b,language:m,vertical:p=!1}=e;return Object(S.jsxs)(uc,{$width:n,$height:a,$layoutHoverable:!!b,$hoverable:!!u,onClick:u,className:ur("card-layout-container",p?"is-vertical":"is-horizontal"),children:[[{key:"topLeftFrame",className:"card-layout partial-layout top-left"},{key:"topRightFrame",className:"card-layout partial-layout top-right"},{key:"bottomLeftFrame",className:"card-layout partial-layout bottom-left"},{key:"bottomRightFrame",className:"card-layout partial-layout bottom-right"},{key:"effectBackground",className:"card-layout float-layout effect-background"},{key:"pendulumEffectBackground",className:"card-layout float-layout pendulum-effect-background"}].map(e=>{var a;let{className:d,key:u}=e;const m=i[u],p=null==O[u]?void 0:c[O[u]];if(!m)return null;if(!o&&"pendulumEffectBackground"===u)return null;const{labelBackgroundColor:g,labelBackgroundImage:h}=null!==(a=He[m])&&void 0!==a?a:{};return Object(S.jsx)("button",Object(l.a)(Object(l.a)({},t<0?{}:{tabIndex:t}),{},{className:ur(d,u===s?"active":"","auto"===(null===r||void 0===r?void 0:r[u])?"unmodified":""),onClick:()=>null===b||void 0===b?void 0:b(u),style:h?{backgroundImage:h}:{backgroundColor:g},children:Object(S.jsx)("div",{className:"overlay-patch",style:p?{boxShadow:"0 0 0 ".concat(Math.round(n/16),"px ").concat(p," inset")}:{}})}),u)}),Object(S.jsx)("button",Object(l.a)(Object(l.a)({},t<0?{}:{tabIndex:t}),{},{className:ur("card-layout float-layout foil","foil"===s?"active":""),onClick:()=>null===b||void 0===b?void 0:b("foil"),style:{boxShadow:"0 0 0 2px ".concat(Ua.test(c[O.foil])?c[O.foil]:j[d].color," inset")},children:m["input.foil.label"]}))]})},mc=fr.b.div(dc||(dc=Object(mr.a)(["\n    text-align: center;\n    .layout-preset-option-action {\n        line-height: 1.25;\n        text-align: center;\n        .anticon {\n            cursor: pointer;\n            &.anticon-close:hover {\n                color: var(--sub-danger);\n            }\n            &.anticon-save:hover {\n                color: var(--sub-info);\n            }\n            + .anticon {\n                margin-left: var(--spacing-xs);\n            }\n        }\n    }\n"]))),pc=e=>{let{onActive:t,onDelete:n,onOverwrite:a,language:r}=e,i=Object(oa.a)(e,sc);return Object(S.jsxs)(mc,{className:"frame-preset-option",children:[Object(S.jsx)("div",{className:"preview-container",onClick:t,children:Object(S.jsx)(bc,Object(l.a)(Object(l.a)({},i),{},{language:r}))}),Object(S.jsxs)("div",{className:"layout-preset-option-action",children:[n&&Object(S.jsx)($s.a,{title:r["generic.delete.label"],okText:r["generic.yes.label"],cancelText:r["generic.no.label"],onConfirm:n,children:Object(S.jsx)(jr.a,{})}),a&&Object(S.jsx)($s.a,{title:r["generic.overwrite.label"],okText:r["generic.yes.label"],cancelText:r["generic.no.label"],onConfirm:()=>a(),children:Object(S.jsx)(ac.a,{})})]})]})};var gc,hc=n(619),fc=n(623),vc=n(606),yc=n(607),jc=n(631);const xc=Object(fr.b)(hc.a.Item)(gc||(gc=Object(mr.a)(["\n    &.ant-form-item {\n        margin-bottom: calc(-3/2 * var(--spacing));\n        margin-top: var(--spacing);\n        margin-left: calc(-3/2 * var(--spacing));\n        margin-right: calc(-3/2 * var(--spacing));\n        padding: var(--spacing);\n        border-top: var(--bw) solid var(--sub-level-1);\n        .ant-form-item-control-input-content {\n            display: flex;\n            justify-content: end;\n            gap: var(--spacing);\n        }\n    }\n"]))),Oc=Object(a.forwardRef)((e,t)=>{let{onSubmit:n,onEdit:r,language:i}=e;const[o]=hc.a.useForm(),[l,s]=Object(a.useState)(""),[c,d]=Object(a.useState)(!1),u=()=>{d(!1),s(""),o.resetFields()};return Object(a.useImperativeHandle)(t,()=>({edit:(e,t)=>{o.setFieldsValue(t),s(e),d(!0)}})),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Jo.a,{className:"formatting-help-button",type:"primary",size:"small",onClick:()=>{d(!0)},children:i["preset.form.image.add.label"]}),Object(S.jsx)(pr.a,{visible:c,width:400,className:"global-overlay",footer:()=>null,onCancel:()=>u(),children:Object(S.jsxs)(hc.a,{form:o,name:"image-preset",layout:"vertical",size:"middle",onFinish:e=>{"string"===typeof l&&""!==l?r(l,e):n(e),u()},onFinishFailed:()=>{gr.a.error({message:i["error.preset-import.message"],description:i["error.preset-import.description"]})},autoComplete:"off",children:[Object(S.jsx)(hc.a.Item,{label:i["preset.form.image.src.label"],name:"src",rules:[{required:!0,message:i["form.required"]}],children:Object(S.jsx)(fc.a,{})}),Object(S.jsx)(hc.a.Item,{label:i["preset.form.image.name.label"],name:"name",rules:[{required:!0,message:i["form.required"]}],children:Object(S.jsx)(fc.a,{})}),Object(S.jsx)("div",{children:i["form.default"]}),Object(S.jsxs)(vc.a,{gutter:10,children:[Object(S.jsx)(yc.a,{span:12,children:Object(S.jsx)(hc.a.Item,{label:i["preset.form.image.width.label"],name:"width",children:Object(S.jsx)(jc.a,{step:1,min:0,max:800})})}),Object(S.jsx)(yc.a,{span:12,children:Object(S.jsx)(hc.a.Item,{label:i["preset.form.image.height.label"],name:"height",children:Object(S.jsx)(jc.a,{step:1,min:0,max:800})})})]}),Object(S.jsxs)(vc.a,{gutter:10,children:[Object(S.jsx)(yc.a,{span:12,children:Object(S.jsx)(hc.a.Item,{label:i["preset.form.image.offset-x.label"],name:"offsetX",children:Object(S.jsx)(jc.a,{step:1,min:-200,max:200})})}),Object(S.jsx)(yc.a,{span:12,children:Object(S.jsx)(hc.a.Item,{label:i["preset.form.image.offset-y.label"],name:"offsetY",children:Object(S.jsx)(jc.a,{step:1,min:-200,max:200})})})]}),Object(S.jsxs)(xc,{children:[Object(S.jsx)(Jo.a,{onClick:()=>u(),children:i["form.dismiss"]}),Object(S.jsx)(Jo.a,{type:"primary",htmlType:"submit",children:i["form.submit"]})]})]})})]})});var wc,kc;const{width:Sc,height:Cc}=d,Fc=Object(fr.b)(pr.a)(wc||(wc=Object(mr.a)(["\n    .import-review-title {\n        margin-bottom: var(--spacing-xs);\n    }\n    .import-action-table {\n        width: 100%;\n        table-layout: fixed;\n        background-color: #494949;\n        th,\n        td {\n            border: var(--bw) solid var(--sub-level-4);\n            padding: var(--spacing-xs);\n            &:nth-child(1) {\n                width: 150px;\n            }\n            &:nth-child(2) {\n                width: 150px;\n            }\n        }\n        .action-panel {\n            display: grid;\n            grid-template-columns: 1fr 1fr 1fr;\n            gap: var(--spacing-xs);\n        }\n        .import-action-row {\n            &.keep-old {\n                td:nth-child(1) {\n                    background-color: var(--main-level-4);\n                }\n            }\n            &.keep-new {\n                td:nth-child(2) {\n                    background-color: var(--main-level-4);\n                }\n            }\n            &.keep-both {\n                td:nth-child(1),\n                td:nth-child(2) {\n                    background-color: var(--main-level-4);\n                }\n            }\n        }\n    }\n"]))),Lc=e=>{let{language:t,isPendulum:n,frameInfo:r,importData:i,onCancel:o}=e;const{db:s}=ci(),[c,d]=mi("nameStylePresetList"),[u,b]=mi("layoutPresetList"),{layoutPresetMap:m,nameStylePresetMap:p}=Object(a.useMemo)(()=>({nameStylePresetMap:c.reduce((e,t)=>(e[t.key]=t,e),{}),layoutPresetMap:u.reduce((e,t)=>(e[t.key]=t,e),{})}),[u,c]),{layoutPresetList:g=[],nameStylePresetList:h=[]}=i,[f,v]=Object(a.useState)(()=>({layoutPresetMap:g.reduce((e,t)=>(e[t.key]=Object(l.a)(Object(l.a)({},t),{},{verdict:"keep-new"}),e),{}),nameStylePresetMap:h.reduce((e,t)=>(e[t.key]=Object(l.a)(Object(l.a)({},t),{},{verdict:"keep-new"}),e),{})}));return Object(S.jsxs)(Fc,{visible:!0,width:700,maskClosable:!1,okText:t["preset.button.import.label"],cancelText:t["preset.button.discard.label"],onCancel:o,onOk:async()=>{const e=Object.values(f.layoutPresetMap),t=Object.values(f.nameStylePresetMap),n={},a=[],r=[];if(e.filter(e=>{let{verdict:t}=e;return"keep-old"!==t}).forEach(e=>{const{key:t,content:i,verdict:o}=e;if(a.push({key:t,content:i}),null==m[t]&&"keep-new"===o)r.push({key:t,content:i});else if("keep-both"===o){const e=Object(Q.a)();r.push({key:e,content:i})}else n[t]={key:t,content:i}}),s){const e=s.transaction("presetLayoutStore","readwrite");for(const{key:t,content:n}of a)await s.put("presetLayoutStore",{key:t,content:JSON.stringify(n)});await e.done}b(e=>[...e.map(e=>n[e.key]?n[e.key]:e),...r]);const i={},l=[],c=[];if(t.filter(e=>{let{verdict:t}=e;return"keep-old"!==t}).forEach(e=>{const{key:t,content:n,verdict:a}=e;if(l.push({key:t,content:n}),null==p[t]&&"keep-new"===a)c.push({key:t,content:n});else if("keep-both"===a){const e=Object(Q.a)();c.push({key:e,content:n})}else i[t]={key:t,content:n}}),s){const e=s.transaction("presetNameStyleStore","readwrite");for(const{key:t,content:n}of l)await s.put("presetNameStyleStore",{key:t,content:JSON.stringify(n)});await e.done}d(e=>[...e.map(e=>i[e.key]?i[e.key]:e),...c]),o()},children:[Object(S.jsxs)("div",{className:"import-review-title",children:[Object(S.jsx)("h2",{children:t["preset.review-title.label"]}),t["preset.review-description"]]}),Object(S.jsx)("table",{className:"import-action-table",children:Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{className:"import-action-row import-header-row",children:[Object(S.jsx)("th",{className:"header-row",children:t["preset.review-table.current.label"]}),Object(S.jsx)("th",{className:"header-row",children:t["preset.review-table.new.label"]}),Object(S.jsx)("th",{className:"header-row",children:t["preset.review-table.action.label"]})]}),h.map(e=>{var n;let{key:a,content:i}=e;const o={language:t,frameInfo:r},s=null===(n=p[a])||void 0===n?void 0:n.content,c=f.nameStylePresetMap[a].verdict;return Object(S.jsxs)("tr",{className:ur("import-action-row",c),children:[Object(S.jsx)("td",{className:"current-version",children:s&&Object(S.jsx)(lc,Object(l.a)(Object(l.a)({},o),{},{presetContent:s,children:s.preset}))}),Object(S.jsx)("td",{className:"new-version",children:Object(S.jsx)(lc,Object(l.a)(Object(l.a)({},o),{},{presetContent:i,children:i.preset}))}),Object(S.jsx)("td",{className:"action-list",children:Object(S.jsxs)("div",{className:"action-panel",children:[Object(S.jsx)(Jo.a,{size:"small",type:"keep-old"===c?"primary":"default",onClick:()=>v(e=>{const t=Object(l.a)({},e.nameStylePresetMap);return t[a]=Object(l.a)(Object(l.a)({},t[a]),{},{verdict:"keep-old"}),Object(l.a)(Object(l.a)({},e),{},{nameStylePresetMap:t})}),children:t[s?"preset.review-table.action.keep-old.label":"preset.review-table.action.discard.label"]}),Object(S.jsx)(Jo.a,{size:"small",type:"keep-new"===c?"primary":"default",onClick:()=>v(e=>{const t=Object(l.a)({},e.nameStylePresetMap);return t[a]=Object(l.a)(Object(l.a)({},t[a]),{},{verdict:"keep-new"}),Object(l.a)(Object(l.a)({},e),{},{nameStylePresetMap:t})}),children:t[s?"preset.review-table.action.keep-new.label":"preset.review-table.action.import.label"]}),s&&Object(S.jsx)(Jo.a,{size:"small",type:"keep-both"===c?"primary":"default",onClick:()=>v(e=>{const t=Object(l.a)({},e.nameStylePresetMap);return t[a]=Object(l.a)(Object(l.a)({},t[a]),{},{verdict:"keep-both"}),Object(l.a)(Object(l.a)({},e),{},{nameStylePresetMap:t})}),children:t["preset.review-table.action.keep-both.label"]})]})})]},a)}),g.map(e=>{var a,r,i,o,s;let{key:c,content:d}=e;const u={width:Math.round(40*Sc/Cc),height:40,isPendulum:n,tabIndex:-1,language:t},b=null===(a=m[c])||void 0===a?void 0:a.content,p=f.layoutPresetMap[c].verdict;return Object(S.jsxs)("tr",{className:ur("import-action-row",p),children:[Object(S.jsx)("td",{className:"current-version",children:b&&Object(S.jsx)(pc,Object(l.a)({resolvedLayoutState:ra({frame:b.frame,topLeftFrame:b.leftFrame,topRightFrame:b.rightFrame,bottomLeftFrame:b.pendulumFrame,bottomRightFrame:b.pendulumRightFrame,effectBackground:null===(r=b.effectStyle)||void 0===r?void 0:r.background,pendulumEffectBackground:null===(i=b.pendulumStyle)||void 0===i?void 0:i.background},n),dyeList:b.dyeList,foil:b.foil},u))}),Object(S.jsx)("td",{className:"new-version",children:Object(S.jsx)(pc,Object(l.a)({resolvedLayoutState:ra({frame:d.frame,topLeftFrame:d.leftFrame,topRightFrame:d.rightFrame,bottomLeftFrame:d.pendulumFrame,bottomRightFrame:d.pendulumRightFrame,effectBackground:null===(o=d.effectStyle)||void 0===o?void 0:o.background,pendulumEffectBackground:null===(s=d.pendulumStyle)||void 0===s?void 0:s.background},n),dyeList:d.dyeList,foil:d.foil},u))}),Object(S.jsx)("td",{className:"action-list",children:Object(S.jsxs)("div",{className:"action-panel",children:[Object(S.jsx)(Jo.a,{size:"small",type:"keep-old"===p?"primary":"default",onClick:()=>v(e=>{const t=Object(l.a)({},e.layoutPresetMap);return t[c]=Object(l.a)(Object(l.a)({},t[c]),{},{verdict:"keep-old"}),Object(l.a)(Object(l.a)({},e),{},{layoutPresetMap:t})}),children:t[b?"preset.review-table.action.keep-old.label":"preset.review-table.action.discard.label"]}),Object(S.jsx)(Jo.a,{size:"small",type:"keep-new"===p?"primary":"default",onClick:()=>v(e=>{const t=Object(l.a)({},e.layoutPresetMap);return t[c]=Object(l.a)(Object(l.a)({},t[c]),{},{verdict:"keep-new"}),Object(l.a)(Object(l.a)({},e),{},{layoutPresetMap:t})}),children:t[b?"preset.review-table.action.keep-new.label":"preset.review-table.action.import.label"]}),b&&Object(S.jsx)(Jo.a,{size:"small",type:"keep-both"===p?"primary":"default",onClick:()=>v(e=>{const t=Object(l.a)({},e.layoutPresetMap);return t[c]=Object(l.a)(Object(l.a)({},t[c]),{},{verdict:"keep-both"}),Object(l.a)(Object(l.a)({},e),{},{layoutPresetMap:t})}),children:t["preset.review-table.action.keep-both.label"]})]})})]},c)})]})})]})},Tc=Object(fr.b)(fs)(kc||(kc=Object(mr.a)(["\n    .ant-drawer-body {\n        padding: var(--spacing);\n    }\n    .preset-list {\n        margin-top: var(--spacing);\n        padding-top: var(--spacing);\n        border-top: var(--bw) solid var(--main-level-1);\n    }\n    .image-preset-list {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: var(--spacing-sm);\n    }\n    .overlay-title {\n        display: grid;\n        grid-template-columns: 1fr max-content;\n        line-height: 1;\n    }\n    .name-style-preset-list {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: var(--spacing-sm);\n    }\n    .layout-preset-list {\n        display: grid;\n        grid-template-columns: repeat(auto-fill, minmax(55px, 1fr));\n        gap: var(--spacing-sm);\n    }\n    .action-list {\n        margin-top: var(--spacing);\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        column-gap: var(--spacing-sm);\n        .import-upload-input {\n            display: none;\n        }\n    }\n    label {\n        display: block;\n        grid-column: -1 / 1;\n    }\n"]))),Nc=e=>{let{language:t}=e;const{setVisible:n,visible:r}=Uo(Object(ui.useShallow)(e=>{let{setVisible:t,visible:n}=e;return{setVisible:t,visible:n}})),{frame:i,isPendulum:o}=ii(Object(ui.useShallow)(e=>{let{card:{frame:t,isPendulum:n}}=e;return{frame:t,isPendulum:n}})),{db:s}=ci(),[c,d]=mi("nameStylePresetList"),[u,b]=mi("layoutPresetList"),[m,p]=mi("imagePresetList"),[g,h]=Object(a.useState)({visible:!1,layoutPresetList:[],nameStylePresetList:[],imagePresetList:[]}),f=He[i],[v,y]=Object(a.useState)(0),j=Object(a.useRef)(null),x=Object(a.useRef)(null),O="preset-import-direct-upload";return Object(S.jsxs)(Tc,{footer:null,width:345,visible:r,title:Object(S.jsxs)("div",{className:"overlay-title",children:[Object(S.jsx)("span",{children:t["preset.manager.label"]}),Object(S.jsx)(jr.a,{onClick:()=>{n(!1)}})]}),onClose:()=>{n(!1)},children:[Object(S.jsx)("div",{children:t["preset.warning.label"]}),Object(S.jsxs)("div",{className:"action-list",children:[Object(S.jsx)(Jo.a,{size:"small",onClick:()=>{const e=JSON.stringify({layoutPresetList:u,nameStylePresetList:c}),t=new Blob([e],{type:"application/json"});Sa("preset.json",t,"application/json")},children:t["generic.export.label"]}),Object(S.jsxs)(Jo.a,{size:"small",onClick:()=>{const e=document.getElementById(O);e&&e.click()},children:[t["generic.import.label"],Object(S.jsx)("input",{ref:j,type:"file",id:O,accept:"application/json",className:"import-upload-input",onChange:()=>{var e;(e=>{if(e)for(let n=0;n<=e.length;n++){const a=e.item(n);if(!a)continue;const r=new FileReader;r.onload=e=>{let{target:n}=e;if(!n)return;const{result:a}=n;if("string"===typeof a)try{const{layoutPresetList:e,nameStylePresetList:t,imagePresetList:n}=JSON.parse(a);h({visible:!0,layoutPresetList:e,nameStylePresetList:t,imagePresetList:n})}catch(r){console.error(r),gr.a.error({description:t["error.preset-import.description"],message:t["error.preset-import.message"]})}},r.readAsText(a);break}y(e=>e+1)})(null===(e=j.current)||void 0===e?void 0:e.files)}},"direct-file-input-".concat(v))]})]}),Object(S.jsxs)("div",{className:"preset-list name-style-preset-list",children:[Object(S.jsx)("label",{children:t["preset.instruction.name-style.label"]}),c.map(e=>{let{key:n,content:a}=e;return Object(S.jsx)(lc,{language:t,frameInfo:f,presetContent:a,onDelete:async()=>{if(s){const e=s.transaction("presetNameStyleStore","readwrite");await s.delete("presetNameStyleStore",n),await e.done}d(e=>e.filter(e=>e.key!==n))},children:a.preset},n)})]}),Object(S.jsxs)("div",{className:"preset-list layout-preset-list",children:[Object(S.jsx)("label",{children:t["preset.instruction.advanced-frame.label"]}),u.map(e=>{let{content:n,key:a}=e;const{dyeList:r,foil:i,frame:l,pendulumFrame:c,leftFrame:d,pendulumRightFrame:u,rightFrame:m,effectStyle:p,pendulumStyle:g}=n,h={frame:l,topLeftFrame:d,topRightFrame:m,bottomLeftFrame:c,bottomRightFrame:u,effectBackground:null===p||void 0===p?void 0:p.background,pendulumEffectBackground:null===g||void 0===g?void 0:g.background};return Object(S.jsx)(pc,{width:Math.round(40*Sc/Cc),height:40,isPendulum:o,resolvedLayoutState:ra(h,o),tabIndex:-1,dyeList:r,foil:i,language:t,onDelete:async()=>{if(s){const e=s.transaction("presetLayoutStore","readwrite");await s.delete("presetLayoutStore",a),await e.done}b(e=>e.filter(e=>{let{key:t}=e;return a!==t}))}},a)})]}),Object(S.jsxs)("div",{className:"preset-list image-preset-list",children:[Object(S.jsxs)("label",{children:[t["preset.instruction.image.label"],"\xa0",Object(S.jsx)(Oc,{ref:x,language:t,onSubmit:async e=>{const t=Object(Q.a)();if(s){const n=s.transaction("presetImageStore","readwrite");await s.put("presetImageStore",{key:t,content:JSON.stringify(e)}),await n.done}p(n=>[...n,{key:t,content:Object(l.a)({},e)}])},onEdit:async(e,t)=>{if(s){const n=s.transaction("presetImageStore","readwrite");await s.put("presetImageStore",{key:e,content:JSON.stringify(t)}),await n.done}p(n=>n.map(n=>n.key===e?{key:e,content:Object(l.a)({},t)}:n))}}),Object(S.jsx)("br",{}),t["preset.instruction.image.head-up.label"]]}),m.map(e=>{let{key:n,content:a}=e;return Object(S.jsx)(ec,{language:t,imagePreset:a,onDelete:async()=>{if(s){const e=s.transaction("presetImageStore","readwrite");await s.delete("presetImageStore",n),await e.done}p(e=>e.filter(e=>{let{key:t}=e;return n!==t}))},onEdit:()=>{var e;null===(e=x.current)||void 0===e||e.edit(n,a)}},n)})]}),g.visible&&Object(S.jsx)(Lc,{onCancel:()=>h(e=>Object(l.a)(Object(l.a)({},e),{},{visible:!1})),importData:g,frameInfo:f,isPendulum:o,language:t})]})};var Rc;n(502);const{height:Ic,width:Ec}=d,zc=Object(fr.b)(pr.a)(Rc||(Rc=Object(mr.a)(["\n    .ant-modal-close-x {\n        display: none;\n    }\n    .sample-container {\n        width: 100%;\n        table-layout: fixed;\n        background-color: #494949;\n        th,\n        td {\n            border: var(--bw) solid var(--sub-level-4);\n            padding: var(--spacing-xs) var(--spacing-sm);\n            &:nth-child(1) {\n                width: 150px;\n            }\n            &:nth-child(2) {\n                vertical-align: top;\n            }\n        }\n        td {\n            &:nth-child(1) {\n                padding: var(--spacing-xs);\n                img {\n                    --thumb-size: 140px;\n                    max-width: var(--thumb-size);\n                    height: calc(var(--thumb-size) / "," * ",");\n                }\n            }\n        }\n    }\n"])),Ec,Ic),Dc=Object(a.forwardRef)((e,t)=>{let{language:n,applyCardData:r}=e;const[i,o]=Object(a.useState)(!1),{updateSetting:l}=oi(e=>{let{setting:t,updateSetting:n}=e;return{setting:t,updateSetting:n}});return Object(a.useImperativeHandle)(t,()=>({open:()=>o(!0)})),Object(S.jsxs)(zc,{visible:i,onCancel:()=>o(!1),okButtonProps:{style:{display:"none"}},cancelText:n["form.dismiss"],children:[Object(S.jsx)("div",{children:n["sample.manager.creative-requires.label"]}),Object(S.jsx)("br",{}),Object(S.jsx)("table",{className:"sample-container",children:Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:Object(S.jsx)("b",{children:n["sample.manager.header.image.label"]})}),Object(S.jsx)("th",{children:Object(S.jsx)("b",{children:n["sample.manager.header.description.label"]})})]}),[{image:"https://i.postimg.cc/SQDcs87c/image.png",description:"Sample card with custom background and overframe artwork.",value:'{"fm":"tcg","rg":"en","fr":"ritual","lf":"auto","rf":"auto","rpf":"auto","fo":"normal","op":{"opbd":100,"oppd":100,"optx":40,"opnm":100,"opbf":"#0062b1","opab":true,"opnb":true,"opeb":true,"opfb":true,"opbl":true},"fn":[],"afn":"normal","of":["normal","normal","normal","normal"],"na":"Blue-Eyes Chaos MAX Dragon","nst":"custom","ns":{"nsfs":"#000000","nsft":"Auto","nsgd":180,"nscg":"0.000|#cecbb8,0.220|#b0ad9b,0.270|#94917e,0.330|#797768,0.380|#797768,0.450|#d9d9d9,0.610|#ffffff,0.700|#ffffff,0.870|#d6d7c7,1.000|#c9cbb6","nshg":true,"nshl":true,"nshs":true,"nshfs":"#000000","nslc":"#333333","nslox":1,"nsloy":0,"nslw":3,"nspt":"none","nspr":"animeSilver","nssb":2,"nssc":"#383838","nssox":2,"nssoy":3},"at":"DARK","att":"auto","sf":"QUICK-PLAY","it":"auto","st":8,"stl":[],"sa":"auto","ar":"https://i.imgur.com/msWo4gh.png","ad":"","as":"online","af":false,"arc":{"aru":"%","ara":0.686,"arx":34.1036977491961,"ary":32.5614067055394,"arw":44.05144694533762,"arh":49.92711370262391},"hbg":true,"bg":"https://i.postimg.cc/SK4CtGfY/image.png","bgd":"","bf":false,"bgs":"online","bgt":"strict","bgc":{"bgu":"%","bga":1,"bgx":0,"bgy":0,"bgw":100,"bgh":100},"lm":["1","3","7","9"],"lr":"","il":null,"ip":false,"pf":"auto","pe":"","rs":"4","bs":"4","psi":"medium","ta":["Dragon","Ritual","Effect"],"es":{"cdtl":"strict","efs":"auto","eus":0,"ebg":"auto","eml":0,"ejr":100},"ps":{"pfs":"auto","pus":0,"pbg":"auto","pml":0,"pjr":100},"ef":"You can Ritual Summon this card with \\"Chaos Form\\". Must be Ritual Summoned. Your opponent cannot target this card with card effects, also it cannot be destroyed by your opponent\'s card effects. If this card attacks a Defense Position monster, inflict double piercing battle damage.","si":"LDS2-EN016","atk":"4000","def":"0","pw":"55410871","sti":"holo5","fe":"1<st> Edition","ife":false,"isp":false,"ile":false,"idt":false,"ilc":false,"cr":"\xa92020 Studio Dice/SHUEISHA, TV TOKYO, KONAMI","fh":true,"sts":[false,"#000000",false,"#000000"],"tts":[false,"#000000",false,"#000000"],"ets":[false,"#000000",false,"#000000"],"pts":[false,"#000000",false,"#000000"],"ots":[false,"#000000",false,"#000000"],"dl":["","","","","","",""],"fl":[0,0],"ve":3}'},{image:"https://i.postimg.cc/Ss0JTL0H/image.png",description:"Sample card with custom image as frame background, custom levels alignment and small pendulum effect's text box.",value:'{"fm":"tcg","rg":"en","fr":"effect","lf":"auto","rf":"auto","rpf":"auto","fo":"platinum","op":{"opbd":100,"oppd":100,"optx":100,"opnm":80,"opbf":"#404040","opab":true,"opnb":true,"opeb":true,"opfb":false,"opbl":false},"fn":[],"afn":"normal","of":["normal","normal","normal","normal"],"na":"Malefic Paradulum Dragon","nst":"auto","ns":{"nsfs":"#000000","nsft":"Auto","nsgd":0,"nscg":"0.000|#eef10b,0.5|#d78025,1.000|#7e20cf","nshg":false,"nshl":false,"nshs":false,"nshfs":"#000000","nslc":"#000000","nslox":0,"nsloy":0,"nslw":0,"nspt":"none","nspr":"commonB","nssb":0,"nssc":"#000000","nssox":0,"nssoy":0},"at":"DARK","att":"auto","sf":"NO ICON","it":"auto","st":10,"stl":["level","level","level","level",null,"negative-level","negative-level","negative-level",null,"rank","rank","rank","rank"],"sa":"center","ar":"https://i.imgur.com/cQcxyRQ.jpeg","ad":"","as":"online","af":false,"arc":{"aru":"%","ara":1.236,"arx":0,"ary":0,"arw":100,"arh":80.9061488673139},"hbg":true,"bg":"https://i.imgur.com/WpXf0GI.png","bgd":"","bf":false,"bgs":"online","bgt":"frame","bgc":{"bgu":"%","bga":0.686,"bgx":15.449999999999998,"bgy":0,"bgw":68.60000000000001,"bgh":100},"lm":["1","9","3","7"],"lr":"","il":false,"ip":true,"pf":"auto","pe":"During your Main Phase: You can add 1 \\"Malefic\\" Spell / Trap from your Deck to your hand. You can only use this effect of \\"Malefic Paradulum Dragon\\" once per turn.","rs":"0","bs":"0","psi":"small","ta":["Dragon","Pendulum","Effect"],"es":{"cdtl":"strict","efs":"auto","eus":0,"ebg":"auto","eml":0,"ejr":100},"ps":{"pfs":"italic","pus":0,"pbg":"auto","pml":0,"pjr":100},"ef":"Must be Pendulum Summoned, or Special Summoned (from your hand) by banishing 1 \\"Malefic\\" monster from your Extra Deck. While you control no card in your Field Zone, the field is treated as \\"Malefic World\\". Once per turn: You can send 1 \\"Malefic\\" card from your Deck to the GY; return 1 of your banished Level 8 Synchro Monsters to the Extra Deck, then you can Special Summon that monster from the Extra Deck, also you can only attack with \\"Malefic\\" monsters for the rest of this turn.","si":"","atk":"4000","def":"4000","pw":"","sti":"no-sticker","fe":"1<st> Edition","ife":false,"isp":false,"ile":false,"idt":false,"ilc":false,"cr":"","fh":true,"sts":[false,"#00007f",true,"#0000FF"],"tts":[false,"#ff0000",true,"#7F0000"],"ets":[false,"#7f0000",true,"#FF0000"],"pts":[false,"#7f0000",true,"#FF0000"],"ots":[false,"#ffffff",true,"#000000"],"dl":["","","","","","",""],"fl":[0,0],"ve":3}'},{image:"https://i.postimg.cc/gc8Ccjyq/image.png",description:"Sample card with no frame background, colorized texts, customized level and attribute.",value:'{"fm":"tcg","rg":"en","fr":"effect","lf":"auto","rf":"auto","rpf":"auto","fo":"normal","op":{"opbd":0,"oppd":65,"optx":55,"opnm":65,"opbf":"#404040","opab":false,"opnb":true,"opeb":true,"opfb":false,"opbl":false},"fn":[],"afn":"normal","of":["normal","normal","normal","normal"],"na":"Mega PenduLuMoon","nst":"predefined","ns":{"nsep":90,"nsey":90,"nsfs":"#dbb473","nsft":"Auto","nsgd":180,"nscg":"0.000|#eee317,0.220|#dbbe15,0.270|#d0920c,0.330|#b57f0b,0.380|#d0920c,0.450|#ffff6b,0.610|#ffffff,0.700|#ffffff,0.870|#e5dd2d,1.000|#e3da23","nshe":false,"nshg":false,"nshl":false,"nshs":false,"nslc":"#333333","nslox":1,"nsloy":0,"nslw":3,"nspt":"none","nspr":"ultra","nssb":2,"nssc":"#383838","nssox":2,"nssoy":3},"at":"https://i.postimg.cc/HxZCQhxH/paranormal.png","att":"custom","sf":"NO ICON","it":"auto","st":"4","stl":[],"sa":"auto","ar":"https://i.imgur.com/JIgmiMj.png","ad":"","as":"online","af":false,"arc":{"arx":31.17030201342282,"ary":0,"arw":37.65939597315436,"arh":100,"aru":"%","ara":0.67},"hbg":false,"bg":"","bgd":"","bf":false,"bgs":"online","bgt":"fit","bgc":{"bgx":16.5,"bgy":0,"bgw":67,"bgh":99.99999999999999,"bgu":"%","bga":0.67},"lm":["1","3","7","9"],"lr":"","il":null,"ip":true,"pf":"auto","pe":"During your Main Phase: You can add 1 PARANORMAL Pendulum Monster from your Extra Deck to your hand, then destroy this card. You can only use this effect of \\"Mega PenduLuMoon\\" once per turn.","rs":"0","bs":"0","psi":"medium","ta":["Spellcaster","Pendulum","Effect"],"es":{"cdtl":"strict","efs":"auto","eus":0,"ebg":"auto","eml":0,"ejr":100},"ps":{"pfs":"auto","pus":0,"pbg":"auto","pml":0,"pjr":100},"ef":"During your Main Phase: You can add up to 2 face-up PARANORMAL Pendulum Monsters from your Extra Deck to your hand, also for the rest of this turn, until you Pendulum Summon, you cannot activate monster effects, except PARANORMAL Monsters\' effects, and the effects of any cards in your Pendulum Zones are negated. You can only use this effect of \\"Mega PenduLuMoon\\" once per turn.","si":"SMXR-EN025","atk":"400","def":"1400","pw":"45497573","sti":"holo5","fe":"1<st> Edition","ife":false,"isp":false,"ile":false,"idt":false,"ilc":false,"cr":"\xa92020 Studio Dice/SHUEISHA, TV TOKYO, KONAMI","fh":true,"sts":[true,"#400040",true,"#000000"],"tts":[false,"#000000",false,"#000000"],"ets":[true,"#000000",true,"#FF00FF"],"pts":[true,"#000000",true,"#FF0000"],"ots":[false,"#000000",false,"#000000"],"dl":["","","","","","",""],"fl":[0,0],"ve":3}'},{image:"https://i.postimg.cc/YCPQfmdn/image.png",description:"Sample card with link markers on pendulum frame and custom level placement.",value:'{"fm":"tcg","rg":"en","fr":"effect","lf":"auto","rf":"auto","rpf":"auto","fo":"normal","op":{"opbd":100,"oppd":80,"optx":100,"opnm":100,"opbf":"#404040","opab":true,"opnb":true,"opeb":true,"opfb":false,"opbl":false},"fn":[],"afn":"normal","of":["normal","normal","normal","type9"],"na":"Countermoon Dragon","nst":"predefined","ns":{"nsep":90,"nset":2,"nsey":90,"nsfs":"#cfc6de","nsft":"Auto","nsgd":180,"nscg":"0.000|#7a71a6,1.000|#a8c1e5","nshe":false,"nshg":false,"nshl":false,"nshs":false,"nshfs":"#000000","nslc":"#333333","nslox":0,"nsloy":0,"nslw":6,"nspt":"none","nspr":"rare","nssb":2,"nssc":"#ffff00","nssox":0,"nssoy":0},"at":"WATER","att":"auto","sf":"NO ICON","it":"custom","st":12,"stl":["negative-level","negative-level","negative-level","negative-level",null,null,"level","level","level","level","level","level"],"sa":"auto","ar":"https://i.imgur.com/vf0AWDN.png","ad":"","as":"online","af":false,"arc":{"arx":0,"ary":0,"arw":100,"arh":94.7867298578199,"aru":"%","ara":1.055},"hbg":false,"bg":"https://images2.imgbox.com/26/42/a1xqkgFz_o.jpg","bgd":"","bf":false,"bgs":"online","bgt":"fit","bgc":{"bgx":0,"bgy":0,"bgw":100,"bgh":94.7867298578199,"bgu":"%","bga":1.055},"lm":["1","3","7","9"],"lr":"","il":true,"ip":true,"pf":"auto","pe":"Negate the effects of all face-up Continuous Trap on the field.","rs":"5","bs":"5","psi":"medium","ta":["Wyrm","Synchro","Pendulum","Effect"],"es":{"cdtl":"strict","efs":"auto","eus":0,"ebg":"auto","eml":0,"ejr":100},"ps":{"pfs":"auto","pus":0,"pbg":"auto","pml":0,"pjr":100},"ef":"[Synchro: 1 Tuner + 1 non-Tuner monster | Link: 2 Wyrm monsters]\\nYou can only Special Summon 1 \\"Countermoon Dragon\\" per turn. If this card is Synchro Summoned: You can target 2 Spells/Traps on the field; destroy them. If this card is Dark Synchro Summoned: You can target 1 monster on the field; destroy it. If this card is Link Summoned: You can Special Summon 1 \\"Countersun Dragon\\" from your Extra Deck, then you can place this card in your Pendulum Zone.","si":"","atk":"1500","def":"3000","pw":"","sti":"no-sticker","fe":"1<st> Edition","ife":false,"isp":false,"ile":false,"idt":false,"ilc":false,"cr":"","fh":true,"sts":[false,"#000000",false,"#000000"],"tts":[false,"#000000",false,"#000000"],"ets":[false,"#000000",false,"#000000"],"pts":[false,"#000000",false,"#000000"],"ots":[false,"#000000",false,"#000000"],"dl":["","","","","","",""],"fl":[1,0],"ve":3}'},{image:"https://i.postimg.cc/ncnLK60H/image.png",description:"Sample card with custom finishes and inline-image in card text.",value:'{"fm":"tcg","rg":"en","fr":"link","lf":"auto","rf":"auto","rpf":"auto","fo":"normal","op":{"opbd":100,"oppd":100,"optx":100,"opnm":100,"opbf":"#404040","opab":true,"opnb":true,"opeb":true,"opfb":false,"opbl":false},"fn":["type8"],"afn":"type5","of":["normal","normal","normal","normal"],"na":"Promethean Princess, Bestower of Flames","nst":"predefined","ns":{"nsfs":"#dbb473","nsft":"Auto","nsgd":180,"nscg":"0.000|#eee317,0.220|#dbbe15,0.270|#d0920c,0.330|#b57f0b,0.380|#d0920c,0.450|#ffff6b,0.610|#ffffff,0.700|#ffffff,0.870|#e5dd2d,1.000|#e3da23","nshg":false,"nshl":false,"nshs":false,"nslc":"#4d4d4d","nslox":0,"nsloy":0,"nslw":2,"nspt":"none","nspr":"ultra","nssb":0,"nssc":"#000000","nssox":0,"nssoy":0},"at":"FIRE","att":"auto","sf":"QUICK-PLAY","it":"auto","st":8,"stl":[],"sa":"auto","ar":"https://i.imgur.com/NywTwhA.png","ad":"","as":"online","af":false,"arc":{"aru":"%","ara":1,"arx":0,"ary":0,"arw":100,"arh":100},"hbg":false,"bg":"","bgd":"","bf":false,"bgs":"online","bgt":"fit","bgc":{"bgx":16.5,"bgy":0,"bgw":67,"bgh":67,"bgu":"%","bga":1},"lm":["8","4","6"],"lr":"","il":true,"ip":false,"pf":"auto","pe":"","rs":"10","bs":"10","psi":"medium","ta":["Fiend","Link","Effect"],"es":{"cdtl":"strict","efs":"auto","eus":0,"ebg":"auto","eml":0,"ejr":100},"ps":{"pfs":"auto","pus":0,"pbg":"auto","pml":0,"pjr":100},"ef":"{{2+<img src=\\"https://i.postimg.cc/NFQSRSzT/effect-monster.png\\" offsetY=\\"-4\\" />}} / You cannot Special Summon <img name=\\"monster\\" src=\\"https://i.postimg.cc/RZ0mk6G3/monster.png\\" offsetY=\\"-4\\" />, except <img src=\\"icon-fire\\" /><img name=\\"monster\\" />. You can only use each of the following effects of \\"Promethean Princess, Bestower of Flames\\" once per turn. During your {Main Phase}: You can Special Summon 1 <img src=\\"icon-fire\\" /><img name=\\"monster\\" /> from your {<img name=\\"gy\\" src=\\"https://i.postimg.cc/Pr4159Hv/gy.png\\" />.} If a <img name=\\"monster\\" /> is Special Summoned to your opponent\'s field, while this card is in your <img name=\\"gy\\" /> (except during the Damage Step): You can target 1 <img src=\\"icon-fire\\" /><img name=\\"monster\\" /> you control and 1 <img name=\\"monster\\" /> your opponent controls; destroy them, and if you do, Special Summon this card.","si":"PHNI-EN052","atk":"2700","def":"","pw":"02772337","sti":"holo5","fe":"1<st> Edition","ife":true,"isp":true,"ile":false,"idt":false,"ilc":false,"cr":"\xa92020 Studio Dice/SHUEISHA, TV TOKYO, KONAMI","fh":true,"sts":[false,"#000000",false,"#000000"],"tts":[false,"#000000",false,"#000000"],"ets":[false,"#ffa500",false,"#000000"],"pts":[false,"#000000",false,"#000000"],"ots":[false,"#000000",false,"#000000"],"dl":["","","","","","",""],"fl":[0,0],"ve":3}'}].map(e=>{let{description:t,image:n,value:a}=e;return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)("img",{src:n,alt:"Sample Card"})}),Object(S.jsxs)("td",{children:[t,Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)(Jo.a,{size:"small",onClick:()=>{l({showCreativeOption:!0,showExtraDecorativeOption:!0}),r(ai(a).card)},children:"Use sample"})]})]},n)})]})})]})});var Bc;const Pc=()=>Object(S.jsx)("div",{className:"affiliation",children:Object(S.jsx)("div",{className:"affiliation-link",children:Object(S.jsx)("a",{href:"https://github.com/lauqerm/ygocarder",target:"_blank",rel:"noreferrer",children:Object(S.jsx)(sl.a,{})})})}),Mc=fr.b.div(Bc||(Bc=Object(mr.a)(["\n    align-content: center;\n    align-self: center;\n    border-left: var(--bw) dashed #b1b1b1;\n    padding-left: var(--spacing);\n    margin-left: var(--spacing);\n    height: 100%;\n    .button-label {\n        position: relative;\n    }\n    .manager-notice {\n        position: absolute;\n        color: var(--main-danger);\n        right: 0;\n        top: 0;\n        line-height: 1;\n    }\n"]))),Hc=e=>{let{applyCardData:t}=e;const{language:n,languageInfo:r,languageMetadataMap:i,changeLanguage:o}=Nr(e=>{let{languageInfo:t,language:n,languageMetadataMap:a,changeLanguage:r}=e;return{languageInfo:t,language:n,languageMetadataMap:a,changeLanguage:r}}),{cardList:l,isListDirty:s,toggleVisible:c,visible:d}=ni(Object(ui.useShallow)(e=>{let{cardList:t,isListDirty:n,toggleVisible:a,visible:r}=e;return{cardList:t,isListDirty:n,toggleVisible:a,visible:r}})),{setVisible:u,visible:b}=Uo(Object(ui.useShallow)(e=>{let{setVisible:t,visible:n}=e;return{setVisible:t,visible:n}})),m=Object(a.useRef)(null);return Object(S.jsxs)("div",{className:"app-header",children:[Object(S.jsx)("img",{alt:"app-logo",src:"".concat("/ygocarder","/logo192.png"),width:35}),Object(S.jsxs)("div",{className:"app-description",children:[Object(S.jsxs)("div",{className:"header-language",children:[Object(S.jsx)("h1",{children:"Yugioh Carder"}),Object(S.jsx)(Is.a.Group,{value:r.codeName,size:"small",className:"language-option",children:Object.values(i).filter(e=>{let{active:t}=e;return t}).map(e=>{let{codeName:t,name:n}=e;return Object(S.jsx)(Is.a.Button,{value:t,onChange:e=>o(e.target.value),children:n},t)})}),Object(S.jsx)(hr.a,{title:"Check the FAQ Button => Feedbacks to see if your issue is already answered.",children:Object(S.jsx)("span",{id:"sentry-bug-report",className:"bug-report",onMouseOver:()=>{var e;null===(e=document.getElementById(Xs))||void 0===e||e.classList.add("js-highlight")},onMouseOut:()=>{var e;null===(e=document.getElementById(Xs))||void 0===e||e.classList.remove("js-highlight")},children:Object(S.jsx)("div",{children:n["contributor.bug-report.tooltip"]})})}),Object(S.jsx)(_s,{}),Object(S.jsx)(Ys,{})]}),Object(S.jsxs)("div",{className:"app-contribution",children:[Object(S.jsxs)("span",{className:"app-creator",children:[n["contributor.gui.label"],": ",Object(S.jsx)("a",{href:"https://github.com/lauqerm/ygocarder",target:"_blank",rel:"noreferrer",children:Object(S.jsx)("b",{children:"Lauqerm"})}),"\xa0",Object(S.jsx)(vl,{content:Object(S.jsxs)(ls,{className:"disclaimer",children:[Object(S.jsx)("h2",{children:n["contributor.disclaimer.label"]}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:n["contributor.disclaimer.line-1"](Object(S.jsx)("a",{href:"https://lauqerm.github.io/ygocarder",children:"lauqerm.github.io/ygocarder"},"app-author"))}),Object(S.jsx)("li",{children:n["contributor.disclaimer.line-2"]}),Object(S.jsx)("li",{children:n["contributor.disclaimer.line-3"]}),Object(S.jsx)("li",{children:n["contributor.disclaimer.line-4"]}),Object(S.jsx)("li",{children:n["contributor.disclaimer.line-5"](Object(S.jsx)("a",{href:"https://www.deviantart.com/grezar",target:"_blank",rel:"noreferrer",children:"Grezar"},"template-maker-1"),Object(S.jsx)("a",{href:"https://www.deviantart.com/9558able",target:"_blank",rel:"noreferrer",children:"9558able"},"template-maker-2"))}),Object(S.jsx)("li",{children:n["contributor.disclaimer.line-6"]})]})]})})]}),Object(S.jsx)("span",{className:"template-creator",children:n["contributor.template-maker"](Object(S.jsx)("a",{href:"https://www.deviantart.com/grezar/art/SKILL-UPDATE-Series-10-Card-Proxy-Template-686736691",target:"_blank",rel:"noreferrer",children:Object(S.jsx)("b",{children:"Grezar"})},"artist-1"),Object(S.jsx)("a",{href:"https://www.deviantart.com/9558able/art/Yugioh-Series-10-Proxy-Template-DELUXE-EDITION-843282421",target:"_blank",rel:"noreferrer",children:Object(S.jsx)("b",{children:"9558able"})},"artist-2"),Object(S.jsx)("a",{href:"https://www.deviantart.com/slackermagician",target:"_blank",rel:"noreferrer",children:Object(S.jsx)("b",{children:"SlackerMagician"})},"artist-3"),Object(S.jsx)("a",{href:"https://www.deviantart.com/icycatelf",target:"_blank",rel:"noreferrer",children:Object(S.jsx)("b",{children:"icycatelf"})},"artist-4"))})]})]}),Object(S.jsx)(Mc,{className:"app-setting",children:Object(S.jsx)(Cs,{})}),Object(S.jsx)(Mc,{className:"card-manager",children:Object(S.jsx)(Cl,{className:ur("manager-button-label",d?"manager-active":""),onClick:()=>c(),children:Object(S.jsxs)("div",{className:"button-label",children:[Object(S.jsx)(cl.a,{}),Object(S.jsx)("label",{children:n["manager.icon.title"]}),s&&l.length>1&&Object(S.jsx)("div",{className:"manager-notice",children:"*"})]})})}),Object(S.jsxs)(Mc,{className:"preset-manager",children:[Object(S.jsx)(Cl,{className:ur("preset-manager-button-label",b?"preset-manager-active":""),onClick:()=>u(),children:Object(S.jsxs)("div",{className:"button-label",children:[Object(S.jsx)(dl.a,{}),Object(S.jsx)("label",{children:n["preset.manager.label"]})]})}),Object(S.jsx)(Nc,{language:n})]}),Object(S.jsxs)(Mc,{className:"sample-card",children:[Object(S.jsx)(Cl,{className:ur("preset-sample-button-label"),onClick:()=>{var e;null===(e=m.current)||void 0===e||e.open()},children:Object(S.jsxs)("div",{className:"button-label",children:[Object(S.jsx)(ul.a,{}),Object(S.jsx)("label",{children:n["sample.manager.label"]})]})}),Object(S.jsx)(Dc,{ref:m,language:n,applyCardData:t})]})]})},Ac=()=>{const e=Rr();return Object(S.jsxs)(ls,{className:"disclaimer",children:[Object(S.jsx)("h2",{children:e["alert.explaination.tainted.first-question"]}),Object(S.jsx)("p",{children:e["alert.explaination.tainted.first-answer"]}),Object(S.jsx)("h2",{children:e["alert.explaination.tainted.second-question"]}),Object(S.jsx)("p",{children:e["alert.explaination.tainted.second-answer"]}),Object(S.jsx)("h2",{children:e["alert.explaination.tainted.third-question"]}),Object(S.jsx)("p",{children:e["alert.explaination.tainted.third-answer"]})]})},Wc=()=>Object(S.jsx)(vl,{overlayClassName:"disclaimer-overlay",content:Object(S.jsx)(Ac,{})});var Kc=n(624),Yc=n(649);n(503);const Uc=["caption","containerProps","alt"];var Gc,Xc,Vc,qc;const{Panel:_c}=Kc.a,Jc=fr.b.div(Gc||(Gc=Object(mr.a)(["\n    white-space: pre-line;\n    h2 {\n        margin-top: var(--spacing);\n    }\n"]))),$c=fr.b.div(Xc||(Xc=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: 615fr 703fr;\n    gap: var(--spacing-sm);\n    padding: var(--spacing-sm) 0;\n    overflow: hidden;\n    .panel-box {\n        min-width: 0;\n        position: relative;\n        overflow: hidden;\n    }\n"]))),Qc=fr.b.div(Vc||(Vc=Object(mr.a)(["\n    min-width: 0;\n    position: relative;\n    overflow: hidden;\n    .caption {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        padding: var(--spacing-px) var(--spacing-sm);\n        background: var(--main-level-5);\n        border-radius: var(--br-lg) 0 0 0;\n        box-shadow: var(--bs-block);\n    }\n    > img {\n        max-width: 100%;\n        border: var(--bw) solid var(--sub-level-1);\n        border-radius: var(--br-lg);\n    }\n"]))),Zc=fr.b.div(qc||(qc=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));\n    .special-path-item {\n        display: grid;\n        grid-template-columns: 20px 180px;\n        gap: var(--spacing-xs);\n        align-items: center;\n        img {\n            max-width: 20px;\n            max-height: 20px;\n        }\n    }\n    + .path-container {\n        margin-top: var(--spacing);\n    }\n"]))),ed=e=>{let{path:t,imagePath:n}=e;return Object(S.jsxs)("div",{className:"special-path-item",children:[Object(S.jsx)("div",{className:"image",children:Object(S.jsx)("img",{src:"".concat("/ygocarder","/asset/image/").concat(n),alt:t})}),Object(S.jsx)("div",{className:"path",children:Object(S.jsx)(Xl,{data:t,children:t})})]})},td=e=>{let{caption:t,containerProps:n,alt:a}=e,r=Object(oa.a)(e,Uc);const{className:i}=null!==n&&void 0!==n?n:{};return Object(S.jsxs)(Qc,{className:"image-with-caption ".concat(i),children:[Object(S.jsx)("img",Object(l.a)({alt:a},r)),Object(S.jsx)("div",{className:"caption",children:t})]})},nd=()=>{const[e,t]=Object(a.useState)(!1),n=Rr();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(zl.a,{footer:null,visible:e,width:"60%",title:Object(S.jsxs)("div",{className:"overlay-title",children:[n["guide.format.label"],"\xa0\xa0",Object(S.jsx)(Jo.a,{size:"small",type:"primary",onClick:()=>{t(!1)},children:n["generic.close.label"]})]}),className:"formattting-guide-overlay",onClose:()=>{t(!1)},children:Object(S.jsxs)(Jc,{children:[Object(S.jsxs)("p",{children:[n["guide.format.introduction"](Object(S.jsx)(yl.a,{},"icon")),"."]}),Object(S.jsx)("h2",{children:n["guide.format.section-1.label"]}),n["guide.format.section-1.content"](Object(S.jsx)(Kl,{children:"["},"open-tag"),Object(S.jsx)(Kl,{children:"]"},"close-tag"),Object(S.jsx)(Kl,{children:"Ctrl+1"},"hotkey"),Object(S.jsx)(Kl,{children:"\u2318+1"},"hokey-alternative")),Object(S.jsxs)($c,{className:"panel-figure",children:[Object(S.jsx)(td,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-1-raw.jpg"),caption:n["guide.format.caption.input"]}),Object(S.jsx)(td,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-1-preview.jpg"),caption:n["guide.format.caption.output"]})]}),Object(S.jsx)("h2",{children:n["guide.format.section-6.label"]}),n["guide.format.section-6.content"](Object(S.jsx)(Kl,{children:"[["},"open-tag"),Object(S.jsx)(Kl,{children:"]]"},"close-tag"),Object(S.jsx)(Kl,{children:"Ctrl+Shift+1"},"hotkey"),Object(S.jsx)(Kl,{children:"\u2318+Shift+1"},"hokey-alternative")),Object(S.jsxs)($c,{className:"panel-figure",children:[Object(S.jsx)(td,{containerProps:{className:"panel-box box-raw"},alt:"justified non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-6-raw.jpg"),caption:n["guide.format.caption.input"]}),Object(S.jsx)(td,{containerProps:{className:"panel-box box-preview"},alt:"justified non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-6-preview.jpg"),caption:n["guide.format.caption.output"]})]}),Object(S.jsx)("h2",{children:n["guide.format.section-2.label"]}),n["guide.format.section-2.content"](Object(S.jsx)(Kl,{children:"{"},"open-tag"),Object(S.jsx)(Kl,{children:"}"},"close-tag"),Object(S.jsx)(Kl,{children:"Ctrl+2"},"hotkey"),Object(S.jsx)(Kl,{children:"\u2318+2"},"hokey-alternative")),Object(S.jsxs)($c,{className:"panel-figure",children:[Object(S.jsx)(td,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-2-raw.jpg"),caption:n["guide.format.caption.input"]}),Object(S.jsx)(td,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-2-preview.jpg"),caption:n["guide.format.caption.output"]})]}),Object(S.jsx)("h2",{children:n["guide.format.section-3.label"]}),n["guide.format.section-3.content"](Object(S.jsx)(Kl,{children:"|"},"separator"),Object(S.jsx)(Kl,{children:"Ctrl+3"},"hotkey"),Object(S.jsx)(Kl,{children:"\u2318+3"},"hokey-alternative")),Object(S.jsxs)($c,{className:"panel-figure",children:[Object(S.jsx)(td,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-3-raw.jpg"),caption:n["guide.format.caption.input"]}),Object(S.jsx)(td,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-3-preview.jpg"),caption:n["guide.format.caption.output"]})]}),Object(S.jsx)("h2",{children:n["guide.format.section-4.label"]}),n["guide.format.section-4.content"](Object(S.jsx)(Kl,{children:"||"},"separator"),Object(S.jsx)(Kl,{children:"Ctrl+4"},"hotkey"),Object(S.jsx)(Kl,{children:"\u2318+4"},"hokey-alternative")),Object(S.jsxs)($c,{className:"panel-figure",children:[Object(S.jsx)(td,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-4-raw.jpg"),caption:n["guide.format.caption.input"]}),Object(S.jsx)(td,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-4-preview.jpg"),caption:n["guide.format.caption.output"]})]}),Object(S.jsx)("h2",{children:n["guide.format.section-5.label"]}),n["guide.format.section-5.content"](Object(S.jsx)(Kl,{children:"{{"},"open-tag"),Object(S.jsx)(Kl,{children:"}}"},"close-tag"),Object(S.jsx)(Kl,{children:"Ctrl+5"},"hotkey"),Object(S.jsx)(Kl,{children:"\u2318+5"},"hokey-alternative")),Object(S.jsxs)($c,{className:"panel-figure",children:[Object(S.jsx)(td,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-5-raw.jpg"),caption:n["guide.format.caption.input"]}),Object(S.jsx)(td,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-5-preview.jpg"),caption:n["guide.format.caption.output"]})]}),Object(S.jsx)("h2",{children:n["guide.format.section-7.label"]}),n["guide.format.section-7.content"](Object(S.jsx)(Kl,{children:"<i>"},"open-tag"),Object(S.jsx)(Kl,{children:"</i>"},"close-tag"),Object(S.jsx)(Kl,{children:"Ctrl+I"},"hotkey"),Object(S.jsx)(Kl,{children:"\u2318+I"},"hokey-alternative")),Object(S.jsxs)($c,{className:"panel-figure",children:[Object(S.jsx)(td,{containerProps:{className:"panel-box box-raw"},alt:"italic text raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-7-raw.jpg"),caption:n["guide.format.caption.input"]}),Object(S.jsx)(td,{containerProps:{className:"panel-box box-preview"},alt:"italic text preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-7-preview.jpg"),caption:n["guide.format.caption.output"]})]}),Object(S.jsx)("h2",{children:n["guide.format.section-8.label"]}),n["guide.format.section-8.content"](Object(S.jsx)(Kl,{children:"<b>"},"open-tag"),Object(S.jsx)(Kl,{children:"</b>"},"close-tag"),Object(S.jsx)(Kl,{children:"Ctrl+B"},"hotkey"),Object(S.jsx)(Kl,{children:"\u2318+B"},"hokey-alternative")),Object(S.jsxs)($c,{className:"panel-figure",children:[Object(S.jsx)(td,{containerProps:{className:"panel-box box-raw"},alt:"bold text raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-8-raw.jpg"),caption:n["guide.format.caption.input"]}),Object(S.jsx)(td,{containerProps:{className:"panel-box box-preview"},alt:"bold text preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-8-preview.jpg"),caption:n["guide.format.caption.output"]})]}),Object(S.jsx)("h2",{children:n["guide.format.section-9.label"]}),n["guide.format.section-9.content"](Object(S.jsx)(Kl,{children:"<img />"},"open-tag")),Object(S.jsx)(Kc.a,{ghost:!0,children:Object(S.jsx)(_c,{header:Object(S.jsx)("div",{children:n["guide.format.section-9.special-path.content"]}),children:[Object(S.jsx)(Zc,{children:[...Object.values(P).filter(e=>{let{isOption:t}=e;return!0===t}).flatMap(e=>{let{imagePresetSource:t,imagePresetPath:n}=e;return Object(S.jsx)(ed,{path:n,imagePath:t},n)})]},"subfamily-st"),Object(S.jsx)(Zc,{children:[...Object.values(W).filter(e=>{let{isOption:t}=e;return!0===t}).flatMap(e=>{let{imagePresetSource:t,imagePresetPath:n}=e;return Object(S.jsx)(ed,{path:n,imagePath:t},n)})]},"subfamily-icon"),Object(S.jsx)(Zc,{children:[...Object.values(H).flatMap(e=>{let{imagePresetSource:t,imagePresetPath:n}=e;return Object(S.jsx)(ed,{path:n,imagePath:t},n)})]},"subfamily-attribute"),...Je.map((e,t)=>Object(S.jsx)(Zc,{className:"path-container",children:e.map(e=>{let{imagePresetPath:t,imagePresetSource:n}=e;return Object(S.jsx)(ed,{path:t,imagePath:n},t)})},"region-".concat(t)))]},"sample-option")}),Object(S.jsxs)($c,{className:"panel-figure",children:[Object(S.jsx)(td,{containerProps:{className:"panel-box box-raw"},alt:"image raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-9-raw.jpg"),caption:n["guide.format.caption.input"]}),Object(S.jsx)(td,{containerProps:{className:"panel-box box-preview"},alt:"image preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-9-preview.jpg"),caption:n["guide.format.caption.output"]})]})]})}),Object(S.jsxs)(Jo.a,{className:"formatting-help-button",type:"primary",onClick:()=>{t(!0)},children:[n["guide.format.label"]," ",Object(S.jsx)(Yc.a,{})]})]})};var ad,rd;const id=fr.b.div(ad||(ad=Object(mr.a)(["\n    display: grid;\n    ","\n    > label {\n        cursor: pointer;\n        padding: 0 var(--spacing-xxs);\n        text-align: center;\n    }\n    &:focus {\n        background-color: var(--main-level-3);\n    }\n    &:focus-visible {\n        background-color: var(--main-level-3);\n    }\n"])),e=>{let{$withPillar:t}=e;return t?"grid-template-columns: max-content 1fr;":"grid-template-columns: 1fr;"}),od=fr.b.div(rd||(rd=Object(mr.a)(["\n    display: inline-block;\n    width: 10px;\n"]))),ld=e=>{let{id:t,tabIndex:n,nameKey:a,labelBackgroundColor:r,labelBackgroundColorList:i,className:o,onClick:l}=e;const s=Rr();return Object(S.jsxs)(id,{id:t,tabIndex:n,className:"frame-info-block ".concat(null!==o&&void 0!==o?o:""),$withPillar:!(!r&&!i),onClick:l,children:[i?Object(S.jsx)(od,{children:i.map(e=>Object(S.jsx)("div",{style:{backgroundColor:e,height:"".concat(100/i.length,"%")}},e))}):r?Object(S.jsx)(od,{style:{backgroundColor:r}}):null,Object(S.jsx)("label",{className:"frame-info-block-label",children:s[a]})]})};var sd,cd=n(150),dd=n(321),ud=n.n(dd),bd=n(650),md=n(651),pd=n(652),gd=n(608);const hd=fr.b.div(sd||(sd=Object(mr.a)(["\n    display: flex;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-image: linear-gradient(#fafafaaa, #fafafaaa);\n    justify-content: center;\n    align-items: center;\n    z-index: 999;\n"]))),fd=()=>Object(S.jsx)(gd.a,{});fd.FullView=()=>Object(S.jsx)(hd,{className:"loading-fullview",children:Object(S.jsx)(gd.a,{size:"large"})});n(510),n(511);const vd=(e,t,n)=>{if(!t)return e;const{width:a,height:r,x:i=0,y:o=0,unit:s}=e;if("px"===s){const e=.8,r=400/300,{width:l,height:s}=t,c=s/l>=e?r:1,d=Math.min((null!==i&&void 0!==i?i:0)*c,l),u=Math.min((null!==o&&void 0!==o?o:0)*c,s),b=Math.min((null!==a&&void 0!==a?a:0)*c,l);return{unit:"%",x:d/l*100,y:u/s*100,width:b/l*100,height:b/(null!==n&&void 0!==n?n:1)/s*100,aspect:n}}if(i<0)return Object(l.a)(Object(l.a)({},e),{},{x:0});if(o<0)return Object(l.a)(Object(l.a)({},e),{},{y:0});const{naturalHeight:c,naturalWidth:d}=t,u=null!==a&&void 0!==a?a:0,b=null!==r&&void 0!==r?r:0,m=.05*(c>d?c:d),p=Math.abs(b*c*n-u*d)<=m?b:u*t.naturalWidth/n/t.naturalHeight,g=p/100,h=g>1?100:p,f=g>1?u/g:u,v=g>1?(100-f)/2:i<0?0:i,y=g>1||o<0?0:o;return Object(l.a)(Object(l.a)({},e),{},{x:v,y:y,height:h,width:f,aspect:n})},yd=Object(a.forwardRef)((e,t)=>{let{title:n,backgroundColor:r,className:i,forceFit:o,defaultSourceType:s,defaultInternalSource:c="",defaultExternalSource:d="",receivingCanvas:u,children:b,beforeCropper:m,defaultCropInfo:p,ratio:g,onSourceLoaded:h=()=>{},onSourceChange:f=()=>{},onCropChange:v=()=>{},onTainted:y=()=>{},onMaxSizeExceeded:j=()=>{},onForceFitChange:x=()=>{}}=e;const O="offline"===s?"offline":"online",w=Rr(),k=Object(a.useRef)(null),[C,F]=Object(a.useState)("anonymous"),[L,T]=Object(a.useState)(0),[N,R]=Object(a.useState)(O),[I,E]=Object(a.useState)(O),[z,D]=Object(a.useState)(c),[B,P]=Object(a.useState)(!1),[M,H]=mi("activeDropzone"),[A,W]=Object(a.useState)(null),[K,Y]=Object(a.useState)(!1),[U,G]=Object(a.useState)(d),X=Object(a.useRef)(null),[V,q]=Object(a.useState)({current:p,completed:null}),[_,J]=Object(a.useState)("%"===p.unit),{current:$,completed:Q}=V,Z=e=>{const t=e[0];if(!t)return;if(t.size<4194304){P(!0);const e=new FileReader;e.addEventListener("load",()=>{"string"===typeof e.result&&(F("anonymous"),D(e.result),R("offline"),E("offline"),f("offline",e.result),P(!1))}),e.readAsDataURL(t)}else j(4)},ee=Object(a.useRef)({source:"",crop:null}),te=Object(a.useCallback)(e=>{if(P(!1),W(null),h(C),X.current=e,e.src===ee.current.source&&ee.current.crop){const t=ne.current;setTimeout(()=>{if(t!==ne.current||!ee.current.crop)return;const n=vd(ee.current.crop,e,g);q({completed:n,current:n}),J(!0),ee.current={source:"",crop:null}},250)}else setTimeout(()=>{q(t=>{const n=vd(t.current,e,g);return{completed:n,current:n}}),J(!0)},250)},[C,h,g]);Object(a.useEffect)(()=>{var e,t,n,a;const r=X.current;if(!Q||!u||!r)return;const{aspect:i}=Q;u.style.transform="scale(2)";const s=u.getContext("2d");if(!s||"number"!==typeof i||i<=0||B)return;const{naturalHeight:c,naturalWidth:d}=r,b=d/r.width,m=c/r.height,p=null!==(e=Q.unit)&&void 0!==e?e:"px",g=window.devicePixelRatio;s.setTransform(g,0,0,g,0,0);let h,f=Math.floor((null!==(t=Q.width)&&void 0!==t?t:0)*("px"===p?b:d/100)),y=Math.min(d,f),j=Math.floor(f/i),x=Math.min(c,j),O=Math.min(d,Math.floor((null!==(n=Q.x)&&void 0!==n?n:0)*("px"===p?b:d/100))),w=Math.min(c,Math.floor((null!==(a=Q.y)&&void 0!==a?a:0)*("px"===p?m:c/100)));if(s.imageSmoothingQuality="high",!(y<=0||x<=0)){if(O+y>d||w+x>c||O<0||w<0||Math.abs((f-y)/y)>.01||Math.abs((j-x)/x)>.01){"width"===(i*c>d?"width":"height")?(y=d,x=y/i,O=0,w=(c-x)/2,h={unit:"%",aspect:i,height:x/c*100,width:y/d*100,x:0,y:w/c*100}):(y=c*i,x=c,O=(d-y)/2,w=0,h={unit:"%",aspect:i,height:x/c*100,width:y/d*100,x:O/d*100,y:0})}if(o){"width"===(i*c>d?"width":"height")?(y=d,x=y/i):(y=c*i,x=c),u.width=y,u.height=x,s.drawImage(r,0,0,d,c,0,0,y,x)}else{var k,S;u.width=null!==(k=y)&&void 0!==k?k:0,u.height=null!==(S=x)&&void 0!==S?S:0,s.drawImage(r,O,w,y,x,0,0,y,x)}"offline"===N&&(null!==z&&void 0!==z?z:"").length<=0||i===Q.aspect&&v(Q,N,K),h&&q(e=>Object(l.a)(Object(l.a)({},e),{},{current:h}))}},[Q,u,L,o]),Object(a.useEffect)(()=>{Y(!1),q(e=>{if(null!=X.current&&e.current){const t=vd(e.current,X.current,g);return{current:t,completed:t}}return e})},[g]);const ne=Object(a.useRef)(0);Object(a.useImperativeHandle)(t,()=>({isLoading:()=>B,hasImage:()=>"string"===typeof z&&z.length>0&&"offline"===N||"string"===typeof U&&U.length>0&&"online"===N,forceSource:(e,t,n)=>{const a="offline"===N?z:U;Y(!1),a!==t&&(P(!0),R(e),E(e),f(e,t),"offline"===e?D(t):G(t)),F("anonymous"),J("%"===n.unit),ne.current+=1,ee.current={source:t,crop:n},T(e=>e+1)}}));const ae="offline"===N&&(null!==z&&void 0!==z?z:"").length>0||"online"===N&&(null!==U&&void 0!==U?U:"").length>0,re=u&&ae&&!B&&(null===Q||void 0===Q?void 0:Q.width)&&(null===Q||void 0===Q?void 0:Q.height);return Object(S.jsxs)("div",{className:ur("card-image-cropper",i),children:[Object(S.jsxs)("div",{className:"card-image-source-input",children:[Object(S.jsxs)("div",{className:"card-image-source-input-container",children:[Object(S.jsxs)("div",{className:"card-image-source-input-title",children:[Object(S.jsxs)("span",{className:"field-title",children:[n," ",Object(S.jsx)(Sl,{Icon:bd.a,containerProps:{className:re?"":"disabled"},tooltipProps:{overlay:re?w["image-cropper.download"]:w["image-cropper.no-download"]},onClick:()=>re&&u&&function(e,t){t&&e&&e.toBlob(e=>{if(null!==e){const t=window.URL.createObjectURL(e),n=document.createElement("a");n.download="crop-preview.png",n.href=URL.createObjectURL(e),n.click(),window.URL.revokeObjectURL(t)}},"image/png",1)}(u,Q)})]}),Object(S.jsxs)(Is.a.Group,{className:"card-image-source-type-input",onChange:e=>{const t=e.target.value;E(t),((null!==z&&void 0!==z?z:"").length>0&&"offline"===t||(null!==U&&void 0!==U?U:"").length>0&&"online"===t)&&(R(t),"offline"===t?(F("anonymous"),f("offline",z)):f("online",U))},value:I,children:[Object(S.jsx)(hr.a,{title:Object(S.jsx)("div",{className:"image-info",children:w["image-cropper.online-tip"]}),children:Object(S.jsx)(Is.a.Button,{value:"online",checked:"online"===I,children:w["image-cropper.source.online.tooltip"]})}),Object(S.jsx)(hr.a,{title:Object(S.jsx)("div",{className:"image-warning",children:w["image-cropper.offline-warning"]}),children:Object(S.jsx)(Is.a.Button,{value:"offline",checked:"offline"===I,children:w["image-cropper.source.offline.tooltip"]})})]})]}),Object(S.jsx)("div",{className:["card-image-input","online"===I?"":"input-inactive"].join(" "),children:Object(S.jsx)(fc.a,{placeholder:w["image-cropper.placeholder"],value:U,onChange:e=>{const t=e.target.value;F("anonymous"),P(!0),R("online"),E("online"),f("online",t),G(t)},maxLength:512,allowClear:!0},"key")}),Object(S.jsx)("div",{className:["card-image-input","offline"===I?"":"input-inactive"].join(" "),children:Object(S.jsx)(fc.a,{ref:k,type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files.length>0?Z(e.target.files):alert(w["image-cropper.not-found-warning"])},onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.setValue("")}})})]}),b]}),m,Object(S.jsxs)("div",{className:ur("card-cropper"),onKeyDown:()=>{Y(!0)},children:[Object(S.jsx)(hs,{$visible:M>0,className:"drop-zone",onDragOver:e=>e.preventDefault(),onDrop:e=>{if(e.preventDefault(),H(0),e.currentTarget.classList.contains("drop-zone")){const t=e.dataTransfer.files;Z(t)}},children:Object(S.jsx)("label",{children:w["image-cropper.drop.tooltip"]})}),B&&Object(S.jsx)(fd.FullView,{}),ae&&!A&&Object(S.jsxs)("div",{className:"card-image-option",children:[Object(S.jsx)(hr.a,{placement:"left",overlay:o?w["image-cropper.button.use-crop.tooltip"]:w["image-cropper.button.force-fit.tooltip"],children:Object(S.jsx)("div",{className:ur("image-option force-fit-option",o?"option-active":""),onClick:()=>{Y(!0),x(!o)},children:Object(S.jsx)(md.a,{})})}),!o&&Object(S.jsx)(hr.a,{placement:"left",overlay:w["image-cropper.button.center-vertical.tooltip"],children:Object(S.jsx)("div",{className:"image-option alignment-center-option",onClick:()=>{Y(!0),q(e=>{var t;const{width:n,x:a}=null!==(t=e.completed)&&void 0!==t?t:{};if("number"!==typeof n||"number"!==typeof a)return e;const r=Object(l.a)(Object(l.a)({},e.completed),{},{x:(100-n)/2});return{current:r,completed:r}})},children:Object(S.jsx)(pd.a,{})})}),!o&&Object(S.jsx)(hr.a,{placement:"left",overlay:w["image-cropper.button.center-horizontal.tooltip"],children:Object(S.jsx)("div",{className:"image-option alignment-middle-option",onClick:()=>{Y(!0),q(e=>{var t;const{height:n,y:a}=null!==(t=e.completed)&&void 0!==t?t:{};if("number"!==typeof n||"number"!==typeof a)return e;const r=Object(l.a)(Object(l.a)({},e.completed),{},{y:(100-n)/2});return{current:r,completed:r}})},children:Object(S.jsx)(pd.a,{})})})]}),(!ae||A&&void 0===C)&&!B&&Object(S.jsx)(cd.a,{description:w["image-cropper.not-found-warning"],image:null}),Object(S.jsx)(ud.a,{src:"offline"===N?z:U,disabled:o,className:o?"force-fitted":"",imageStyle:r?{backgroundColor:r}:{backgroundImage:'url("'.concat("/ygocarder",'/asset/image/texture/transparent-tile.png")')},onImageLoaded:te,onImageError:()=>{if(u)if("online"===N&&""===(null!==U&&void 0!==U?U:"")||"offline"===N&&""===(null!==z&&void 0!==z?z:"")){ee.current={source:"",crop:null};const{width:e,height:t}=u,n=u.getContext("2d");null===n||void 0===n||n.clearRect(0,0,e,t),Q&&v(Q,N,K),h(C),P(!1),W("Image not found")}else F(void 0),y();else ee.current={source:"",crop:null},P(!1),W("No receiving canvas"),y();void 0===C&&(P(!1),W("Tainted canvas"))},crop:$,onDragStart:()=>{Y(!0)},onChange:(e,t)=>{const n=X.current;ee.current.crop||B||(_?q(e=>Object(l.a)(Object(l.a)({},e),{},{current:vd(t,n,g)})):(J(!0),q(t=>Object(l.a)(Object(l.a)({},t),{},{current:vd(e,n,g)}))))},onComplete:(e,t)=>{ee.current.crop&&!B||q(e=>Object(l.a)(Object(l.a)({},e),{},{completed:t}))},ruleOfThirds:!0,crossorigin:C},"".concat(N,"-").concat(_,"-").concat(L))]})]})});var jd;const xd=fr.b.div(jd||(jd=Object(mr.a)(["\n    color: var(--color);\n    text-shadow: var(--ts);\n    font-weight: 500;\n    padding: 5px;\n    display: grid;\n    grid-template-columns: max-content 1fr;\n    gap: 3px;\n    .color-list {\n        display: flex;\n        flex-wrap: nowrap;\n        gap: 3px;\n    }\n    .color-input {\n        display: grid;\n        grid-template-columns: max-content 1fr;\n        border-left: var(--bw-lg) solid var(--sub-level-4);\n        gap: 3px; // Alignment\n        padding-left: 3px; // Alignment\n        input {\n            width: 58px; // Alignment\n            font-size: var(--fs-sm);\n            line-height: 1;\n            border: none;\n            padding: 0 5px;\n        }\n    }\n"]))),Od=[{hex:"#FFFFFF",rgb:[255,255,255]},{hex:"#000000",rgb:[0,0,0]},{hex:"#FF0000",rgb:[255,0,0]},{hex:"#FFFF00",rgb:[255,255,0]},{hex:"#00FF00",rgb:[0,255,0]},{hex:"#00FFFF",rgb:[0,255,255]},{hex:"#0000FF",rgb:[0,0,255]},{hex:"#FF00FF",rgb:[255,0,255]}],wd=e=>{let{value:t="",onChange:n}=e;const{color:a,inputText:r,setColor:i}=di({value:t,onChange:n});return Object(S.jsxs)(xd,{children:[Object(S.jsx)("div",{className:"color-list",children:Od.map(e=>{let{hex:t,rgb:r}=e;const i=Va(r);return Object(S.jsx)(Dl,{className:"color-block",title:t,style:{backgroundColor:t},onClick:()=>null===n||void 0===n?void 0:n(t),children:a.hex.toUpperCase()===t&&Object(S.jsx)("div",{className:"active-dot",style:{backgroundColor:i}})},t)})}),Object(S.jsxs)("div",{className:"color-input",children:[Object(S.jsx)(Dl,{$static:!0,style:{backgroundColor:a.hex}}),Object(S.jsx)(fc.a,{size:"small",value:r,onChange:e=>{i(e.target.value)}})]})]})};var kd=n(70),Sd=n(326);const Cd=["onChange"];var Fd,Ld;const Td=fr.b.div(Fd||(Fd=Object(mr.a)(["\n    position: relative;\n    border-radius: var(--br);\n    > div,\n    .saturation-white,\n    .saturation-black {\n        border-radius: var(--br);\n    }\n"]))),Nd=Object(kd.c)(e=>{let{onChange:t}=e,n=Object(oa.a)(e,Cd);return Object(S.jsx)(Td,{children:Object(S.jsx)(Sd.Saturation,Object(l.a)(Object(l.a)({},n),{},{onChange:e=>{null===t||void 0===t||t(e)}}))})}),Rd=[{hex:"#B80000",rgb:[184,0,0]},{hex:"#EB9694",rgb:[235,150,148]},{hex:"#DB3E00",rgb:[219,62,0]},{hex:"#FAD0C3",rgb:[250,208,195]},{hex:"#FCCB00",rgb:[252,203,0]},{hex:"#FEF3BD",rgb:[254,243,189]},{hex:"#008B02",rgb:[0,139,2]},{hex:"#C1E1C5",rgb:[193,225,197]},{hex:"#006B76",rgb:[0,107,118]},{hex:"#BEDADC",rgb:[190,218,220]},{hex:"#1273DE",rgb:[18,115,222]},{hex:"#C4DEF6",rgb:[196,222,246]},{hex:"#004DCF",rgb:[0,77,207]},{hex:"#BED3F3",rgb:[190,211,243]},{hex:"#5300EB",rgb:[83,0,235]},{hex:"#D4C4FB",rgb:[212,196,251]}],Id=fr.b.div(Ld||(Ld=Object(mr.a)(["\n    position: relative;\n    display: grid;\n    grid-template-columns: 3.5rem 5rem 4rem max-content 1fr;\n    gap: var(--spacing-sm);\n    .color-input {\n        .color-state {\n            display: flex;\n            margin-bottom: var(--spacing-xs);\n        }\n        "," {\n            display: inline-block;\n            flex: 1;\n            border: var(--bw) solid var(--sub-level-2);\n            height: 18px;\n        }\n    }\n    .color-list {\n        display: grid;\n        grid-template-columns: repeat(",", max-content);\n        border-radius: var(--br);\n        overflow: hidden;\n        "," {\n            height: 16px;\n            width: 16px;\n            box-shadow: none;\n            border-radius: 0;\n        }\n    }\n    .rgb-input {\n        display: grid;\n        grid-template-columns: 1rem 1fr;\n        column-gap: var(--spacing-xs);\n        font-size: var(--fs-sm);\n        input {\n            line-height: 1;\n            font-size: var(--fs-sm);\n        }\n        + .rgb-input {\n            margin-top: var(--spacing-xxs);\n        }\n    }\n"])),Dl,Rd.length/4,Dl),Ed=e=>{let{children:t,onChange:n,value:a}=e;const{color:r,inputText:i,setColor:o}=di({value:a,onChange:n}),l=""===i;return Object(S.jsxs)(Id,{className:"horizontal-sketch-picker",children:[Object(S.jsx)("div",{className:"input-label",children:t}),Object(S.jsxs)("div",{className:"color-input",children:[Object(S.jsxs)("div",{className:"color-state",children:[Object(S.jsx)(Dl,{$empty:l,style:l?{}:{backgroundColor:r.hex}}),Object(S.jsx)(Sl,{size:"sm",Icon:jr.a,onClick:()=>{null===n||void 0===n||n("")}})]}),Object(S.jsx)(fc.a,{size:"small",value:i,onChange:e=>{o(e.target.value)}})]}),Object(S.jsx)("div",{className:"rgb-input-list",children:["R","G","B"].map((e,t)=>Object(S.jsxs)("div",{className:"rgb-input",children:[Object(S.jsx)("span",{children:e}),Object(S.jsx)(fc.a,{size:"small",value:l?"":r.rgb[t],onChange:e=>{const n=[...r.rgb];var a;n[t]=parseInt(e.target.value),o("#"+Xa((a=n)[0])+Xa(a[1])+Xa(a[2]))}})]},e))}),Object(S.jsx)("div",{className:"color-list",children:Rd.map(e=>{let{hex:t,rgb:a}=e;const i=Va(a);return Object(S.jsx)(Dl,{className:"color-block",title:t,style:{backgroundColor:t},onClick:()=>null===n||void 0===n?void 0:n(t),children:r.hex.toUpperCase()===t&&Object(S.jsx)("div",{className:"active-dot",style:{backgroundColor:i}})},t)})}),Object(S.jsx)(Nd,{color:r.hex,onChange:e=>{let{hex:t}=e;return o(t)}})]})};var zd,Dd=n(211),Bd=n(249),Pd=n(653),Md=n(654),Hd=n(655);const{height:Ad,width:Wd}=d,Kd=fr.b.div(zd||(zd=Object(mr.a)(["\n    width: ","px;\n    height: ","px;\n    overflow: hidden;\n    position: relative;\n    line-height: 0;\n    .card-lightbox-control {\n        position: absolute;\n        z-index: 1;\n        top: var(--spacing);\n        right: var(--spacing);\n        user-select: none;\n        text-align: right;\n        .action-list {\n            display: inline-flex;\n            gap: var(--spacing-xs);\n        }\n        .control-info {\n            background-color: var(--main-level-1);\n            padding: var(--spacing-xs);\n            margin-top: var(--spacing-xs);\n            border-radius: var(--br);\n            border: var(--bw) solid var(--sub-level-1);\n            line-height: 1;\n            box-shadow: var(--bs-1);\n        }\n    }\n    .card-lightbox-content {\n        cursor: grab;\n    }\n"])),Wd,Ad),Yd=e=>{let{zoomIn:t,zoomOut:n,resetTransform:a,setTransform:r,scale:i,globalScale:o,width:l,height:s}=e;return Object(S.jsxs)("div",{className:"control-container",children:[Object(S.jsxs)("div",{className:"action-list",children:[Object(S.jsx)(cs,{disabled:i>=4,onClick:()=>{t()},children:Object(S.jsx)(Pd.a,{})}),Object(S.jsx)(cs,{disabled:i<=1/o,onClick:()=>{n()},children:Object(S.jsx)(Md.a,{})}),Object(S.jsx)(cs,{onClick:()=>{a()},children:Object(S.jsx)(Hd.a,{})}),Object(S.jsx)(cs,{onClick:()=>{r(-Math.max(0,l-Wd)/2,-Math.max(0,s-Ad)/2,1)},children:Object(S.jsx)(md.a,{})})]}),Object(S.jsxs)("div",{className:"control-info",children:[i&&Object(S.jsxs)(S.Fragment,{children:["\xd7",i<1?"1/".concat(Math.round(1/i*10)/10):Math.round(10*i)/10]}),"\xa0(",l," \xd7 ",s,")"]})]})},Ud=Object(a.forwardRef)((e,t)=>{let{globalScale:n}=e;const[r,i]=Object(a.useState)(!1),[o,s]=Object(a.useState)(0),c=Object(a.useRef)(null),d=Object(a.useRef)(null),[u,b]=Object(a.useState)(()=>1/n);return Object(a.useImperativeHandle)(t,()=>({setVisible:i,draw:e=>{var t,n;null===(t=c.current)||void 0===t||null===(n=t.getContext("2d"))||void 0===n||n.drawImage(e,0,0)},refresh:()=>s(e=>e+1),getCanvasKey:()=>o})),Object(a.useEffect)(()=>{var e;null===(e=d.current)||void 0===e||e.resetTransform()},[n]),Object(S.jsx)(pr.a,{width:"".concat(Wd+30,"px"),wrapClassName:"card-lightbox-overlay",visible:r,forceRender:!0,onCancel:()=>i(!1),footer:null,children:Object(S.jsx)(Kd,{className:"card-lightbox-container",children:Object(S.jsx)(Bd.b,{ref:d,initialScale:1/n,initialPositionX:0,initialPositionY:0,minScale:1/n,maxScale:4,onTransformed:e=>{b(e.state.scale)},children:e=>{let t=Object.assign({},(Object(Dd.a)(e),e));return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"card-lightbox-control",children:Object(S.jsx)(Yd,Object(l.a)(Object(l.a)({},t),{},{scale:u,globalScale:n,width:Wd*n,height:Ad*n}))}),Object(S.jsx)(Bd.a,{wrapperClass:"card-lightbox-content",wrapperStyle:{maxWidth:Wd,maxHeight:Ad,lineHeight:0},children:Object(S.jsx)("canvas",{id:"lightbox-canvas",ref:c,width:Wd*n,height:Ad*n},o+.1)})]})}})})})});var Gd;const Xd=fr.b.div(Gd||(Gd=Object(mr.a)(["\n    --link-arrow-icon-size: 16px;\n    --link-arrow-border-size: 8px;\n    --link-arrow-half-size: ","px;\n    --link-arrow-full-size: calc(var(--link-arrow-half-size) * 2);\n    --link-arrow-margin-inline: calc(var(--link-arrow-half-size) - var(--link-arrow-icon-size) / 2);\n    --link-arrow-margin-block: calc(var(--link-arrow-half-size) - var(--link-arrow-border-size) / 2);\n    font-weight: 500;\n    color: var(--color-vendor);\n    text-shadow: var(--ts);\n    padding: var(--spacing-xs);\n    background-color: var(--main-level-4);\n    box-shadow: var(--bs-block);\n    border-radius: var(--br-lg);\n    display: inline-block;\n    .title {\n        line-height: 1;\n        margin-bottom: var(--spacing-sm);\n    }\n    .container {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr;\n        grid-template-rows: 1fr 1fr 1fr;\n        width: calc(3 * var(--link-arrow-full-size));\n        height: calc(3 * var(--link-arrow-full-size));\n        column-gap: 0;\n        row-gap: 0;\n        background-color: var(--main-level-1);\n        box-shadow: 0 0 2px 1px #141414 inset;\n        border-radius: var(--br-lg);\n        margin: auto;\n        .link-marker-icon {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: 0;\n            height: 0;\n            border-style: solid;\n            position: absolute;\n            margin: var(--link-arrow-margin-block) var(--link-arrow-margin-inline);\n            border-width: 0 var(--link-arrow-border-size) var(--link-arrow-border-size) var(--link-arrow-border-size);\n            border-color: transparent transparent #484848 transparent;\n            .anticon {\n                font-size: var(--link-arrow-icon-size);\n            }\n        }\n        .link-marker-button.marker-checked .link-marker-icon {\n            border-color: transparent transparent var(--sub-active) transparent;\n        }\n    }\n    .link-marker-reset {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    .marker-checked {\n        color: var(--sub-active);\n    }\n    &.chooser-disabled {\n        .container {\n            background-color: var(--main-level-4);\n            box-shadow: 0 0 0 1px var(--sub-level-4) inset;\n            .link-marker-icon {\n                border-color: transparent transparent #585858 transparent;\n            }\n            .link-marker-button.marker-checked .link-marker-icon {\n                border-color: transparent transparent var(--sub-disabled) transparent;\n            }\n            .link-marker-reset .anticon {\n                color: var(--main-level-4);\n            }\n        }\n    }\n    &.chooser-active {\n        .link-marker-reset,\n        .link-marker-button {\n            cursor: pointer;\n            border-radius: var(--br-lg);\n            &:hover {\n                background-color: var(--sub-level-1);\n            }\n        }\n    }\n"])),13),Vd=e=>{let{active:t,defaultValue:n=[],onChange:r=()=>{},onStatusChange:i}=e;const[o,l]=Object(a.useState)(n),s=Rr(),c=JSON.stringify(o);return Object(a.useEffect)(()=>{r(o)},[c]),Object(S.jsxs)(Xd,{className:ur("link-marker-picker",t?"chooser-active":"chooser-disabled"),children:[Object(S.jsx)("div",{className:"title",children:Object(S.jsx)(jl.a,{checked:t,onChange:e=>i(e.target.checked),children:s["link-picker.label"]})}),Object(S.jsx)("div",{className:"container",children:[...Array(9)].map((e,n)=>{const a="".concat(n+1);return"5"===a?Object(S.jsx)(hr.a,{overlay:t?s["link-picker.reset.tooltip"]:null,children:Object(S.jsx)("div",{className:"link-marker-reset",onClick:()=>{t&&l([])},children:Object(S.jsx)(w.a,{})})},"5"):Object(S.jsx)("div",{className:"link-marker-button marker-".concat(n+1," ").concat(o.includes(a)?"marker-checked":""),onClick:()=>{t&&l(e=>{let t=[...e];return t.includes(a)?t=t.filter(e=>e!==a):t.push(a),t})},children:Object(S.jsx)("div",{className:"link-marker-icon link-marker-icon-".concat(n+1),style:{transform:"rotate(".concat(Ue[n],"deg) translateY(-1px)")}})},a)})})]})};var qd=n(625);const _d=["onChange"];var Jd,$d;const Qd=Object(fr.b)(qd.a.Item)(Jd||(Jd=Object(mr.a)(["\n    color: var(--color);\n    padding: 1px 12px 5px 12px; // Alignment\n    font-size: var(--fs-sm);\n    border-bottom: var(--bw) solid var(--sub-level-4);\n    cursor: default;\n    &.ant-dropdown-menu-item.ant-dropdown-menu-item-disabled:hover {\n        cursor: default;\n        background: var(--main-level-3);\n    }\n"]))),Zd=Object(fr.b)(qd.a.Item)($d||($d=Object(mr.a)(["\n    &li.ant-dropdown-menu-item:hover {\n        background-color: var(--sub-active);\n    }\n    &.active-setting {\n        background-color: var(--main-active);\n    }\n"]))),eu=e=>{let{onChange:t}=e,n=Object(oa.a)(e,_d);const a=Rr(),{resolution:r,updateSetting:i}=oi(Object(ui.useShallow)(e=>{let{setting:{allowHotkey:t,resolution:n},updateSetting:a}=e;return{allowHotkey:t,resolution:n,updateSetting:a}}));return Object(S.jsxs)(qd.a,Object(l.a)(Object(l.a)({onClick:e=>e.domEvent.stopPropagation()},n),{},{children:[Object(S.jsx)(Qd,{disabled:!0,onClick:e=>e.domEvent.stopPropagation(),children:a["setting.option.resolution.label"]}),pn.map(e=>{let{width:n,height:o,label:l,scale:s}=e;return Object(S.jsx)(Zd,{className:r[0]===n&&r[1]===o?"active-setting":"",onClick:()=>{i({resolution:[n,o],globalScale:s}),null===t||void 0===t||t([n,o],s)},children:s>1?Object(S.jsx)(bl.a,{overlayClassName:"explanation-overlay",placement:"left",content:Object(S.jsx)(ls,{children:a["setting.option.resolution.warning"]}),children:Object(S.jsx)(ps,{width:n,height:o,warning:!0})}):Object(S.jsx)(ps,{width:n,height:o})},"".concat(n,"-").concat(o))})]}))};var tu,nu,au,ru;const iu=e=>Object(S.jsx)(tl,{fallback:Object(S.jsx)(S.Fragment,{}),children:Object(S.jsx)(Zo.a,Object(l.a)({},e))}),ou=fr.b.div(tu||(tu=Object(mr.a)(["\n    font-weight: 500;\n    border-color: transparent;\n    background-color: transparent;\n    color: var(--color-vendor);\n    text-shadow: var(--ts);\n    user-select: none;\n    display: inline-block;\n    height: 32px;\n    width: var(--width-label);\n    line-height: 30px;\n    position: relative;\n    min-width: var(--width-label);\n    text-align: right;\n    padding-right: var(--spacing-antd);\n"]))),lu=fr.b.div(nu||(nu=Object(mr.a)(["\n    display: flex;\n    align-items: center;\n    padding: var(--spacing-xs) var(--spacing);\n    cursor: pointer;\n    &:hover {\n        background-color: var(--sub-active);\n    }\n    &.menu-active {\n        background-color: var(--main-active);\n        &:hover {\n            background-color: var(--sub-active);\n        }\n    }\n"]))),su=fr.b.div(au||(au=Object(mr.a)(["\n    border: var(--bw) solid var(--sub-level-1);\n    border-radius: var(--br-lg);\n    background-color: var(--main-level-3);\n    box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05); // Mimic antd\n    padding: var(--spacing-xs) 0;\n    color: var(--color);\n"]))),cu=fr.b.div(ru||(ru=Object(mr.a)(["\n    color: var(--color);\n    font-size: var(--fs-sm);\n    border-bottom: var(--bw) solid var(--sub-level-4);\n    padding: 0 var(--spacing);\n    padding-bottom: var(--spacing-xs);\n    line-height: 1;\n    cursor: default;\n    &:hover {\n        cursor: default;\n        background: var(--main-level-3);\n    }\n"]))),du={Container:su,Option:lu};var uu,bu;const mu=fr.b.div(uu||(uu=Object(mr.a)(["\n    position: absolute;\n    right: 0;\n    top: 0;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    padding: var(--spacing-xs) var(--spacing);\n    border-left: var(--bw) solid var(--sub-secondary);\n    border-radius: 0 var(--br-lg) var(--br-lg) 0;\n    color: var(--color);\n    cursor: pointer;\n    .anticon {\n        font-size: var(--fs-2xl);\n        margin-left: 0;\n    }\n    .resolution-overlay {\n        position: absolute;\n        left: 50%;\n        bottom: 3px; // Alignment\n        font-size: var(--fs-xs);\n        text-align: center;\n        transform: translateX(-50%);\n    }\n    .resolution-icon {\n        transform: translateY(-5px); // Alignment\n    }\n"]))),pu=Object(fr.b)(Jo.a)(bu||(bu=Object(mr.a)(["\n    padding: 0;\n    .button-label {\n        height: 100%; // Alignment\n        align-content: center;\n        border-radius: var(--br-lg);\n        line-height: 1.5;\n        .label-content {\n            padding: 4px 15px;\n            border: var(--bw) solid transparent;\n            border-radius: var(--br-lg);\n            line-height: 29px; // Alignment\n        }\n    }\n"]))),gu=Object(a.forwardRef)((e,t)=>{let{isTainted:n,isInitializing:r,imageChangeCount:i,globalScale:o,canvasMap:s,onTainted:c,onExportSucess:d,onDownloadError:u}=e;const b=Rr(),{allowHotkey:m,resolution:p}=oi(Object(ui.useShallow)(e=>{let{setting:{allowHotkey:t,resolution:n}}=e;return{allowHotkey:t,resolution:n}})),{onExport:g}=Mo(!0,s,{imageChangeCount:i,isInitializing:r,language:b,globalScale:o}),{exportCanvasRef:h}=s,f=Object(a.useRef)({currentPipeline:Promise.resolve(),pipelineRunning:!1}),[v,y]=Object(a.useState)(!1),j=Object(a.useCallback)(()=>{y(!1)},[]),x=Object(a.useCallback)(async e=>g(Object(l.a)(Object(l.a)({},e),{},{onError:e=>{!n&&String(e).includes("Tainted canvases")&&c()},onSuccess:d})),[n,g,d,c]),{onSave:O,isPipelineRunning:w}=li({isTainted:n,isInitializing:r,exportCanvasRef:h,exportRef:f,onExport:x,onDownloadError:u,onDownloadComplete:j}),k=e=>{v||(n?gr.a.error({message:b["prompt.download.tainted.message"]}):(y(!0),O(e)))};return Object(a.useImperativeHandle)(t,()=>({download:k,isPipelineRunning:w})),n?null:Object(S.jsxs)("div",{className:"save-button-container",children:[Object(S.jsx)("div",{id:"save-button-waiting"}),Object(S.jsxs)(pu,{className:"save-button",id:"save-button-ready",children:[Object(S.jsx)(hr.a,{overlay:m?Object(S.jsx)(S.Fragment,{children:"Ctrl+S / \u2318+S"}):null,children:Object(S.jsx)("div",{className:"button-label",children:Object(S.jsx)("div",{className:"label-content",onClick:()=>k(),children:v?b["button.download.ongoing.label"]:b["button.download.label"]})})}),Object(S.jsx)($o.a,{disabled:v,className:"save-button-dropdown",placement:"bottomRight",overlay:Object(S.jsx)(eu,{onChange:()=>dr()}),children:Object(S.jsxs)(mu,{className:"resolution-option",onClick:e=>e.stopPropagation(),children:[Object(S.jsx)(Qo.a,{className:"resolution-icon"}),Object(S.jsx)("span",{className:"resolution-overlay",children:p[1]})]})})]})]})});var hu,fu,vu=n(657),yu=n(658),ju=n(659);const xu=fr.b.div(hu||(hu=Object(mr.a)(["\n    "," {\n        font-size: var(--fs);\n        padding-bottom: var(--spacing-sm);\n        .icon {\n            font-size: var(--fs-4xl);\n        }\n        &.export-download-image {\n            border-radius: var(--br-lg) var(--br-lg) 0 0;\n            border-bottom: var(--bw) solid var(--sub-secondary);\n            &:disabled {\n                border-bottom: var(--bw) solid var(--main-level-1);\n            }\n        }\n    }\n    .radio-train-input-group {\n        flex-wrap: wrap;\n    }\n    .export-container-result {\n        margin-top: var(--spacing-lg);\n        display: grid;\n        gap: var(--spacing-lg);\n        align-items: center;\n        grid-template-columns: 1fr 1fr 1fr 1fr;\n        &.mode_other {\n            grid-template-columns: 1fr 1fr;\n        }\n        button {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            width: 100%;\n            height: 100%;\n        }\n        > div {\n            height: 100%;\n        }\n    }\n    .partial-alert {\n        margin-top: var(--spacing-lg);\n        padding-bottom: var(--spacing-sm);\n        border-bottom: var(--bw) solid var(--sub-secondary);\n        + .export-container-result {\n            margin-top: var(--spacing-sm);\n        }\n    }\n    .resolution-picker {\n        background-color: var(--main-level-4);\n        border-radius: 0 0 var(--br-lg) var(--br-lg);\n        padding: var(--spacing-xs);\n        line-height: 1;\n        text-align: center;\n        border: var(--bw) solid transparent;\n        cursor: pointer;\n    }\n    .export-input-raw {\n        grid-column: 1 / -1;\n    }\n"])),vr),Ou=Object(fr.b)(vr)(fu||(fu=Object(mr.a)(["\n    ","\n"])),Yl),wu=e=>{let{data:t,children:n,disabled:a,withText:r}=e;return Object(S.jsx)(Gl,{disabled:a,data:t,container:Ou,overlay:r?Object(S.jsxs)(S.Fragment,{children:["Copied\xa0",Object(S.jsx)(Wl.a,{})]}):Object(S.jsx)(Wl.a,{}),children:n})},ku=e=>[{label:e["button.import.for-ygocarder.label"],value:"ygocarder",converter:ja},{label:e["button.import.for-other.label"],value:"other",converter:Pa}],Su=Object(a.forwardRef)((e,t)=>{let{tainted:n,artworkCanvas:r,onRequireExportData:i,onRequireDownload:o,onClose:s}=e;const[c,d]=Object(a.useState)(!1),[u,b]=Object(a.useState)("ygocarder"),[m,p]=Object(a.useState)({other:{name:"",data:"",isPartial:!1},ygocarder:{name:"",data:"",isPartial:!1}}),{allowHotkey:g,resolution:h}=oi(Object(ui.useShallow)(e=>{let{setting:{allowHotkey:t,resolution:n}}=e;return{allowHotkey:t,resolution:n}})),f=Rr(),v="export-input-raw",y=Object(a.useCallback)(()=>{const e=document.getElementById(v);e&&(e.focus(),e.select())},[]);Object(a.useImperativeHandle)(t,()=>({setCardData:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&d(!0),p(ku(f).map(t=>{let{value:n,converter:a}=t;try{const{isPartial:t,result:i}=a(e,r);return{value:n,isPartial:t,name:wa(e.name),data:"".concat(JSON.stringify(i))}}catch(i){return console.error(i),{value:n,isPartial:!1,name:"Unknown",data:""}}}).reduce((e,t)=>{let{data:n,isPartial:a,value:r,name:i}=t;return e[r]={name:i,data:n,isPartial:a},e},Object(l.a)({},m)))}})),Object(a.useEffect)(()=>{setTimeout(()=>{c&&"ygocarder"===u&&y()},100)},[u,y,c]);const{data:j,isPartial:x,name:O}=m[u];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(pr.a,{visible:c,title:f["button.export-modal.label"],className:"global-overlay export-modal",onCancel:()=>{d(!1),s()},cancelText:f["converter.cancel.label"],okButtonProps:{style:{display:"none"}},width:600,destroyOnClose:!1,children:Object(S.jsxs)(xu,{children:[Object(S.jsx)(Il,{optionList:ku(f),onChange:e=>b(e),value:u}),"other"===u&&x&&Object(S.jsxs)("div",{className:"partial-alert",children:[Object(S.jsx)("b",{children:f["service.decode.partial.message"]}),Object(S.jsx)("br",{}),f["service.decode.partial.description"]]}),Object(S.jsxs)("div",{className:ur("export-container-result","mode_".concat(u)),children:[Object(S.jsx)(ss,{content:n&&"other"===u?Object(S.jsx)(Ac,{}):void 0,children:Object(S.jsx)("div",{children:Object(S.jsxs)(vr,{disabled:n&&"other"===u,onClick:()=>{const e=new Blob([j],{type:"application/json"});Sa(wa(O),e,"application/json")},children:[Object(S.jsx)("div",{className:"icon",children:Object(S.jsx)(bd.a,{})}),Object(S.jsx)("div",{className:"label",children:f["button.export-modal.download-button.label"]})]})})}),"ygocarder"===u&&Object(S.jsx)(ss,{placement:"bottom",content:x?Object(S.jsx)(ls,{children:f["prompt.export.offline-warning.message"]}):void 0,children:Object(S.jsx)("div",{children:Object(S.jsxs)(wu,{disabled:!1,data:m.ygocarder.data,withText:!0,children:[Object(S.jsx)("div",{className:"icon",children:Object(S.jsx)(vu.a,{})}),Object(S.jsx)("div",{className:"label",children:f["button.export-modal.copy-button.label"]})]})})}),"ygocarder"===u&&Object(S.jsx)(ss,{placement:"bottom",content:x?Object(S.jsx)(ls,{children:f["image-cropper.offline-warning"]}):void 0,children:Object(S.jsx)("div",{children:Object(S.jsxs)(wu,{disabled:x,data:window.location.href,withText:!0,children:[Object(S.jsx)("div",{className:"icon",children:Object(S.jsx)(yu.a,{})}),Object(S.jsx)("div",{className:"label",children:f["button.export-modal.share-button.label"]})]})})}),Object(S.jsxs)("div",{children:[Object(S.jsx)(ss,{content:n?Object(S.jsx)(Ac,{}):void 0,children:Object(S.jsx)("div",{children:Object(S.jsxs)(vr,{disabled:n,className:"export-download-image",onClick:o,children:[Object(S.jsx)("div",{className:"icon",children:Object(S.jsx)(ju.a,{})}),Object(S.jsx)("div",{className:"label",children:f["button.export-modal.save-button.label"]})]})})}),Object(S.jsx)($o.a,{overlay:Object(S.jsx)(eu,{}),children:Object(S.jsxs)("div",{className:"resolution-picker",children:[h[0]," \xd7 ",h[1]]})})]}),"ygocarder"===u&&!x&&Object(S.jsx)(fc.a.TextArea,{id:v,className:"export-input-raw",size:"small",value:m.ygocarder.data,rows:5})]})]})}),Object(S.jsx)(hr.a,{overlay:g?Object(S.jsx)(S.Fragment,{children:"Ctrl+D / \u2318+D"}):null,children:Object(S.jsx)("button",{className:"primary-button export-button",onClick:()=>{i(),d(!0)},children:f["generic.export.label"]})}),Object(S.jsx)($o.a,{overlay:Object(S.jsx)(qd.a,{onClick:e=>e.domEvent.stopPropagation(),children:ku(f).map((e,t)=>{let{converter:n,label:a}=e;return Object(S.jsx)(qd.a.Item,{onClick:()=>{try{const e=ii.getState().card,{result:t}=n(e,r);((e,t)=>{const n=new Blob([t],{type:"application/json"});Sa(wa(e),n,"application/json")})(wa(e.name),"".concat(JSON.stringify(t)))}catch(e){console.error(e),gr.a.error({message:f["error.export.message"],description:f["error.export.description"]})}},children:a},"".concat(t))})}),children:Object(S.jsx)(vr,{className:"secondary-button export-custom",children:Object(S.jsx)(bd.a,{})})})]})});var Cu,Fu,Lu=n(660);const Tu=fr.b.div(Cu||(Cu=Object(mr.a)(["\n    .prompt-alert {\n        margin-bottom: var(--spacing-sm);\n        .alert {\n            color: var(--main-danger);\n        }\n    }\n    .import-container-upload {\n        margin-top: var(--spacing-sm);\n        text-align: center;\n        .import-custom,\n        .import-empty {\n            font-size: var(--fs);\n        }\n        .import-custom {\n            margin-right: var(--spacing);\n        }\n        .option-separator {\n            display: inline-block;\n            margin-right: var(--spacing);\n        }\n        "," {\n            background-color: var(--main-level-4);\n            border: var(--bw) solid var(--color-contrast);\n            &:hover {\n                background-color: var(--sub-level-4);\n            }\n        }\n    }\n"])),vr),Nu=Object(a.forwardRef)((e,t)=>{let{allowHotkey:n,language:r,onImport:i,onClose:o}=e;const s="import-direct-upload",c="import-upload",d="import-textarea",u=Object(a.useRef)(null),b=Object(a.useRef)(null),[m,p]=Object(a.useState)(0),[g,h]=Object(a.useState)("replace"),[f,v]=Object(a.useState)(!1),[y,j]=Object(a.useState)(!1),x=Object(a.useCallback)(()=>{const e=document.getElementById(d);e&&(e.focus(),e.select())},[]);Object(a.useEffect)(()=>{setTimeout(()=>{f&&x()},100)},[x,f]),Object(a.useImperativeHandle)(t,()=>({requestImport:e=>{h(e),v(!0)}}));const O=()=>{p(e=>e+1),v(!1),j(!1),o()},w=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{if(e){const{card:n,isPartial:a}=ai(e,"replace"===g||"new"===g?void 0:ii.getState().card);if(a&&gr.a.info({message:r["service.decode.partial.message"],description:r["service.decode.partial.description"]}),t&&"online"===n.artSource&&(e=>{try{return e.startsWith("https://images.ygoprodeck.com/images/cards_cropped")}catch(t){return console.error(t),!1}})(n.art)){const e=Object(l.a)({},n);i(e,{forcePurityCheck:!0,writeOnCurrentCard:"new"!==g,addToList:"new"===g})}else i(n,{forcePurityCheck:!0,writeOnCurrentCard:"new"!==g,addToList:"new"===g})}}catch(n){console.error("Import error:",n),gr.a.error({message:r["error.import.error.message"],description:r["error.import.error.description"]})}},k=e=>{if(e)for(let t=0;t<=e.length;t++){const n=e.item(t);if(!n)continue;const a=new FileReader;a.onload=e=>{let{target:t}=e;if(!t)return;const{result:n}=t;"string"===typeof n&&w(n)},a.readAsText(n);break}},C=async()=>{try{const a=document.getElementById(d);if(a){var e;const{value:r}=a,i=null!==(e=r.trim())&&void 0!==e?e:"";let o="";try{o=ca(decodeURIComponent(i))}catch(n){}let l=null;if(i.startsWith("{")&&i.endsWith("}"))l=i;else if(o.startsWith("{")&&o.endsWith("}"))l=JSON.parse(o);else{var t;const e=i.startsWith("https://db.ygoprodeck.com/api")?i:"https://db.ygoprodeck.com/api/v7/cardinfo.php?fname=".concat(i,"&num=10&offset=0&misc=yes");j(!0);const n=await fetch(e);if(!n.ok)throw new Error("Response status: ".concat(n.status));const a=await n.json();l=null!==(t=a.data.find(e=>{let{name:t}=e;return t.toLowerCase()===i.toLowerCase()}))&&void 0!==t?t:a.data.sort((e,t)=>{var n,a;const r=null===(n=e.misc_info)||void 0===n?void 0:n[0],i=null===(a=t.misc_info)||void 0===a?void 0:a[0];if(!r||!i)return 0;return(r.viewsweek+1)/(i.viewsweek+1)>2?i.viewsweek-r.viewsweek:i.views-r.views})[0]}await w(l,!0)}}catch(n){console.error("Import error:",n),gr.a.error({message:r["error.import.error.message"],description:r["error.import.error.description"]})}finally{O()}};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(pr.a,{visible:f,title:"merge"===g?r["button.import.merge.label"]:r["generic.import.label"],className:"global-overlay import-modal",onCancel:O,okText:r["prompt.import.ok.label"],confirmLoading:y,cancelButtonProps:{style:{display:"none"}},destroyOnClose:!1,onOk:C,children:Object(S.jsxs)(Tu,{children:["merge"!==g?Object(S.jsxs)("div",{className:"prompt-alert",children:[r["prompt.import.instruction.line-1"],Object(S.jsx)("br",{}),r["prompt.import.instruction.line-2"],Object(S.jsx)("br",{}),Object(S.jsx)("span",{className:"alert",children:r["prompt.import.instruction.alert.line-1"]})]}):null,Object(S.jsx)("div",{className:"import-container-input",children:Object(S.jsx)(fc.a.TextArea,{id:d,className:"import-input-raw",size:"small",placeholder:r["prompt.import.message"],disabled:y,onPressEnter:C,rows:4},"input-".concat(m))}),"merge"!==g?Object(S.jsxs)("div",{className:"import-container-upload",children:[Object(S.jsx)("span",{className:"option-separator",children:r["prompt.import.alternative.label"]}),Object(S.jsxs)(vr,{className:"import-custom",onClick:()=>{const e=document.getElementById(c);e&&e.click()},children:[Object(S.jsx)("input",{ref:b,type:"file",id:c,accept:"application/json",className:"import-upload-input",onChange:()=>{var e;const t=null===(e=b.current)||void 0===e?void 0:e.files;k(t),O()}},"file-input-".concat(m)),r["button.import.tooltip"]]}),"new"===g&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{className:"option-separator",children:r["prompt.import.alternative.label"]}),Object(S.jsx)(vr,{className:"import-empty",onClick:()=>{w(cn()),O()},children:r["button.empty.label"]})]})]}):null]})}),Object(S.jsx)(hr.a,{overlay:n?Object(S.jsxs)("div",{className:"center",children:[Object(S.jsx)("div",{children:"Ctrl+E / \u2318+E"}),Object(S.jsxs)("div",{children:["Ctrl+G / \u2318+G",r["prompt.import.merge.tooltip"]]})]}):null,children:Object(S.jsx)("button",{className:"primary-button import-button",onClick:()=>{h("replace"),v(!0)},children:r["generic.import.label"]})}),Object(S.jsx)(hr.a,{overlay:r["button.import.tooltip"],children:Object(S.jsxs)(vr,{className:"secondary-button import-custom",onClick:()=>{const e=document.getElementById(s);e&&e.click()},children:[Object(S.jsx)("input",{ref:u,type:"file",id:s,accept:"application/json",className:"import-upload-input",onChange:()=>{var e;const t=null===(e=u.current)||void 0===e?void 0:e.files;k(t),O()}},"direct-file-input-".concat(m)),Object(S.jsx)(Lu.a,{})]})})]})}),Ru=(Object(fr.b)(qd.a)(Fu||(Fu=Object(mr.a)(["\n    .ant-dropdown-menu-item {\n        padding: 0;\n    }\n    .import-upload-button {\n        /** Mimic antd */\n        cursor: pointer;\n        padding: 5px 12px;\n        background: transparent;\n        border: none;\n        width: 100%;\n        text-align: left;\n    }\n    .import-upload-input {\n        display: none;\n    }\n"]))),[{label:"OCG",value:"ocg",props:{className:"ocg-button",style:{fontWeight:"bold"}}},{label:"TCG",value:"tcg",props:{className:"tcg-button",style:{fontWeight:"bold"}}}]),Iu=e=>x(e).map(e=>{let{color:t,name:n,label:a}=e;return{label:"normal"===n?Object(S.jsx)(w.a,{}):a,value:n,props:{style:{color:t,fontWeight:"bold"}}}}),Eu=[{value:"normal",label:Object(S.jsx)(w.a,{})},...Object.values(v).map(e=>{let{value:t,label:n}=e;return{label:n,value:t}})],zu=()=>Ae.map(e=>{let{name:t,nameKey:n,labelBackgroundColor:a,labelBackgroundColorList:r,edition:i}=e;return{label:Object(S.jsx)(ld,{labelBackgroundColor:a,labelBackgroundColorList:r,nameKey:n}),value:t,edition:i}}),Du=[...Array(14)].map((e,t)=>({label:t,value:t})),Bu=B.map(e=>{let{value:t}=e;return{label:t===D?Object(S.jsx)(w.a,{}):Object(S.jsx)("img",{alt:t,src:"".concat("/ygocarder","/asset/image/sticker/sticker-").concat(t.toLowerCase(),".png")}),value:t}}),Pu=Object.entries({veryStrict:{label:"5",order:1},strict:{label:"4",order:2},loose:{label:"3",order:3},veryLoose:{label:"2",order:4},relaxed:{label:"1",order:5}}).map(e=>{let[t,{label:n,order:a}]=e;return{label:n,value:t,order:a}}).sort((e,t)=>e.order-t.order);var Mu,Hu=n(672);const Au=fr.b.div(Mu||(Mu=Object(mr.a)(["\n    z-index: 10;\n    display: inline-grid;\n    grid-template-columns: 1fr max-content;\n    align-items: center;\n    column-gap: var(--spacing-sm);\n\n    .char-picker {\n        z-index: 1;\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(30px, 1fr));\n        button.ant-btn {\n            padding: 0;\n        }\n        .handler,\n        .ant-btn {\n            background-color: var(--main-level-1);\n            color: var(--color-heavy);\n            text-shadow: var(--ts);\n            font-family: Segoe UI Symbol, sans-serif;\n            border: 1px solid var(--sub-level-1);\n            border-radius: 0;\n            padding: 0 var(--spacing);\n            + .ant-btn {\n                border-left-width: 0;\n            }\n            &:hover {\n                color: var(--main-active);\n            }\n            &:first-child {\n                border-radius: var(--br) 0 0 var(--br);\n            }\n            &:last-child {\n                border-radius: 0 var(--br) var(--br) 0;\n            }\n        }\n        /** Currently char picker no longer movable */\n        /* .handler {\n            cursor: grabbing;\n            background-color: var(--main-level-2);\n            height: unset;\n            font-size: var(--fs-xl);\n            height: var(--fs-xl);\n            line-height: 1;\n            padding: 0;\n            text-align: center;\n        } */\n    }\n    .moveable-control-box {\n        .moveable-control.moveable-origin,\n        .moveable-line.moveable-direction {\n            border-color: transparent;\n            background: none;\n        }\n    }\n"]))),Wu=e=>{let{targetId:t="",onPick:n=()=>{}}=e;const a=Rr(),r=e=>{const a=document.getElementById(t);if(a){const{value:t}=function(e,t){if(document.selection)return e.focus(),document.selection.createRange().text=t,{value:e.value,position:0};if(e.selectionStart||0===e.selectionStart){const n=e.selectionStart,a=e.selectionEnd;return e.value=e.value.substring(0,n)+t+e.value.substring(a,e.value.length),e.selectionStart=n+t.length,e.selectionEnd=n+t.length,e.focus(),{value:e.value,position:n+t.length}}return e.value+=t,{value:e.value,position:0}}(a,e);n(t,e)}};return Object(S.jsxs)(Au,{tabIndex:-1,className:"char-picker-container",children:[Object(S.jsx)("div",{id:"char-picker",className:"char-picker",children:["\u221e","\u2606","\u2605","\u25cf","\xa9","\u2122","\u2c6f","\u042f","\xd8","\u203b"].map(e=>Object(S.jsx)("button",{tabIndex:-1,className:"ant-btn",onClick:()=>r(e),children:e},e))}),Object(S.jsx)("div",{className:"char-picker-guideline",children:Object(S.jsx)(vl,{content:Object(S.jsxs)(ls,{children:[a["input.char-picker.guide.header"],Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:a["input.char-picker.guide.instruction-1"]}),Object(S.jsx)("li",{children:a["input.char-picker.guide.instruction-2"]})]})]})})})]})};var Ku=n(661);n(593),n(594);const Yu=Object(a.forwardRef)((e,t)=>{let{disabled:n,color:r,onSelect:i,onOffsetChange:o,onRemove:l}=e;const s=Rr(),[c,d]=Object(a.useState)(r),[u,b]=Object(a.useState)(0),[m,p]=Object(a.useState)(-1),g=Object(a.useRef)(Cr()(b,250)).current;return Object(a.useImperativeHandle)(t,()=>({setColor:e=>{if(e){const{color:t,offset:n,id:a}=e,{min:r,max:i,round:o}=Math;d(t),b(i(0,r(100,o(100*parseFloat(n))))),p(a)}},setCurrentOffset:(e,t)=>{const{min:n,max:a,round:r}=Math;e===m&&b(a(0,n(100,r(100*parseFloat(t)))))}})),Object(a.useEffect)(()=>{m>0&&(null===o||void 0===o||o(m,"".concat(u/100)))},[m,u,o]),Object(S.jsxs)("div",{className:"stop-point-control-panel",children:[Object(S.jsxs)("div",{className:"stop-point-offset-input",children:[Object(S.jsxs)("div",{children:[s["input.name-style.gradient.color-stop.label"],": ",Object(S.jsx)(jc.a,{value:u,size:"small",max:100,min:0,onChange:e=>g("string"===typeof e?parseInt(e):null!==e&&void 0!==e?e:0)})]}),Object(S.jsx)(Jo.a,{className:"remove-stop-color",size:"small",disabled:n,onClick:()=>null===l||void 0===l?void 0:l(m),children:s["input.name-style.gradient.color-remove.label"]})]}),Object(S.jsx)(kd.a,{styles:{default:{picker:{color:"#000000",background:"var(--main-level-3)",boxShadow:"none"},body:{padding:"var(--spacing) var(--spacing)"}}},disableAlpha:!0,color:c,onChange:e=>d(e.hex),onChangeComplete:e=>{d(e.hex),null===i||void 0===i||i(e.hex)}})]})}),Uu=e=>({colorList:e,raw:tr(e)}),Gu=e=>{var t,n;let{palette:r=tr(er()),angle:i=180,memoizedOnChange:o}=e;const s=Rr(),c=Object(a.useRef)(null),[d,u]=Object(a.useState)(i),[b,m]=Object(a.useState)(()=>{var e,t;const n=nr(r);return{raw:r,colorList:n,currentControlId:null!==(e=null===(t=n[0])||void 0===t?void 0:t.id)&&void 0!==e?e:-1}}),p=Object(a.useCallback)((e,t)=>m(n=>{const a=n.colorList.map(n=>n.id===e?Object(l.a)(Object(l.a)({},n),{},{offset:t}):n);return Object(l.a)(Object(l.a)({},n),Uu(a))}),[]);Object(a.useEffect)(()=>{u(i)},[i]),Object(a.useEffect)(()=>{var e,t;const n=nr(r);m({raw:r,colorList:n,currentControlId:null!==(e=null===(t=n[0])||void 0===t?void 0:t.id)&&void 0!==e?e:-1})},[r]);const g=Object(a.useRef)(!1);return Object(a.useEffect)(()=>{var e;b.colorList[0]&&g.current&&(g.current=!0,null===(e=c.current)||void 0===e||e.setColor(b.colorList[0]))},[b.colorList]),Object(a.useEffect)(()=>{let e=!0;return setTimeout(()=>{const{colorList:t,currentControlId:n}=b;if(e&&n>=0){var a;const e=t.find(e=>e.id===n);e&&(null===(a=c.current)||void 0===a||a.setCurrentOffset(n,e.offset))}},100),()=>{e=!1}},[b]),Object(a.useEffect)(()=>{let e=!0;return setTimeout(()=>{e&&o(b.colorList,d)},200),()=>{e=!1}},[b,d,o]),Object(S.jsxs)("div",{className:ur(il,"gradient-picker-container"),children:[Object(S.jsxs)("div",{className:"gradient-angle-control",children:[Object(S.jsx)("h2",{children:s["input.name-style.gradient.color-point.label"]}),Object(S.jsxs)(Jo.a,{size:"small",className:"add-stop-color",disabled:(null!==(t=null===(n=b.colorList)||void 0===n?void 0:n.length)&&void 0!==t?t:1e4)>20,onClick:()=>{m(e=>{const t=[...e.colorList,{offset:"0.5",color:"#ffffff",id:e.colorList.length+1}].sort((e,t)=>Number(e.offset)-Number(t.offset));return Object(l.a)(Object(l.a)({},e),Uu(t))})},children:[s["input.name-style.gradient.add-point.label"]," (",b.colorList.length,"/",20,")"]}),Object(S.jsx)(ll,{angle:d,size:120,setAngle:u,children:Object(S.jsx)("h2",{children:s["input.name-style.gradient.gradient-direction.label"]})})]}),Object(S.jsx)("div",{className:"stop-color-picker-container",children:Object(S.jsx)(nl.GradientPicker,{width:370,paletteHeight:32,maxStops:20,minStops:2,stopRemovalDrop:99999,palette:b.colorList,onPaletteChange:e=>m(t=>Object(l.a)(Object(l.a)({},t),Uu(e))),onColorStopSelect:e=>{var t;m(t=>Object(l.a)(Object(l.a)({},t),{},{currentControlId:e.id})),null===(t=c.current)||void 0===t||t.setColor(e)},children:Object(S.jsx)(Yu,{ref:c,disabled:b.colorList.length<=1,onOffsetChange:p,onRemove:e=>{m(t=>{var n;const a=t.colorList.filter(t=>t.id!==e),r=null!==(n=null===a||void 0===a?void 0:a[0].id)&&void 0!==n?n:-1;var i;r>0&&b.colorList[r]&&(null===(i=c.current)||void 0===i||i.setColor(b.colorList[r]));return Object(l.a)(Object(l.a)({},Uu(a)),{},{currentControlId:r})})}})})})]})};var Xu,Vu,qu,_u;const Ju=Object(fr.b)(du.Container)(Xu||(Xu=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: repeat(2, 200px);\n    gap: var(--spacing-sm);\n    padding: var(--spacing-xs);\n    .alert {\n        grid-column: span 2;\n        font-size: var(--fs-sm);\n        text-align: center;\n    }\n"]))),$u=Object(fr.b)(du.Container)(Vu||(Vu=Object(mr.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    gap: var(--spacing-sm);\n    padding: var(--spacing-sm);\n    max-width: 507px; // Alignment\n    .preset-warning {\n        flex: 0 0 100%;\n        font-size: var(--fs-sm);\n    }\n    .panel-action {\n        flex: 0 0 100%;\n    }\n    .open-preset-manager {\n        cursor: pointer;\n        color: var(--main-link);\n        &:hover {\n            color: var(--sub-link);\n        }\n    }\n"]))),Qu=Object(fr.b)(du.Container)(qu||(qu=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: repeat(4, 120px);\n    gap: var(--spacing-sm);\n    padding: var(--spacing-xs);\n    &:focus-visible {\n        outline: none;\n        box-shadow: 0 0 0 2px var(--focus) inset;\n    }\n"]))),Zu=fr.b.div(_u||(_u=Object(mr.a)(["\n    line-height: 0;\n    cursor: pointer;\n    min-height: 26.13px;\n    &.menu-active {\n        outline: var(--bw-lg) solid var(--main-active);\n        &:hover {\n            outline: var(--bw-lg) solid var(--sub-active);\n        }\n    }\n    &.preset-item-focused {\n        outline: var(--bw-lg) solid var(--sub-active);\n    }\n    :hover {\n        outline: var(--bw-lg) solid var(--sub-active);\n    }\n    img {\n        max-width: 100%;\n    }\n"])));var eb=n(335);const tb=Object(a.forwardRef)((e,t)=>{let{className:n,defaultValue:r,fieldMap:i,labelMap:o,onChange:s}=e;const c=Rr(),{x:d,y:u,color:b,width:m}=i,[p,g]=Object(a.useState)(()=>{const e=r[d],t=r[u],n=r[b],a=r[m];return{x:null!==e&&void 0!==e?e:0,y:null!==t&&void 0!==t?t:0,width:null!==a&&void 0!==a?a:0,color:n}}),{x:h,y:f,color:v,width:y}=p,j=o[m];return Object(a.useEffect)(()=>{let e=!0;return setTimeout(()=>{e&&s(p)},500),()=>{e=!1}},[p]),Object(a.useImperativeHandle)(t,()=>({setValue:e=>{const t=Object.keys(e);for(const n in t)if(e[n]!==p[n])return void g(t=>Object(l.a)(Object(l.a)({},t),e))}})),Object(S.jsxs)("div",{className:n,children:[Object(S.jsx)("h2",{children:c["input.name-style.slider.position.label"]}),Object(S.jsxs)("div",{className:"line-position",children:[Object(S.jsx)(eb.a,{axis:"xy",styles:{track:{backgroundColor:"var(--main-slider)",width:100,height:100,gridRow:"span 3",position:"relative"},thumb:{backgroundColor:"var(--sub-slider)",zIndex:10}},xmax:8,xmin:-8,ymax:8,ymin:-8,x:null!==h&&void 0!==h?h:0,y:null!==f&&void 0!==f?f:0,onChange:e=>{let{x:t,y:n}=e;return g(e=>Object(l.a)(Object(l.a)({},e),{},{x:t,y:n}))}}),Object(S.jsxs)(vs,{className:"single-slider",children:[Object(S.jsxs)("span",{children:[c["input.name-style.slider.x-offset.label"],":"]}),Object(S.jsx)(jc.a,{size:"small",value:h,onChange:e=>g(t=>Object(l.a)(Object(l.a)({},t),{},{x:"number"===typeof e?e:parseInt(null!==e&&void 0!==e?e:"0")}))}),Object(S.jsxs)("span",{children:[c["input.name-style.slider.y-offset.label"],":"]}),Object(S.jsx)(jc.a,{size:"small",value:f,onChange:e=>g(t=>Object(l.a)(Object(l.a)({},t),{},{y:"number"===typeof e?e:parseInt(null!==e&&void 0!==e?e:"0")}))})]}),Object(S.jsxs)("div",{className:"single-slider",children:[j,":\xa0",Object(S.jsx)(iu,{value:y,min:1,max:10,onChange:e=>{"number"===typeof e&&g(t=>Object(l.a)(Object(l.a)({},t),{},{width:e}))}})]})]}),Object(S.jsx)("h2",{children:c["input.name-style.slider.color.label"]}),Object(S.jsx)(kd.b,{colors:bn,color:v,onChangeComplete:e=>g(t=>Object(l.a)(Object(l.a)({},t),{},{color:e.hex}))})]})}),nb=Object(a.forwardRef)((e,t)=>{let{active:n,value:r,onClick:i,onCancel:o}=e;const s=Object(a.useRef)(null),[c,d]=Object(a.useState)(0);return Object(a.useImperativeHandle)(t,()=>({focus:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.focus()}})),Object(S.jsx)(Qu,Object(l.a)(Object(l.a)({ref:s},rr({stopPropagation:!0,optionLength:_.length,setFocus:d,onTrigger:()=>{c>=0&&i(_[c])},onCancel:()=>{null===o||void 0===o||o()}})),{},{children:_.map((e,t)=>{const{key:a,image:o,label:l}=e;return Object(S.jsx)(Zu,{className:ur("preset-item",r.preset===a&&n?"menu-active":"",c===t?"preset-item-focused":""),onClick:t=>{t.stopPropagation(),i(e)},children:Object(S.jsx)("img",{className:"preset-preview",src:"".concat("/ygocarder","/").concat(o),alt:l})},a)})}))});var ab,rb;const ib=fr.b.div(ab||(ab=Object(mr.a)(["\n    border: var(--bw) solid var(--sub-level-2);\n    display: inline-block;\n    width: 2rem;\n    height: 1em;\n    border-radius: var(--br-sm);\n    cursor: pointer;\n    ","\n"])),e=>{let{$color:t}=e;return"background-color: ".concat(t,";")}),ob=fr.b.div(rb||(rb=Object(mr.a)(["\n    width: 245px; // Exact same width with text color picker, for alignment\n    color: var(--color);\n    .emboss-control-title {\n        font-size: var(--fs-sm);\n        text-align: left;\n        padding: var(--spacing-sm);\n        padding-bottom: 0;\n    }\n    .emboss-control-left h2 {\n        padding: var(--spacing-sm) 0;\n    }\n    .angle-picker-container {\n        text-align: center;\n    }\n    .emboss-control-right {\n        padding: var(--spacing-sm) 0;\n    }\n    .emboss-control-left {\n        padding: var(--spacing-sm);\n        padding-top: 0;\n    }\n    .slider-label {\n        padding: 0;\n        border: none;\n    }\n    .vertical-angle-control {\n        grid-template-columns: max-content 60px 85px 12px;\n    }\n    .reset-button {\n        cursor: pointer;\n        &:hover {\n            color: var(--color-heavy);\n        }\n    }\n    .navigate-button {\n        cursor: pointer;\n        color: var(--main-link);\n        &:hover {\n            color: var(--sub-link);\n        }\n    }\n    .thickness-row {\n        display: grid;\n        grid-template-columns: max-content 1fr;\n        column-gap: var(--spacing-sm);\n        align-items: center;\n        .ant-slider {\n            height: unset;\n            margin-top: var(--spacing-xs);\n            margin-bottom: var(--spacing-xs);\n        }\n    }\n"]))),lb=.01;const sb=X(),cb=Object(a.forwardRef)((e,t)=>{let{defaultPitch:n=sb.embossPitch,defaultYaw:r=sb.embossYaw,defaultThickness:i=sb.embossThickness,materialColor:o,children:l,language:s,onColorTabNavigate:c,onChange:d}=e;const[u,b]=ar(),[m,p]=Object(a.useState)("#ffffff"),[g,h]=Object(a.useState)(i),[f,v]=Object(a.useState)(r),[y,j]=Object(a.useState)(n),x=Object(a.useRef)([255,255,255]),O=Object(a.useRef)([0,1,0]),w=Object(a.useRef)(i),[C]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{let e=!0;return b&&setTimeout(()=>{if(e){const e=qn(f,y),t=function(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]}(m);(t[0]!==x.current[0]||t[1]!==x.current[1]||t[2]!==x.current[2]||Math.abs(e[0]-O.current[0])>lb||Math.abs(e[1]-O.current[1])>lb||Math.abs(e[2]-O.current[2])>lb||g!==w.current)&&d({lightColorVec:t,lightAngleVec:e,yaw:f,pitch:y,thickness:g}),x.current=t,O.current=e,w.current=g}},150),()=>{e=!1}},[b,m,f,y,g]),Object(a.useImperativeHandle)(t,()=>({setValue:e=>{let{color:t,pitch:n,yaw:a,thickness:r}=e;t&&p(t),n&&j(n),a&&v(a),"number"===typeof r&&v(r)}})),Object(S.jsxs)(ob,{className:ur(il,"emboss-control"),children:[Object(S.jsx)("div",{className:"emboss-control-title",children:l}),Object(S.jsxs)("div",{className:"emboss-control-left",children:[Object(S.jsxs)("h2",{children:[s["input.name-style.emboss.color.label"],"\xa0\xa0",Object(S.jsx)(ib,{className:"material-color",onClick:c,$color:o})]}),s["input.name-style.emboss.color.alert"](Object(S.jsx)("span",{className:c?"navigate-button":"",onClick:c,children:s["input.name-style.color.label"]},"color-navigate")),Object(S.jsxs)("h2",{className:"thickness-row",children:[Object(S.jsx)("span",{children:s["input.name-style.emboss.thickness.label"]}),Object(S.jsx)(iu,{value:g,min:0,max:4,onChange:e=>{"number"===typeof e&&(h(e),u())}})]}),Object(S.jsxs)("h2",{children:[s["input.name-style.emboss.pitch.label"],"\xa0\xa0",Object(S.jsx)(k.a,{className:"reset-button",onClick:()=>{j(90),u()}})]}),Object(S.jsxs)(us,{className:"vertical-angle-control",children:[Object(S.jsx)("div",{className:"slider-label"}),Object(S.jsx)(jc.a,{size:"small",min:-90,max:90,onChange:e=>{j("string"===typeof e?parseInt(e):null!==e&&void 0!==e?e:0),u()},value:y}),Object(S.jsx)(iu,{min:-90,max:90,value:y,onChange:e=>{j(e),u()}}),Object(S.jsx)("div",{className:"slider-padding"})]}),Object(S.jsxs)("h2",{children:[s["input.name-style.emboss.yaw.label"],"\xa0\xa0",Object(S.jsx)(k.a,{className:"reset-button",onClick:()=>{v(90),u()}})]}),Object(S.jsx)("div",{className:"horizontal-angle-contorl",children:Object(S.jsx)(ll,{angle:f,size:120,setAngle:e=>{v(e),u()}})})]}),C&&Object(S.jsxs)("div",{className:"emboss-control-right",children:[Object(S.jsx)("h2",{children:"Light color"}),Object(S.jsx)(kd.a,{styles:{default:{picker:{color:"#000000",background:"var(--main-level-3)",boxShadow:"none"},body:{padding:"var(--spacing) var(--spacing)"}}},disableAlpha:!0,color:m,onChange:e=>{p(e.hex),u()},onChangeComplete:e=>{p(e.hex),u()}})]})]})});var db;const ub=fr.b.div(db||(db=Object(mr.a)(["\n    .chrome-picker {\n        /** Target color format swapper in picker's body */\n        > div:nth-child(2) > .flexbox-fix:nth-child(2) {\n            display: none !important;\n        }\n    }\n"]))),bb=e=>{let{color:t,onChange:n}=e;const[r,i]=Object(a.useState)(t);return Object(a.useEffect)(()=>{i(t)},[t]),Object(S.jsxs)(ub,{children:[Object(S.jsx)(kd.a,{styles:{default:{picker:{color:"#000000",background:"var(--main-level-3)",boxShadow:"none",padding:"var(--spacing-sm) var(--spacing)"},body:{padding:"var(--spacing) var(--spacing)"}}},disableAlpha:!0,color:r,onChange:e=>i(e.hex),onChangeComplete:e=>{i(e.hex),n(e.hex)}}),Object(S.jsx)(kd.b,{colors:bn,color:t,onChangeComplete:e=>{n(e.hex)}})]})};n(596);const mb=Object(a.forwardRef)((e,t)=>{let{frameInfo:n,defaultType:r,defaultValue:i,showExtraDecorativeOption:o,onChange:s}=e;const c=Rr(),d=Object(a.useRef)(null),[u,b]=mi("nameStylePresetList"),[m,p]=Object(a.useState)(-1),[g,h]=Object(a.useState)(!1),[f,v]=Object(a.useState)(r),[y,j]=Object(a.useState)(i),[x,O]=ar(),{db:k}=ci(),C=Object(a.useRef)(Cr()(s,250)).current,F=Uo(e=>e.setVisible),L=Object(a.useCallback)((e,t)=>{j(n=>Object(l.a)(Object(l.a)({},n),{},{gradientAngle:t,gradientColor:tr(e)})),x()},[x]),T=oi(e=>e.setting.reduceMotionColor),N=Object(a.useMemo)(()=>{return[{label:(e=c)["input.name-style.type.auto.label"],value:G},...Object.values(ke).map(t=>{let{value:n,labelKey:a}=t;return{label:e[a],value:n}})];var e},[c]);Object(a.useEffect)(()=>{0!==O&&(v("custom"),C("custom",y))},[O]);const R=Object(a.useRef)(null),I=Object(a.useRef)(null),E=Object(a.useRef)(null);Object(a.useImperativeHandle)(t,()=>({setValue:e=>{var t,n,a;j(t=>Object(l.a)(Object(l.a)({},t),e));const{lineColor:r,lineWidth:i,lineOffsetX:o,lineOffsetY:s,shadowBlur:c,shadowColor:d,shadowOffsetX:u,shadowOffsetY:b,embossPitch:m,embossYaw:p,embossThickness:g}=e;null===(t=R.current)||void 0===t||t.setValue({x:u,y:b,width:c,color:d}),null===(n=I.current)||void 0===n||n.setValue({x:o,y:s,width:i,color:r}),null===(a=E.current)||void 0===a||a.setValue({pitch:m,yaw:p,thickness:g})}}));const{fillStyle:z,headTextFillStyle:D,hasOutline:B,hasShadow:P,hasGradient:M,gradientColor:H,gradientAngle:A,hasEmboss:W,embossPitch:K,embossYaw:Y,embossThickness:U,pattern:X,font:V}=y,{labelBackgroundColor:_,labelBackgroundImage:J}=null!==n&&void 0!==n?n:{},Z={background:_,backgroundImage:J},ee="custom"===f,te="predefined"===f,ne="name-style-option-input-container",ae=()=>{v("auto"),"auto"!==f&&C("auto",y)},re=()=>{var e;const t=y.preset?null===(e=q[y.preset])||void 0===e?void 0:e.value:{};v("predefined"),j(e=>Object(l.a)(Object(l.a)({},e),t)),C("predefined",Object(l.a)(Object(l.a)({},y),t))},ie=()=>{v("custom"),"custom"!==f&&C("custom",y)},oe="color-picker";return Object(S.jsx)("div",{className:"ant-input-group-wrapper text-style-input",children:Object(S.jsxs)("span",{className:"ant-input-wrapper ant-input-group",children:[Object(S.jsx)("span",{className:"ant-input-group-addon",children:c["input.name-style.label"]}),Object(S.jsxs)("span",{className:"name-style-input-container",children:[Object(S.jsxs)("div",Object(l.a)(Object(l.a)({id:ne,className:"ant-radio-group ant-radio-group-outline name-style-option-input-container"},rr({setFocus:p,optionLength:3,onKeyPress:e=>{if(1===m&&("ArrowDown"===e.key||"Enter"===e.key||"  "===e.key))return e.preventDefault(),p(1),h(!0),setTimeout(()=>{var e;1===m&&(null===(e=d.current)||void 0===e||e.focus())},200),!1},onTrigger(){0===m&&ae(),1===m&&re(),2===m&&ie()}})),{},{children:[Object(S.jsxs)("label",{className:ur("ant-radio-wrapper","auto"===f&&"ant-radio-wrapper-checked",0===m&&"ant-radio-focused"),onClick:()=>ae(),children:[Object(S.jsxs)("span",{className:"ant-radio ".concat("auto"===f?"ant-radio-checked":""),children:[Object(S.jsx)("input",{tabIndex:-1,type:"radio",className:"ant-radio-input",value:"auto"}),Object(S.jsx)("span",{className:"ant-radio-inner"})]}),Object(S.jsx)("span",{className:"ant-radio-label",children:c["input.name-style.type.auto.label"]})]}),Object(S.jsx)("span",{className:"name-style-option-break"}),Object(S.jsx)("label",{className:ur("ant-radio-wrapper",te&&"ant-radio-wrapper-checked",1===m&&"ant-radio-focused"),onClick:()=>re(),children:Object(S.jsx)(bl.a,{visible:g,onVisibleChange:h,trigger:["hover","click"],placement:"bottomLeft",overlayClassName:"predefined-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsx)(nb,{ref:d,active:te,value:y,onCancel:()=>{var e;h(!1),null===(e=document.getElementById(ne))||void 0===e||e.focus()},onClick:e=>{var t;let{key:n}=e;const a=n?null===(t=q[n])||void 0===t?void 0:t.value:{};v("predefined"),j(e=>Object(l.a)(Object(l.a)({},e),a)),C("predefined",Object(l.a)(Object(l.a)({},y),a))}})}),children:Object(S.jsxs)("span",{className:"name-style-option-label",children:[Object(S.jsxs)("span",{className:"ant-radio ".concat(te?"ant-radio-checked":""),children:[Object(S.jsx)("input",{tabIndex:-1,type:"radio",className:"ant-radio-input",value:"predefined"}),Object(S.jsx)("span",{className:"ant-radio-inner"})]}),Object(S.jsx)("span",{className:"ant-radio-label",children:c["input.name-style.type.predefined.label"]})]})})}),Object(S.jsx)("span",{className:"name-style-option-break"}),Object(S.jsx)("label",{className:ur("ant-radio-wrapper",ee&&"ant-radio-wrapper-checked",2===m&&"ant-radio-focused"),onClick:()=>ie(),children:Object(S.jsxs)("span",{children:[Object(S.jsxs)("span",{className:"ant-radio ".concat(ee?"ant-radio-checked":""),children:[Object(S.jsx)("input",{tabIndex:-1,type:"radio",className:"ant-radio-input",value:"custom"}),Object(S.jsx)("span",{className:"ant-radio-inner"})]}),Object(S.jsx)("span",{className:"ant-radio-label ant-radio-label-custom",children:c["input.name-style.type.custom.label"]})]})})]})),Object(S.jsxs)("div",{className:"style-picker",children:[Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)("div",{className:"input-popover",children:[Object(S.jsxs)("div",{className:"custom-style-text",children:[Object(S.jsx)("h3",{children:c["input.name-style.color.text.label"]}),Object(S.jsx)(bb,{color:z,onChange:e=>{v("custom"),j(t=>Object(l.a)(Object(l.a)({},t),{},{fillStyle:e})),x()}})]}),Object(S.jsx)("hr",{}),Object(S.jsxs)("div",{className:"custom-style-text",children:[Object(S.jsx)("h3",{children:c["input.name-style.color.ruby.label"]}),Object(S.jsx)(kd.b,{colors:bn,color:D,onChangeComplete:e=>{v("custom"),j(t=>Object(l.a)(Object(l.a)({},t),{},{headTextFillStyle:e.hex})),x()}})]})]})}),placement:"bottom",children:Object(S.jsxs)(bs,{id:oe,$softMode:T,$active:ee,className:"picker-dropdown color-picker-dropdown",children:[c["input.name-style.color.label"]," ",Object(S.jsx)(Ku.a,{})]})},"color-picker"),o&&Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)("div",{className:"input-popover",children:[Object(S.jsx)("h3",{className:"custom-style-expand",children:Object(S.jsx)(jl.a,{value:"has-shadow",checked:P,onChange:()=>{v("custom"),j(e=>Object(l.a)(Object(l.a)({},e),{},{hasShadow:!e.hasShadow})),x()},children:c["input.name-style.shadow.toggle.label"]})}),P&&Object(S.jsx)(tb,{ref:R,className:"custom-style-shadow",fieldMap:{color:"shadowColor",width:"shadowBlur",x:"shadowOffsetX",y:"shadowOffsetY"},labelMap:{shadowBlur:c["input.name-style.slider.blur.label"]},defaultValue:y,onChange:e=>{let{color:t,width:n,x:a,y:r}=e;j(e=>Object(l.a)(Object(l.a)({},e),{},{shadowBlur:n,shadowColor:t,shadowOffsetX:a,shadowOffsetY:r})),x()}})]})}),placement:"bottom",children:Object(S.jsxs)(bs,{$softMode:T,$active:ee&&P,className:"picker-dropdown shadow-picker-dropdown",children:[c["input.name-style.shadow.label"]," ",Object(S.jsx)(Ku.a,{})]})},"shadow-picker"),Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)("div",{className:"input-popover",children:[Object(S.jsx)("h3",{className:"custom-style-expand",children:Object(S.jsx)(jl.a,{value:"has-line",checked:B,onChange:()=>{v("custom"),j(e=>Object(l.a)(Object(l.a)({},e),{},{hasOutline:!e.hasOutline})),x()},children:c["input.name-style.outline.toggle.label"]})}),B&&Object(S.jsx)(tb,{ref:I,className:"custom-style-line",fieldMap:{color:"lineColor",width:"lineWidth",x:"lineOffsetX",y:"lineOffsetY"},labelMap:{lineWidth:c["input.name-style.slider.thickness.label"]},defaultValue:y,onChange:e=>{let{color:t,width:n,x:a,y:r}=e;j(e=>Object(l.a)(Object(l.a)({},e),{},{lineWidth:n,lineColor:t,lineOffsetX:a,lineOffsetY:r})),x()}})]})}),placement:"bottom",children:Object(S.jsxs)(bs,{$softMode:T,$active:ee&&B,className:"picker-dropdown outline-picker-dropdown",children:[c["input.name-style.outline.label"]," ",Object(S.jsx)(Ku.a,{})]})},"outline-picker"),o&&Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)("div",{className:"input-popover",children:[Object(S.jsx)("h3",{className:"custom-style-expand",children:Object(S.jsx)(jl.a,{value:"has-gradient",checked:M,onChange:()=>{v("custom"),j(e=>Object(l.a)(Object(l.a)({},e),{},{hasGradient:!e.hasGradient})),x()},children:c["input.name-style.gradient.toggle.label"]})}),M&&Object(S.jsx)("div",{className:"custom-style-gradient",children:Object(S.jsx)(Gu,{angle:A,palette:H,memoizedOnChange:L})})]})}),placement:"bottom",children:Object(S.jsxs)(bs,{$softMode:T,$active:ee&&M,className:"picker-dropdown gradient-picker-dropdown",children:[c["input.name-style.gradient.label"]," ",Object(S.jsx)(Ku.a,{})]})},"gradient-picker"),o&&Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay pattern-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)(Ju,{onClick:e=>e.stopPropagation(),children:[Object(S.jsx)("div",{className:"alert",children:c["input.name-style.pattern.alert"]}),$.map(e=>{let{key:t,patternImage:n}=e;return Object(S.jsx)(rc,{className:["pattern-option",y.pattern===t?"menu-active":"",n?"":"menu-off"].join(" "),onClick:()=>{j(e=>Object(l.a)(Object(l.a)({},e),{},{pattern:t})),x()},children:n?Object(S.jsx)("img",{style:n?Z:{},className:"pattern-image",src:"".concat("/ygocarder","/asset/image/finish-name/").concat(n,".png"),alt:t}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(w.a,{})," ",c["input.name-style.pattern.no-pattern.label"]]})},t)})]})}),placement:"bottomLeft",children:Object(S.jsx)(bs,{$softMode:T,$active:ee&&"string"===typeof X&&"none"!==X,className:"picker-dropdown pattern-picker-dropdown",children:c["input.name-style.pattern.label"]})},"pattern-picker"),Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay font-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsx)(du.Container,{children:N.map(e=>{let{value:t,label:n}=e;return Object(S.jsx)(du.Option,{className:V===t?"menu-active":"",onClick:()=>{j(e=>Object(l.a)(Object(l.a)({},e),{},{font:t})),x()},children:n},t)})})}),placement:"bottomLeft",children:Object(S.jsx)(bs,{$softMode:T,$active:ee&&"Auto"!==V,className:"picker-dropdown font-picker-dropdown",children:c["input.name-style.font.label"]})},"font-picker"),o&&Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)("div",{className:"input-popover",children:[Object(S.jsx)("h3",{className:"custom-style-expand",children:Object(S.jsx)(jl.a,{value:"has-emboss",checked:W,onChange:()=>{v("custom"),j(e=>Object(l.a)(Object(l.a)({},e),{},{hasEmboss:!e.hasEmboss})),x()},children:c["input.name-style.emboss.toggle.label"]})}),W&&Object(S.jsx)(cb,{ref:E,language:c,defaultPitch:K,defaultYaw:Y,defaultThickness:U,materialColor:z,onColorTabNavigate:()=>{var e;null===(e=document.getElementById(oe))||void 0===e||e.click()},onChange:e=>{let{thickness:t,yaw:n,pitch:a}=e;j(e=>Object(l.a)(Object(l.a)({},e),{},{embossPitch:a,embossYaw:n,embossThickness:t})),x()},children:Object(S.jsx)("div",{className:"alert",children:c["input.name-style.emboss.alert"]})})]})}),placement:"bottomLeft",children:Object(S.jsx)(bs,{$softMode:T,$active:ee&&W,className:"picker-dropdown emboss-picker-dropdown",children:c["input.name-style.emboss.label"]})},"emboss-picker"),Object(S.jsxs)("div",{className:"save-preset-button-group",children:[Object(S.jsx)(Jo.a,{size:"small",className:"picker-dropdown preset-picker-dropdown",type:"primary",onClick:async()=>{const e=Object(Q.a)();if(k){const t=k.transaction("presetNameStyleStore","readwrite");await k.put("presetNameStyleStore",{key:e,content:JSON.stringify(y)}),await t.done}b(t=>[...t,{key:e,content:Object(l.a)({},y)}])},children:c["input.name-style.preset.label"]}),Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay global-style-picker-overlay low-index",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)($u,{onClick:e=>e.stopPropagation(),children:[u.length>0&&Object(S.jsxs)("div",{className:"preset-warning",children:[c["preset.warning.label"],"\xa0",Object(S.jsx)("span",{className:"open-preset-manager",onClick:()=>F(!0),children:c["preset.manager.check.label"]})]}),0===u.length&&Object(S.jsx)(cd.a,{description:c["generic.empty.label"]}),u.map(e=>{let{key:t,content:a}=e;return Object(S.jsx)(lc,{language:c,frameInfo:n,presetContent:a,onActive:()=>{j(Object(l.a)({},a)),x()},onOverwrite:async()=>{if(k){const e=k.transaction("presetNameStyleStore","readwrite");await k.put("presetNameStyleStore",{key:t,content:JSON.stringify(y)}),await e.done}b(e=>e.map(e=>e.key===t?{key:t,content:Object(l.a)({},y)}:e))},onDelete:async()=>{if(k){const e=k.transaction("presetNameStyleStore","readwrite");await k.delete("presetNameStyleStore",t),await e.done}b(e=>e.filter(e=>e.key!==t))},children:a.preset},t)})]})}),placement:"bottomRight",children:Object(S.jsx)("div",{className:"custom-preset-button",children:Object(S.jsx)(Ku.a,{})})},"preset-picker")]})]})]})]})})});var pb;const gb=Object(fr.a)(pb||(pb=Object(mr.a)(["\n    .checkbox-train-input-group,\n    .radio-train-input-group {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tcolumn-gap: var(--spacing-xs);\n\t\trow-gap: var(--spacing-xs);\n\t\tbox-shadow: none;\n\t\tborder-radius: 0;\n\t\t&:focus-visible {\n\t\t\toutline: 3px solid var(--focus); // +1 width size to account for shadow\n\t\t}\n\t\t.ant-radio-button-wrapper:first-child,\n\t\t.ant-radio-button-wrapper:last-child {\n\t\t\tborder-radius: 0;\n\t\t}\n\t\t.ant-radio-button-wrapper {\n\t\t\tflex: 1;\n\t\t\twhite-space: nowrap;\n\t\t\tborder: none;\n\t\t\tbox-shadow: var(--bs-1);\n\t\t\tpadding: 0;\n\t\t\tmin-width: 90px;\n\t\t\theight: 28px;\n\t\t\tline-height: 28px;\n\t\t\ttext-align: center;\n\t\t\ttext-shadow: none;\n\t\t\tfont-size: var(--fs-sm);\n\t\t\t&:hover {\n\t\t\t\toutline: var(--bw) solid var(--main-active);\n\t\t\t\toutline-offset: var(--bw);\n\t\t\t}\n\t\t\t&::before {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t\t.ant-radio-button-wrapper-checked {\n\t\t\toutline: var(--bw) solid var(--main-active);\n\t\t\toutline-offset: var(--bw);\n\t\t}\n\t}\n"])));var hb;const fb=Object(fr.b)(Il)(hb||(hb=Object(mr.a)(["\n\t","\n"])),gb),vb=Object(a.forwardRef)((e,t)=>{let{onSTFrameChange:n,onPasswordChange:r,onStatChange:i}=e;const{setting:o}=oi(),{showExtraDecorativeOption:s}=o,c=Object(a.useMemo)(()=>zu().filter(e=>s||"normal"===e.edition),[s]),{frame:d,setCard:u}=ii(Object(ui.useShallow)(e=>{let{card:t,setCard:n}=e;return{frame:t.frame,setCard:n}})),b=Object(a.useCallback)(e=>{u(t=>{const{typeAbility:a,attribute:o,format:s,password:c,star:d,atk:u,def:b,linkRating:m}=t,p="".concat(e),g="spell"===p||"trap"===p,h=g||"speed-skill"===p,f="tcg"===s?{"Spell Card":"Spell Card","Trap Card":"Trap Card"}:Me,v="spell"===p?[f["Spell Card"]]:"trap"===p?[f["Trap Card"]]:a,y="token"===p?Be[s]:c,j=h?"":""===u?"0":u,x=h?"":""===b?"0":b,O=h?"":m,w="token"===p?0:d;return r(y),g&&n(v),i(j,x,O),Object(l.a)(Object(l.a)({},t),{},{frame:p,isLink:"link"===p,attribute:"token"===p?C:g?"".concat(p).toUpperCase():o,star:w,typeAbility:v,password:y,atk:j,def:x,linkRating:O})})},[u,r,n,i]);return Object(a.useImperativeHandle)(t,()=>({changeFrame:b})),Object(S.jsx)(fb,{className:"frame-radio",value:d,onChange:b,optionList:c})});var yb;const jb=fr.b.div(yb||(yb=Object(mr.a)(["\n    ","\n"])),Ll),xb=e=>{let{onChange:t,value:n,optionList:r,children:i,className:o}=e;const[s,c]=Object(a.useState)(-1),d=r.length;return Object(S.jsxs)(jb,{className:["ant-radio-group ant-radio-group-outline checkbox-train",o].join(" "),children:[i&&Object(S.jsx)("label",{className:"standalone-addon ant-input-group-addon",children:i}),Object(S.jsx)("div",Object(l.a)(Object(l.a)({className:"checkbox-train-input-group"},rr({setFocus:c,optionLength:d,onTrigger:()=>{const e=r[s];if(e){const a=!!Array.isArray(n)&&n.includes("".concat(e.value));t(a?n.filter(t=>"".concat(e.value)!==t):[...n,"".concat(e.value)])}}})),{},{children:r.map((e,a)=>{const{label:r,value:i,props:o,tooltip:c}=e,d=!!Array.isArray(n)&&n.includes("".concat(i)),u=Object(S.jsxs)("label",Object(l.a)(Object(l.a)({},o),{},{className:["ant-radio-button-wrapper",d?"ant-radio-button-wrapper-checked":"",s===a?"checkbox-train-focused":""].join(" "),onClick:()=>{t(d?n.filter(e=>"".concat(i)!==e):[...n,"".concat(i)])},children:[Object(S.jsx)("span",{className:"ant-radio-button ".concat(d?"ant-radio-button-checked":""),children:Object(S.jsx)("span",{className:"ant-radio-button-inner"})}),Object(S.jsx)("span",{className:"label",children:r})]}),i);return c?Object(S.jsx)(hr.a,{title:c,children:u},i):u})}))]})};var Ob;const wb=Object(fr.b)(yd)(Ob||(Ob=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: max-content max-content;\n    align-items: start;\n    gap: 0;\n    .card-image-source-input {\n        display: flex;\n        flex-direction: column;\n        .online-image-tip {\n            text-align: center;\n        }\n    }\n    .card-cropper {\n        width: var(--cropper-width);\n        text-align: center;\n    }\n    .layout-picker-subpanel {\n        h2 {\n            padding-left: 0;\n            padding-right: 0;\n        }\n    }\n"]))),kb=Object(a.forwardRef)((e,t)=>{let{backgroundColor:n,children:r,receivingCanvas:i,onSourceLoaded:o,onTainted:s,onCropChange:c}=e;const d=Rr(),{background:u,backgroundCrop:b,backgroundType:m,backgroundData:g,backgroundSource:h,backgroundFit:f,isPendulum:v,pendulumSize:y,opacity:j,getUpdater:x,setCard:O}=ii(Object(ui.useShallow)(e=>{let{card:{background:t,backgroundCrop:n,backgroundType:a,backgroundData:r,backgroundSource:i,backgroundFit:o,isPendulum:l,pendulumSize:s,opacity:c},getUpdater:d,setCard:u}=e;return{background:t,backgroundCrop:n,backgroundType:a,backgroundData:r,backgroundSource:i,backgroundFit:o,isPendulum:l,pendulumSize:s,opacity:c,getUpdater:d,setCard:u}})),w=Object(a.useRef)(null),k=Object(a.useMemo)(()=>x("backgroundSource"),[x]),C=Object(a.useMemo)(()=>x("background"),[x]),F=Object(a.useMemo)(()=>x("backgroundData"),[x]),L=Object(a.useCallback)(e=>O(t=>Object(l.a)(Object(l.a)({},t),{},{backgroundFit:e})),[O]),T=Object(a.useCallback)((e,t,n)=>{null===c||void 0===c||c(e,t),e&&O(t=>Object(l.a)(Object(l.a)({},t),{},{backgroundCrop:e}),n)},[c,O]);return Object(a.useImperativeHandle)(t,()=>({isLoading:()=>{var e,t;return null!==(e=null===(t=w.current)||void 0===t?void 0:t.isLoading())&&void 0!==e&&e},hasImage:()=>{var e,t;return null!==(e=null===(t=w.current)||void 0===t?void 0:t.hasImage())&&void 0!==e&&e},setValue:e=>{let{background:t,backgroundCrop:n,backgroundData:a,backgroundSource:r}=e;var i,o;"offline"===r?"string"===typeof a&&n&&(null===(i=w.current)||void 0===i||i.forceSource("offline",a,n)):"string"===typeof t&&n&&(null===(o=w.current)||void 0===o||o.forceSource("online",t,n))}})),Object(S.jsx)(wb,{ref:w,title:d["input.background-image.label"],backgroundColor:n,defaultSourceType:h,defaultInternalSource:g,defaultExternalSource:u,defaultCropInfo:b,receivingCanvas:i,forceFit:f,onSourceChange:(e,t)=>{k(e),"offline"===e?F(t):C(t)},onCropChange:T,onTainted:s,onSourceLoaded:o,onForceFitChange:L,onMaxSizeExceeded:e=>{gr.a.error({description:d["error.max-size.description"](e),message:d["error.max-size.message"]})},ratio:p(v,j,m,y).backgroundRatio,beforeCropper:null,children:r})});var Sb=n(662);n(597);const Cb=["background","backgroundCrop","backgroundData","backgroundSource"];var Fb,Lb,Tb;const Nb=fr.b.div(Fb||(Fb=Object(mr.a)(["\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    column-gap: var(--spacing-sm);\n    row-gap: var(--spacing-sm);\n    padding: 2px 0;\n    align-items: center;\n    .art-frame {\n        span {\n            padding: 0;\n        }\n    }\n    div.ant-slider {\n        .ant-slider-handle {\n            height: 19px;\n            top: 8px;\n            border-radius: 0;\n            width: 10px;\n        }\n        .ant-slider-step,\n        .ant-slider-track,\n        .ant-slider-rail {\n            height: 10px;\n        }\n    }\n    .card-opacity-slider {\n        flex: 0 1 auto;\n        .ant-slider {\n            padding-top: 8px;\n        }\n    }\n    .background-label {\n        cursor: pointer;\n        &:hover {\n            .background-preview {\n                box-shadow: 0 0 2px 0 #2a2a2a;\n            }\n        }\n    }\n    .background-preview {\n        display: inline-block;\n        line-height: 0;\n        width: 17px;\n        height: 17px; // Alignment\n        align-self: center;\n        border: 1px solid #333333;\n        text-align: center;\n        user-select: none;\n        .background-preview-callback-passer {\n            width: 100%;\n            height: 100%;\n        }\n        .background-image-preview {\n            max-width: 15px;\n            max-height: 15px;\n        }\n        .no-background-icon {\n            font-size: 15px; // Alignment\n        }\n    }\n"]))),Rb=fr.b.div(Lb||(Lb=Object(mr.a)(["\n    --input-width: 315px;\n    &.overlay-no-background-image {\n        .card-image-cropper {\n            grid-template-columns: 1fr;\n        }\n        .card-cropper {\n            min-height: 0;\n            line-height: 0;\n            width: 0;\n            visibility: hidden;\n            position: absolute;\n        }\n        .card-image-source-input {\n            padding-right: 0;\n            margin-right: 0;\n            border-right: none;\n        }\n        i {\n            max-width: var(--input-width); // Alignment\n        }\n    }\n    i {\n        display: inline-block;\n        font-size: var(--fs-sm);\n        color: var(--color);\n        font-weight: normal;\n    }\n    .background-picker {\n        padding: var(--spacing-xs);\n        /** No display none here, again we want to keep card cropper painted, just not visible */\n        &.overlay-no-background {\n            visibility: hidden;\n            height: 0;\n            width: 0;\n            padding: 0;\n        }\n        .layout-picker-panel {\n            margin-top: var(--spacing);\n        }\n        .card-image-input {\n            text-align: center;\n            max-width: var(--input-width);\n        }\n    }\n    .card-image-source-input {\n        height: 100%;\n        justify-content: start;\n        padding-right: var(--spacing-xs);\n        margin-right: var(--spacing-xs);\n        border-right: var(--bw) solid var(--sub-level-4);\n        .type-section h2 {\n            margin-top: var(--spacing-xs);\n        }\n        .background-type-picker {\n            .radio-train-input-group {\n                display: grid;\n            }\n            .ant-radio-button-wrapper {\n                border-left: var(--bw) solid var(--sub-level-1);\n            }\n        }\n        .color-section h2 {\n            padding-top: 0;\n            padding-left: 0;\n        }\n    }\n    .color-section {\n        > h2 + div {\n            > div:first-child {\n                box-shadow: none !important; // Override inline style\n            }\n            > div:nth-child(2) {\n                border: var(--bw) solid var(--main-level-1);\n            }\n        }\n    }\n"]))),Ib=fr.b.div(Tb||(Tb=Object(mr.a)(["\n    max-width: 20rem;\n    padding: var(--spacing-sm);\n    small {\n        display: block;\n        line-height: var(--fs-lg);\n        &.tooltip-disable {\n            color: var(--color-dim);\n        }\n    }\n    .layout-setting-option + .layout-setting-option {\n        margin-top: var(--spacing-sm);\n    }\n"]))),Eb=Object(a.forwardRef)((e,t)=>{var n;let{receivingCanvas:r,defaultValue:i,onTainted:o,onChange:s,onSourceLoaded:d,onCropChange:m}=e;const p=Rr(),{background:g,backgroundData:h,backgroundSource:f,backgroundType:v,getUpdater:y,hasBackground:j,isPendulum:x,setCard:O}=ii(Object(ui.useShallow)(e=>{let{card:{background:t,backgroundData:n,backgroundSource:a,backgroundType:r,hasBackground:i,isPendulum:o},setCard:l,getUpdater:s}=e;return{background:t,backgroundData:n,backgroundSource:a,backgroundType:r,getUpdater:s,hasBackground:i,isPendulum:o,setCard:l}})),[w,k]=Object(a.useState)(!0),[C,F]=Object(a.useState)(!0),[L,T]=Object(a.useState)(()=>Object(l.a)(Object(l.a)({},b()),i)),N=Object(a.useRef)(null),R=Object(a.useMemo)(()=>y("backgroundType"),[y]),I=Object(a.useCallback)(e=>O(t=>{const n=e.target.checked;return Object(l.a)(Object(l.a)({},t),{},{hasBackground:n})}),[O]);Object(a.useEffect)(()=>{let e=!0;return setTimeout(()=>{e&&s(L)},500),()=>{e=!1}},[L]),Object(a.useEffect)(()=>{k(!1),setTimeout(()=>{F(!1)},250)},[]),Object(a.useImperativeHandle)(t,()=>({isLoading:()=>{var e,t;return null!==(e=null===(t=N.current)||void 0===t?void 0:t.isLoading())&&void 0!==e&&e},setValue:e=>{let{background:t,backgroundCrop:n,backgroundData:a,backgroundSource:r}=e,i=Object(oa.a)(e,Cb);var o;"string"!==typeof t&&"string"!==typeof a||!n||(null===(o=N.current)||void 0===o||o.setValue({background:t,backgroundCrop:n,backgroundData:a,backgroundSource:r}));for(const s in i)i[s]!==L[s]&&T(e=>Object(l.a)(Object(l.a)({},e),i))}}));const E=0===(null!==g&&void 0!==g?g:"").length&&!0!==(null===(n=N.current)||void 0===n?void 0:n.hasImage());return Object(S.jsxs)(Nb,{className:"card-opacity-slider-container",children:[Object(S.jsx)(bl.a,{overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)(Ib,{className:"input-popover",children:[Object(S.jsxs)("div",{className:"layout-setting-option",children:[Object(S.jsx)(jl.a,{className:"art-frame",onChange:e=>{T(t=>Object(l.a)(Object(l.a)({},t),{},{boundless:e.target.checked}))},checked:L.boundless,children:p["input.opacity.boundless.label"]}),Object(S.jsx)("br",{}),Object(S.jsx)("small",{children:p["input.opacity.boundless.tooltip"]})]}),Object(S.jsxs)("div",{className:"layout-setting-option",children:[Object(S.jsx)(jl.a,{className:"art-frame",disabled:!L.boundless,onChange:e=>{T(t=>Object(l.a)(Object(l.a)({},t),{},{frameBorder:e.target.checked,boundless:!!e.target.checked||t.boundless}))},checked:L.frameBorder,children:p["input.opacity.overframe.label"]}),Object(S.jsx)("br",{}),Object(S.jsx)("small",{className:L.boundless?"":"tooltip-disable",children:p["input.opacity.overframe.tooltip"]})]}),dn.map(e=>{let{labelKey:t,subType:n,tooltipKey:a}=e;const r=n&&L[n];return Object(S.jsxs)("div",{className:"layout-setting-option",children:[Object(S.jsx)(jl.a,{className:"art-frame",onChange:e=>T(t=>Object(l.a)(Object(l.a)({},t),{},{[n]:e.target.checked})),checked:r,children:p[t]}),Object(S.jsx)("br",{}),Object(S.jsx)("small",{children:p[a]})]},n)})]})}),children:Object(S.jsx)(ds,{className:"background-label",children:Object(S.jsx)("div",{className:"button-label",children:p["input.opacity.setting.label"]})})}),Object(S.jsx)(bl.a,{visible:w,destroyTooltipOnHide:!1,trigger:["click"],onVisibleChange:k,overlayClassName:["global-input-overlay global-style-picker-overlay layout-picker-overlay",w?"picker-visible":"",C?"picker-hidden":""].join(" "),content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)(Rb,{className:["input-popover",E?"overlay-no-background-image":""].join(" "),children:[Object(S.jsxs)("h3",{className:"custom-style-expand ".concat(j?"":"inactive"),children:[Object(S.jsx)(jl.a,{checked:j,onChange:e=>{I(e)},children:p["input.background.toggle-label"]}),Object(S.jsx)("br",{}),Object(S.jsx)("i",{children:p["input.background.description"]})]}),Object(S.jsx)("div",{className:"background-picker ".concat(j?"":"overlay-no-background"),children:Object(S.jsx)(kb,{ref:N,receivingCanvas:r,onSourceLoaded:d,onTainted:o,onCropChange:m,backgroundColor:L.baseFill,children:Object(S.jsxs)("div",{className:"layout-picker-panel",children:[Object(S.jsxs)("div",{className:"layout-picker-subpanel color-section",children:[Object(S.jsx)("h2",{children:p["input.background-color.label"]}),Object(S.jsx)(kd.b,{colors:bn,color:L.baseFill,onChangeComplete:e=>{T(t=>Object(l.a)(Object(l.a)({},t),{},{baseFill:e.hex}))}})]}),!E&&Object(S.jsxs)("div",{className:"layout-picker-subpanel type-section",children:[Object(S.jsx)("h2",{children:p["input.background-type.label"]}),Object(S.jsx)(Il,{className:"background-type-picker",onChange:R,optionList:c({strict:p["input.background-type.strict.label"],fit:p["input.background-type.fit.label"],full:p["input.background-type.full.label"],frame:p["input.background-type.frame.label"]}),value:v})]})]})})})]})}),placement:"bottom",children:Object(S.jsxs)(ds,{className:"background-label",children:[Object(S.jsx)("div",{className:"background-preview",style:{backgroundColor:j?L.baseFill:u},children:j?g||h?Object(S.jsx)("img",{className:"background-image-preview",src:"online"===f?g:h,alt:"Background"}):null:Object(S.jsx)(Sb.a,{className:"no-background-icon"})}),p["input.background.label"]]})}),un.map(e=>{var t,n;let{labelKey:a,type:r}=e;return"pendulum"!==r||x?Object(S.jsxs)(us,{className:["card-opacity-slider"].join(" "),children:[Object(S.jsx)(ds,{className:"slider-label",children:p[a]}),Object(S.jsx)(jc.a,{size:"small",min:0,max:100,onChange:e=>T(t=>Object(l.a)(Object(l.a)({},t),{},{[r]:"number"===typeof e?e:100})),value:null!==(t=L[r])&&void 0!==t?t:100}),Object(S.jsx)(iu,{min:0,max:100,step:5,onChange:e=>T(t=>Object(l.a)(Object(l.a)({},t),{},{[r]:e})),value:null!==(n=L[r])&&void 0!==n?n:100}),Object(S.jsx)("div",{className:"slider-padding"})]},r):null})]})});var zb=n(663),Db=n(664);const Bb=new Set(["1","2","3","4","5","i"]),Pb=(e,t,n,a,r,i,o)=>{const l=e.substring(n,a),s="\n"===e[a]||!r;let c=l,d=2;switch(t){case"1":i?(c="[[".concat(l,"]]").concat(s?"":"\n"),d=s?4:5):(c="[".concat(l,"]").concat(s?"":"\n"),d=s?2:3);break;case"2":c="{".concat(l,"}");break;case"3":c="{".concat(l,"|}");break;case"4":c="{".concat(l,"||}"),d=3;break;case"5":c="{{".concat(l,"}}"),d=4;break;case"i":c="<i>".concat(l,"</i>"),d=7}o(e.substring(0,n)+"".concat(c)+e.substring(a,e.length),a+d)},Mb=e=>{let{id:t,placement:n}=e;if(t&&n>=0){var a;const e=document.querySelector("#".concat(t));e&&(null!==(a=e.selectionEnd)&&void 0!==a?a:-1)>=0&&(e.selectionEnd=n)}},Hb=["id","allowHotkey","defaultValue","onTakePicker","onChange","onKeyDown","className"],{TextArea:Ab}=fc.a,Wb=Object(a.forwardRef)((e,t)=>{let{id:n,allowHotkey:r,defaultValue:i,onTakePicker:o,onChange:s,onKeyDown:c,className:d}=e,u=Object(oa.a)(e,Hb);const b=Object(a.useRef)(i),[m,p]=Object(a.useState)(i),[g,h]=Object(a.useState)({id:"",placement:-1}),f=Object(a.useCallback)(e=>{const t="string"===typeof e?e:e.target.value;b.current=t,p(t)},[]);Object(a.useEffect)(()=>{Mb(g)},[g]),Object(a.useEffect)(()=>{s({target:{value:m}})},[m]);const v=e=>{e!==b.current&&f(e)};return Object(a.useImperativeHandle)(t,()=>({setValue:v,getPickerRef:()=>n?{id:n,setValue:v}:null})),Object(S.jsx)(Ab,Object(l.a)({id:n,autoComplete:"off",onFocus:()=>n&&(null===o||void 0===o?void 0:o({id:n,setValue:v})),allowClear:!0,spellCheck:!1,className:"card-textarea ".concat(n,"-input ").concat(d),value:m,onKeyDown:e=>{var t,a;if(null===c||void 0===c||c(e),!r)return;const{ctrlKey:i,key:o,metaKey:l}=e,s=null!==(t=e.currentTarget.selectionStart)&&void 0!==t?t:-1,d=null!==(a=e.currentTarget.selectionEnd)&&void 0!==a?a:-1;(i||l)&&n&&d!==s&&Bb.has(o)&&(e.preventDefault(),Pb(e.currentTarget.value,o,s,d,!0,e.shiftKey,(e,t)=>{f(e),h({id:n,placement:t})}))},onChange:f},u))}),Kb=["id","defaultValue","onTakePicker","onChange","onKeyDown","className"],Yb=Object(a.forwardRef)((e,t)=>{let{id:n,defaultValue:r,onTakePicker:i,onChange:o,onKeyDown:s,className:c}=e,d=Object(oa.a)(e,Kb);const{setting:u}=oi(),{allowHotkey:b}=u,m=Object(a.useRef)(r),[p,g]=Object(a.useState)(r),[h,f]=Object(a.useState)({id:"",placement:-1}),v=Object(a.useCallback)(e=>{const t="string"===typeof e?e:e.target.value;m.current=t,g(t)},[]);Object(a.useEffect)(()=>{Mb(h)},[h]),Object(a.useEffect)(()=>{o({target:{value:p}})},[p]);const y=e=>{e!==p&&v(e)};return Object(a.useImperativeHandle)(t,()=>({setValue:y,getValue:()=>m.current})),Object(S.jsx)(fc.a,Object(l.a)({id:n,autoComplete:"off",onFocus:()=>n&&(null===i||void 0===i?void 0:i({id:n,setValue:y})),allowClear:!0,className:"".concat(n,"-input ").concat(c),value:p,onKeyDown:e=>{var t,a;if(null===s||void 0===s||s(e),!b)return;const{ctrlKey:r,key:i,metaKey:o}=e,l=null!==(t=e.currentTarget.selectionStart)&&void 0!==t?t:-1,c=null!==(a=e.currentTarget.selectionEnd)&&void 0!==a?a:-1;(r||o)&&n&&c!==l&&Bb.has(i)&&(e.preventDefault(),Pb(e.currentTarget.value,i,l,c,!1,e.shiftKey,(e,t)=>{v(e),f({id:n,placement:t})}))},onChange:e=>v(e.target.value)},d))});var Ub,Gb;const Xb=fr.b.div(Ub||(Ub=Object(mr.a)(["\n    align-self: flex-end;\n    position: relative;\n    min-height: 6px; // Alignment\n    .attribute-region-picker {\n        position: absolute;\n        right: 0;\n        top: calc(var(--spacing-xxs) * -1);\n        z-index: 1;\n    }\n    .ant-radio-button-wrapper {\n        font-size: var(--fs-xs);\n        height: unset;\n        line-height: 1.1;\n    }\n"]))),Vb=fr.b.div(Gb||(Gb=Object(mr.a)(["\n    .icon-button {\n        margin-top: var(--spacing-xxs);\n        margin-bottom: var(--spacing-xxs);\n    }\n"]))),qb=Object(a.forwardRef)((e,t)=>{let{language:n}=e;const{format:r,region:i,attribute:o,attributeType:l,getUpdater:s}=ii(Object(ui.useShallow)(e=>{let{card:{format:t,region:n,isLink:a,attribute:r,attributeType:i},getUpdater:o}=e;return{format:t,region:n,isLink:a,attribute:r,attributeType:i,getUpdater:o}})),c=Object(a.useRef)(null),{setting:d,updateSetting:u}=oi(),[,b]=mi("resetCanvasCounter"),{showCreativeOption:m,showExtraDecorativeOption:p,showExtraAttribute:g}=d,[h,f]=Object(a.useState)("custom"===l),v=Object(a.useMemo)(()=>s("attribute"),[s]),y=Object(a.useMemo)(()=>s("attributeType"),[s]),j=Object(a.useMemo)(()=>s("region"),[s]),x=Object(a.useMemo)(()=>((e,t,n)=>F.map(n=>{var a;let{name:r,nameKey:i,isCreative:o}=n;return{label:r===C?Object(S.jsx)(w.a,{}):Object(S.jsx)(hr.a,{overlay:t[i],children:Object(S.jsx)("img",{alt:t[i],src:"".concat("/ygocarder","/asset/image/attribute/attr-").concat(null===(a=R[e])||void 0===a?void 0:a.fileKey,"-").concat(r.toLowerCase(),".png")})}),value:r,isCreative:o}}).filter(e=>{let{isCreative:t}=e;return!1===t||t===n}))(i,n,m),[i,n,m]),O=Object(a.useMemo)(()=>((e,t,n)=>L.map(n=>{let{name:a,nameKey:r,isCreative:i}=n;return{label:Object(S.jsx)(hr.a,{overlay:t[r],children:Object(S.jsx)("img",{alt:t[r],src:"".concat("/ygocarder","/asset/image/attribute/attr-").concat(e,"-").concat(a.toLowerCase(),".png")})}),value:a,isCreative:i}}).filter(e=>{let{isCreative:t}=e;return!1===t||t===n}))(r,n,m),[r,n,m]),k=Object(a.useRef)("https://i.postimg.cc/3w5ZQ2rt/attr-custom-void.png");return Object(a.useImperativeHandle)(t,()=>({setValue:e=>{let{attribute:t,attributeType:n}=e;var a;t&&("custom"===n&&(f(!0),u({showExtraAttribute:!1}),v(t),y("custom"),null===(a=c.current)||void 0===a||a.setValue(t)))}})),Object(S.jsxs)(S.Fragment,{children:[p&&Object(S.jsx)(Xb,{className:ur("attribute-region-container"),children:Object(S.jsx)(Il,{className:"attribute-region-picker",optionList:Object.values(R).map(e=>{let{key:t}=e;return{value:t,label:t.toUpperCase()}}),value:i,onChange:j})}),Object(S.jsx)(Il,{className:"fill-input-train span-input-train attribute-input",value:o,onChange:e=>{v(e),y("auto"),b(e=>e+1)},optionList:x,suffix:p?Object(S.jsxs)(Vb,{children:[Object(S.jsx)(Sl,{onClick:()=>{var e,t;f(!0),u({showExtraAttribute:!1}),v(null!==(e=null===(t=c.current)||void 0===t?void 0:t.getValue())&&void 0!==e?e:k.current),y("custom")},active:"custom"===l,Icon:Qs.a,tooltipProps:{overlay:n["input.attribute.type-custom"]}}),Object(S.jsx)(Sl,{onClick:()=>{f(!1),u({showExtraAttribute:!0})},active:!!T[o],Icon:zb.a,tooltipProps:{overlay:n["input.attribute.type-extra"]}})]}):null,children:Object(S.jsx)("span",{children:n["input.attribute.label"]})}),p&&g&&Object(S.jsx)(Il,{className:"fill-input-train extra-attribute-input",value:o,onChange:e=>{v(e),y("auto"),b(e=>e+1)},optionList:O,suffix:g?Object(S.jsx)(Sl,{onClick:()=>u({showExtraAttribute:!1}),Icon:Db.a,tooltipProps:{overlay:n["button.less.label"]}}):null,children:"\xa0"}),h&&Object(S.jsxs)("div",{className:"link-attribute-input",children:[Object(S.jsx)("label",{className:"standalone-addon ant-input-group-addon",children:"\xa0"}),Object(S.jsx)(Yb,{ref:c,placeholder:n["input.link.custom.placeholder"],defaultValue:"custom"===l?o:k.current,onChange:e=>{"custom"===l&&(k.current=e.target.value,v(e.target.value),b(e=>e+1))}}),Object(S.jsx)(Sl,{onClick:()=>f(!1),Icon:Db.a,tooltipProps:{overlay:n["button.less.label"]}})]})]})});var _b,Jb,$b,Qb,Zb,em,tm=n(667),nm=n(668),am=n(669),rm=n(665),im=n(666);const om=fr.b.div(_b||(_b=Object(mr.a)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border-radius: var(--br-lg);\n    cursor: not-allowed;\n"]))),lm=Object(fr.b)(du.Container)(Jb||(Jb=Object(mr.a)(["\n    .anticon-close-circle {\n        font-size: var(--fs-lg);\n    }\n    img.icon-image {\n        width: var(--fs-lg);\n    }\n"]))),sm=fr.b.div($b||($b=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    gap: var(--spacing-px);\n    background-color: var(--sub-level-1);\n    border: var(--bw) solid var(--sub-level-1);\n    border-radius: var(--br-lg);\n    overflow: hidden;\n    position: relative;\n    .container-group {\n        box-shadow: none;\n        border: none;\n        border-radius: 0;\n    }\n    &.selector-disabled {\n        filter: opacity(0.65) grayscale(0.85);\n    }\n"]))),cm=e=>{let{disabled:t=!1,className:n,language:a,activeCardIcon:r,showMixableOnly:i=!1,showRemove:o=!1,onChange:l,onRemove:s}=e;const c=i?e=>e.isMixable:()=>!0;return Object(S.jsxs)(sm,{className:ur("icon-dropdown-container overlay-event-absorber",t?"selector-disabled":"",n),children:[t&&Object(S.jsx)(om,{className:"container-disable-overlay"}),Object(S.jsxs)(lm,{className:"container-group container-star",children:[o&&Object(S.jsxs)(du.Option,{onClick:()=>null===s||void 0===s?void 0:s(),children:[Object(S.jsx)(w.a,{}),"\xa0",a["input.icon-type.remove.label"]]}),M.filter(c).map(e=>{let{fullLabelKey:t,value:n,icon:i}=e;return Object(S.jsxs)(du.Option,{className:n===r?"menu-active":"",onClick:()=>l(n),children:[i?Object(S.jsxs)(S.Fragment,{children:[i,"\xa0"]}):null,a[t]]},n)})]}),Object(S.jsx)(lm,{className:"container-group container-attribute",children:A.filter(c).map(e=>{let{fullLabelKey:t,value:n,icon:i}=e;return Object(S.jsxs)(du.Option,{className:n===r?"menu-active":"",onClick:()=>l(n),children:[i?Object(S.jsxs)(S.Fragment,{children:[i,"\xa0"]}):null,a[t]]},n)})}),Object(S.jsx)(lm,{className:"container-group container-icon",children:K.filter(c).map(e=>{let{fullLabelKey:t,value:n,icon:i}=e;return Object(S.jsxs)(du.Option,{className:n===r?"menu-active":"",onClick:()=>l(n),children:[i?Object(S.jsxs)(S.Fragment,{children:[i,"\xa0"]}):null,a[t]]},n)})})]})},dm=fr.b.div(Qb||(Qb=Object(mr.a)(["\n    margin-bottom: var(--spacing);\n"]))),um=fr.b.div(Zb||(Zb=Object(mr.a)(["\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: var(--spacing);\n"]))),bm=fr.b.div(em||(em=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: repeat(13, 2rem);\n    gap: var(--spacing-xs);\n    align-items: center;\n    text-align: center;\n    margin-bottom: var(--spacing-sm);\n    line-height: 0;\n    .star-value {\n        display: inline-flex;\n        height: 2rem;\n        width: 2rem;;\n        align-items: center;\n        justify-content: center;\n        background-color: var(--main-level-1);\n        border-radius: var(--br-lg);\n        margin-top: var(--spacing-xs);\n        cursor: pointer;\n        border: var(--bw) solid transparent;\n        .anticon-close-circle {\n            font-size: var(--fs-lg)\n        }\n    }\n    .icon-image {\n        max-width: 1.5rem; // Alignment\n        max-height: 1.5rem;; // Alignment\n    }\n    .entry-active {\n        .star-value {\n            border-color: var(--main-active);\n        }\n    }\n    .entry-disable {\n        filter: opacity(0.65) grayscale(0.85);\n        * {\n            cursor: not-allowed;\n        }\n    }\n    :not(.entry-disable) .star-value:hover {\n        border-color: var(--sub-active);\n    }\n"]))),mm=Object(a.forwardRef)((e,t)=>{let{language:n}=e;const{starList:r,setCard:i}=ii(Object(ui.useShallow)(e=>{let{card:{starList:t},setCard:n}=e;return{starList:t,setCard:n}})),[o,s]=Object(a.useState)(!1),c=Object(a.useMemo)(()=>e=>{i(t=>{const n=Array.isArray(e)?e:e(t.starList);return Object(l.a)(Object(l.a)({},t),{},{starList:n})})},[i]),[{slotList:d,use12:u},b]=Object(a.useState)(()=>{const e=[],t=r.length<=12;for(let n=0;n<U;n++)e.push({slot:"slot-".concat(n),index:n,disabled:!1});return t&&(e[12].disabled=!0),{slotList:e,use12:t}}),[m,p]=Object(a.useState)({activeList:[]});Object(a.useImperativeHandle)(t,()=>({changeStatus:e=>{"open"===e?s(!0):"close"===e?s(!1):"toggle"===e&&s(e=>!e),p({activeList:[]})}}));const{activeList:g}=m;return Object(S.jsxs)(pr.a,{className:"global-overlay global-no-close",visible:o,width:506,onCancel:()=>s(!1),cancelText:n["manager.template.button.cancel.label"],okButtonProps:{style:{display:"none"}},children:[Object(S.jsxs)(dm,{className:"star-list-control-panel",children:[Object(S.jsx)(jl.a,{checked:u,onChange:e=>{e.target.checked?(b(e=>{let{slotList:t}=e;return{slotList:[...t.slice(0,12),{disabled:!0,index:12,slot:"slot-".concat(12)}],use12:!0}}),c(e=>e.slice(0,12)),p(e=>{let{activeList:t}=e;return{activeList:t.filter(e=>12!==e)}})):(b(e=>{let{slotList:t}=e;return{slotList:[...t.slice(0,12),{disabled:!1,index:12,slot:"slot-".concat(12)}],use12:!1}}),c(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a=[...e];for(let r=e.length;r<t;r++)a.push(n);return a}(e,U)))},children:n["input.icon-type.slot.use-12.label"]}),Object(S.jsx)(Jo.a,{size:"small",onClick:()=>{p(e=>({activeList:d.filter(t=>!e.activeList.includes(t.index)&&!t.disabled).map(e=>e.index)}))},children:n["input.icon-type.slot.revert.label"]}),"\xa0",Object(S.jsx)(Jo.a,{size:"small",onClick:()=>{p({activeList:d.filter(e=>!e.disabled).map(e=>e.index)})},children:n["input.icon-type.slot.select-all.label"]}),"\xa0",Object(S.jsx)(Jo.a,{size:"small",onClick:()=>{p({activeList:[]})},children:n["input.icon-type.slot.deselect-all.label"]})]}),Object(S.jsx)(bm,{className:"star-list-container",children:d.map(e=>{let{slot:t,index:n,disabled:a}=e;const i=r[n],o=Y[null!==i&&void 0!==i?i:""],l=g.includes(n);return Object(S.jsxs)("div",{className:ur("star-list-entry",l?"entry-active":"",a?"entry-disable":""),children:[Object(S.jsx)("div",{className:"checkbox-container",children:Object(S.jsx)(jl.a,{disabled:a,checked:l,onChange:e=>{if(a)return;const t=e.target.checked;p(t?e=>({activeList:[...e.activeList,n]}):e=>({activeList:e.activeList.filter(e=>e!==n)}))}})}),Object(S.jsx)("div",{className:"star-value",onClick:()=>{a||p({activeList:[n]})},children:o?o.icon:Object(S.jsx)(w.a,{})})]},t)})}),Object(S.jsxs)(um,{children:[Object(S.jsxs)(Jo.a,{size:"small",onClick:()=>{c(e=>[...e.slice(1,e.length),""]),p({activeList:[]})},children:[Object(S.jsx)(rm.a,{}),"\xa0",n["input.icon-type.slot.shift-left.label"]]}),Object(S.jsxs)(Jo.a,{size:"small",onClick:()=>{c(e=>["",...e.slice(0,e.length-1)]),p({activeList:[]})},children:[n["input.icon-type.slot.shift-right.label"],"\xa0",Object(S.jsx)(im.a,{})]})]}),Object(S.jsx)(cm,{disabled:0===g.length,language:n,activeCardIcon:g.length>1?"":r[g[0]],showMixableOnly:!0,showRemove:!0,onRemove:()=>{c(e=>d.filter(e=>!e.disabled).map((t,n)=>g.includes(n)?"":e[n]))},onChange:e=>{c(t=>d.filter(e=>!e.disabled).map((n,a)=>g.includes(a)?e:t[a]))}})]})});var pm,gm,hm,fm;const vm=fr.b.div(pm||(pm=Object(mr.a)(["\n    .icon-image {\n        width: 26px;\n        height: 26px;\n    }\n"]))),ym=Object(fr.b)(Il)(gm||(gm=Object(mr.a)(["\n    .custom-star-input {\n        width: 7rem;\n    }\n    .checkbox-star-suffix {\n        display: flex;\n        flex-wrap: wrap;\n        column-gap: var(--spacing-sm);\n        row-gap: var(--spacing-xxs);\n        margin-left: var(--spacing-sm);\n    }\n"]))),jm=Object(fr.b)(bs)(hm||(hm=Object(mr.a)(["\n    margin-left: var(--spacing-sm);\n"]))),xm=fr.b.div(fm||(fm=Object(mr.a)(["\n    display: flex;\n    align-items: center;\n    .custom-star-preview {\n        display: inline-flex;\n        line-height: 0;\n        align-items: center;\n        background-color: var(--main-level-1);\n        padding: var(--spacing-xs);\n        border-radius: var(--br);\n        .star-preview-entry {\n            margin-right: var(--spacing-xs);\n            .icon-image {\n                max-width: 22px; // Alignment\n                max-height: 22px; // Alignment\n            }\n            .anticon-close-circle {\n                font-size: var(--fs-xl);\n            }\n            &:last-child {\n                margin-right: 0;\n            }\n        }\n    }\n    .custom-star-content {\n        display: inline-flex;\n        flex-wrap: wrap;\n        align-items: center;\n        gap: var(--spacing-sm);\n        margin-right: var(--spacing-sm);\n    }\n"]))),Om=e=>{let{language:t,value:n,onChange:a}=e;return Object(S.jsx)(Il,{value:n,onChange:a,optionList:[{value:"auto",tooltipProps:{overlay:t["input.icon-type.alignment.auto"]},label:Object(S.jsx)(w.a,{})},{value:"left",tooltipProps:{overlay:t["input.icon-type.alignment.left"]},label:Object(S.jsx)(tm.a,{})},{value:"center",tooltipProps:{overlay:t["input.icon-type.alignment.center"]},label:Object(S.jsx)(nm.a,{})},{value:"right",tooltipProps:{overlay:t["input.icon-type.alignment.right"]},label:Object(S.jsx)(am.a,{})}]})},wm=Object(a.forwardRef)((e,t)=>{let{showCreativeOption:n}=e;const r=Rr(),{frame:i,subFamily:o,cardIcon:l,star:s,starList:c,starAlignment:d,getUpdater:u}=ii(Object(ui.useShallow)(e=>{let{card:{frame:t,subFamily:n,cardIcon:a,star:r,starList:i,starAlignment:o},getUpdater:l}=e;return{frame:t,subFamily:n,cardIcon:a,star:r,starList:i,starAlignment:o,getUpdater:l}})),b=oi(e=>e.setting.reduceMotionColor),m=Object(a.useRef)(null),p=Object(a.useMemo)(()=>u("cardIcon"),[u]),g=Object(a.useMemo)(()=>u("subFamily"),[u]),h=Object(a.useMemo)(()=>u("star"),[u]),f=Object(a.useMemo)(()=>u("starAlignment"),[u]);Object(a.useImperativeHandle)(t,()=>({}));const v=Zn(i),y="auto"===l?Y["none"===v?"auto":v]:Y[l],{labelKey:j,icon:x,showIcon:O,value:k}=null!==y&&void 0!==y?y:Y.level,C="string"===typeof j?r[j]:j({language:r}),F=n?Object(S.jsxs)(vm,{children:[O?x:null," ",C," ",Object(S.jsx)(Ku.a,{})]}):C,L=Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay",content:Object(S.jsx)(cm,{language:r,activeCardIcon:l,onChange:e=>{var t;p(e),"custom"===e&&(null===(t=m.current)||void 0===t||t.changeStatus("open"))}}),placement:"bottomRight",children:Object(S.jsx)("span",{className:"card-icon-dropdown ".concat("auto"===l?"":"active"," ").concat(n?"":"disabled"),children:F})},"icon-type-picker"),T=n?L:F;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(mm,{ref:m,language:r}),"auto"===l&&"none"===v?n?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Il,{className:"fill-input-train",value:l,onChange:p,optionList:M.map(e=>{let{icon:t,value:n,fullLabelKey:a}=e;return{label:null!==t&&void 0!==t?t:Object(S.jsx)(w.a,{}),value:n,tooltipProps:{title:r[a]}}}),children:T}),Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsx)(lm,{className:"container-group container-attribute",children:A.map(e=>{let{fullLabelKey:t,value:n,icon:a}=e;return Object(S.jsxs)(du.Option,{className:n===l?"menu-active":"",onClick:()=>p(n),children:[a?Object(S.jsxs)(S.Fragment,{children:[a,"\xa0"]}):null,r[t]]},n)})})}),children:Object(S.jsx)(jm,{$softMode:b,className:n?"":"disabled",children:r["input.attribute.label"]})}),Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsx)(lm,{className:"container-group container-icon",children:K.map(e=>{let{fullLabelKey:t,value:n,icon:a}=e;return Object(S.jsxs)(du.Option,{className:n===l?"menu-active":"",onClick:()=>p(n),children:[a?Object(S.jsxs)(S.Fragment,{children:[a,"\xa0"]}):null,r[t]]},n)})})}),children:Object(S.jsxs)(jm,{$softMode:b,className:n?"":"disabled",children:[r["input.attribute.spell"],"\xa0/\xa0",r["input.attribute.trap"]]})}),Object(S.jsx)(jm,{$softMode:b,className:n?"":"disabled",onClick:()=>{var e;p("custom"),null===(e=m.current)||void 0===e||e.changeStatus("open")},children:r["input.icon-type.custom.label"]})]}):null:"st"===k?Object(S.jsx)(Il,{className:"fill-input-train",value:o,onChange:g,optionList:(N=r,z.map(e=>{let{value:t,nameKey:n}=e;return{label:t===E?Object(S.jsx)(w.a,{}):Object(S.jsx)(hr.a,{overlay:N[n],children:Object(S.jsx)("img",{alt:N[n],src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-").concat(t.toLowerCase(),".png")})}),value:t}})),children:T}):"custom"===k?Object(S.jsxs)(xm,{className:"custom-star-picker",children:[Object(S.jsx)("label",{className:"standalone-addon ant-input-group-addon",children:T}),Object(S.jsxs)("div",{className:"custom-star-content",children:[c.length>0?Object(S.jsx)("div",{className:"custom-star-preview",children:c.map((e,t)=>{const n=Y[e];return Object(S.jsx)("span",{className:"star-preview-entry",children:n?n.icon:Object(S.jsx)(w.a,{})},"".concat(e,"-").concat(t))})}):null,Object(S.jsx)(Jo.a,{size:"small",onClick:()=>{var e;p("custom"),null===(e=m.current)||void 0===e||e.changeStatus("open")},children:r["generic.edit.label"]})]})]}):Object(S.jsx)(ym,{className:"checkbox-star-train",value:s,onChange:h,optionList:Du,strict:!0,suffix:n&&Object(S.jsxs)("div",{className:"checkbox-star-suffix",children:[Object(S.jsx)(fc.a,{className:"custom-star-input",value:"number"===typeof s?"":s,allowClear:!0,onChange:h,placeholder:r["input.icon-type.custom.placeholder"]}),Object(S.jsx)(Om,{language:r,value:d,onChange:f})]}),children:T})]});var N}),km=Object(a.forwardRef)((e,t)=>{let{onTakePicker:n}=e;const r=ii(e=>e.getUpdater),i=Object(a.useRef)(null),o=Object(a.useMemo)(()=>r("effect",void 0,"debounce"),[r]);return Object(a.useEffect)(()=>{var e;const t=null===(e=i.current)||void 0===e?void 0:e.getPickerRef();t&&(null===n||void 0===n||n(t))},[]),Object(a.useImperativeHandle)(t,()=>({setValue:e=>{var t;null===(t=i.current)||void 0===t||t.setValue(e)}})),Object(S.jsx)(Wb,{ref:i,id:"effect",allowHotkey:!0,defaultValue:ii.getState().card.effect,onChange:o,onTakePicker:n,autoSize:{minRows:9}})});var Sm;const Cm=fr.b.div(Sm||(Sm=Object(mr.a)(["\n    align-self: center;\n    text-align: right;\n    .ant-checkbox + span {\n        user-select: none;\n    }\n"]))),Fm=Object(a.forwardRef)((e,t)=>{const n=Rr(),{isDuelTerminalCard:r,isSpeedCard:i,isLimitedEdition:o,isLegacyCard:s,setCard:c}=ii(Object(ui.useShallow)(e=>{let{card:t,setCard:n}=e;return{isSpeedCard:t.isSpeedCard,isDuelTerminalCard:t.isDuelTerminalCard,isLimitedEdition:t.isLimitedEdition,isLegacyCard:t.isLegacyCard,setCard:n}}));Object(a.useImperativeHandle)(t,()=>({}));const d=Object(a.useCallback)(e=>c(t=>{let n;return n=e.target.checked?s?{isDuelTerminalCard:!1,isFirstEdition:!1,isLimitedEdition:!0,isSpeedCard:!1}:{isFirstEdition:!1,isLimitedEdition:!0}:{isLimitedEdition:!1},Object(l.a)(Object(l.a)({},t),n)}),[c,s]),u=Object(a.useCallback)(e=>c(t=>{let n;return n=e.target.checked?s?{isDuelTerminalCard:!0,isFirstEdition:!1,isLimitedEdition:!1,isSpeedCard:!1}:{hasCornerText:!1,isSpeedCard:!1,isDuelTerminalCard:!0}:{isDuelTerminalCard:!1},Object(l.a)(Object(l.a)({},t),n)}),[c,s]),b=Object(a.useCallback)(e=>c(t=>{let n;return n=e.target.checked?s?{isDuelTerminalCard:!1,isFirstEdition:!1,isLimitedEdition:!1,isSpeedCard:!0}:{hasCornerText:!1,isDuelTerminalCard:!1,isSpeedCard:!0}:{isSpeedCard:!1},Object(l.a)(Object(l.a)({},t),n)}),[c,s]),m=Object(a.useCallback)(e=>c(t=>{const n=e.target.checked,{isDuelTerminalCard:a,isFirstEdition:r,isLimitedEdition:i,isSpeedCard:o}=t;let s=!1,c=!1,d=!1,u=!1;return n?(c=r,u=!c&&o,s=!u&&!c&&a,d=!(s||c||d)&&i):(c=r,d=!c&&i,u=o,s=!u&&a),Object(l.a)(Object(l.a)({},t),{},{isLegacyCard:n,isDuelTerminalCard:s,isFirstEdition:c,isLimitedEdition:d,isSpeedCard:u})}),[c]);return Object(S.jsxs)(Cm,{className:"checkbox-input",children:[Object(S.jsx)(hr.a,{overlayClassName:"long-tooltip-overlay",overlay:n["input.legacy.tooltip"],children:Object(S.jsx)(jl.a,{className:"input-legacy",onChange:m,checked:s,tabIndex:0,children:n["input.legacy.label"]})}),Object(S.jsx)(jl.a,{className:"input-limited",onChange:d,checked:o,tabIndex:0,children:n["input.limited-edition.label"]}),Object(S.jsx)(jl.a,{className:"input-speed",onChange:b,checked:i,tabIndex:0,children:n["input.speed-duel.label"]}),Object(S.jsx)(jl.a,{className:"input-terminal",onChange:u,checked:r,tabIndex:0,children:n["input.duel-terminal.label"]})]})});var Lm,Tm,Nm,Rm,Im=n(670);const Em=Object(fr.b)(du.Container)(Lm||(Lm=Object(mr.a)(["\n    padding: var(--spacing-xs);\n    position: relative;\n    .radio-train {\n        display: flex;\n        flex-wrap: wrap;\n        max-width: 480px;\n        .radio-train-input-group {\n            gap: var(--spacing);\n        }\n    }\n    .radio-train.foil-radio {\n        display: grid;\n        grid-template-columns: 1fr;\n        gap: var(--spacing-px); // Alignment\n        .ant-radio-button-wrapper {\n            font-size: var(--fs);\n        }\n        .standalone-addon {\n            border: none;\n            padding-bottom: var(--spacing-xxs);\n        }\n        .radio-train-input-group {\n            gap: 0;\n        }\n    }\n    .ant-checkbox-wrapper {\n        color: var(--color-heavy);\n    }\n    .inline-input {\n        margin-bottom: var(--spacing-xs);\n    }\n    .checkbox-disabled {\n        .ant-checkbox {\n            display: none;\n        }\n        visibility: hidden; // Avoid collapsing\n    }\n    .frame-part-name {\n        position: absolute;\n        padding: 0 var(--spacing);\n        top: calc(-1 * var(--spacing-sm));\n        right: calc(-1 * var(--spacing-sm));\n        border-radius: 0 0 0 var(--br-lg);\n        background-color: var(--main-level-4);\n        border-left: var(--bw) solid var(--sub-level-4);\n        border-bottom: var(--bw) solid var(--sub-level-4);\n        &:empty {\n            display: none;\n        }\n    }\n    .horizontal-sketch-picker {\n        margin-top: var(--spacing);\n    }\n    ","\n"])),gb),zm=fr.b.div(Tm||(Tm=Object(mr.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\t.input-label {\n\t\tflex: 1;\n\t}\n"]))),Dm=fr.b.div(Nm||(Nm=Object(mr.a)(["\n    display: flex;\n    align-items: center;\n    margin-top: var(--spacing-sm);\n    flex-wrap: wrap;\n    row-gap: var(--spacing-sm);\n"]))),Bm=Object(fr.b)(Il)(Rm||(Rm=Object(mr.a)(['\n    &.radio-train {\n        .ant-radio-button-wrapper-checked {\n            &.ocg-button {\n                background-color: var(--main-red-scale);\n                border-color: var(--sub-red-scale);\n                &:not([class*=" ant-radio-button-wrapper-disabled"]).ant-radio-button-wrapper:first-child {\n                    border-right-color: var(--sub-red-scale);\n                }\n                &:not(.ant-radio-button-wrapper-disabled):first-child {\n                    border-color: var(--sub-red-scale);\n                }\n                &:hover {\n                    background-color: var(--sub-red-scale);\n                    color: var(--color-heavy);\n                }\n            }\n            &.tcg-button {\n                background-color: var(--main-blue-scale);\n                border-color: var(--sub-blue-scale);\n                &:hover {\n                    background-color: var(--sub-blue-scale);\n                    color: var(--color-heavy);\n                }\n            }\n        }\n        .ocg-button {\n            color: var(--color-heavy);\n            &:hover {\n                color: var(--sub-red-scale);\n            }\n        }\n        .tcg-button {\n            color: var(--color-heavy);\n            &:hover {\n                color: var(--sub-blue-scale);\n            }\n        }\n    }\n'])));var Pm,Mm;const Hm=fr.b.div(Pm||(Pm=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: var(--spacing-sm);\n    .checkbox-input {\n        align-self: center;\n        .ant-checkbox + span {\n            user-select: none;\n        }\n    }\n    .sticker-input,\n    .checkbox-input {\n        grid-column: span 2;\n    }\n    .sticker-input .ant-radio-button-wrapper {\n        padding-left: var(--spacing-sm);\n        padding-right: var(--spacing-sm);\n    }\n"]))),Am=Object(fr.b)(zm)(Mm||(Mm=Object(mr.a)(["\n    .auto-link-rating-input {\n        margin-left: var(--spacing-sm);\n    }\n    .auto-link-rating {\n        display: inline-block;\n        width: 1.5rem;\n        height: 1.5rem;\n        line-height: 1;\n        text-align: center;\n        padding: var(--spacing-xs);\n        background: var(--main-level-4);\n        border-radius: var(--br-lg);\n        font-family: 'RoGSanSrfStd-Bd';\n        box-shadow: var(--bs-button);\n    }\n"]))),Wm=Object(a.forwardRef)((e,t)=>{let{isMonster:n,showCreativeOption:r,onTakePicker:i}=e;const o=Rr(),{autoLinkRating:s,format:c,hasCornerText:d,isFirstEdition:u,isLegacyCard:b,isLink:m,linkRating:p,linkRatingDisplayMode:g,showDefAndLink:h,sticker:f,getUpdater:v,setCard:y}=ii(Object(ui.useShallow)(e=>{let{card:{isLegacyCard:t,sticker:n,format:a,flag:r,isLink:i,linkRating:o,linkMap:l,isFirstEdition:s,hasCornerText:c},getUpdater:d,setCard:u}=e;return{autoLinkRating:l.length,format:a,hasCornerText:c,isFirstEdition:s,isLegacyCard:t,isLink:i,linkRating:o,linkRatingDisplayMode:r[ie],showDefAndLink:1===r[re],sticker:n,getUpdater:d,setCard:u}})),j=Object(a.useRef)(null),x=Object(a.useRef)(null),O=Object(a.useRef)(null),w=Object(a.useRef)(null),C=Object(a.useRef)(null),F=Object(a.useRef)(null),L=Object(a.useRef)(null),T=!0,N=aa(g,m),R=!N||h,I=[T,R,N].filter(e=>!0===e).length%2===1,E=c&&ze[c]?ze[c]:ze.tcg,z=Object(a.useMemo)(()=>v("atk",e=>e),[v]),D=Object(a.useMemo)(()=>v("def",e=>e),[v]),B=Object(a.useMemo)(()=>v("linkRating",e=>e),[v]),P=Object(a.useMemo)(()=>v("password",void 0,"debounce"),[v]),M=Object(a.useMemo)(()=>v("sticker"),[v]),H=Object(a.useMemo)(()=>v("creator",void 0,"debounce"),[v]),A=Object(a.useCallback)(e=>y(t=>{let n;return n=e.target.checked?b?{isDuelTerminalCard:!1,isFirstEdition:!0,isLimitedEdition:!1,isSpeedCard:!1}:{isFirstEdition:!0,isLimitedEdition:!1}:{isFirstEdition:!1},Object(l.a)(Object(l.a)({},t),n)}),[y,b]),W=Object(a.useCallback)(e=>y(t=>{let n;return n=e.target.checked?b?{hasCornerText:!0}:{isSpeedCard:!1,isDuelTerminalCard:!1,hasCornerText:!0}:{hasCornerText:!1},Object(l.a)(Object(l.a)({},t),n)}),[y,b]),K=Object(a.useMemo)(()=>v("firstEditionText",void 0,"debounce"),[v]),Y=Object(a.useMemo)(()=>v("cornerText",void 0,"debounce"),[v]);return Object(a.useImperativeHandle)(t,()=>({setValue:e=>{var t,n,a,r,i,o;let{password:l,creator:s,atk:c,def:d,linkRating:u,firstEditionText:b,cornerText:m}=e;"string"===typeof c&&(null===(t=O.current)||void 0===t||t.setValue(c)),"string"===typeof d&&(null===(n=w.current)||void 0===n||n.setValue(d)),"string"===typeof l&&(null===(a=j.current)||void 0===a||a.setValue(l)),"string"===typeof s&&(null===(r=x.current)||void 0===r||r.setValue(s)),"string"===typeof u&&(null===(i=C.current)||void 0===i||i.setValue(u)),"string"===typeof b&&(null===(o=F.current)||void 0===o||o.setValue(b))}})),Object(S.jsxs)(Hm,{className:"card-footer-input",children:[(n||r)&&Object(S.jsxs)(S.Fragment,{children:[T&&Object(S.jsx)(Yb,{ref:O,id:"atk",addonBefore:o["input.atk.label"],defaultValue:ii.getState().card.atk,onChange:z,onTakePicker:i}),R&&Object(S.jsx)(Yb,{ref:w,id:"def",addonBefore:o["input.def.label"],defaultValue:ii.getState().card.def,onChange:D,onTakePicker:i}),I&&Object(S.jsx)("div",{}),N&&Object(S.jsx)(Yb,{ref:C,id:"link",addonBefore:Object(S.jsxs)(Am,{className:"input-label-with-button",children:[Object(S.jsx)("div",{className:"input-label",children:o["input.link.label"]}),Object(S.jsx)(hr.a,{title:o["input.link.auto.tooltip"],children:Object(S.jsx)("div",{className:"auto-link-rating-input",children:"string"===typeof p&&p.length>0?Object(S.jsx)(jl.a,{onChange:e=>{var t;e.target.checked&&(B(""),null===(t=C.current)||void 0===t||t.setValue(""))}}):Object(S.jsx)("div",{className:"auto-link-rating",children:m?s:"-"})})})]}),defaultValue:"".concat(ii.getState().card.linkRating),onChange:B,onTakePicker:i,placeholder:o["input.link.custom.placeholder"]})]}),Object(S.jsx)(Yb,{ref:j,id:"password",addonBefore:Object(S.jsxs)(zm,{className:"input-label-with-button",children:[Object(S.jsx)("div",{className:"input-label",children:o["input.password.label"]}),Object(S.jsx)(Sl,{onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.setValue("".concat(ir("0123456789",8)))},Icon:k.a,tooltipProps:{overlay:o["button.randomize.label"]}})]}),defaultValue:ii.getState().card.password,onChange:P,onTakePicker:i}),Object(S.jsx)(Yb,{ref:x,id:"creator",addonBefore:Object(S.jsxs)(zm,{className:"input-label-with-button",children:[Object(S.jsx)("div",{className:"input-label",children:o["input.copyright.label"]}),Object(S.jsx)($o.a,{placement:"topLeft",arrow:!0,overlay:Object(S.jsx)(qd.a,{onClick:e=>e.domEvent.stopPropagation(),children:E.map((e,t)=>Object(S.jsx)(qd.a.Item,{onClick:()=>{var t;null===(t=x.current)||void 0===t||t.setValue(e)},children:e},"".concat(t)))}),children:Object(S.jsx)("div",{children:Object(S.jsx)(Sl,{onClick:()=>{},Icon:Im.a})})})]}),defaultValue:ii.getState().card.creator,onChange:H,onTakePicker:i}),Object(S.jsx)(Yb,{ref:F,id:"firstEditionText",className:"first-edition-text",addonBefore:Object(S.jsxs)(zm,{className:"input-label-with-button",children:[Object(S.jsx)("div",{className:"input-label",children:o["input.1st-edition.label"]}),"\xa0",Object(S.jsx)(jl.a,{className:"input-1st",onChange:A,checked:u,tabIndex:0}),Object(S.jsx)($o.a,{placement:"topLeft",arrow:!0,overlay:Object(S.jsx)(qd.a,{onClick:e=>e.domEvent.stopPropagation(),children:De.map((e,t)=>{let{label:n,value:a}=e;return Object(S.jsx)(qd.a.Item,{onClick:()=>{var e;A({target:{checked:!0}}),null===(e=F.current)||void 0===e||e.setValue(a)},children:n},"".concat(t))})}),children:Object(S.jsx)("div",{children:Object(S.jsx)(Sl,{onClick:()=>{},Icon:Im.a})})})]}),defaultValue:ii.getState().card.firstEditionText,onChange:K,onTakePicker:i}),Object(S.jsx)(Yb,{ref:L,id:"cornerText",className:"corner-text",addonBefore:Object(S.jsxs)(zm,{className:"input-label-with-button",children:[Object(S.jsx)("div",{className:"input-label",children:o["input.corner.label"]}),"\xa0",Object(S.jsx)(jl.a,{className:"input-corner",onChange:W,checked:d,tabIndex:0})]}),defaultValue:ii.getState().card.cornerText,onChange:Y,onTakePicker:i}),Object(S.jsx)(Fm,{}),Object(S.jsx)(Il,{className:"sticker-input fill-input-train",value:f,onChange:M,optionList:Bu,children:Object(S.jsx)("span",{children:o["input.sticker.label"]})})]})});var Km,Ym,Um;const Gm=fr.b.div(Km||(Km=Object(mr.a)(["\n    position: relative;\n    ","\n"])),e=>{let{$hover:t}=e;return t?"\n            .link-marker-picker {\n                position: absolute;\n                top: 0;\n                left: 0;\n            }\n        ":""}),Xm=Object(fr.b)(Il)(Ym||(Ym=Object(mr.a)(["\n    text-align: left;\n    .ant-input-group-addon {\n        flex: 0 0 auto;\n        text-align: left;\n    }\n    .radio-train-input-group {\n        flex: 1;\n    }\n    .ant-radio-button-wrapper {\n        padding: 0 var(--spacing-xs);\n    }\n"]))),Vm=Object(fr.b)(du.Option)(Um||(Um=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: 30px 1fr;\n    column-gap: var(--spacing-xs);\n    .tag {\n        background: var(--sub-level-2);\n        color: var(--color-contrast);\n        box-shadow: 0 0 1px 1px var(--main-level-1) inset;\n        font-size: var(--fs-xs);\n        text-align: center;\n        line-height: 1.5;\n    }\n    &.default {\n        .tag {\n            background: var(--sub-level-4);\n        }\n    }\n"]))),qm=e=>{let{finishValueList:t,changeFinish:n,language:r,showCreativeOption:i}=e;const[o,s]=Object(a.useState)(y.art.key),c={[y.attribute.key]:t[1],[y.background.key]:t[4],[y.icon.key]:t[2],[y.sticker.key]:t[3],[y.art.key]:t[0]},d=Object.values(c).some(e=>"normal"!==e),u=Object(a.useMemo)(()=>{return e=r,Object.values(y).map(t=>{let{key:n,labelKey:a}=t;return{label:e[a],value:n}});var e},[r]),b=i?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("label",{children:[r["input.finish.label"],":"]}),"\xa0",r[y[o].labelKey]," ",Object(S.jsx)(Ku.a,{})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("label",{children:[r["input.finish.label"],":"]}),"\xa0",r[y[o].labelKey]]}),m=Object(S.jsx)(bl.a,{trigger:["click"],overlayClassName:"global-input-overlay pattern-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)(du.Container,{children:[Object(S.jsx)(cu,{children:r["input.other-finish.label"]}),u.map(e=>{let{label:t,value:n}=e;return Object(S.jsxs)(Vm,{className:ur("normal"===c[n]?"default":"",o===n?"menu-active":""),onClick:()=>{s(n)},children:[Object(S.jsx)("div",{className:"value",children:Object(S.jsx)("div",{className:"tag",children:"normal"===c[n]||""===c[n]?"Auto":c[n]})}),Object(S.jsx)("div",{className:"label",children:t})]},n)})]})}),placement:"bottomRight",children:Object(S.jsx)("span",{className:"field-title card-icon-dropdown ".concat(d?"active":""," ").concat(i?"":"disabled"),children:b})},"icon-type-picker");return Object(S.jsx)(Xm,{className:"art-finish-checkbox fill-input-train",value:c[o],onChange:e=>{const t=Object(l.a)({},c);t[o]="".concat(e),n(t)},optionList:Eu,children:m})},_m=Object(a.forwardRef)((e,t)=>{let{showExtraDecorativeOption:n,showCreativeOption:r,receivingCanvas:i,onSourceLoaded:o,onTainted:s,onCropChange:c}=e;const d=Rr(),{opacity:u,artFinish:b,otherFinish:m,linkMap:g,isPendulum:h,pendulumSize:f,isLink:v,art:j,artCrop:x,artData:O,artSource:w,artFit:k,getUpdater:C,setCard:F}=ii(Object(ui.useShallow)(e=>{let{card:{opacity:t,artFinish:n,otherFinish:a,linkMap:r,isPendulum:i,pendulumSize:o,isLink:l,art:s,artCrop:c,artData:d,artSource:u,artFit:b},getUpdater:m,setCard:p}=e;return{opacity:t,artFinish:n,otherFinish:a,linkMap:r,isPendulum:i,pendulumSize:o,isLink:l,art:s,artCrop:c,artData:d,artSource:u,artFit:b,getUpdater:m,setCard:p}})),L=Object(a.useRef)(null),T=Object(a.useMemo)(()=>C("linkMap"),[C]),N=Object(a.useCallback)(e=>F(t=>Object(l.a)(Object(l.a)({},t),{},{isLink:e})),[F]),R=Object(a.useMemo)(()=>C("art"),[C]),I=Object(a.useMemo)(()=>C("artData"),[C]),E=Object(a.useCallback)(e=>F(t=>Object(l.a)(Object(l.a)({},t),{},{artFit:e})),[F]),z=Object(a.useMemo)(()=>C("artSource"),[C]),D=Object(a.useMemo)(()=>C("artFinish"),[C]),B=Object(a.useMemo)(()=>C("otherFinish"),[C]),P=Object(a.useCallback)((e,t,n)=>{null===c||void 0===c||c(e,t),e&&F(t=>Object(l.a)(Object(l.a)({},t),{},{artCrop:e}),n)},[c,F]);return Object(a.useImperativeHandle)(t,()=>({isLoading:()=>{var e,t;return null!==(e=null===(t=L.current)||void 0===t?void 0:t.isLoading())&&void 0!==e&&e},setValue:e=>{let{art:t,artCrop:n,artData:a,artSource:r}=e;var i,o;"offline"===r?"string"===typeof a&&n&&(null===(i=L.current)||void 0===i||i.forceSource("offline",a,n)):"string"===typeof t&&n&&(null===(o=L.current)||void 0===o||o.forceSource("online",t,n))}})),Object(S.jsx)(yd,{ref:L,title:d["input.card-art.label"],defaultSourceType:w,defaultExternalSource:j,defaultInternalSource:O,defaultCropInfo:x,forceFit:k,receivingCanvas:i,onSourceChange:(e,t)=>{z(e),"offline"===e?I(t):R(t)},onCropChange:P,onTainted:s,onSourceLoaded:o,onForceFitChange:E,onMaxSizeExceeded:e=>{gr.a.error({description:d["error.max-size.description"](e),message:d["error.max-size.message"]})},ratio:p(h,u,void 0,f).ratio,beforeCropper:n?Object(S.jsx)(qm,{finishValueList:[b,...m],changeFinish:e=>{D(e[y.art.key]),B([e[y.attribute.key],e[y.icon.key],e[y.sticker.key],e[y.background.key]])},language:d,showCreativeOption:r}):null,children:Object(S.jsx)(Gm,{className:"link-picker-container",style:{minWidth:88},$hover:n,children:Object(S.jsx)(Vd,{active:!0===v,defaultValue:g,onChange:T,onStatusChange:N},"link-".concat(JSON.stringify(g)))})})});var Jm,$m;const Qm=fr.b.div(Jm||(Jm=Object(mr.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    gap: var(--spacing-sm);\n    width: 100%;\n    .name-input {\n        flex: 3;\n        min-width: 400px;\n    }\n    .set-id-input {\n        flex: 1;\n        min-width: 250px;\n    }\n"]))),Zm=fr.b.span($m||($m=Object(mr.a)(["\n    cursor: pointer;\n"]))),ep=Object(a.forwardRef)((e,t)=>{let{onTakePicker:n}=e;const r=Rr(),{name:i,format:o,getUpdater:l}=ii(Object(ui.useShallow)(e=>{let{card:{name:t,format:n},getUpdater:a}=e;return{name:t,format:n,getUpdater:a}})),s=Object(a.useRef)(null),c=Object(a.useRef)(null),d=Object(a.useMemo)(()=>l("setId"),[l]),u=Object(a.useMemo)(()=>l("name",void 0,"debounce"),[l]);return Object(a.useImperativeHandle)(t,()=>({setValue:e=>{var t,n;let{name:a,setId:r}=e;"string"===typeof a&&(null===(t=s.current)||void 0===t||t.setValue(a)),"string"===typeof r&&(null===(n=c.current)||void 0===n||n.setValue(r))}})),Object(S.jsxs)(Qm,{className:"name-id-input",children:[Object(S.jsx)(Yb,{ref:s,id:"name",defaultValue:i,addonBefore:Object(S.jsx)(hr.a,{title:r["input.name.tooltip"],children:Object(S.jsx)(Zm,{onClick:()=>{navigator.clipboard.writeText(wa(i))},children:r["input.name.label"]})}),onChange:u,onTakePicker:n}),Object(S.jsx)(Yb,{ref:c,id:"set-id",defaultValue:ii.getState().card.setId,addonBefore:Object(S.jsxs)(zm,{className:"input-label-with-button",children:[Object(S.jsx)("div",{className:"input-label",children:r["input.set-id.label"]}),Object(S.jsx)(Sl,{onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.setValue((e=>ir("ABCDEFGHIJKLMNOPQRSTUVWXYZ",4)+"-"+("OCG"===e?"JP":"EN")+ir("0000000000111111111122222222223456789",1)+ir("0123456789",2))(o))},Icon:k.a,tooltipProps:{overlay:r["button.randomize.label"]}})]}),onChange:d,onTakePicker:n})]})});var tp,np=n(671);const{width:ap,height:rp}=d,ip=fr.b.div(tp||(tp=Object(mr.a)(["\n    margin-top: var(--spacing-sm);\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(55px, 1fr));\n    row-gap: var(--spacing-sm);\n    background-color: var(--main-level-3);\n    color: var(--color);\n    .preset-panel-top {\n        grid-column: -1 / 1;\n    }\n    .preset-warning {\n        font-size: var(--fs-sm);\n    }\n    .preview-container {\n        line-height: 0;\n        padding: var(--spacing-xxs) 0;\n        border-radius: var(--br);\n        cursor: pointer;\n        border: var(--bw) solid transparent;\n        .card-layout-container {\n            pointer-events: none;\n        }\n        &:hover {\n            border-color: var(--main-active);\n        }\n    }\n    .open-preset-manager {\n        cursor: pointer;\n        color: var(--main-link);\n        &:hover {\n            color: var(--sub-link);\n        }\n    }\n"]))),op=e=>{let{isPendulum:t,onOverwrite:n,onActive:a,language:r}=e;const{db:i}=ci(),[o,l]=mi("layoutPresetList"),s=Uo(e=>e.setVisible);return 0===o.length?Object(S.jsx)(S.Fragment,{}):Object(S.jsxs)(ip,{className:"frame-preset-panel",children:[o.length>0&&Object(S.jsx)("div",{className:"preset-panel-top",children:Object(S.jsxs)("div",{className:"preset-warning",children:[r["preset.warning.label"],"\xa0",Object(S.jsx)("span",{className:"open-preset-manager",onClick:()=>s(!0),children:r["preset.manager.check.label"]})]})}),o.map(e=>{let{content:o,key:s}=e;const{dyeList:c,foil:d,frame:u,pendulumFrame:b,leftFrame:m,pendulumRightFrame:p,rightFrame:g,effectStyle:h,pendulumStyle:f}=o,v={frame:u,topLeftFrame:m,topRightFrame:g,bottomLeftFrame:b,bottomRightFrame:p,effectBackground:null===h||void 0===h?void 0:h.background,pendulumEffectBackground:null===f||void 0===f?void 0:f.background};return Object(S.jsx)(pc,{width:Math.round(40*ap/rp),height:40,isPendulum:t,resolvedLayoutState:ra(v,t),tabIndex:-1,dyeList:c,foil:d,language:r,onActive:()=>a(o),onDelete:async()=>{if(i){const e=i.transaction("presetLayoutStore","readwrite");await i.delete("presetLayoutStore",s),await e.done}l(e=>e.filter(e=>{let{key:t}=e;return s!==t}))},onOverwrite:n?()=>null===n||void 0===n?void 0:n(s):void 0})})]})};var lp;const sp=fr.b.div(lp||(lp=Object(mr.a)(["\n    background-color: var(--main-level-3);\n    padding: var(--spacing-sm);\n    border-top: var(--bw) solid var(--sub-level-3);\n    > * + * {\n        margin-top: var(--spacing-sm);\n    }\n    .link-rating-behavior-panel {\n        .radio-train-input-group {\n            flex: 0 0 auto;\n            margin-right: var(--spacing-sm);\n        }\n        label {\n            flex: 1 1 auto;\n            text-align: left;\n            font-size: var(--fs);\n            color: var(--color);\n        }\n    }\n"]))),cp=()=>{const e=Rr(),{flag:t,setCard:n}=ii(Object(ui.useShallow)(e=>{let{card:{flag:t},setCard:n,getUpdater:a}=e;return{flag:t,setCard:n,getUpdater:a}})),a=(e,t)=>n(n=>{const a=[...n.flag];return a[t]=e,Object(l.a)(Object(l.a)({},n),{},{flag:a})});return Object(S.jsx)(sp,{children:t.map((t,n)=>{var r;const{labelKey:i,type:o}=null!==(r=ae[n])&&void 0!==r?r:{};return"checkbox"===o?Object(S.jsx)("div",{children:Object(S.jsx)(jl.a,{checked:0!==t,onChange:e=>{const t=e.target.checked?1:0;a(t,n)},children:e[i]})},i):"link-rating-behavior"===o?Object(S.jsx)(Il,{className:"link-rating-behavior-panel",onChange:e=>a(Number(e),n),optionList:[{label:e["input.flag.link-rating-behavior.auto"],value:0},{label:e["input.flag.link-rating-behavior.show"],value:1},{label:e["input.flag.link-rating-behavior.hide"],value:2}],value:t,suffix:Object(S.jsx)("label",{children:e[i]})},i):null})})};var dp;const{width:up,height:bp}=d,mp=fr.b.div(dp||(dp=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: max-content 1fr;\n    column-gap: var(--spacing-sm);\n    background-color: var(--main-level-3);\n    padding: var(--spacing-sm);\n    "," {\n        border: none;\n        box-shadow: none;\n        padding: 0;\n    }\n    .visual-preview-container {\n        color: var(--color-heavy);\n        width: 110px; // Alignment\n        text-align: center;\n        label {\n            display: block;\n            padding-bottom: var(--spacing-xxs);\n        }\n        .frame-info-block {\n\t\t\theight: 30px; // Alignment\n\t\t\tline-height: 28px; // Alignment with border 1px\n            border: var(--bw) solid var(--sub-level-1);\n            background-color: var(--main-level-1);\n            margin-bottom: var(--spacing-xs);\n            cursor: pointer;\n            .frame-info-block-label {\n                padding: 0 var(--spacing-xs);\n            }\n            &.active {\n                border: var(--bw) dashed var(--main-level-2);\n            }\n            &:hover {\n                border: var(--bw) solid var(--main-level-2);\n            }\n        }\n    }\n    .frame-action {\n        .ant-btn {\n            width: 100%;\n            & + .ant-btn {\n                margin-top: var(--spacing-xs);\n            }\n        }\n    }\n    .frame-preset-panel {\n        grid-column: -1 / 1;\n        padding-top: var(--spacing-sm);\n        border-top: var(--bw) solid var(--sub-level-3);\n    }\n"])),Em),pp=Object(a.forwardRef)((e,t)=>{var n,r;let{frameList:i,onFrameChange:o,onCancel:s}=e;const{db:c}=ci(),d=Rr(),{isPendulum:u,foil:b,frame:m,leftFrame:p,rightFrame:g,pendulumFrame:h,pendulumRightFrame:f,effectBackground:v,pendulumEffectBackground:y,dyeList:j,setCard:x,getUpdater:w}=ii(Object(ui.useShallow)(e=>{let{card:{isPendulum:t,foil:n,frame:a,leftFrame:r,rightFrame:i,pendulumFrame:o,pendulumRightFrame:l,dyeList:s,effectStyle:c,pendulumStyle:d},setCard:u,getUpdater:b}=e;return{isPendulum:t,foil:n,frame:a,leftFrame:r,rightFrame:i,pendulumFrame:o,pendulumRightFrame:l,effectBackground:c.background,pendulumEffectBackground:d.background,dyeList:s,setCard:u,getUpdater:b}})),[,k]=mi("layoutPresetList"),C=Object(a.useRef)({topLeftFrame:"auto"===h?"spell":h,topRightFrame:"auto"===h?"spell":h,bottomLeftFrame:"auto"===h?"spell":h,bottomRightFrame:"auto"===h?"spell":h,effectBackground:"auto"===h?"spell":h,pendulumEffectBackground:"auto"===h?"spell":h}),[F,L]=Object(a.useState)(0),[T,N]=Object(a.useState)("frame"),R="frame-layout-main",I=Object(a.useMemo)(()=>Iu({normal:d["input.foil.normal.label"],gold:d["input.foil.gold.label"],platinum:d["input.foil.platinum.label"]}),[d]);Object(a.useEffect)(()=>{"pendulumEffectBackground"!==T||u||N("frame")},[T,u]),Object(a.useImperativeHandle)(t,()=>({focus:()=>{var e;return null===(e=document.getElementById(R))||void 0===e?void 0:e.focus()}}));const E=Object(a.useMemo)(()=>w("foil"),[w]),z=Object(a.useMemo)(()=>w("pendulumFrame"),[w]),D=Object(a.useMemo)(()=>w("pendulumRightFrame"),[w]),B=Object(a.useMemo)(()=>w("leftFrame"),[w]),P=Object(a.useMemo)(()=>w("rightFrame"),[w]),M=e=>x(t=>{const n=Object(l.a)({},t.effectStyle);return n.background=e,Object(l.a)(Object(l.a)({},t),{},{effectStyle:n})}),H=e=>x(t=>{const n=Object(l.a)({},t.pendulumStyle);return n.background=e,Object(l.a)(Object(l.a)({},t),{},{pendulumStyle:n})}),A=Object(a.useMemo)(()=>w("dyeList"),[w]),W=e=>{"bottomLeftFrame"===T&&z(e),"bottomRightFrame"===T&&D(e),"topLeftFrame"===T&&B(e),"topRightFrame"===T&&P(e),"effectBackground"===T&&M(e),"pendulumEffectBackground"===T&&H(e)},K={frame:m,topLeftFrame:p,topRightFrame:g,bottomLeftFrame:h,bottomRightFrame:f,effectBackground:v,pendulumEffectBackground:y},Y=K[T],U=ra(K,u),G=O[T];return Object(S.jsxs)(mp,{children:[Object(S.jsxs)("div",{className:"visual-preview-container",children:[Object(S.jsx)("label",{children:d["input.advanced-frame.main.label"]}),Object(S.jsx)(ld,Object(l.a)(Object(l.a)({id:R,tabIndex:0,className:"frame"===T?"active":""},null!==(n=He[m])&&void 0!==n?n:We),{},{onClick:()=>N("frame")})),Object(S.jsx)("label",{children:d["input.advanced-frame.detailed.label"]}),Object(S.jsx)(bc,{width:2*Math.round(up/20),height:2*Math.round(bp/20),isPendulum:u,baseLayoutState:K,resolvedLayoutState:U,activeLayout:T,onLayoutSelect:e=>N(e),dyeList:j,foil:b,language:d,vertical:!0}),Object(S.jsxs)("div",{className:"frame-action",children:[Object(S.jsx)(Jo.a,{size:"small",onClick:()=>{z("auto"),D("auto"),B("auto"),P("auto"),M("auto"),H("auto"),E("normal"),A(["","","","","","",""])},children:d["generic.reset.label"]}),Object(S.jsx)(Jo.a,{size:"small",type:"primary",onClick:async()=>{const e=Object(Q.a)(),t={foil:b,frame:m,leftFrame:p,pendulumFrame:h,pendulumRightFrame:f,rightFrame:g,effectStyle:{background:v},pendulumStyle:{background:y},dyeList:[...j]};if(c){const n=c.transaction("presetLayoutStore","readwrite");await c.put("presetLayoutStore",{key:e,content:JSON.stringify(t)}),await n.done}k(n=>[...n,{key:e,content:t}])},children:d["input.advanced-frame.save.label"]})]})]}),Object(S.jsx)("div",{children:Object(S.jsxs)(Em,Object(l.a)(Object(l.a)({className:"pendulum-frame-picker"},rr({stopPropagation:!0,optionLength:i.length,setFocus:L,onTrigger:()=>{F>=0&&W(i[F].value)},onCancel:s})),{},{children:[Object(S.jsx)("div",{className:"frame-part-name",children:d[null===(r=Ke[T])||void 0===r?void 0:r.labelKey]}),"foil"!==T&&Object(S.jsx)(jl.a,{className:ur("inline-input","frame"===T?"checkbox-disabled":""),checked:"auto"===Y,disabled:"frame"===T,onChange:e=>{var t;W(e.target.checked?"auto":null!==(t=C.current[T])&&void 0!==t?t:"auto")},children:d["input.frame.auto"]}),"foil"===T?Object(S.jsx)(Il,{className:"foil-radio",value:b,onChange:E,optionList:I,children:Object(S.jsx)("span",{children:d["input.foil.label"]})}):Object(S.jsx)(Il,{className:"frame-radio",value:Y,onChange:e=>{"frame"===T?o(e):W(e)},optionList:i}),"number"===typeof G&&Object(S.jsx)(Ed,{value:j[G],onChange:e=>{e!==j[G]&&((e,t)=>{x(n=>{const a=O[t];if("number"!==typeof a)return n;const r=[...n.dyeList];return r[a]=e,Object(l.a)(Object(l.a)({},n),{},{dyeList:r})})})(e,T)},children:d["input.advanced-frame.dye"]})]}))}),Object(S.jsx)(op,{language:d,isPendulum:u,onOverwrite:async e=>{const t={foil:b,frame:m,leftFrame:p,pendulumFrame:h,pendulumRightFrame:f,rightFrame:g,effectStyle:{background:v},pendulumStyle:{background:y},dyeList:[...j]};if(c){const n=c.transaction("presetLayoutStore","readwrite");await c.put("presetLayoutStore",{key:e,content:JSON.stringify(t)}),await n.done}k(n=>n.map(n=>n.key===e?{key:e,content:t}:n))},onActive:e=>{const{dyeList:t,foil:n,frame:a,pendulumFrame:r,leftFrame:i,pendulumRightFrame:l,rightFrame:s,effectStyle:c,pendulumStyle:d}=e;o(a),z(r),D(l),B(i),P(s),M(c.background),H(d.background),E(n),A(t)}})]})}),gp=[Object(l.a)(Object(l.a)({},ae[0]),{},{valueDisplay:(e,t)=>e["input.flag.mix-def-link"],sampleDisplay:e=>Object(S.jsxs)(S.Fragment,{children:[e["input.flag.mix-def-link"],":",Object(S.jsxs)("ul",{children:[Object(S.jsxs)("li",{children:[Object(S.jsx)(Xl,{data:0,children:"0"}),": ",e["manager.template.description.true"]]}),Object(S.jsxs)("li",{children:[Object(S.jsx)(Xl,{data:1,children:"1"}),": ",e["manager.template.description.false"]]})]})]})}),Object(l.a)(Object(l.a)({},ae[1]),{},{valueDisplay:(e,t)=>Object(S.jsxs)(S.Fragment,{children:[e["input.flag.link-rating-behavior"],": ",e[1===t?"input.flag.link-rating-behavior.show":"input.flag.link-rating-behavior.hide"]]}),sampleDisplay:e=>Object(S.jsxs)(S.Fragment,{children:[e["input.flag.link-rating-behavior"],":",Object(S.jsxs)("ul",{children:[Object(S.jsxs)("li",{children:[Object(S.jsx)(Xl,{data:0,children:0}),": ",e["input.flag.link-rating-behavior.auto"]]}),Object(S.jsxs)("li",{children:[Object(S.jsx)(Xl,{data:1,children:1}),": ",e["input.flag.link-rating-behavior.show"]]}),Object(S.jsxs)("li",{children:[Object(S.jsx)(Xl,{data:2,children:2}),": ",e["input.flag.link-rating-behavior.hide"]]})]})]})})];var hp,fp;const{width:vp,height:yp}=d,jp=fr.b.div(hp||(hp=Object(mr.a)(["\n    display: inline-flex;\n    cursor: pointer;\n    box-shadow: var(--bs-input);\n    vertical-align: bottom;\n    box-shadow: var(--bs-button);\n    border-radius: var(--br-lg);\n    background-color: var(--main-level-4);\n    &:focus-visible {\n        outline: 2px solid var(--focus);\n    }\n    .pendulum-frame-info-block {\n        border-radius: 0 var(--br-lg) var(--br-lg) 0;\n        line-height: 2; // Alignment\n        min-width: 110px;\n        overflow: hidden;\n        border: var(--bw) solid var(--sub-level-1);\n        .frame-info-block-label {\n            padding: var(--spacing-px) var(--spacing-xs);\n        }\n    }\n    .pendulum-frame-label {\n        display: inline-block;\n        background: var(--main-level-4);\n        border: var(--bw) solid var(--sub-level-1);\n        border-right: none;\n        padding: var(--spacing-px) var(--spacing-xs);\n        border-radius: var(--br-lg) 0 0 var(--br-lg);\n        line-height: 2; // Alignment\n        &:last-child {\n            border-radius: var(--br-lg);\n            border-right: var(--bw) solid var(--sub-level-1);\n        }\n    }\n    .card-layout-preview-container {\n        line-height: 0;\n        border: var(--bw) solid var(--sub-level-1);\n        overflow: hidden;\n    }\n    .anticon {\n        align-content: center;\n        padding: 0 var(--spacing-xs);\n        border: var(--bw) solid var(--sub-level-1);\n        border-left: none;\n        border-radius: 0 var(--br-lg) var(--br-lg) 0;\n    }\n"]))),xp=fr.b.div(fp||(fp=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    column-gap: var(--spacing-sm);\n    row-gap: var(--spacing-sm);\n    .red-scale {\n        color: var(--sub-red-scale);\n    }\n    .blue-scale {\n        color: var(--sub-blue-scale);\n    }\n    .pendulum-option {\n        display: grid;\n        grid-template-columns: var(--width-label) 1fr;\n        align-items: center;\n        .pendulum-frame-input,\n        .pendulum-checkbox {\n            flex: 0 0 auto;\n        }\n        .mirror-scale {\n            /** Alignment **/\n            line-height: 32px;\n            align-items: center;\n        }\n    }\n    .joined-row {\n        position: relative;\n        grid-column: span 2;\n        .standalone-label {\n            min-width: 0;\n            width: unset;\n            padding-left: var(--spacing-antd);\n        }\n        .pendulum-checkbox {\n            display: inline-block;\n            /** Alignment **/\n            width: var(--width-label);\n            /** Alignment **/\n            line-height: 32px;\n            text-align: right;\n            font-weight: 500;\n            margin-right: 0;\n            padding-right: var(--spacing);\n            > span {\n                padding-right: 0;\n            }\n        }\n        .pendulum-checkbox-placeholder {\n            display: inline-block;\n            /** Alignment **/\n            width: var(--width-label);\n        }\n        .pendulum-frame-input {\n            margin-right: var(--spacing);\n        }\n        .pendulum-size {\n            display: inline-block;\n            line-height: 1.15; // Alignment\n            margin-right: var(--spacing);\n        }\n        .ant-checkbox-wrapper + .ant-checkbox-wrapper {\n            margin-left: 0;\n        }\n    }\n"]))),Op=Object(a.forwardRef)((e,t)=>{let{softMode:n,showCreativeOption:r,showExtraDecorativeOption:i,onTakePicker:o,onFrameChange:s}=e;const c=Rr(),{isPendulum:d,frame:u,foil:b,leftFrame:m,rightFrame:p,pendulumFrame:g,pendulumRightFrame:h,effectBackground:f,pendulumEffectBackground:v,pendulumScaleBlue:y,pendulumScaleRed:j,pendulumSize:x,dyeList:O,flag:w,setCard:k,getUpdater:C}=ii(Object(ui.useShallow)(e=>{let{card:{isPendulum:t,frame:n,foil:a,leftFrame:r,rightFrame:i,pendulumFrame:o,pendulumRightFrame:l,pendulumScaleBlue:s,pendulumScaleRed:c,pendulumSize:d,effectStyle:u,pendulumStyle:b,dyeList:m,flag:p},setCard:g,getUpdater:h}=e;return{isPendulum:t,frame:n,foil:a,leftFrame:r,rightFrame:i,pendulumFrame:o,pendulumRightFrame:l,pendulumScaleBlue:s,pendulumScaleRed:c,pendulumSize:d,effectBackground:u.background,pendulumEffectBackground:b.background,dyeList:m,flag:p,setCard:g,getUpdater:h}})),{mirrorPendulumScale:F,updateSetting:L}=oi(Object(ui.useShallow)(e=>{let{setting:{mirrorPendulumScale:t},updateSetting:n}=e;return{mirrorPendulumScale:t,updateSetting:n}})),T=Object(a.useRef)(null),N=Object(a.useRef)(null),R=Object(a.useRef)(null),[I,E]=Object(a.useState)(!1),z=Object(a.useMemo)(()=>C("pendulumScaleRed"),[C]),D=Object(a.useMemo)(()=>C("pendulumScaleBlue"),[C]),B=Object(a.useMemo)(()=>C("pendulumSize"),[C]),P=Object(a.useMemo)(()=>C("pendulumEffect",void 0,"debounce"),[C]),M=Object(a.useMemo)(()=>{return e=c,Object.values(Z).map(t=>{let{key:n,labelKey:a}=t;return{label:e[a],value:n}});var e},[c]),H=Object(a.useMemo)(()=>zu().filter(e=>i||"normal"===e.edition),[i]);Object(a.useImperativeHandle)(t,()=>({setValue:e=>{var t;let{pendulumEffect:n}=e;n&&(null===(t=R.current)||void 0===t||t.setValue(n))}}));const A={frame:u,topLeftFrame:m,topRightFrame:p,bottomLeftFrame:g,bottomRightFrame:h,effectBackground:f,pendulumEffectBackground:v},W=w.map((e,t)=>{const n=gp[t];return 0!==e&&n?Object(S.jsx)("li",{children:n.valueDisplay(c,e)},n.labelKey):null}).filter(e=>null!=e);return Object(S.jsxs)(xp,{className:"pendulum-input",children:[Object(S.jsxs)("div",{className:"joined-row pendulum-option",children:[Object(S.jsx)("div",{className:"pendulum-checkbox",children:Object(S.jsx)(jl.a,{onChange:e=>k(t=>{const n=e.target.checked;return Object(l.a)(Object(l.a)({},t),{},{isPendulum:n})}),checked:d,children:c["input.pendulum.label"]})}),Object(S.jsxs)("div",{className:"pendulum-option-container",children:[r&&Object(S.jsx)(bl.a,{visible:I,onVisibleChange:E,trigger:["click"],placement:"bottom",overlayClassName:"pendulum-frame-picker-overlay",content:Object(S.jsxs)("div",{className:"overlay-event-absorber",children:[Object(S.jsx)(pp,{ref:N,isPendulum:d,frameList:H,pendulumFrame:g,onFrameChange:s,onCancel:()=>{var e;E(!1),null===(e=T.current)||void 0===e||e.focus()}}),Object(S.jsx)(cp,{})]}),children:Object(S.jsxs)(jp,{ref:T,className:"pendulum-frame-input",tabIndex:0,onKeyDown:e=>{if("ArrowDown"===e.key||"Enter"===e.key||"  "===e.key)return E(!0),setTimeout(()=>{var e;null===(e=N.current)||void 0===e||e.focus()},200),!1},children:[Object(S.jsx)("span",{className:"pendulum-frame-label",children:c["input.advanced-frame.label"]}),Object(S.jsx)("div",{className:"card-layout-preview-container",children:Object(S.jsx)(bc,{width:Math.round(30*vp/yp),height:30,isPendulum:d,resolvedLayoutState:ra(A,d),tabIndex:-1,dyeList:O,foil:b,language:c})}),W.length>0?Object(S.jsx)(ss,{content:Object(S.jsxs)(ls,{children:[c["input.flag.effective.label"],Object(S.jsx)("ul",{children:W})]}),children:Object(S.jsx)(np.a,{})}):null,Object(S.jsx)(Ku.a,{})]})}),d&&r&&Object(S.jsx)("div",{className:"pendulum-size",children:Object(S.jsx)(bl.a,{overlayClassName:"global-input-overlay font-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsx)(du.Container,{children:M.map(e=>{let{value:t,label:n}=e;return Object(S.jsx)(du.Option,{className:x===t?"menu-active":"",onClick:()=>{B(t)},children:n},t)})})}),placement:"bottomLeft",children:Object(S.jsx)(bs,{$softMode:n,$active:x!==ne,children:c[Z[x].labelKey]})},"color-picker")}),d&&r&&Object(S.jsx)(jl.a,{className:"mirror-scale",onChange:e=>{const t=e.target.checked;L({mirrorPendulumScale:t}),t&&z(y)},checked:F,children:c["input.mirror-scale.label"]})]})]}),d&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{children:Object(S.jsx)(fc.a,{addonBefore:Object(S.jsx)("span",{children:c["input.scale.label"](Object(S.jsx)("span",{className:"blue-scale",children:c["input.scale.blue.label"]},"blue-scale"))}),value:y,allowClear:!0,onChange:e=>{D(e),F&&z(e)}})}),Object(S.jsx)("div",{children:Object(S.jsx)(fc.a,{addonBefore:Object(S.jsx)("span",{children:c["input.scale.label"](Object(S.jsx)("span",{className:"red-scale",children:c["input.scale.red.label"]},"red-scale"))}),value:j,allowClear:!0,onChange:e=>{F&&D(e),z(e)}})}),Object(S.jsx)("div",{className:"joined-row",children:Object(S.jsx)(Wb,{ref:R,id:"pendulum-effect",allowHotkey:!0,defaultValue:ii.getState().card.pendulumEffect,onChange:P,onTakePicker:o,autoSize:{minRows:5}})})]})]})});var wp,kp,Sp;const Cp=fr.b.div(wp||(wp=Object(mr.a)(["\n    &.first-line,\n    &.second-line {\n        display: flex;\n        gap: var(--spacing-sm);\n        align-items: center;\n        justify-content: right;\n    }\n    .type-ability-input {\n        flex: 1 1 auto;\n        width: unset;\n        max-width: 40rem;\n    }\n    .condense-input {\n        flex: 1 1 auto;\n    }\n    .formatting-help-button,\n    .input-kanji-helper {\n        flex: 0 0 auto;\n    }\n    .input-kanji-helper {\n        span {\n            padding-right: 0;\n        }\n    }\n    .formatting-help-button {\n        grid-area: help-button;\n        padding-left: var(--spacing-sm);\n        padding-right: var(--spacing-sm);\n        &:focus {\n            box-shadow: 0 0 0 2px var(--focus);\n        }\n    }\n    .condense-input {\n\t\t.standalone-addon.ant-input-group-addon {\n\t\t\twidth: unset;\n\t\t}\n\t\t.ant-radio-button-wrapper {\n\t\t\tflex: 1 1 90px;\n\t\t}\n\t}\n"]))),Fp=fr.b.div(kp||(kp=Object(mr.a)(["\n    display: inline-flex;\n    cursor: pointer;\n    box-shadow: var(--bs-input);\n    vertical-align: bottom;\n    box-shadow: var(--bs-button);\n    border-radius: var(--br-lg);\n    background-color: var(--main-level-4);\n    flex: 0 0 auto;\n    .button-label {\n        line-height: 2;\n        padding: var(--spacing-px) var(--spacing-xs);\n    }\n"]))),Lp=fr.b.div(Sp||(Sp=Object(mr.a)(["\n    max-width: 20rem;\n    padding: var(--spacing-sm);\n    .input-section {\n        h2 {\n            padding-left: 0;\n            padding-right: 0;\n        }\n        small {\n            display: block;\n            color: var(--color);\n            margin-top: var(--spacing-xs);\n            line-height: var(--fs-lg);\n        }\n        + .input-section {\n            margin-top: var(--spacing-sm);\n        }\n    }\n    .single-slider {\n        .ant-input-number {\n            width: 75px;\n        }\n    }\n"]))),Tp=Object(a.forwardRef)((e,t)=>{var n;let{onTakePicker:r}=e;const i=Rr(),{frame:o,cardIcon:s,format:c,furiganaHelper:d,condenseTolerant:u,setCard:b,getUpdater:m}=ii(Object(ui.useShallow)(e=>{let{card:{frame:t,cardIcon:n,format:a,furiganaHelper:r,effectStyle:i},setCard:o,getUpdater:l}=e;return{frame:t,cardIcon:n,format:a,furiganaHelper:r,condenseTolerant:null===i||void 0===i?void 0:i.condenseTolerant,setCard:o,getUpdater:l}})),p=oi(e=>e.setting.showExtraDecorativeOption),g="ocg"===c?"\uff0f":"/",h=Object(a.useRef)(null),[f,v]=Object(a.useState)(()=>ii.getState().card.effectStyle.minLine),[y,j]=Object(a.useState)(()=>ii.getState().card.pendulumStyle.minLine),[x,O]=Object(a.useState)(()=>ii.getState().card.effectStyle.justifyRatio),[w,k]=Object(a.useState)(()=>ii.getState().card.pendulumStyle.justifyRatio),C=Object(a.useMemo)(()=>m("typeAbility",e=>"string"!==typeof e?[]:e.split(/\uff0f|\//).map(e=>"".concat(e).trim()).filter(e=>"string"===typeof e&&e.length>0),"debounce"),[m]),F=Object(a.useCallback)(e=>b(t=>Object(l.a)(Object(l.a)({},t),{},{furiganaHelper:e.target.checked})),[b]);Object(a.useEffect)(()=>{let e=!0;return setTimeout(()=>{e&&b(e=>{const t=Object(l.a)(Object(l.a)({},e.effectStyle),{},{minLine:f,justifyRatio:x}),n=Object(l.a)(Object(l.a)({},e.pendulumStyle),{},{minLine:y,justifyRatio:w});return Object(l.a)(Object(l.a)({},e),{},{effectStyle:t,pendulumStyle:n})})},500),()=>{e=!1}},[x,f,w,y,b]),Object(a.useImperativeHandle)(t,()=>({setValue:e=>{var t;let{typeAbility:n,effectMinLine:a,pendulumEffectMinLine:r,effectJustifyRatio:i,pendulumEffectJustifyRatio:o}=e;n&&(null===(t=h.current)||void 0===t||t.setValue(n.join(g))),"number"===typeof a&&v(a),"number"===typeof r&&j(r),"number"===typeof i&&O(i),"number"===typeof o&&k(o)}}));const L="auto"===s?Qn({frame:o})?"input.type.monster.label":"input.type.st.label":"st"===(null===(n=P[s])||void 0===n?void 0:n.value)?"input.type.st.label":"input.type.monster.label",T="ocg"===c;return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(Cp,{className:"post-pendulum-input first-line variant-".concat(c),children:[Object(S.jsx)(Yb,{ref:h,addonBefore:i[L],id:"type-ability",defaultValue:ii.getState().card.typeAbility.join(g),onChange:C,onTakePicker:r}),T&&Object(S.jsx)(hr.a,{overlay:i["input.furigana-helper.tooltip"],overlayClassName:"long-tooltip-overlay",children:Object(S.jsx)(jl.a,{className:"input-kanji-helper",onChange:F,checked:d,children:i["input.furigana-helper.label"]})}),Object(S.jsx)(nd,{}),p&&Object(S.jsx)(bl.a,{overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsxs)(Lp,{className:"input-popover",children:[Object(S.jsxs)("div",{className:"input-section",children:[Object(S.jsxs)("h2",{children:[i["input.condense.label"],Object(S.jsx)("br",{}),Object(S.jsx)("small",{children:i["input.condense.tooltip"]})]}),Object(S.jsx)("div",{className:"line-input",children:Object(S.jsx)(Il,{className:"condense-input",value:"".concat(u),onChange:e=>(e=>{b(t=>Object(l.a)(Object(l.a)({},t),{},{effectStyle:Object(l.a)(Object(l.a)({},t.effectStyle),{},{condenseTolerant:e})}))})(e),optionList:Pu})})]}),Object(S.jsxs)("div",{className:"input-section",children:[Object(S.jsx)("h2",{children:i["input.text-style.min-line.label"]}),Object(S.jsx)("div",{className:"line-input",children:Object(S.jsxs)(vs,{className:"single-slider",children:[Object(S.jsxs)("span",{children:[i["input.text-style.min-line.effect.placeholder"],":"]}),Object(S.jsx)(jc.a,{id:"effect-line",size:"small",value:f,placeholder:i["input.text-style.min-line.effect.placeholder"],onChange:e=>v("number"===typeof e?e:0),min:0,max:50}),Object(S.jsxs)("span",{children:[i["input.text-style.min-line.pendulum-effect.placeholder"],":"]}),Object(S.jsx)(jc.a,{id:"pendulum-effect-line",size:"small",value:y,placeholder:i["input.text-style.min-line.pendulum-effect.placeholder"],onChange:e=>j("number"===typeof e?e:0),min:0,max:50})]})})]}),Object(S.jsxs)("div",{className:"input-section",children:[Object(S.jsxs)("h2",{children:[i["input.text-style.justify-ratio.label"],Object(S.jsx)("br",{}),Object(S.jsx)("small",{children:i["input.text-style.justify-ratio.tooltip"]})]}),Object(S.jsx)("div",{className:"justify-ratio-input",children:Object(S.jsxs)(vs,{className:"single-slider",children:[Object(S.jsxs)("span",{children:[i["input.text-style.min-line.effect.placeholder"],":"]}),Object(S.jsx)(jc.a,{id:"effect-justify-ratio",size:"small",value:x,placeholder:i["input.text-style.min-line.effect.placeholder"],onChange:e=>O("number"===typeof e?e:0),min:0,max:5e3,step:100}),Object(S.jsxs)("span",{children:[i["input.text-style.min-line.pendulum-effect.placeholder"],":"]}),Object(S.jsx)(jc.a,{id:"pendulum-effect-justify-ratio",size:"small",value:w,placeholder:i["input.text-style.min-line.pendulum-effect.placeholder"],onChange:e=>k("number"===typeof e?e:0),min:0,max:5e3,step:100})]})})]})]})}),children:Object(S.jsx)(Fp,{children:Object(S.jsx)("div",{className:"button-label",children:i["input.text-style.paragraph-style.label"]})})})]})})});var Np,Rp;const Ip=fr.b.div(Np||(Np=Object(mr.a)(["\n    display: inline-grid;\n    grid-template-columns: 1fr max-content;\n    column-gap: var(--spacing-xxs);\n    padding: var(--spacing-px);\n    margin-right: var(--spacing-sm);\n    border: var(--bw) solid var(--sub-level-1);\n    border-radius: var(--br);\n    background-color: var(--main-level-4);\n    cursor: pointer;\n    &:hover {\n        border-color: var(--main-active);\n    }\n    .text-style-grid {\n        display: grid;\n        grid-template-columns: 25px 25px 25px;\n        grid-template-rows: 13px 13px; // Alignment\n        gap: var(--spacing-xxs);\n        font-size: var(--fs-xs);\n        text-align: center;\n        line-height: 1.5;\n    }\n    .text-style-preview-section {\n        border-radius: var(--br-sm);\n        box-shadow: 0 0 1px 1px var(--main-level-1) inset;\n    }\n    .text-style-label {\n        padding: var(--spacing-xxs);\n        line-height: 1.7;\n    }\n"]))),Ep=fr.b.div(Rp||(Rp=Object(mr.a)(["\n    position: relative;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: var(--spacing-px);\n    &.input-popover {\n        background-color: var(--sub-level-4); // Mimic border color\n    }\n    .style-section {\n        z-index: 1;\n        position: relative;\n        background-color: var(--main-level-3);\n    }\n    .style-picker-section {\n        overflow: hidden;\n        h2.size-picker,\n        h2.font-style-picker {\n            padding: var(--spacing-xs);\n        }\n        .inline-radio-train {\n            display: inline-flex;\n            padding-bottom: 0;\n            margin-left: var(--spacing-sm);\n        }\n        .shadow-checkbox .ant-checkbox {\n            transform: translateY(1px);\n        }\n        > .ant-checkbox-wrapper {\n            padding: var(--spacing-xs);\n        }\n    }\n    .custom-style-expand {\n        display: grid;\n        grid-template-columns: 1fr max-content;\n        column-gap: var(--spacing-xs);\n        .ant-checkbox-wrapper > span {\n            padding-right: 0;\n        }\n    }\n    .radio-train {\n        padding: var(--spacing-xs);\n        padding-top: 0;\n        .standalone-addon {\n            flex: 1 1 auto;\n            text-align: left;\n        }\n        .radio-train-input-group {\n            flex: 0 0 auto;\n        }\n        .ant-radio-button-wrapper {\n            height: 26px;\n            line-height: 24px;\n        }\n    }\n"]))),zp={effectTextStyle:{keyName:"effectTextStyle",extraKeyname:"effectStyle",labelKey:"input.text-style.section.effect.label"},pendulumTextStyle:{keyName:"pendulumTextStyle",extraKeyname:"pendulumStyle",labelKey:"input.text-style.section.pendulum.label"},statTextStyle:{keyName:"statTextStyle",extraKeyname:void 0,labelKey:"input.text-style.section.stat.label"},typeTextStyle:{keyName:"typeTextStyle",extraKeyname:void 0,labelKey:"input.text-style.section.type.label"},otherTextStyle:{keyName:"otherTextStyle",extraKeyname:void 0,labelKey:"input.text-style.section.other.label"}},Dp=()=>{const e=Rr(),{format:t,effectStyle:n,effectTextStyle:a,otherTextStyle:r,pendulumStyle:i,pendulumTextStyle:o,setCard:s,statTextStyle:c,typeTextStyle:d}=ii(Object(ui.useShallow)(e=>{let{card:{format:t,effectStyle:n,effectTextStyle:a,otherTextStyle:r,pendulumStyle:i,pendulumTextStyle:o,statTextStyle:l,typeTextStyle:s},setCard:c}=e;return{format:t,effectStyle:n,effectTextStyle:a,otherTextStyle:r,pendulumStyle:i,pendulumTextStyle:o,setCard:c,statTextStyle:l,typeTextStyle:s}})),u=[{info:zp.effectTextStyle,value:a,extraValue:n},{info:zp.pendulumTextStyle,value:o,extraValue:i},{info:zp.statTextStyle,value:c},{info:zp.typeTextStyle,value:d},{info:zp.otherTextStyle,value:r}];return Object(S.jsx)(bl.a,{trigger:["click"],placement:"bottomLeft",overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(S.jsx)("div",{className:"overlay-event-absorber",children:Object(S.jsx)(Ep,{className:"input-popover",children:u.map(n=>{let{info:a,value:r,extraValue:i}=n;const{keyName:o,labelKey:c,extraKeyname:d}=a,[u,b,m,p]=r,{upSize:g,fontStyle:h}=null!==i&&void 0!==i?i:{};return Object(S.jsxs)("div",{className:"style-section",children:[Object(S.jsxs)("h3",{className:"custom-style-expand ".concat(u?"":"inactive"),children:[Object(S.jsx)("span",{children:e[c]}),Object(S.jsx)(jl.a,{checked:u,onChange:e=>{s(t=>{const n=e.target.checked;return Object(l.a)(Object(l.a)({},t),{},{[o]:[n,...r.slice(1)]})})},children:e["input.text-style.custom.label"]})]}),u&&Object(S.jsxs)("div",{className:"style-picker-section",children:["string"===typeof h&&"tcg"===t&&Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("h2",{className:"font-style-picker",children:[Object(S.jsx)("span",{className:"label",children:e["input.text-style.font-style.label"]}),Object(S.jsx)(Il,{className:"inline-radio-train",value:h,optionList:[{label:Object(S.jsx)(w.a,{}),value:"auto"},{label:e["input.text-style.font-style.normal.label"],value:"normal"},{label:e["input.text-style.font-style.italic.label"],value:"italic"}],onChange:e=>{s(t=>{const n=d?Object(l.a)({},t[d]):void 0;return n&&d?(n.fontStyle="string"===typeof e?e:"auto",Object(l.a)(Object(l.a)({},t),{},{[d]:n})):t})}})]})}),"number"===typeof g&&Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("h2",{className:"size-picker",children:[Object(S.jsx)("span",{className:"label",children:e["input.text-style.extra-size.label"]}),Object(S.jsx)(Il,{className:"inline-radio-train",value:g,optionList:[{label:Object(S.jsx)(w.a,{}),value:0},{label:"+1",value:1},{label:"+2",value:2},{label:"+3",value:3}],onChange:e=>{s(t=>{const n=d?Object(l.a)({},t[d]):void 0;return n&&d?(n.upSize="number"===typeof e?e:0,Object(l.a)(Object(l.a)({},t),{},{[d]:n})):t})}})]})}),Object(S.jsx)("h2",{children:Object(S.jsx)(jl.a,{className:"shadow-checkbox",checked:m,onChange:e=>{s(t=>{const n=e.target.checked;return Object(l.a)(Object(l.a)({},t),{},{[o]:[...r.slice(0,2),n,r[3]]})})},children:Object(S.jsx)("span",{className:"label",children:e["input.text-style.shadow.label"]})})}),m&&Object(S.jsx)(wd,{value:p,onChange:e=>s(t=>Object(l.a)(Object(l.a)({},t),{},{[o]:[...r.slice(0,3),e]}))}),Object(S.jsx)("h2",{children:e["input.text-style.color.label"]}),Object(S.jsx)(kd.b,{colors:bn,color:null!==b&&void 0!==b?b:"",onChangeComplete:e=>{s(t=>Object(l.a)(Object(l.a)({},t),{},{[o]:[r[0],e.hex,...r.slice(2,4)]}))}})]})]},o)})})}),children:Object(S.jsxs)(Ip,{className:"text-style-preview",children:[Object(S.jsx)("div",{className:"text-style-grid",children:u.map(e=>{let{info:t,value:n,extraValue:a}=e;const{keyName:r}=t,[i,o,l,s]=n,{upSize:c,fontStyle:d}=null!==a&&void 0!==a?a:{};return Object(S.jsx)("div",{className:"text-style-preview-section",style:{background:i?"var(--sub-level-2)":"var(--sub-level-4)",color:0!==(null!==o&&void 0!==o?o:"").length&&i?o:"var(--color-contrast)",textShadow:i&&l?"0 0 2px ".concat(s):"none",fontStyle:i&&"italic"===d?"italic":"normal"},children:c&&i?Object(S.jsxs)("div",{children:["+",c]}):"Auto"},r)})}),Object(S.jsx)("span",{className:"text-style-label",children:e["input.text-style.custom-effect.label"]})]})})};n(598);const Bp=Object(a.forwardRef)((e,t)=>{let{applyCardData:n,artworkCanvas:r,backgroundCanvas:i,onCropChange:o,onTainted:s,onSourceLoaded:c}=e;const d=Rr(),{format:u,frame:b,foil:m,finish:p,opacity:g,nameStyleType:h,nameStyle:v,getUpdater:y,setCard:j}=ii(Object(ui.useShallow)(e=>{let{card:{format:t,frame:n,foil:a,finish:r,opacity:i,nameStyleType:o,nameStyle:l,isLink:s},getUpdater:c,setCard:d}=e;return{format:t,frame:n,foil:a,finish:r,opacity:i,nameStyleType:o,nameStyle:l,isLink:s,getUpdater:c,setCard:d}})),{setting:x}=oi(),{showCreativeOption:O,showExtraDecorativeOption:w,reduceMotionColor:k}=x,C=Object(a.useRef)(null),F=Qn({frame:b}),[L,T]=Object(a.useState)(0),N=Object(a.useMemo)(()=>Iu({normal:d["input.foil.normal.label"],gold:d["input.foil.gold.label"],platinum:d["input.foil.platinum.label"]}),[d]),R=Object(a.useRef)(null),I=Object(a.useRef)(null),E=Object(a.useRef)(null),z=Object(a.useRef)(null),D=Object(a.useRef)(null),B=Object(a.useRef)(null),P=Object(a.useRef)(null),M=Object(a.useRef)(null),H=Object(a.useRef)(null),[A,W]=Object(a.useState)({id:"",setValue:()=>{}}),K=Object(a.useMemo)(()=>y("foil"),[y]),Y=Object(a.useMemo)(()=>y("finish"),[y]),U=Object(a.useCallback)(e=>j(t=>Object(l.a)(Object(l.a)({},t),{},{opacity:e})),[j]),G=Object(a.useCallback)((e,t)=>{j(n=>Object(l.a)(Object(l.a)({},n),{},{nameStyleType:e,nameStyle:t}))},[j]),X=Object(a.useMemo)(()=>{return e=d,Object.values(f).map(t=>{let{value:n,label:a,labelKey:r,tooltipKey:i}=t;return{label:r?e[r]:a,tooltip:i?e[i]:void 0,value:n}});var e},[d]);return Object(a.useEffect)(()=>{var e;null===(e=C.current)||void 0===e||e.setValue({font:v.font})},[v]),Object(a.useEffect)(()=>{var e;null===(e=z.current)||void 0===e||e.setValue(g)},[g]),Object(a.useImperativeHandle)(t,()=>({isLoading:()=>{var e,t,n,a;return null!==(e=null===(t=E.current)||void 0===t?void 0:t.isLoading())&&void 0!==e&&e||null!==(n=null===(a=z.current)||void 0===a?void 0:a.isLoading())&&void 0!==n&&n},forceCardData:e=>{var t,n,a,r,i,o,s,c;T(e=>e+1);const{name:d,art:u,artCrop:b,artData:m,artSource:p,background:g,backgroundCrop:h,backgroundData:f,backgroundSource:v,opacity:y,attribute:j,attributeType:x,setId:O,pendulumEffect:w,typeAbility:k,effect:S,atk:C,def:F,creator:L,password:N,effectStyle:R,pendulumStyle:A,firstEditionText:W,cornerText:K}=e;null===(t=E.current)||void 0===t||t.setValue({art:u,artCrop:b,artData:m,artSource:p}),null===(n=z.current)||void 0===n||n.setValue(Object(l.a)(Object(l.a)({},y),{},{background:g,backgroundCrop:h,backgroundData:f,backgroundSource:v})),null===(a=I.current)||void 0===a||a.setValue({attribute:j,attributeType:x}),null===(r=D.current)||void 0===r||r.setValue({name:d,setId:O}),null===(i=B.current)||void 0===i||i.setValue({pendulumEffect:w}),null===(o=P.current)||void 0===o||o.setValue(S),null===(s=M.current)||void 0===s||s.setValue({typeAbility:k,effectMinLine:R.minLine,pendulumEffectMinLine:A.minLine,effectJustifyRatio:R.justifyRatio,pendulumEffectJustifyRatio:A.justifyRatio}),null===(c=H.current)||void 0===c||c.setValue({atk:C,def:F,creator:L,password:N,firstEditionText:W,cornerText:K})}})),Object(S.jsxs)("div",{className:["card-info-panel","ocg"===u?"input-ocg":"input-tcg"].join(" "),children:[Object(S.jsx)(Hc,{applyCardData:n}),Object(S.jsx)("br",{}),Object(S.jsx)(Pc,{}),Object(S.jsxs)("div",{className:"card-overlay-input",children:[Object(S.jsx)(Bm,{className:"format-radio",value:u,onChange:e=>{j(t=>{var n,a,r,i,o;const l="".concat(e),s=Or(t,l),{name:c,setId:d,effect:u,typeAbility:b,password:m,creator:p,pendulumEffect:g}=s;return null===(n=D.current)||void 0===n||n.setValue({name:c,setId:d}),null===(a=P.current)||void 0===a||a.setValue(u),null===(r=B.current)||void 0===r||r.setValue({pendulumEffect:g}),null===(i=M.current)||void 0===i||i.setValue({typeAbility:b}),null===(o=H.current)||void 0===o||o.setValue({creator:p,password:m}),s})},optionList:Ru,children:Object(S.jsx)("span",{children:d["input.format.label"]})}),Object(S.jsx)(Il,{className:"foil-radio",value:m,onChange:K,optionList:N,children:Object(S.jsx)("span",{children:d["input.foil.label"]})}),w&&Object(S.jsx)(xb,{className:"finish-checkbox",value:p,onChange:Y,optionList:X,children:Object(S.jsxs)(zm,{className:"finish-checkbox-label",children:[Object(S.jsx)("div",{className:"input-label",children:d["input.finish.label"]}),Object(S.jsx)(Sl,{onClick:()=>Y([]),Icon:Hu.a,tooltipProps:{title:d["input.other-finish.reset.tooltip"]}})]})})]}),O&&Object(S.jsxs)("div",{className:"card-layout-input",children:[Object(S.jsxs)("label",{className:"standalone-addon ant-input-group-addon",children:[d["input.layout.label"]," ",Object(S.jsx)(vl,{content:Object(S.jsx)(ls,{children:d["input.layout.tooltip"]})})]}),Object(S.jsx)(Eb,{ref:z,defaultValue:g,receivingCanvas:i,onChange:U,onTainted:s,onCropChange:o,onSourceLoaded:c})]}),Object(S.jsx)(vb,{ref:R,onSTFrameChange:e=>{var t;return null===(t=M.current)||void 0===t?void 0:t.setValue({typeAbility:e})},onPasswordChange:e=>{var t;return null===(t=H.current)||void 0===t?void 0:t.setValue({password:e})},onStatChange:(e,t,n)=>{var a;return null===(a=H.current)||void 0===a?void 0:a.setValue({atk:e,def:t,linkRating:n})}}),Object(S.jsxs)(Dm,{className:"name-style-id-input",children:[Object(S.jsx)(ep,{ref:D,onTakePicker:W}),Object(S.jsx)(mb,{ref:C,frameInfo:He[b],defaultType:h,defaultValue:v,showExtraDecorativeOption:w,onChange:G},L),Object(S.jsx)(wm,{showCreativeOption:O})]}),Object(S.jsxs)("div",{className:"main-info",children:[Object(S.jsxs)("div",{className:"main-info-first",children:[Object(S.jsx)(qb,{ref:I,language:d}),Object(S.jsx)(Op,{ref:B,showCreativeOption:O,showExtraDecorativeOption:w,softMode:k,onTakePicker:W,onFrameChange:e=>{var t;return null===(t=R.current)||void 0===t?void 0:t.changeFrame(e)}}),Object(S.jsx)(Tp,{ref:M,onTakePicker:W}),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"card-effect-letter-helper",children:[Object(S.jsx)(ou,{className:"standalone-label",children:d["input.effect.label"]}),O?Object(S.jsx)(Dp,{}):Object(S.jsx)("div",{}),Object(S.jsx)(Wu,{targetId:A.id,onPick:A.setValue})]}),Object(S.jsx)(km,{ref:P,onTakePicker:W})]}),Object(S.jsx)(Wm,{ref:H,isMonster:F,showCreativeOption:O,onTakePicker:W})]}),Object(S.jsx)("div",{className:"main-info-second",children:Object(S.jsx)(_m,{ref:E,receivingCanvas:r,showCreativeOption:O,showExtraDecorativeOption:w,onSourceLoaded:c,onTainted:s,onCropChange:o})})]})]})}),Pp=["id"];var Mp;const{height:Hp,width:Ap,cardBorder:Wp}=d,Kp=68/Ap,Yp=fr.b.div(Mp||(Mp=Object(mr.a)(["\n    display: grid;\n    grid-template-columns: max-content 1fr;\n    border: var(--bw) solid var(--main-level-1);\n    border-top-color: transparent;\n    background-color: #333333;\n    cursor: pointer;\n    position: relative;\n    z-index: 1;\n    height: ",'px;\n    font-size: var(--fs-thumb);\n    &.alternative-color {\n        background-color: #282828;\n    }\n    &.active {\n        background-color: #484848;\n        border-color: var(--main-active);\n        box-shadow: var(--bs-2);\n        z-index: 2;\n    }\n    &:hover {\n        border-color: var(--sub-active);\n    }\n    .right-slot {\n        display: grid;\n        grid-template-columns: 1fr;\n        row-gap: var(--spacing-xxs);\n        line-height: 1.25;\n        overflow: hidden;\n        padding: var(--spacing-xs);\n        border-left: var(--bw) solid var(--main-level-3);\n        .select-box {\n            display: inline-block;\n            margin-right: var(--spacing-xs);\n        }\n        .first-row {\n            &:empty:before {\n                content: "\\00a0";\n            }\n        }\n        .second-row {\n            display: flex;\n            column-gap: var(--spacing-xs);\n            align-items: center;\n            .padding {\n                flex: 1;\n            }\n            .card-icon {\n                width: 1em;\n            }\n            .attribute-icon {\n                width: 1em;\n            }\n            .star-content {\n                flex: 0 0 30px;\n                &.tuner {\n                    color: var(--main-online);\n                }\n            }\n        }\n        .third-row {\n            display: flex;\n            .set-id {\n                flex: 1;\n                text-align: right;\n            }\n        }\n    }\n    .left-slot {\n        --link-arrow-icon-size: 16px;\n        --link-arrow-border-size: 6px;\n        --link-arrow-container-size: 8px;\n        --link-arrow-half-size: 13px;\n        --link-arrow-margin-inline: calc(var(--link-arrow-half-size) - var(--link-arrow-icon-size) / 2);\n        --link-arrow-margin-block: calc(var(--link-arrow-half-size) - var(--link-arrow-border-size) / 2);\n        line-height: 0;\n        position: relative;\n        width: ',"px;\n        overflow: hidden;\n        .card-art-container {\n            cursor: pointer;\n            display: inline-block;\n            max-height: ","px;\n            overflow: hidden;\n            box-shadow: var(--bs-1);\n            position: relative;\n            z-index: 1;\n        }\n        .card-art {\n            display: inline-block;\n            position: absolute;\n            top: 0;\n            left: 0;\n        }\n        .card-frame {\n            width: 50%;\n            height: 50%;\n            position: absolute;\n            background-size: 200% 200%;\n            &.top-left-frame {\n                top: 0;\n                left: 0;\n                background-position: 0% 0%;\n            }\n            &.top-right-frame {\n                top: 0;\n                left: 50%;\n                background-position: 100% 0%;\n            }\n            &.bottom-left-frame {\n                top: 50%;\n                left: 0;\n                background-position: 0% 0%;\n            }\n            &.bottom-right-frame {\n                top: 50%;\n                left: 50%;\n                background-position: 100% 0%;\n            }\n        }\n        .thumb-link-marker-icon {\n            display: inline-block;\n            width: 0;\n            height: 0;\n            left: 21px;\n            border-style: solid;\n            position: absolute;\n            z-index: 3;\n            margin: var(--link-arrow-margin-block) var(--link-arrow-margin-inline);\n            border-width: 0 var(--link-arrow-container-size) var(--link-arrow-container-size) var(--link-arrow-container-size);\n            border-color: transparent transparent #dadada transparent;\n            &:after {\n                content: '';\n                display: inline-block;\n                position: absolute;\n                height: 0;\n                width: 0;\n                top: 0;\n                left: calc(-1 * var(--link-arrow-border-size));\n                border-style: solid;\n                border-width: 0 var(--link-arrow-border-size) var(--link-arrow-border-size) var(--link-arrow-border-size);\n                border-color: transparent transparent #484848 transparent;\n                transform: translateY(1px);\n                z-index: 2;\n            }\n            &.marker-checked:after {\n                border-color: transparent transparent var(--main-link-marker) transparent;\n            }\n        }\n        .pendulum-scale {\n            position: absolute;\n            bottom: 0;\n            text-align: center;\n            width: 18px;\n            line-height: 1;\n            z-index: 3;\n            font-size: var(--fs-sm);\n            background-color: #eaeaea;\n            box-shadow: var(--bs-1);\n            padding: var(--spacing-xxs) 0;\n            &.red-scale {\n                right: 0;\n                color: var(--main-red-scale);\n                border-radius: var(--br-lg) 0 0 0;\n            }\n            &.blue-scale {\n                left: 0;\n                color: var(--main-blue-scale);\n                border-radius: 0 var(--br-lg) 0 0;\n            }\n        }\n    }\n    .action-slot {\n        display: none;\n        padding: var(--spacing-xs);\n        position: absolute;\n        top: 0;\n        right: 0;\n        background: var(--main-level-3);\n        height: 100%;\n        box-shadow: 0 0 3px 0 #2a2a2a;\n        cursor: default;\n        &.force-visible {\n            display: block;\n        }\n        .action-container {\n            display: inline-grid;\n            grid-template-columns: max-content;\n            gap: var(--spacing-xs);\n        }\n        .action-button {\n            cursor: pointer;\n            &.action-duplicate:hover {\n                color: var(--main-active);\n            }\n            &.action-delete:hover {\n                color: var(--main-danger);\n            }\n            &.action-download:hover {\n                color: var(--main-online);\n            }\n        }\n    }\n    &:hover {\n        .action-slot {\n            display: block;\n        }\n    }\n"],["\n    display: grid;\n    grid-template-columns: max-content 1fr;\n    border: var(--bw) solid var(--main-level-1);\n    border-top-color: transparent;\n    background-color: #333333;\n    cursor: pointer;\n    position: relative;\n    z-index: 1;\n    height: ",'px;\n    font-size: var(--fs-thumb);\n    &.alternative-color {\n        background-color: #282828;\n    }\n    &.active {\n        background-color: #484848;\n        border-color: var(--main-active);\n        box-shadow: var(--bs-2);\n        z-index: 2;\n    }\n    &:hover {\n        border-color: var(--sub-active);\n    }\n    .right-slot {\n        display: grid;\n        grid-template-columns: 1fr;\n        row-gap: var(--spacing-xxs);\n        line-height: 1.25;\n        overflow: hidden;\n        padding: var(--spacing-xs);\n        border-left: var(--bw) solid var(--main-level-3);\n        .select-box {\n            display: inline-block;\n            margin-right: var(--spacing-xs);\n        }\n        .first-row {\n            &:empty:before {\n                content: "\\\\00a0";\n            }\n        }\n        .second-row {\n            display: flex;\n            column-gap: var(--spacing-xs);\n            align-items: center;\n            .padding {\n                flex: 1;\n            }\n            .card-icon {\n                width: 1em;\n            }\n            .attribute-icon {\n                width: 1em;\n            }\n            .star-content {\n                flex: 0 0 30px;\n                &.tuner {\n                    color: var(--main-online);\n                }\n            }\n        }\n        .third-row {\n            display: flex;\n            .set-id {\n                flex: 1;\n                text-align: right;\n            }\n        }\n    }\n    .left-slot {\n        --link-arrow-icon-size: 16px;\n        --link-arrow-border-size: 6px;\n        --link-arrow-container-size: 8px;\n        --link-arrow-half-size: 13px;\n        --link-arrow-margin-inline: calc(var(--link-arrow-half-size) - var(--link-arrow-icon-size) / 2);\n        --link-arrow-margin-block: calc(var(--link-arrow-half-size) - var(--link-arrow-border-size) / 2);\n        line-height: 0;\n        position: relative;\n        width: ',"px;\n        overflow: hidden;\n        .card-art-container {\n            cursor: pointer;\n            display: inline-block;\n            max-height: ","px;\n            overflow: hidden;\n            box-shadow: var(--bs-1);\n            position: relative;\n            z-index: 1;\n        }\n        .card-art {\n            display: inline-block;\n            position: absolute;\n            top: 0;\n            left: 0;\n        }\n        .card-frame {\n            width: 50%;\n            height: 50%;\n            position: absolute;\n            background-size: 200% 200%;\n            &.top-left-frame {\n                top: 0;\n                left: 0;\n                background-position: 0% 0%;\n            }\n            &.top-right-frame {\n                top: 0;\n                left: 50%;\n                background-position: 100% 0%;\n            }\n            &.bottom-left-frame {\n                top: 50%;\n                left: 0;\n                background-position: 0% 0%;\n            }\n            &.bottom-right-frame {\n                top: 50%;\n                left: 50%;\n                background-position: 100% 0%;\n            }\n        }\n        .thumb-link-marker-icon {\n            display: inline-block;\n            width: 0;\n            height: 0;\n            left: 21px;\n            border-style: solid;\n            position: absolute;\n            z-index: 3;\n            margin: var(--link-arrow-margin-block) var(--link-arrow-margin-inline);\n            border-width: 0 var(--link-arrow-container-size) var(--link-arrow-container-size) var(--link-arrow-container-size);\n            border-color: transparent transparent #dadada transparent;\n            &:after {\n                content: '';\n                display: inline-block;\n                position: absolute;\n                height: 0;\n                width: 0;\n                top: 0;\n                left: calc(-1 * var(--link-arrow-border-size));\n                border-style: solid;\n                border-width: 0 var(--link-arrow-border-size) var(--link-arrow-border-size) var(--link-arrow-border-size);\n                border-color: transparent transparent #484848 transparent;\n                transform: translateY(1px);\n                z-index: 2;\n            }\n            &.marker-checked:after {\n                border-color: transparent transparent var(--main-link-marker) transparent;\n            }\n        }\n        .pendulum-scale {\n            position: absolute;\n            bottom: 0;\n            text-align: center;\n            width: 18px;\n            line-height: 1;\n            z-index: 3;\n            font-size: var(--fs-sm);\n            background-color: #eaeaea;\n            box-shadow: var(--bs-1);\n            padding: var(--spacing-xxs) 0;\n            &.red-scale {\n                right: 0;\n                color: var(--main-red-scale);\n                border-radius: var(--br-lg) 0 0 0;\n            }\n            &.blue-scale {\n                left: 0;\n                color: var(--main-blue-scale);\n                border-radius: 0 var(--br-lg) 0 0;\n            }\n        }\n    }\n    .action-slot {\n        display: none;\n        padding: var(--spacing-xs);\n        position: absolute;\n        top: 0;\n        right: 0;\n        background: var(--main-level-3);\n        height: 100%;\n        box-shadow: 0 0 3px 0 #2a2a2a;\n        cursor: default;\n        &.force-visible {\n            display: block;\n        }\n        .action-container {\n            display: inline-grid;\n            grid-template-columns: max-content;\n            gap: var(--spacing-xs);\n        }\n        .action-button {\n            cursor: pointer;\n            &.action-duplicate:hover {\n                color: var(--main-active);\n            }\n            &.action-delete:hover {\n                color: var(--main-danger);\n            }\n            &.action-download:hover {\n                color: var(--main-online);\n            }\n        }\n    }\n    &:hover {\n        .action-slot {\n            display: block;\n        }\n    }\n"])),68,68,56),Up=e=>{var t,n,r,i,o,s,c,d;let{index:b,card:m,active:g,selected:h,language:f,onDuplicate:v,onActive:y,onDelete:j,onSelect:x,style:O}=e;const[w,k]=Object(a.useState)(!1),{art:C,artCrop:F,artData:L,artFit:T,artSource:N,atk:R,attribute:I,attributeType:z,background:D,backgroundCrop:B,backgroundData:P,backgroundFit:M,backgroundSource:H,backgroundType:A,cardIcon:W,def:K,format:Y,frame:U,leftFrame:G,rightFrame:X,hasBackground:V,isLink:q,isPendulum:_,linkMap:J,name:$,opacity:Q,pendulumFrame:Z,pendulumRightFrame:ee,pendulumScaleBlue:te,pendulumScaleRed:ne,setId:ae,star:re,subFamily:ie,typeAbility:oe,effectStyle:le,pendulumStyle:se}=m,{topLeftFrame:ce,topRightFrame:de,bottomLeftFrame:ue,bottomRightFrame:be}=ra({frame:U,topLeftFrame:G,topRightFrame:X,bottomLeftFrame:Z,bottomRightFrame:ee,effectBackground:le.background,pendulumEffectBackground:se.background},_),me=wa($),pe="offline"===N?C?L:"https://i.imgur.com/jjtCuG5.png":C,ge="offline"===H?D?P:"https://imgur.com/pdSVzUZ.png":D,he="auto"===W?Zn(U):W,fe="st"===he?ie:he,ve=!!(R||K||q&&J.length),ye=oe.join(" / "),je=p(_,Q),{artFrameHeight:xe,artFrameWidth:Oe}=je;return Object(S.jsxs)(Yp,{className:ur("truncate",g?"active":"",b%2===0?"alternative-color":""),onClick:()=>y(m),style:O,children:[Object(S.jsxs)("div",{className:"left-slot",children:[Object(S.jsx)("div",{className:"card-frame top-left-frame",style:{backgroundColor:null===(t=He[ce])||void 0===t?void 0:t.labelBackgroundColor,backgroundImage:null===(n=He[ce])||void 0===n?void 0:n.labelBackgroundImage}}),Object(S.jsx)("div",{className:"card-frame top-right-frame",style:{backgroundColor:null===(r=He[de])||void 0===r?void 0:r.labelBackgroundColor,backgroundImage:null===(i=He[de])||void 0===i?void 0:i.labelBackgroundImage}}),Object(S.jsx)("div",{className:"card-frame bottom-left-frame",style:{backgroundColor:null===(o=He[ue])||void 0===o?void 0:o.labelBackgroundColor,backgroundImage:null===(s=He[ue])||void 0===s?void 0:s.labelBackgroundImage}}),Object(S.jsx)("div",{className:"card-frame bottom-right-frame",style:{backgroundColor:null===(c=He[be])||void 0===c?void 0:c.labelBackgroundColor,backgroundImage:null===(d=He[be])||void 0===d?void 0:d.labelBackgroundImage}}),Object(S.jsxs)("a",{className:"card-art-container",href:pe,target:"_blank",rel:"noreferrer",onClick:e=>e.preventDefault(),style:{width:Oe*Kp,height:xe*Kp,top:(Hp-Ap)/2/2*Kp,left:(Ap-Oe)/2*Kp,backgroundColor:u},children:[V&&Object(S.jsx)(Xp,{className:"background-art",artLink:ge,name:me+" - background",fit:M,crop:B,canvasCoordinate:p(_,Object(l.a)(Object(l.a)({},Q),{},{boundless:"fit"!==A}))}),Object(S.jsx)(Xp,{className:"foreground-art",artLink:pe,name:me,fit:T,crop:F,canvasCoordinate:je})]}),q&&[...Array(9)].map((e,t)=>{if(4===t)return null;const n=_?Xe:Ge,a=_?qe:Ve;return Object(S.jsx)("div",{className:ur("thumb-link-marker-icon thumb-link-marker-icon-".concat(t+1),J.includes("".concat(t+1))?"marker-checked":""),style:{top:_?16:19,transform:"rotate(".concat(Ue[t],"deg) translateY(").concat(n[t],"px) translateX(").concat(a[t],"px)")}},"link-".concat(t))}),_&&te&&Object(S.jsx)("div",{className:"pendulum-scale blue-scale",children:te}),_&&ne&&Object(S.jsx)("div",{className:"pendulum-scale red-scale",children:ne})]}),Object(S.jsxs)("div",{className:"right-slot truncate",children:[Object(S.jsxs)("div",{className:"first-row truncate",children:[Object(S.jsx)("div",{className:"select-box",onClick:e=>e.stopPropagation(),children:Object(S.jsx)(jl.a,{checked:h,onChange:e=>{x(m,e.target.checked?"add":"remove")}})}),me]}),Object(S.jsxs)("div",{className:"second-row truncate",children:["custom"===z&&I.length>0?Object(S.jsx)("img",{className:"attribute-icon",src:I,alt:"Attribute"}):"NONE"===I?null:Object(S.jsx)("img",{className:"attribute-icon",src:"".concat("/ygocarder","/asset/image/attribute/attr-").concat(Y,"-").concat(I.toLowerCase(),".png"),alt:"Attribute"}),oe.length>0&&Object(S.jsx)("div",{className:"truncate",children:ye}),"st"!==he&&Object(S.jsx)("div",{className:"padding"}),fe!==E&&"none"!==he&&Object(S.jsx)("img",{className:"card-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-").concat(("custom"===fe?"icon-list":fe).toLowerCase(),".png"),alt:"Icon"}),fe!==E&&"st"!==he&&"none"!==he&&"custom"!==he&&Object(S.jsx)("span",{className:ur("star-content truncate",ye.toLowerCase().includes("tuner")?"tuner":""),children:"number"===typeof re?re:""!==re?'"'.concat(re,'"'):""})]}),Object(S.jsxs)("div",{className:"third-row truncate",children:[ve&&Object(S.jsx)("div",{children:R}),ve?Object(S.jsx)("div",{children:"\xa0/\xa0"}):Object(S.jsx)("div",{children:"\xa0"}),ve&&Object(S.jsx)("div",{children:q?"Link ".concat(J.length):K}),ae&&Object(S.jsx)("div",{className:"set-id",children:ae})]})]}),Object(S.jsx)("div",{className:ur("action-slot",w?"force-visible":""),onClick:e=>e.stopPropagation(),children:Object(S.jsxs)("div",{className:"action-container",children:[Object(S.jsx)(hr.a,{placement:"left",title:f["manager.button.duplicate.tooltip"],children:Object(S.jsx)(vu.a,{className:"action-button action-duplicate",onClick:()=>v(m)})}),Object(S.jsx)(hr.a,{placement:"left",title:f["manager.button.download.tooltip"],children:Object(S.jsx)(bd.a,{className:"action-button action-download",onClick:()=>{const{id:e}=m,t=Object(oa.a)(m,Pp);Al()(JSON.stringify(pa(t)))}})}),Object(S.jsx)($s.a,{placement:"left",title:f["manager.button.delete.label"],onVisibleChange:e=>k(e),onConfirm:()=>j(m.id),okText:f["manager.button.delete.confirm.label"],cancelText:f["manager.button.delete.cancel.label"],children:Object(S.jsx)(hr.a,{placement:"left",title:f["manager.button.delete.tooltip"],children:Object(S.jsx)(jr.a,{className:"action-button action-delete"})})})]})})]})},Gp=(e,t,n,a,r)=>{var i;const{artWidth:o,artY:s,ratio:c,artFrameWidth:d,artFrameY:u}=n,{width:b,height:m,x:p,y:g}=null!==(i=r?Object(l.a)(Object(l.a)({},a),{},{width:100,height:100,x:0,y:0}):a)&&void 0!==i?i:{},h=u-s,f=e*((null!==b&&void 0!==b?b:0)/100),v=t*((null!==m&&void 0!==m?m:0)/100),y=o*Kp/(f<=0?1:f);return{top:(null!==g&&void 0!==g?g:0)/100*-t*y,left:(null!==p&&void 0!==p?p:0)/100*-e*y,width:e*y,height:r?t*(o/c*Kp/(v<=0?1:v)):void 0,transform:"translateX(".concat(-(o===d?0:(Ap-d)/2-Wp)*Kp,"px) translateY(").concat(-h*Kp,"px)")}},Xp=e=>{let{artLink:t,name:n,crop:r,className:i,fit:o,canvasCoordinate:s,style:c}=e;const[d,u]=Object(a.useState)("https://imgur.com/pdSVzUZ.png"),b=Object(a.useRef)(null),[m,p]=Object(a.useState)(()=>{var e,t,n,a;return Gp(null!==(e=null===(t=b.current)||void 0===t?void 0:t.naturalWidth)&&void 0!==e?e:1,null!==(n=null===(a=b.current)||void 0===a?void 0:a.naturalHeight)&&void 0!==n?n:1,s,r,o)});return Object(a.useEffect)(()=>{let e=!0;return setTimeout(()=>{e&&u(t)},500),()=>{e=!1}},[t]),Object(a.useEffect)(()=>{let e=!0;return setTimeout(()=>{var t,n,a,i;e&&p(Gp(null!==(t=null===(n=b.current)||void 0===n?void 0:n.naturalWidth)&&void 0!==t?t:1,null!==(a=null===(i=b.current)||void 0===i?void 0:i.naturalHeight)&&void 0!==a?a:1,s,r,o))},500),()=>{e=!1}},[r,s,o]),Object(S.jsx)("img",{ref:b,className:ur("card-art",i),src:d,alt:n,style:Object(l.a)(Object(l.a)({},m),c),onLoad:()=>{var e,t,n,a;p(Gp(null!==(e=null===(t=b.current)||void 0===t?void 0:t.naturalWidth)&&void 0!==e?e:1,null!==(n=null===(a=b.current)||void 0===a?void 0:a.naturalHeight)&&void 0!==n?n:1,s,r,o))}})};var Vp,qp=n(328),_p=n(342),Jp=n(673),$p=n(674),Qp=n(675);const Zp=fr.b.div(Vp||(Vp=Object(mr.a)(["\n    .exporting-item {\n        display: grid;\n        grid-template-columns: 1.5rem 1fr;\n    }\n    .anticon-hourglass {\n        color: var(--main-info);\n    }\n    .anticon-loading {\n        color: var(--main-active);\n    }\n    .anticon-check-circle {\n        color: var(--main-online);\n    }\n"]))),eg=e=>{let{language:t,onActive:n}=e;const{selectedMap:r,listName:i,activeId:o,cardDisplayList:l}=ni(Object(ui.useShallow)(e=>{let{selectedMap:t,listName:n,activeId:a,cardDisplayList:r}=e;return{selectedMap:t,listName:n,activeId:a,cardDisplayList:r}})),{batchQueue:s,batchDataMap:c,isBatchDownloading:d,isReady:u,clearQueue:b,stopBatchDownload:m,startBatchDownload:p}=kr(),g=s[0],h=Object(a.useRef)("");Object(a.useEffect)(()=>{if(g&&d&&g!==h.current){h.current=g;const e=l.find(e=>e.id===g);e&&n(e)}},[l,d,g,n]),Object(a.useEffect)(()=>{let e=!0;return u&&(async()=>{const{batchName:t,batchDataMap:n}=kr.getState(),a=new Vo.a;if(Object.values(n).length>0){Object.values(n).forEach(e=>{let{blob:t,name:n}=e;a.file(n,t)});const r=await a.generateAsync({type:"blob"});e&&(Sa("".concat(t,".zip"),r,"application/zip"),m())}})(),()=>{e=!1}},[u,m]);const f=0===Object.keys(r).length;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(pr.a,{visible:d,onCancel:()=>m(),onOk:()=>b(),cancelText:t["manager.batch.batch-download.cancel-all.label"],okText:t["manager.batch.batch-download.premature-stop.label"],okButtonProps:{type:"default"},children:Object(S.jsx)(Zp,{className:"exporting-list",children:Object.values(l).map(e=>{let{id:t,name:n}=e;return f||r[t]?Object(S.jsxs)("div",{className:"exporting-item",children:[Object(S.jsx)("div",{className:"export-status",children:o===t?Object(S.jsx)(Jp.a,{}):c[t]?Object(S.jsx)($p.a,{}):Object(S.jsx)(Qp.a,{})}),Object(S.jsx)("div",{className:"export-name",children:n})]},t):null})})}),Object(S.jsx)(Jo.a,{className:"batch-download-button",onClick:()=>p(i,f?l.map(e=>e.id):Object.keys(r)),children:f?t["manager.batch.batch-download.label"]:t["manager.batch.batch-download.partial-download.label"]})]})};var tg,ng,ag=n(676);const rg=Object(fr.b)(qd.a.Item)(tg||(tg=Object(mr.a)(["\n    &.menu-active {\n        background-color: var(--main-active);\n    }\n"]))),ig=fr.b.div(ng||(ng=Object(mr.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    position: relative;\n    .list-container {\n        flex: 1;\n        overflow: auto;\n    }\n    .batch-download-button {\n        margin-bottom: var(--spacing-xs);\n    }\n    .select-panel {\n        display: grid;\n        grid-template-columns: max-content max-content 1fr;\n        padding: var(--spacing-xs);\n        gap: var(--spacing-xs);\n        text-align: right;\n        .ant-checkbox-wrapper span {\n            padding-right: 0;\n        }\n        .scheme-button {\n            display: inline-block;\n        }\n    }\n    .no-card {\n        padding: var(--spacing);\n        text-align: center;\n        position: absolute;\n        width: 100%;\n        .reset-filter {\n            cursor: pointer;\n            color: var(--main-active);\n            &:hover {\n                color: var(--sub-active);\n            }\n        }\n    }\n    .add-card {\n        flex: 0;\n        width: 100%;\n        border-radius: 0;\n        background: var(--main-primary);\n        border-color: var(--main-active);\n        &:hover {\n            background: var(--sub-primary);\n        }\n    }\n"]))),og=e=>{let{data:t,index:n,style:a}=e;const{activeId:r,selectedMap:i,language:o,list:l,onDelete:s,onDuplicate:c,onActive:d,onSelect:u}=t;return Object(S.jsx)(Up,{index:n,card:l[n],active:l[n].id===r,selected:!!i[l[n].id],language:o,onDuplicate:c,onActive:d,onDelete:s,onSelect:u,style:a})},lg=e=>{let{language:t,onActive:n,onRequestImport:r}=e;const{activeId:i,cardDisplayList:o,selectedMap:s,selectCard:c,deleteCard:d,duplicateCard:u,setSelectMap:b,resetFilter:m}=ni(Object(ui.useShallow)(e=>{let{activeId:t,cardDisplayList:n,selectedMap:a,selectCard:r,deleteCard:i,duplicateCard:o,setSelectMap:l,resetFilter:s}=e;return{activeId:t,cardDisplayList:n,selectedMap:a,selectCard:r,deleteCard:i,duplicateCard:o,setSelectMap:l,resetFilter:s}})),{exportScheme:p,updateSetting:g}=oi(Object(ui.useShallow)(e=>{let{setting:{exportScheme:t},updateSetting:n}=e;return{exportScheme:t,updateSetting:n}})),[h,f]=Object(a.useState)(0),v=Object(a.useCallback)((e,t)=>{c(e.id,t)},[c]),y=e=>{d(e),f(e=>e+1)};return Object(a.useEffect)(()=>{let e=!0;return setTimeout(()=>{if(e&&h>0){const{activeId:e,cardList:t,setCardList:a}=ni.getState(),r=t.find(t=>t.id===e);if(r)n(r);else{const e=Object(l.a)({id:Object(Q.a)()},cn());a([e],e.name)}}},500),()=>{e=!1}},[n,h]),Object(S.jsxs)(ig,{style:{backgroundImage:'url("'.concat("/ygocarder",'/asset/image/texture/dark-denim-3.png")')},children:[o.length>0&&Object(S.jsxs)("div",{className:"select-panel",children:[Object(S.jsx)(Jo.a,{size:"small",onClick:()=>b([],"replace"),children:t["manager.batch.batch-download.clear.label"]}),Object(S.jsx)(Jo.a,{size:"small",onClick:()=>b(o,"add"),children:t["manager.batch.batch-download.all.label"]}),Object(S.jsx)("div",{children:Object(S.jsx)($o.a,{overlay:Object(S.jsx)(qd.a,{children:[{value:"with-name",label:t["manager.batch.batch-download.export-option.with-name.label"]},{value:"with-id",label:t["manager.batch.batch-download.export-option.with-id.label"]}].map(e=>{let{value:t,label:n}=e;return Object(S.jsx)(rg,{onClick:()=>g({exportScheme:t}),className:t===p?"menu-active":"",children:n},t)})}),children:Object(S.jsxs)("div",{className:"scheme-button",children:[t["manager.batch.batch-download.export-scheme.label"]," ",Object(S.jsx)(ag.a,{})]})})})]}),Object(S.jsx)("div",{className:"list-container",children:Object(S.jsx)(qp.a,{children:e=>{let{height:a,width:r}=e;return Object(S.jsx)(_p.a,{className:"List",height:a,itemCount:o.length,itemSize:68,itemData:{list:o,language:t,activeId:i,selectedMap:s,onDuplicate:u,onActive:n,onDelete:y,onSelect:v},overscanCount:5,width:r,children:og})}})}),0===o.length&&Object(S.jsxs)("div",{className:"no-card",children:[Object(S.jsx)("div",{children:t["manager.button.search.no-card.message"]}),Object(S.jsx)("div",{className:"reset-filter",onClick:m,children:t["manager.button.search.button.reset.label"]})]}),0!==o.length&&Object(S.jsx)(eg,{language:t,onActive:n}),Object(S.jsx)(Jo.a,{className:"add-card",onClick:r,children:t["manager.button.add.label"]})]})};var sg,cg,dg=n(677);const{Panel:ug}=Kc.a,bg=fr.b.div(sg||(sg=Object(mr.a)(["\n    font-weight: normal;\n    letter-spacing: -0.75px;\n    font-size: var(--fs-lg);\n"]))),mg=Object(fr.b)(pr.a)(cg||(cg=Object(mr.a)(["\n    .ant-modal-close-x {\n        display: none;\n    }\n    .download-button {\n        text-align: center;\n        margin: var(--spacing-sm) 0;\n        .ant-btn {\n            background: var(--main-primary);\n            border-color: var(--main-active);\n            &:hover {\n                background: var(--sub-primary);\n            }\n        }\n    }\n    .option-container {\n        width: 100%;\n        table-layout: fixed;\n        background-color: #494949;\n        th,\n        td {\n            border: var(--bw) solid var(--sub-level-4);\n            padding: var(--spacing-xs) var(--spacing-sm);\n            &:nth-child(1) {\n                width: 170px;\n            }\n            &:nth-child(2) {\n                "," {\n                    margin-right: var(--spacing-xs);\n                }\n            }\n        }\n    }\n"])),Ul),pg=e=>{let{language:t}=e;const[n,r]=Object(a.useState)(!1),i="https://drive.google.com/file/d/1c8SdS0n1UERomLKdlm28dSul5ojBfSiC/view?usp=sharing";return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(bg,{className:"manager-toggle-button",onClick:()=>r(!0),children:[t["manager.header.button.template.label"],"\xa0",Object(S.jsx)(dg.a,{})]}),Object(S.jsx)(mg,{visible:n,onCancel:()=>r(!1),okButtonProps:{style:{display:"none"}},cancelText:t["manager.template.button.cancel.label"],children:Object(S.jsxs)("div",{className:"sample-modal-container",children:[Object(S.jsxs)("div",{children:[t["manager.template.description.line-1"],Object(S.jsx)("br",{}),t["manager.template.description.line-2"]]}),i&&Object(S.jsx)("div",{className:"download-button",children:Object(S.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",download:!0,children:Object(S.jsx)(Jo.a,{children:t["manager.template.download.label"]})})}),Object(S.jsx)(Kc.a,{ghost:!0,children:Object(S.jsx)(ug,{header:Object(S.jsx)("div",{children:t["manager.template.description.line-3"]}),children:Object(S.jsx)("table",{className:"option-container",children:Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:Object(S.jsx)("b",{children:t["manager.template.header.field.label"]})}),Object(S.jsx)("th",{children:Object(S.jsx)("b",{children:t["manager.template.header.value.label"]})})]}),[{field:"Format",value:Object(S.jsx)("div",{children:["tcg","ocg"].map(e=>Object(S.jsx)(Xl,{data:e,children:e},e))})},{field:"Frame",altField:"Bottom Frame",value:Object(S.jsx)("div",{children:Ae.map(e=>{let{name:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Attribute",value:Object(S.jsx)("div",{children:[...F,...L].filter(e=>{let{isOption:t}=e;return t}).map(e=>{let{name:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Spell/Trap Icon",value:Object(S.jsx)("div",{children:z.filter(e=>{let{isOption:t}=e;return t}).map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Sticker",value:Object(S.jsx)("div",{children:B.filter(e=>{let{isOption:t}=e;return t}).map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Foil",value:Object(S.jsx)("div",{children:x().filter(e=>{let{isOption:t}=e;return t}).map(e=>{let{name:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Card Finish",value:Object(S.jsxs)("div",{children:[Object.values(f).map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)}),Object(S.jsx)("div",{children:t["manager.template.description.joinable"]})]})},{field:"Art Finish",value:Object(S.jsx)("div",{children:Object.values(v).map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Star Type",value:Object(S.jsx)("div",{children:["number","text"].map(e=>Object(S.jsx)(Xl,{data:e,children:e},e))})},{field:"Star Alignment",value:Object(S.jsx)("div",{children:["left","center","right"].map(e=>Object(S.jsx)(Xl,{data:e,children:e},e))})},{field:"Card Icon Type",value:Object(S.jsx)("div",{children:M.filter(e=>{let{isOption:t}=e;return t}).map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Background Type",value:Object(S.jsx)("div",{children:c().map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Condense Rate",value:Object(S.jsx)("div",{children:Object.keys(le).map(e=>Object(S.jsx)(Xl,{data:e,children:e},e))})},{field:"Name Style Type",value:Object(S.jsx)("div",{children:["predefined","custom"].map(e=>Object(S.jsx)(Xl,{data:e,children:e},e))})},{field:"Name Style - Font",value:Object(S.jsx)("div",{children:Object(S.jsx)(Xl,{data:"Arial",children:"Arial"})})},{field:"Name Style - Preset",value:Object(S.jsx)("div",{children:Object.keys(q).map(e=>Object(S.jsx)(Xl,{data:e,children:e},e))})},{field:"Name Style - Pattern",value:Object(S.jsx)("div",{children:$.filter(e=>{let{isOption:t}=e;return t}).map(e=>{let{key:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Pendulum Size",value:Object(S.jsx)("div",{children:ee.map(e=>{let{key:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Other Finish - Attribute",value:Object(S.jsx)("div",{children:Object.values(v).map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Other Finish - Background",value:Object(S.jsx)("div",{children:Object.values(v).map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Other Finish - Icon",value:Object(S.jsx)("div",{children:Object.values(v).map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Other Finish - Sticker",value:Object(S.jsx)("div",{children:Object.values(v).map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Region",value:Object(S.jsx)("div",{children:Object.values(R).map(e=>{let{key:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})})},{field:"Star List",value:Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:t["manager.template.description.star-list"]}),Object.values(Y).filter(e=>{let{isMixable:t}=e;return t}).map(e=>{let{value:t}=e;return Object(S.jsx)(Xl,{data:t,children:t},t)})]})},{field:"Dye List",value:Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:t["manager.template.description.dye-list"]}),Object(S.jsx)("ul",{children:Object.entries(O).sort((e,t)=>e[1]-t[1]).map(e=>{var n,a;let[r]=e;return Object(S.jsx)("li",{children:t[null!==(n=null===(a=Ke[r])||void 0===a?void 0:a.labelKey)&&void 0!==n?n:""]},r)})})]})},{field:"Flag",value:Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:t["manager.template.description.flag"]}),gp.map(e=>{let{sampleDisplay:n,index:a}=e;return Object(S.jsx)("div",{children:n(t)},a)})]})}].map(e=>{let{field:t,altField:n,value:a}=e;return Object(S.jsxs)("tr",{children:[Object(S.jsxs)("td",{children:[Object(S.jsx)(Ul,{children:t}),n&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("br",{}),Object(S.jsx)(Ul,{children:n})]})]}),Object(S.jsx)("td",{children:a})]},t)})]})})},"sample-option")})]})})]})};var gg=n(173);const hg=["language","children"];var fg,vg,yg;const jg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.015,t=e;return{check:()=>{const n=Math.random();return t<n?(t+=e,!1):(t=e,!0)}}}(),xg=fr.b.div(fg||(fg=Object(mr.a)(["\n    position: absolute;\n    right: 0;\n    top: 125px;\n"]))),Og=Object(fr.b)(fs)(vg||(vg=Object(mr.a)(["\n    .ant-drawer-header {\n        padding: 0;\n    }\n    .manager-label-container {\n        padding: var(--spacing-sm) 0 0 var(--spacing-sm);\n    }\n    .manager-button-container {\n        padding: var(--spacing-sm) var(--spacing-sm) 0 var(--spacing-sm);\n        .manager-button {\n            cursor: pointer;\n            input {\n                display: none;\n            }\n            &:hover {\n                color: var(--main-active);\n                .anticon {\n                    color: var(--main-active);\n                }\n            }\n            &.close-button:hover {\n                .anticon {\n                    color: var(--main-danger);\n                }\n            }\n        }\n    }\n    .card-manager-header {\n        display: grid;\n        grid-template-columns: 1fr max-content;\n        .card-manager-filter {\n            grid-column: span 2;\n            padding: var(--spacing-xs);\n            .card-manager-search {\n                width: 100%;\n            }\n        }\n    }\n    .manager-button-container {\n        display: inline-flex;\n        gap: var(--spacing-sm);\n    }\n"]))),wg=Object(a.forwardRef)((e,t)=>{let{language:n,onVisibleChange:r,onSelect:i,onRequestImport:o}=e;const l="list-upload-id",s=Object(a.useRef)(null),{cardList:c,changeEditStatus:d,pendingActiveCard:u,setActiveId:b,setCardList:m,setFilterFunction:p,setListName:g,setPendingActiveCard:h,sortList:f,toggleVisible:v,visible:y}=ni(Object(ui.useShallow)(e=>{let{cardList:t,changeEditStatus:n,pendingActiveCard:a,setActiveId:r,setCardList:i,setFilterFunction:o,setListName:l,setPendingActiveCard:s,sortList:c,toggleVisible:d,visible:u}=e;return{cardList:t,changeEditStatus:n,pendingActiveCard:a,setActiveId:r,setCardList:i,setFilterFunction:o,setListName:l,setPendingActiveCard:s,sortList:c,toggleVisible:d,visible:u}})),j=oi(e=>e.setting.exportFormat),[x,O]=Object(a.useState)(0),[w,k]=Object(a.useState)(!1),[C,F]=Object(a.useState)(!1),L=Cr()(e=>{p({type:"text",value:e.target.value})},250),T=Object(a.useCallback)(e=>{i(e),b(e.id)},[i,b]);return Object(a.useEffect)(()=>{u&&(i(u),b(u.id),h())},[i,u,b,h]),Object(a.useEffect)(()=>{localStorage.setItem("manager-panel-visible",y.toString()),r(y)},[r,y]),Object(a.useEffect)(()=>{const e=ni.subscribe(e=>e.filterResetSignal,e=>{e&&O(e=>e+1)});return()=>{e()}},[]),Object(a.useImperativeHandle)(t,()=>({}),[]),Object(S.jsx)(xg,{children:Object(S.jsx)(Og,{className:"card-manager-panel",title:Object(S.jsxs)("div",{className:"card-manager-header truncate",children:[Object(S.jsx)(Sg,{className:"manager-label-container truncate",language:n,children:c.length}),Object(S.jsxs)("div",{className:"manager-button-container",children:[Object(S.jsx)("div",{className:"manager-button",children:Object(S.jsx)(pg,{language:n})}),Object(S.jsx)($o.a,{overlay:Object(S.jsx)(qd.a,{children:[{value:ei.level.key,label:n["manager.button.sort.level.label"]},{value:ei.name.key,label:n["manager.button.sort.name.label"]},{value:ei.atk.key,label:n["manager.button.sort.atk.label"]},{value:ei.def.key,label:n["manager.button.sort.def.label"]},{value:ei.set.key,label:n["manager.button.sort.set-id.label"]}].map(e=>{let{value:t,label:n}=e;return Object(S.jsx)(qd.a.Item,{onClick:()=>f(t),children:n},t)})}),children:Object(S.jsx)("div",{className:"manager-button",children:Object(S.jsx)(Im.a,{})})}),Object(S.jsx)(hr.a,{title:n["manager.header.button.download.tooltip"],children:Object(S.jsx)("div",{className:"manager-button",onClick:async()=>{let e=!0;if(F(!0),jg.check()&&(e=window.confirm(n["prompt.remind.backup.label"])),e)try{const{error:e,value:t}=(e=>{const t=[],n=zr.length;let a="";for(let r=0;r<e.length;r++){const i=(e,t)=>{const n=Mr[e];"number"===typeof n&&("string"===typeof t&&(o[n]=t),"number"===typeof t&&(o[n]="".concat(t)),"boolean"===typeof t&&(o[n]="".concat(t)),null==t&&(o[n]=""))},o=Array(n).map(()=>""),{art:l,cornerText:s,artCrop:c,artFinish:d,artFit:u,artSource:b,atk:m,attribute:p,attributeType:g,background:h,backgroundCrop:f,backgroundFit:v,backgroundSource:y,backgroundType:j,cardIcon:x,creator:O,def:w,dyeList:k,effect:S,effectStyle:C,effectTextStyle:F,externalInfo:L,finish:T,firstEditionText:N,flag:R,foil:I,format:E,frame:z,furiganaHelper:D,hasBackground:B,hasCornerText:P,isDuelTerminalCard:M,isFirstEdition:H,isLegacyCard:A,isLimitedEdition:W,isLink:K,isPendulum:Y,isSpeedCard:U,leftFrame:G,linkMap:X,linkRating:V,name:q,nameStyle:_,nameStyleType:J,opacity:$,otherFinish:Q,otherTextStyle:Z,password:ee,pendulumEffect:te,pendulumFrame:ne,pendulumRightFrame:ae,pendulumScaleBlue:re,pendulumScaleRed:ie,pendulumSize:oe,pendulumStyle:le,pendulumTextStyle:se,region:ce,rightFrame:de,setId:ue,star:be,starAlignment:me,starList:pe,statTextStyle:ge,sticker:he,subFamily:fe,typeAbility:ve,typeTextStyle:ye}=e[r],je=JSON.stringify(L),xe=R.join("|"),Oe=k.join("|"),we=pe.join("|");i("Format",E),i("Region",ce),i("Frame",z),i("Name",q),i("Attribute",p),i("Attribute Type",g),i("Star","".concat(be)),i("Spell/Trap Icon",fe),i("Art Link",l),i("Type Ability",ve.join("/")),i("Effect",S),i("Set Id",ue),i("ATK",m),i("DEF",w),i("Password",ee),i("Sticker",he),i("Copyright",O),i("Is Pendulum",Y),i("Pendulum Effect",te),i("Pendulum Scale Red",ie),i("Pendulum Scale Blue",re),i("Is Link",null!==K&&void 0!==K?K:void 0),i("Link - Top Left Arrow",X.includes("1")),i("Link - Top Arrow",X.includes("2")),i("Link - Top Right Arrow",X.includes("3")),i("Link - Left Arrow",X.includes("4")),i("Link - Right Arrow",X.includes("6")),i("Link - Bottom Left Arrow",X.includes("7")),i("Link - Bottom Arrow",X.includes("8")),i("Link - Bottom Right Arrow",X.includes("9")),i("Link Rating",V),i("First Edition Text",N),i("Is First Edition",H),i("Corner Text",s),i("Has Corner Text",P),i("Is Speed Card",U),i("Is Limited Edition",W),i("Is Duel Terminal Card",M),i("Is Legacy Card",A),i("Foil",I),i("Art Finish",d),i("Card Finish",T.join(",")),i("Art Crop - X (%)",c.x),i("Art Crop - Y (%)",c.y),i("Art Crop - Width (%)",c.width),i("Art Crop - Height (%)",c.height),i("Is Using Full Art",u),i("Star Type","number"===typeof be&&be>=0&&be<=13?"number":"text"),i("Star Alignment",me),i("Card Icon Type",x),i("Opacity - Body",$.body),i("Opacity - Pendulum",$.pendulum),i("Opacity - Text",$.text),i("Opacity - Name",$.name),i("Opacity - Base Fill",$.baseFill),i("Opacity - Art Border",$.artBorder),i("Opacity - Effect Box",$.effectBox),i("Opacity - Frame Border",$.frameBorder),i("Opacity - Name Border",$.nameBorder),i("Opacity - Boundless",$.boundless),i("Has Background",B),i("Background Link",h),i("Is Using Full Background",v),i("Background Type",j),i("Background Crop - X (%)",f.x),i("Background Crop - Y (%)",f.y),i("Background Crop - Width (%)",f.width),i("Background Crop - Height (%)",f.height),i("Bottom Frame",ne),i("Condense Rate",C.condenseTolerant),i("Use Furigana Helper",D),i("Name Style Type",J),i("Name Style - Font",_.font),i("Name Style - Fill Style",_.fillStyle),i("Name Style - Headtext Fill Style",_.headTextFillStyle),i("Name Style - Shadow Color",_.shadowColor),i("Name Style - Shadow Offset Y",_.shadowOffsetY),i("Name Style - Shadow Offset X",_.shadowOffsetX),i("Name Style - Shadow Blur",_.shadowBlur),i("Name Style - Has Shadow",_.hasShadow),i("Name Style - Line Color",_.lineColor),i("Name Style - Line Width",_.lineWidth),i("Name Style - Line Offset Y",_.lineOffsetY),i("Name Style - Line Offset X",_.lineOffsetX),i("Name Style - Has Outline",_.hasOutline),i("Name Style - Gradient Angle",_.gradientAngle),i("Name Style - Gradient Color",_.gradientColor),i("Name Style - Has Gradient",_.hasGradient),i("Name Style - Emboss Pitch",_.embossPitch),i("Name Style - Emboss Yaw",_.embossYaw),i("Name Style - Emboss Thickness",_.embossThickness),i("Name Style - Has Emboss",_.hasEmboss),i("Name Style - Preset",_.preset),i("Name Style - Pattern",_.pattern),i("Stat Style - Is Custom",ge[0]),i("Stat Style - Fill Color",ge[1]),i("Stat Style - Has Shadow",ge[2]),i("Stat Style - Shadow Color",ge[3]),i("Type Style - Is Custom",ye[0]),i("Type Style - Fill Color",ye[1]),i("Type Style - Has Shadow",ye[2]),i("Type Style - Shadow Color",ye[3]),i("Effect Style - Is Custom",F[0]),i("Effect Style - Fill Color",F[1]),i("Effect Style - Has Shadow",F[2]),i("Effect Style - Shadow Color",F[3]),i("Effect Style - Upsize",C.upSize),i("Effect Style - Font Style",C.fontStyle),i("Effect Style - Background",C.background),i("Effect Style - Min Line",C.minLine),i("Effect Style - Justify Ratio",C.justifyRatio),i("Pendulum Size",oe),i("Pendulum Effect Style - Is Custom",se[0]),i("Pendulum Effect Style - Fill Color",se[1]),i("Pendulum Effect Style - Has Shadow",se[2]),i("Pendulum Effect Style - Shadow Color",se[3]),i("Pendulum Effect Style - Upsize",le.upSize),i("Pendulum Effect Style - Font Style",le.fontStyle),i("Pendulum Effect Style - Background",le.background),i("Pendulum Effect Style - Min Line",le.minLine),i("Pendulum Effect Style - Justify Ratio",le.justifyRatio),i("Other Style - Is Custom",Z[0]),i("Other Style - Fill Color",Z[1]),i("Other Style - Has Shadow",Z[2]),i("Other Style - Shadow Color",Z[3]),i("Other Finish - Attribute",Q[0]),i("Other Finish - Icon",Q[1]),i("Other Finish - Sticker",Q[2]),i("Other Finish - Background",Q[3]),i("Left Frame",G),i("Right Frame",de),i("Bottom Right Frame",ae),i("Dye List",Oe),i("Star List",we),i("Flag",xe),i("External Info (JSON)","{}"===je?"":je),("offline"===b||B&&"offline"===y)&&(a="offline-data"),t.push(o.map(Hr).join(","))}return{value:[zr.join(","),t.join("\n")].join("\n"),error:a}})(ni.getState().cardList);if(e){let t="",a="";if("offline-data"===e)t=n["error.export.offline-data.message"],a=n["error.export.offline-data.description"];(t||a)&&gr.a.error({message:t,description:a})}switch(j){case"xlsx":{const e=gg.a.read(t,{type:"string"});gg.a.writeFile(e,"".concat(ni.getState().listName,".xlsx"));break}default:Sa(ni.getState().listName,new Blob([t],{type:"text/csv"}),"text/csv")}d("download")}catch(t){}F(!1)},children:C?Object(S.jsx)(Jp.a,{}):Object(S.jsx)(bd.a,{})})}),Object(S.jsx)(hr.a,{overlay:n["manager.header.button.upload.tooltip"],children:Object(S.jsxs)("div",{className:"manager-button",onClick:()=>{const e=document.getElementById(l);e&&!w&&e.click()},children:[Object(S.jsx)("input",{ref:s,type:"file",id:l,accept:[".csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].join(","),className:"import-upload-input",onChange:async e=>{var t;const a=null===(t=s.current)||void 0===t?void 0:t.files,{isListDirty:r}=ni.getState(),o=()=>{O(e=>e+1),k(!1),gr.a.error({message:n["error.csv-import.message"],description:n["error.csv-import.description"]})};let l=!0;if(r&&(l=window.confirm(n["prompt.warning.on-import.label"])),l&&a&&a[0]){k(!0);try{const e=await a[0].arrayBuffer(),t=a[0].name.replace(/\.[^/.]+$/,""),n=gg.a.read(e,{codepage:65001}),r=gg.a.utils.sheet_to_json(n.Sheets[n.SheetNames[0]],{header:1,raw:!1}),l=Ur(r);l.length>0?(m(l,l[0].id),g(t),O(e=>e+1),i(l[0]),k(!1)):o()}catch(e){console.error(e),o()}}else O(e=>e+1),k(!1)}},"upload-".concat(x)),w?Object(S.jsx)(Jp.a,{}):Object(S.jsx)(Lu.a,{})]})},"".concat(w)),Object(S.jsx)("div",{className:"manager-button close-button",onClick:()=>v(!1),children:Object(S.jsx)(jr.a,{})})]}),Object(S.jsx)("div",{className:"card-manager-filter",children:Object(S.jsx)(fc.a,{className:"card-manager-search",placeholder:n["manager.button.search.text.placeholder"],onChange:L,onPressEnter:e=>p({type:"text",value:e.currentTarget.value}),allowClear:!0},"search-".concat(x))})]}),visible:y,maskClosable:!1,mask:!1,destroyOnClose:!1,forceRender:!0,closeIcon:null,onClose:()=>v(!1),width:280,children:Object(S.jsx)(lg,{language:n,onActive:T,onRequestImport:o})})})}),kg=fr.b.div(yg||(yg=Object(mr.a)(["\n    .header-warning {\n        color: var(--main-danger);\n    }\n"]))),Sg=e=>{let{language:t,children:n}=e,r=Object(oa.a)(e,hg);const{isListDirty:i,cardList:o}=ni(Object(ui.useShallow)(e=>{let{isListDirty:t,cardList:n}=e;return{isListDirty:t,cardList:n}}));return Object(a.useEffect)(()=>{let e=e=>(e.preventDefault(),t["prompt.warning.on-leave.label"]);return i&&o.length>1&&window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[o.length,i,t]),Object(S.jsxs)(kg,Object(l.a)(Object(l.a)({},r),{},{children:[n,i&&o.length>1&&Object(S.jsx)("span",{className:"header-warning",children:"\xa0*"})]}))};var Cg,Fg,Lg,Tg,Ng,Rg,Ig,Eg,zg;const Dg=fr.b.div(Cg||(Cg=Object(mr.a)(["\n    display: flex;\n    column-gap: var(--spacing);\n    border-radius: var(--br-lg);\n    font-size: var(--fs-4xl);\n    line-height: 1.5;\n    margin: auto;\n    max-width: var(--card-width);\n    min-height: 59px;\n    outline: none !important;   // Avoid default state styling\n    padding: var(--spacing);\n    padding-right: 0;\n    text-align: center;\n    text-shadow: 0 1px 2px black;\n    .anticon {\n        cursor: pointer;\n    }\n    button {\n        color: white;\n        border-radius: var(--br-lg);\n        outline: none !important;   // Avoid default state styling\n        cursor: pointer;\n    }\n    .save-button {\n        flex: 1;\n        font-size: var(--fs-xl);\n        border: none;\n        font-weight: 500;\n        box-shadow: var(--bs-button);\n        height: 39px; // Alignment\n        line-height: 1;\n        &:focus, &:active {\n            color: white;\n        }\n    }\n    #save-button-waiting {\n        cursor: wait;\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        z-index: 1;\n    }\n    #save-button-ready {\n        cursor: pointer;\n        &:hover {\n            background-color: var(--sub-info);\n            box-shadow: none;\n        }\n    }\n    .save-button-container {\n        display: flex;\n        flex: 1;\n        font-size: var(--fs);\n        line-height: 1.35;\n        position: relative;\n    }\n    .save-button-tainted {\n        .alert-label {\n            flex: 1;\n            padding-top: var(--spacing-px);\n        }\n        .resolution-option {\n            position: relative;\n            border: none;\n            border-radius: var(--br-lg);\n            background: var(--main-primary);\n        }\n    }\n    .imexport {\n        flex: 0 0 200px;\n        display: grid;\n        grid-template-columns: 1fr max-content var(--spacing) 1fr max-content;\n        .primary-button {\n            align-content: center;\n            font-size: var(--fs);\n            background-color: var(--main-tertiary);\n            border: var(--bw) solid var(--sub-tertiary);\n            border-radius: var(--br-lg) 0 0 var(--br-lg);\n            &:hover {\n                background-color: var(--sub-tertiary);\n                box-shadow: none;\n            }\n        }\n        "," {\n            border-radius: 0 var(--br-lg) var(--br-lg) 0;\n            border-left: var(--bw) solid var(--sub-level-3);\n        }\n    }\n"])),vr),Bg=fr.b.div(Fg||(Fg=Object(mr.a)(["\n    position: relative;\n    display: block;\n    width: calc(var(--card-width) * var(--resize-ratio) * 1 / var(--global-scale));\n    height: calc(var(--card-height) * var(--resize-ratio) * 1 / var(--global-scale));\n    margin: 0 var(--spacing);\n    .reset-button,\n    .lightbox-button {\n        display: none;\n    }\n    #preview-canvas {\n        display: none;\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 1;\n        pointer-events: none;\n        transform: translateX(calc(var(--resize-percentage) / 2 - 50%))\n            translateY(calc(var(--resize-percentage) / 2 - 50%))\n            scale(var(--resize-ratio))\n            translateZ(0);\n        &.js-export-available {\n            display: inline-block !important;   // Override js-controlled inline style\n            cursor: default;\n        }\n    }\n    &:hover {\n        .reset-button,\n        .lightbox-button {\n            display: block;\n        }\n    }\n"]))),Pg=fr.b.div(Lg||(Lg=Object(mr.a)(["\n    width: var(--card-width);\n    height: var(--card-height);\n    margin-bottom: var(--spacing);\n    transform: translateX(calc(var(--resize-percentage) / 2 / var(--global-scale) - 50%))\n        translateY(calc(var(--resize-percentage) / 2 / var(--global-scale) - 50%))\n        scale(calc(var(--resize-ratio) / var(--global-scale)))\n        translateZ(0);\n    position: absolute;\n    top: 0;\n    left: 0;\n    canvas {\n        position: absolute;\n        left: 0;\n        z-index: 1;\n        pointer-events: none;\n    }\n    &:hover {\n        #export-canvas.js-export-available {\n            display: inline-block !important;   // Override js-controlled inline style\n            cursor: default;\n        }\n        #export-canvas-guard {\n            display: flex;\n            cursor: wait;\n            transition: all 2s;\n        }\n    }\n    #export-canvas {\n        display: none;\n        z-index: 100;\n        pointer-events: all;\n    }\n    #export-canvas-guard {\n        position: absolute;\n        left: 0;\n        display: none;\n        align-items: center;\n        justify-content: center;\n        z-index: 101;\n        // background-color: #ffffff08;\n        width: var(--card-width);\n        height: var(--card-height);\n        .anticon {\n            font-size: var(--fs-4xl);\n        }\n        .canvas-guard-alert {\n            position: absolute;\n            top: 0;\n            right: 0;\n            color: white;\n            padding: var(--spacing-xs) var(--spacing);\n            border-radius: 0 0 0 var(--br-lg);\n            background-color: var(--main-active);\n            box-shadow:\n                0 3px 6px rgba(0, 0, 0, 0.16),\n                0 3px 6px rgba(0, 0, 0, 0.23);\n        }\n        &.guard-on {\n            display: flex !important;   // Override js-controlled inline style\n        }\n    }\n    .crop-canvas {\n        position: relative;\n        /** Size here is just a placeholder, crop canvas constantly get its dimensions updated based on the current artwork */\n        width: 416px;\n        height: 416px;\n        z-index: 0;\n        top: 0;\n        left: 0;\n        visibility: hidden;\n    }\n"]))),Mg=fr.b.div(Tg||(Tg=Object(mr.a)(["\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-image: linear-gradient(45deg, #333, #333);\n\tz-index: 4000;\n\tcolor: white;\n\ttext-shadow:\n\t\t0 1px #333,\n\t\t0 2px #111;\n\tfont-size: var(--fs-3xl);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n"]))),Hg=fr.b.div(Ng||(Ng=Object(mr.a)(["\n\tposition: fixed;\n\tright: var(--spacing);\n\tbottom: 0;\n\tfont-size: var(--fs-xs);\n\topacity: 0.5;\n\tpadding: var(--spacing-px) var(--spacing-xs);\n\tcolor: var(--color-dim);\n    img {\n        height: 10px;\n        margin-left: 1px;\n    }\n"]))),Ag=fr.b.span(Rg||(Rg=Object(mr.a)(["\n    color: var(--main-danger);\n"]))),Wg=Object(fr.b)(cs)(Ig||(Ig=Object(mr.a)(["\n    position: absolute;\n    z-index: 101;\n"]))),Kg=Object(fr.b)(Wg)(Eg||(Eg=Object(mr.a)(["\n    top: var(--spacing-xs);\n    right: var(--spacing-xs);\n"]))),Yg=Object(fr.b)(Wg)(zg||(zg=Object(mr.a)(["\n    top: var(--spacing-xs);\n    right: calc(var(--overlay-size) + 2 * var(--spacing-xs));\n"])));var Ug=n(251),Gg=n(616),Xg=n(617),Vg=n(629),qg=n(633),_g=n(334);Object(Ug.configure)({ignoreTags:[]});const Jg={EXPORT:["ctrl+d","command+d"],IMPORT:["ctrl+e","command+e"],MERGE:["ctrl+g","command+g"],VIEW:["ctrl+y","command+y"],DOWNLOAD:["ctrl+s","command+s"]},{height:$g,width:Qg}=d;var Zg=function(){var e,t,n,r,i,o,c,d,u;const{allowHotkey:b,softMode:m,globalScale:p,resolution:g,slidingType:h}=oi(Object(ui.useShallow)(e=>{let{setting:{allowHotkey:t,reduceMotionColor:n,globalScale:a,resolution:r,slidingType:i}}=e;return{softMode:n,allowHotkey:t,globalScale:a,resolution:r,slidingType:i}})),{isInitiating:f,isLoading:v,language:y,isMetadataReady:j,languageInfo:x,initiate:O,loadDefaultLanguage:w}=Nr(Object(ui.useShallow)(e=>{let{isInitiating:t,isLoading:n,language:a,isMetadataReady:r,languageInfo:i,initiate:o,loadDefaultLanguage:l}=e;return{isInitiating:t,isLoading:n,language:a,isMetadataReady:r,languageInfo:i,initiate:o,loadDefaultLanguage:l}})),k=(()=>{let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4)))&&(e=!0),e})(),C=!k&&!("ontouchstart"in window||navigator.maxTouchPoints>0),[F,L]=Object(a.useState)(!0),[,T]=mi("activeDropzone"),[N]=mi("resetCanvasCounter"),[R,I]=Object(a.useState)(""),[E,z]=Object(a.useState)("online"),{db:D,dbReady:B}=ci(),[P,M]=Object(a.useState)(!1),H=Object(a.useRef)(null),A=Object(a.useRef)(null),W=Object(a.useRef)(null),K=Object(a.useRef)(null),Y=Object(a.useRef)(null),U=Object(a.useRef)(null),G=Object(a.useRef)(null),X=Object(a.useRef)(null),V=Object(a.useRef)(null),q=Object(a.useRef)(null),_=Object(a.useRef)(null),J=Object(a.useRef)(null),$=Object(a.useRef)(null),Q=Object(a.useRef)(null),Z=Object(a.useRef)(null),ee=Object(a.useRef)(null),te=Object(a.useRef)(null),ne=Object(a.useRef)(null),ae=Object(a.useRef)(null),re=Object(a.useRef)(null),ie=Object(a.useRef)(null),oe=Object(a.useRef)(null),[le]=Object(a.useState)({artworkCanvasRef:Y,backgroundCanvasRef:U,exportCanvasRef:G,frameCanvasRef:V,cardIconCanvasRef:q,pendulumScaleCanvasRef:_,pendulumEffectCanvasRef:J,typeCanvasRef:$,effectCanvasRef:Q,nameCanvasRef:Z,statCanvasRef:ee,setIdCanvasRef:te,passwordCanvasRef:ne,creatorCanvasRef:ae,stickerCanvasRef:re,finishCanvasRef:ie,lightboxRef:oe,previewCanvasRef:X}),se=Object(a.useRef)(null),ce=Object(a.useRef)(null),de=Object(a.useRef)(null),[ue,be]=Object(a.useState)(0);Object(a.useEffect)(()=>{const e=()=>{T(0)};let t=window.setTimeout(e,200);const n=()=>{T(1),window.clearTimeout(t),t=window.setTimeout(e,200)};return document.addEventListener("dragover",n),()=>{document.removeEventListener("dragover",n)}},[T]),Object(a.useEffect)(()=>{O()},[O]),Object(a.useEffect)(()=>{j&&w()},[j,w]),Object(a.useEffect)(()=>{["font-family","letter-spacing","--width-label"].forEach(e=>{var t,n;document.body.style.setProperty(e,null!==(t=null===(n=x.style)||void 0===n?void 0:n[e])&&void 0!==t?t:"")})},[x]),Object(a.useEffect)(()=>{be(e=>e+1)},[P]),Object(a.useEffect)(()=>{be(e=>e+1),"auto"===h&&H.current&&(H.current.style.transform="")},[h]),Object(a.useEffect)(()=>{(async()=>{try{if(D&&!1===v&&y){const f=D.transaction("presetLayoutStore","readonly"),v=[];var e,t=!1,n=!1;try{for(var a,r=Object(s.a)(f.store);t=!(a=await r.next()).done;t=!1){const e=a.value;{const{content:t,key:n}=e.value;v.push({key:n,content:JSON.parse(t)})}}}catch(h){n=!0,e=h}finally{try{t&&null!=r.return&&await r.return()}finally{if(n)throw e}}await f.done,bi.getState().updateGlobalMemory({layoutPresetList:v});const y=D.transaction("presetImageStore","readonly"),j=[];var i,o=!1,l=!1;try{for(var c,d=Object(s.a)(y.store);o=!(c=await d.next()).done;o=!1){const e=c.value;{const{content:t,key:n}=e.value;j.push({key:n,content:JSON.parse(t)})}}}catch(h){l=!0,i=h}finally{try{o&&null!=d.return&&await d.return()}finally{if(l)throw i}}await y.done,bi.getState().updateGlobalMemory({imagePresetList:j});const x=D.transaction("presetNameStyleStore","readonly"),O=[];var u,b=!1,m=!1;try{for(var p,g=Object(s.a)(x.store);b=!(p=await g.next()).done;b=!1){const e=p.value;{const{content:t,key:n}=e.value;O.push({key:n,content:JSON.parse(t)})}}}catch(h){m=!0,u=h}finally{try{b&&null!=g.return&&await g.return()}finally{if(m)throw u}}await x.done,bi.getState().updateGlobalMemory({nameStylePresetList:O})}}catch(f){console.error("Error reading database",f),gr.a.error({message:y["error.database-initialize.message"],description:y["error.database-initialize.description"]})}})()},[D,v,y]),Object(a.useEffect)(()=>{var e;const t=null===(e=G.current)||void 0===e?void 0:e.getContext("2d"),n=ii.getState().setCard;t&&(t.setTransform(1,0,0,1,0,0),t.imageSmoothingQuality="high",xi(t)),!1===f&&Yo.a.load({custom:{families:["Matrix-Bold","MatrixBoldSmallCaps","MatrixBook","MatrixRegularSmallCaps","RoGSanSrfStd-Bd","SVN-Times New Roman Italic","StoneSerif-Italic","YuGiOhITCStoneSerifBSc","matrix","palatino-linotype-bold","stone-serif-bold","stone-serif-regular"],urls:["asset/font.css"]},active:()=>{const e=(()=>{try{const n=localStorage.getItem("card-version"),a=localStorage.getItem("card-data"),r=a?fa(JSON.parse(a)):null,i=new URLSearchParams(window.location.search).get("data");if(i){var e,t;const{card:n}=ai(i),a=fa(n),{artSource:o,backgroundSource:s}=a;if("online"===o&&"online"===s)return ai(i).card;const c=Object(l.a)({},a);return"offline"===o&&(c.artData=null!==(e=null===r||void 0===r?void 0:r.artData)&&void 0!==e?e:""),"offline"===s&&(c.backgroundData=null!==(t=null===r||void 0===r?void 0:r.backgroundData)&&void 0!==t?t:""),c}return null!==r&&"2.3.42"===n?r:sn()}catch(n){return console.error(n),sn()}})();n(e),ni.getState().setCardList([e],e.id),L(!1)},fontinactive(e,t){console.error("TCG fontinactive",e,t),gr.a.error({message:Ir()["error.load.font.tcg"](e)})},inactive:()=>{I(Ir()["error.load.font.all-tcg"]),L(!1)}})},[f]);const{styleContent:me}=(e=>{let{isLanguageInitiating:t,onActive:n,onBeforeLoad:r,onFontInactive:i,onInactive:o}=e;const{font:l,format:s}=ii(Object(ui.useShallow)(e=>({format:e.card.format,font:e.card.nameStyle.font}))),[c,d]=Object(a.useState)(""),u=Object(a.useRef)(!1),b=Object(a.useRef)(0);return Object(a.useEffect)(()=>{("ocg"===s||"OCG"===l)&&!1===u.current&&b.current<=3&&!1===t&&(b.current+=1,d("".concat("/ygocarder","/asset/ocg-font.css")),r(),Yo.a.load({custom:{families:["DFHSGothic-W3-WIN-RKSJ-H","DFKakuTaiHiStd-W4","FOT-Rodin Pro M","Yu-Gi-Oh! DF Leisho 3"],urls:["asset/ocg-font.css"]},active:()=>{u.current=!0,n()},inactive:()=>{u.current=!0,o()},fontinactive:i}))},[s,l,t,n,r,i,o]),{styleContent:c}})({isLanguageInitiating:f,onBeforeLoad:()=>{var e;L(!0);const t=null===(e=G.current)||void 0===e?void 0:e.getContext("2d");t&&(t.setTransform(1,0,0,1,0,0),t.imageSmoothingQuality="high",xi(t))},onActive:()=>{L(!1)},onInactive:()=>{I(Ir()["error.load.font.all-ocg"]),L(!1)},onFontInactive:(e,t)=>{console.error("OCG fontinactive",e,t),gr.a.error({message:Ir()["error.load.font.ocg"](e)})}}),[pe,ge]=Object(a.useState)(!1);Object(a.useEffect)(()=>{var e;N>0&&pe&&(null===(e=oe.current)||void 0===e||e.refresh(),be(e=>e+1))},[pe,N]),Object(a.useEffect)(()=>{const e=document.body.classList;m?e.add("reduced-color-motion"):e.remove("reduced-color-motion")},[m]);const he=Object(a.useCallback)(function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&!b||null===(t=oe.current)||void 0===t||t.setVisible(t=>"boolean"===typeof e?e:!t)},[b]),fe=Object(a.useRef)(!1),ve=document.getElementById("sentry-bug-report");Object(a.useEffect)(()=>{const e="https://32e20d849c5724b2e63eab9d0a57c165@o4508424630697984.ingest.us.sentry.io/4508424632401920";ve&&e&&y&&!1===fe.current&&!1===el.f()&&(fe.current=!0,Gg.a({dsn:e,integrations:[Xg.a(),Vg.a(),qg.a({colorScheme:"system",autoInject:!1}).attachTo(ve,{formTitle:y["contributor.bug-report.tooltip"],nameLabel:y["contributor.bug-report.name.label"],namePlaceholder:y["contributor.bug-report.name.placeholder"],isEmailRequired:!1,showEmail:!1,messageLabel:y["contributor.bug-report.message.label"],messagePlaceholder:y["contributor.bug-report.message.placeholder"],addScreenshotButtonLabel:y["contributor.bug-report.screenshot.label"],removeScreenshotButtonLabel:y["contributor.bug-report.remove-screenshot.label"],cancelButtonLabel:y["contributor.bug-report.cancel.label"],submitButtonLabel:y["contributor.bug-report.submit.label"],isRequiredLabel:y["contributor.bug-report.required.label"],successMessageText:y["contributor.bug-report.success.label"]})],tracesSampleRate:1,tracePropagationTargets:["lauqerm.github.io"],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1}))},[y,ve]);const ye=Object(a.useCallback)((e,t)=>{var n;const{addToList:a,forcePurityCheck:r,writeOnCurrentCard:i}=null!==t&&void 0!==t?t:{},{setCard:o,card:s}=ii.getState(),c=i?Object(l.a)(Object(l.a)({},e),{},{id:s.id}):e;a&&ni.getState().addCard(c),o(c,r),be(e=>e+1),null===(n=K.current)||void 0===n||n.forceCardData(c),dr()},[]),je=Object(a.useCallback)(async function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&!b||(null===e||void 0===e||e.preventDefault(),null===(t=de.current)||void 0===t||t.requestImport("replace"))},[b]),xe=Object(a.useCallback)(function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&!b||(null===e||void 0===e||e.preventDefault(),null===(t=de.current)||void 0===t||t.requestImport("merge"))},[b]),Oe=Object(a.useCallback)(function(e){var t;let n=arguments.length>2?arguments[2]:void 0;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])||b)if(null===e||void 0===e||e.preventDefault(),"online"===E&&null!==(t=K.current)&&void 0!==t&&t.isLoading())window.alert(y["error.export.image-loading.message"]);else try{var a;const e=null!==n&&void 0!==n?n:ii.getState().card;null===(a=ce.current)||void 0===a||a.setCardData(e)}catch(r){console.error(r),gr.a.error({message:y["error.export.message"],description:y["error.export.description"]})}},[b,y,E]),we=Object(a.useCallback)(function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&!b||(null===e||void 0===e||e.preventDefault(),null===(t=se.current)||void 0===t||t.download())},[b]),ke=Object(a.useMemo)(()=>({IMPORT:e=>je(e,!0),MERGE:e=>xe(e,!0),EXPORT:e=>Oe(e,!0),VIEW:()=>he(!0,!0),DOWNLOAD:e=>we(e,!0)}),[we,Oe,je,xe,he]),Se=Object(a.useCallback)(()=>{ge(!0),alert(y["prompt.download.tainted.message"])},[y]),Ce=Object(a.useCallback)(e=>{var t;"anonymous"===e&&(ge(!1),null===(t=oe.current)||void 0===t||t.refresh());be(e=>e+1)},[]),Fe=Object(a.useCallback)((e,t)=>{be(e=>e+1),z(t)},[]),Le=Object(a.useCallback)(()=>{be(e=>e+1),ge(!0)},[]),Te=Object(a.useCallback)(e=>{M(e)},[]),Ne=Object(a.useCallback)(()=>{ge(!1)},[]),Re=v||F||!B;return Object(S.jsx)(Ug.HotKeys,{keyMap:Jg,handlers:ke,children:Object(S.jsxs)("div",{id:"app",onDrop:()=>{},onScroll:e=>{const t=e.currentTarget.scrollTop;if(H.current&&A.current&&"auto"===h){const n=document.body.clientWidth<1600?0:10,a=e.currentTarget.getBoundingClientRect().height,r=H.current.getBoundingClientRect().height;if(a>r+n){const e=Math.max(0,A.current.getBoundingClientRect().height-r);H.current.style.transform="translateY(".concat(Math.max(0,Math.min(e,t)-n),"px)")}else H.current.style.transform=""}},className:"language-".concat(x.codeName," manager_").concat(P?"visible":"hidden"),style:Object(l.a)({backgroundImage:'url("'.concat("/ygocarder",'/asset/image/texture/debut-dark.png"), linear-gradient(180deg, #00000022, #00000044)'),height:k?"-webkit-fill-available":"100vh"},{"--card-height":"".concat($g*p,"px"),"--card-width":"".concat(Qg*p,"px"),"--global-scale":"".concat(p),"--cropper-width":"".concat(375,"px")}),children:[me&&Object(S.jsx)("link",{rel:"stylesheet",type:"text/css",href:me}),Object(S.jsxs)("div",{className:"app-container",style:{backgroundImage:'url("'.concat("/ygocarder",'/asset/image/texture/dark-denim-3.png")')},children:[Re&&Object(S.jsx)(Mg,{className:"app-loading",children:R.length>0?Object(S.jsx)(Ag,{children:R}):null!==(e=x.initialMessage)&&void 0!==e?e:""}),Object(S.jsxs)("div",{ref:A,className:ur("card-preview-panel",pe?"export-tainted":"export-normal","sliding-type_".concat(h)),children:[Object(S.jsxs)("div",{ref:H,className:"preview-sliding-window",children:[Object(S.jsxs)(Dg,{className:"data-button-panel",children:[Object(S.jsxs)("div",{className:"imexport",children:[Object(S.jsx)(Su,{ref:ce,tainted:pe,artworkCanvas:Y.current,onRequireExportData:Oe,onRequireDownload:()=>{var e;return null===(e=se.current)||void 0===e?void 0:e.download()},onClose:dr}),Object(S.jsx)("div",{}),Object(S.jsx)(Nu,{ref:de,onImport:ye,onClose:dr,allowHotkey:b,language:y})]}),Object(S.jsx)(_o,{language:y}),Object(S.jsx)(gu,{ref:se,canvasMap:le,imageChangeCount:ue,isTainted:pe,onTainted:Le,onExportSucess:Ne,isInitializing:F,globalScale:p,onDownloadError:Se}),pe&&Object(S.jsxs)("div",{id:"save-button-tainted",className:"save-button-container save-button-tainted",children:[Object(S.jsxs)("div",{className:"alert-label",children:[y["alert.download.tainted-first-line"],Object(S.jsx)("br",{}),y["alert.download.tainted-second-line"]," ",Object(S.jsx)(Wc,{})]}),Object(S.jsx)($o.a,{className:"save-button-dropdown",placement:"bottomRight",overlay:Object(S.jsx)(eu,{onChange:()=>dr()}),children:Object(S.jsxs)(mu,{className:"resolution-option",onClick:e=>e.stopPropagation(),children:[Object(S.jsx)(Qo.a,{className:"resolution-icon"}),Object(S.jsx)("span",{className:"resolution-overlay",children:g[1]})]})})]})]}),Object(S.jsxs)(Bg,{className:"card-preview-container",children:[Object(S.jsx)(hr.a,{title:y["generic.reset.tooltip"],children:Object(S.jsx)(Yg,{className:"reset-button",onClick:()=>{if(window.confirm(y["prompt.reset.message"])){var e;const{setCard:t,card:n}=ii.getState(),a=Object(l.a)({id:n.id},ln()),r="tcg"===n.format?a:Or(a,"ocg");t(r,!0),be(e=>e+1),null===(e=K.current)||void 0===e||e.forceCardData(r)}},children:Object(S.jsx)(Hu.a,{})})}),Object(S.jsx)(hr.a,{title:Object(S.jsxs)("div",{className:"center",children:[y["button.full-size.label"],b?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("br",{}),"Ctrl+Y / \u2318+Y"]}):null]}),children:Object(S.jsx)(Kg,{className:"lightbox-button",onClick:()=>he(),children:Object(S.jsx)(Pd.a,{})})}),Object(S.jsx)("canvas",{id:"preview-canvas",ref:X,width:Qg,height:$g},(null!==(t=null===(n=oe.current)||void 0===n?void 0:n.getCanvasKey())&&void 0!==t?t:0)+.2),Object(S.jsxs)(Pg,{className:"card-canvas-group",children:[Object(S.jsx)("canvas",{id:"export-canvas",ref:G,width:Qg*p,height:$g*p},(null!==(r=null===(i=oe.current)||void 0===i?void 0:i.getCanvasKey())&&void 0!==r?r:0)+.1),Object(S.jsx)("div",{id:"export-canvas-guard",onContextMenu:e=>e.preventDefault()}),Object(S.jsx)("canvas",{id:"frameCanvas",className:"".concat(null!==(d=null===(u=oe.current)||void 0===u?void 0:u.getCanvasKey())&&void 0!==d?d:0),ref:V,width:Qg*p,height:$g*p},"".concat(null!==(o=null===(c=oe.current)||void 0===c?void 0:c.getCanvasKey())&&void 0!==o?o:0," ").concat(N)),Object(S.jsx)("canvas",{id:"nameCanvas",ref:Z,width:Qg*p,height:148*p}),Object(S.jsx)("canvas",{id:"cardIconCanvas",ref:q,width:Qg*p,height:222*p}),Object(S.jsx)("canvas",{id:"pendulumScaleCanvas",ref:_,width:Qg*p,height:920*p}),Object(S.jsx)("canvas",{id:"pendulumEffectCanvas",ref:J,width:Qg*p,height:920*p}),Object(S.jsx)("canvas",{id:"typeCanvas",ref:$,width:Qg*p,height:$g*p}),Object(S.jsx)("canvas",{id:"effectCanvas",ref:Q,width:Qg*p,height:$g*p}),Object(S.jsx)("canvas",{id:"statCanvas",ref:ee,width:Qg*p,height:$g*p}),Object(S.jsx)("canvas",{id:"setIdCanvas",ref:te,width:Qg*p,height:$g*p}),Object(S.jsx)("canvas",{id:"passwordCanvas",ref:ne,width:Qg*p,height:$g*p}),Object(S.jsx)("canvas",{id:"creatorCanvas",ref:ae,width:Qg*p,height:$g*p}),Object(S.jsx)("canvas",{id:"stickerCanvas",ref:re,width:Qg*p,height:$g*p}),Object(S.jsx)("canvas",{id:"finishCanvas",ref:ie,width:Qg*p,height:$g*p}),Object(S.jsx)("canvas",{className:"crop-canvas",ref:Y}),Object(S.jsx)("canvas",{className:"crop-canvas",ref:U})]})]})]}),C&&Object(S.jsx)(_g.a,{ref:W,target:H,className:"sliding-movable-window",draggable:!0,throttleDrag:1,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,throttleScale:0,snappable:!0,pinchable:!0,snapContainer:".card-preview-panel",bounds:{left:0,top:0,right:0,bottom:0,position:"css"},onDrag:e=>{"manual"===h&&(e.target.style.transform=e.transform)}})]}),!1===Re&&Object(S.jsx)(Bp,{ref:K,applyCardData:ye,artworkCanvas:Y.current,backgroundCanvas:U.current,onSourceLoaded:Ce,onCropChange:Fe,onTainted:Le})]}),Object(S.jsx)(wg,{language:y,onVisibleChange:Te,onSelect:ye,onRequestImport:()=>{var e;null===(e=de.current)||void 0===e||e.requestImport("new")}}),Object(S.jsx)(Ud,{ref:oe,globalScale:p}),Object(S.jsxs)(Hg,{className:"by-me",children:["Made by Lauqerm ",Object(S.jsx)("img",{src:"https://i.imgur.com/RY6IRqn.png",alt:"avatar"})]})]})})};var eh=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,679)).then(t=>{let{getCLS:n,getFID:a,getFCP:r,getLCP:i,getTTFB:o}=t;n(e),a(e),r(e),i(e),o(e)})};o.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(Zg,{})}),document.getElementById("root")),eh()}},[[600,1,2]]]);
//# sourceMappingURL=main.99fe0235.chunk.js.map